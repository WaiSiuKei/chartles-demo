import{bD as t,L as n,aZ as i,bG as e,bH as o,u as s,bK as r,y as l,z as a,c6 as c,bL as d,c7 as h}from"./index-5gyre0hA.js";import{d as f}from"./line-BKuOqRrm.js";class u extends t{drawImpl(t){const r=t.context,l=this._data;if(!l)return;const a=l.points.length;if(!a)return;if(1===a){const t=l.points[0],n=l.lineWidth/2;this._drawPoint(r,t,n,l.lineColor)}r.beginPath();const c=l.lineStyle===n.solid?"round":"butt",d=l.lineCap??c;r.lineCap=d,r.strokeStyle=l.lineColor,r.lineWidth=l.lineWidth,r.lineJoin=l.lineJoin??"round",i(r,l.lineStyle);const u=l.points[0];r.moveTo(u.x,u.y);for(const n of l.points)r.lineTo(n.x,n.y);if(l.background&&l.filled&&(r.fillStyle=e(l.background,l.transparency),r.fill()),l.background&&l.filled&&!l.skipClosePath&&r.closePath(),a>1){if(l.leftEnd===o.Arrow){const t=this._correctArrowPoints(new s(l.points[1]),new s(l.points[0]),r.lineWidth,d);f(t[0],t[1],r,r.lineWidth,h)}if(l.rightEnd===o.Arrow){const t=this._correctArrowPoints(new s(l.points[a-2]),new s(l.points[a-1]),r.lineWidth,d);f(t[0],t[1],r,r.lineWidth,h)}}l.lineWidth>0&&r.stroke()}_drawPoint(t,n,i,e){i&&(t.beginPath(),t.fillStyle=e,t.arc(n.x,n.y,i,0,2*Math.PI,!0),t.fill(),t.closePath())}_correctArrowPoints(t,n,i,e){const o=n.subtract(t),s=o.length();if("butt"===e||s<1)return[t,n];const r=s+i/2;return[t,o.scaled(r/s).add(t)]}hitTest(t){const n=this._data;if(!n)return null;const{points:i}=n,e=Math.max(r().line,Math.ceil(n.lineWidth/2)),o=i.length,s=new l(a.MovePoint);if(1===o){const n=i[0];return c(t,n,e)?s:null}for(let r=1;r<o;r++){const n=i[r-1],o=i[r];if(d(n,o,t).distance<=e)return s}if(n.background&&o>0){const n=i[0],r=i[o-1];if(d(n,r,t).distance<=e)return s}return null}}export{u as P};
