var __defProp=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,n);(function(){"use strict";const proxyMarker=Symbol("Comlink.proxy"),createEndpoint=Symbol("Comlink.endpoint"),releaseProxy=Symbol("Comlink.releaseProxy"),finalizer=Symbol("Comlink.finalizer"),throwMarker=Symbol("Comlink.thrown"),isObject=e=>"object"==typeof e&&null!==e||"function"==typeof e,proxyTransferHandler={canHandle:e=>isObject(e)&&e[proxyMarker],serialize(e){const{port1:t,port2:n}=new MessageChannel;return expose(e,t),[n,[n]]},deserialize:e=>(e.start(),wrap(e))},throwTransferHandler={canHandle:e=>isObject(e)&&throwMarker in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},transferHandlers=new Map([["proxy",proxyTransferHandler],["throw",throwTransferHandler]]);function isAllowedOrigin(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}function expose(e,t=globalThis,n=["*"]){t.addEventListener("message",(function a(r){if(!r||!r.data)return;if(!isAllowedOrigin(n,r.origin))return void console.warn(`Invalid origin '${r.origin}' for comlink proxy`);const{id:o,type:i,path:s}=Object.assign({path:[]},r.data),l=(r.data.argumentList||[]).map(fromWireValue);let u;try{const t=s.slice(0,-1).reduce(((e,t)=>e[t]),e),n=s.reduce(((e,t)=>e[t]),e);switch(i){case"GET":u=n;break;case"SET":t[s.slice(-1)[0]]=fromWireValue(r.data.value),u=!0;break;case"APPLY":u=n.apply(t,l);break;case"CONSTRUCT":u=proxy(new n(...l));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;expose(e,n),u=transfer(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(p){u={value:p,[throwMarker]:0}}Promise.resolve(u).catch((e=>({value:e,[throwMarker]:0}))).then((n=>{const[r,s]=toWireValue(n);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),"RELEASE"===i&&(t.removeEventListener("message",a),closeEndPoint(t),finalizer in e&&"function"==typeof e[finalizer]&&e[finalizer]())})).catch((e=>{const[n,a]=toWireValue({value:new TypeError("Unserializable return value"),[throwMarker]:0});t.postMessage(Object.assign(Object.assign({},n),{id:o}),a)}))})),t.start&&t.start()}function isMessagePort(e){return"MessagePort"===e.constructor.name}function closeEndPoint(e){isMessagePort(e)&&e.close()}function wrap(e,t){const n=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const a=n.get(t.id);if(a)try{a(t)}finally{n.delete(t.id)}})),createProxy(e,n,[],t)}function throwIfProxyReleased(e){if(e)throw new Error("Proxy has been released and is not useable")}function releaseEndpoint(e){return requestResponseMessage(e,new Map,{type:"RELEASE"}).then((()=>{closeEndPoint(e)}))}const proxyCounter=new WeakMap,proxyFinalizers="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(proxyCounter.get(e)||0)-1;proxyCounter.set(e,t),0===t&&releaseEndpoint(e)}));function registerProxy(e,t){const n=(proxyCounter.get(t)||0)+1;proxyCounter.set(t,n),proxyFinalizers&&proxyFinalizers.register(e,t,e)}function unregisterProxy(e){proxyFinalizers&&proxyFinalizers.unregister(e)}function createProxy(e,t,n=[],a=function(){}){let r=!1;const o=new Proxy(a,{get(a,i){if(throwIfProxyReleased(r),i===releaseProxy)return()=>{unregisterProxy(o),releaseEndpoint(e),t.clear(),r=!0};if("then"===i){if(0===n.length)return{then:()=>o};const a=requestResponseMessage(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(fromWireValue);return a.then.bind(a)}return createProxy(e,t,[...n,i])},set(a,o,i){throwIfProxyReleased(r);const[s,l]=toWireValue(i);return requestResponseMessage(e,t,{type:"SET",path:[...n,o].map((e=>e.toString())),value:s},l).then(fromWireValue)},apply(a,o,i){throwIfProxyReleased(r);const s=n[n.length-1];if(s===createEndpoint)return requestResponseMessage(e,t,{type:"ENDPOINT"}).then(fromWireValue);if("bind"===s)return createProxy(e,t,n.slice(0,-1));const[l,u]=processArguments(i);return requestResponseMessage(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:l},u).then(fromWireValue)},construct(a,o){throwIfProxyReleased(r);const[i,s]=processArguments(o);return requestResponseMessage(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:i},s).then(fromWireValue)}});return registerProxy(o,e),o}function myFlat(e){return Array.prototype.concat.apply([],e)}function processArguments(e){const t=e.map(toWireValue);return[t.map((e=>e[0])),myFlat(t.map((e=>e[1])))]}const transferCache=new WeakMap;function transfer(e,t){return transferCache.set(e,t),e}function proxy(e){return Object.assign(e,{[proxyMarker]:!0})}function toWireValue(e){for(const[t,n]of transferHandlers)if(n.canHandle(e)){const[a,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:a},r]}return[{type:"RAW",value:e},transferCache.get(e)||[]]}function fromWireValue(e){switch(e.type){case"HANDLER":return transferHandlers.get(e.name).deserialize(e.value);case"RAW":return e.value}}function requestResponseMessage(e,t,n,a){return new Promise((r=>{const o=generateUUID();t.set(o,r),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),a)}))}function generateUUID(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}const ao=(e,t)=>{const n=Math.max(t.shortPeriod,t.longPeriod);let a=0,r=0,o=0,i=0;return e.map(((s,l)=>{const u=Object.create(null);u.time=s.time;const p=(s.customValues.low+s.customValues.high)/2;if(a+=p,r+=p,l>=t.shortPeriod-1){o=a/t.shortPeriod;const n=e[l-(t.shortPeriod-1)];a-=(n.customValues.low+n.customValues.high)/2}if(l>=t.longPeriod-1){i=r/t.longPeriod;const n=e[l-(t.longPeriod-1)];r-=(n.customValues.low+n.customValues.high)/2}return l>=n-1&&(u.study={plot:o-i}),u}))},bbi=(e,t)=>{const n=Math.max(t.n1,t.n2,t.n3,t.n4),a=[],r=[];return e.map(((o,i)=>{const s=Object.create(null);s.time=o.time;const l=o.customValues.close;if([t.n1,t.n2,t.n3,t.n4].forEach(((t,n)=>{a[n]=(a[n]??0)+l,i>=t-1&&(r[n]=a[n]/t,a[n]-=e[i-(t-1)].customValues.close)})),i>=n-1){let e=0;r.forEach((t=>{e+=t})),s.study={plot:e/4}}return s}))},bias=e=>{const t=[];return e.map(((n,a)=>{const r=Object.create(null);r.time=n.time;const o=n.customValues.close;return[6,12,24].forEach(((n,i)=>{if(t[i]=(t[i]??0)+o,a>=n-1){r.study=r.study||{};const s=t[i]/n;r.study[`bias${n}`]=(o-s)/s*100,t[i]-=e[a-(n-1)].customValues.close}})),r}))},brar=e=>{const t=[26];let n=0,a=0,r=0,o=0;return e.map(((i,s)=>{const l=Object.create(null);l.time=i.time;const u=i.customValues.high,p=i.customValues.low,m=i.customValues.open,_=(e[s-1]??i).customValues.close;if(r+=u-m,o+=m-p,n+=u-_,a+=_-p,s>=t[0]-1){l.study=l.study||{},l.study.ar=0!==o?r/o*100:0,l.study.br=0!==a?n/a*100:0;const i=e[s-(t[0]-1)],u=i.customValues.high,p=i.customValues.low,m=i.customValues.open,_=(e[s-t[0]]??e[s-(t[0]-1)]).customValues.close;n-=u-_,a-=_-p,r-=u-m,o-=m-p}return l}))},cr=e=>{const t=[26,10,20,40,60],n=Math.ceil(t[1]/2.5+1),a=Math.ceil(t[2]/2.5+1),r=Math.ceil(t[3]/2.5+1),o=Math.ceil(t[4]/2.5+1);let i=0;const s=[];let l=0;const u=[];let p=0;const m=[];let _=0;const c=[],d=[];return e.forEach(((A,y)=>{var f,h,P;const M=Object.create(null);M.time=A.time;const I=e[y-1]??A,T=(I.customValues.high+I.customValues.close+I.customValues.low+I.customValues.open)/4,b=Math.max(0,A.customValues.high-T),E=Math.max(0,T-A.customValues.low);y>=t[0]-1&&(M.study=M.study||{},M.study.cr=0!==E?b/E*100:0,i+=M.study.cr,l+=M.study.cr,p+=M.study.cr,_+=M.study.cr,y>=t[0]+t[1]-2&&(s.push(i/t[1]),y>=t[0]+t[1]+n-3&&(M.study.ma1=s[s.length-1-n]),i-=(null==(f=d[y-(t[1]-1)].study)?void 0:f.cr)??0),y>=t[0]+t[2]-2&&(u.push(l/t[2]),y>=t[0]+t[2]+a-3&&(M.study.ma2=u[u.length-1-a]),l-=(null==(h=d[y-(t[2]-1)].study)?void 0:h.cr)??0),y>=t[0]+t[3]-2&&(m.push(p/t[3]),y>=t[0]+t[3]+r-3&&(M.study.ma3=m[m.length-1-r]),p-=d[y-(t[3]-1)].study.cr??0),y>=t[0]+t[4]-2&&(c.push(_/t[4]),y>=t[0]+t[4]+o-3&&(M.study.ma4=c[c.length-1-o]),_-=(null==(P=d[y-(t[4]-1)].study)?void 0:P.cr)??0)),d.push(M)})),d};var __INIT__=(()=>{var _scriptName=self.location.href;return async function(moduleArg={}){var moduleRtn,Module=moduleArg,readyPromiseResolve,readyPromiseReject,readyPromise=new Promise(((e,t)=>{readyPromiseResolve=e,readyPromiseReject=t})),ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="undefined"!=typeof WorkerGlobalScope,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type;if(ENVIRONMENT_IS_NODE){const{createRequire:e}=await Promise.resolve().then((function(){return __viteBrowserExternal}));var require=e(self.location.href)}var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},scriptDirectory="",readAsync,readBinary;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");self.location.href.startsWith("data:")||(scriptDirectory=nodePath.dirname(require("url").fileURLToPath(self.location.href))+"/"),readBinary=e=>(e=isFileURI(e)?new URL(e):e,fs.readFileSync(e)),readAsync=async(e,t=!0)=>(e=isFileURI(e)?new URL(e):e,fs.readFileSync(e,t?void 0:"utf8")),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),quit_=(e,t)=>{throw process.exitCode=e,t}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:"undefined"!=typeof document&&document.currentScript&&(scriptDirectory=document.currentScript.src),_scriptName&&(scriptDirectory=_scriptName),scriptDirectory=scriptDirectory.startsWith("blob:")?"":scriptDirectory.slice(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=async e=>{if(isFileURI(e))return new Promise(((t,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?t(a.response):n(a.status)},a.onerror=n,a.send(null)}));var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)});Module.print||console.log.bind(console);var err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary=Module.wasmBinary,wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPF64,runtimeInitialized=!1,isFileURI=e=>e.startsWith("file://");function updateMemoryViews(){var e=wasmMemory.buffer;Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=new Uint16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e),Module.HEAP64=HEAP64=new BigInt64Array(e),Module.HEAPU64=new BigUint64Array(e)}if(Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||16777216;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:INITIAL_MEMORY/65536})}updateMemoryViews();var __RELOC_FUNCS__=[];function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(onPreRuns)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),wasmExports.__wasm_call_ctors(),callRuntimeCallbacks(onPostCtors)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(onPostRuns)}var runDependencies=0,dependenciesFulfilled=null,wasmBinaryFile;function addRunDependency(e){var t;runDependencies++,null==(t=Module.monitorRunDependencies)||t.call(Module,runDependencies)}function removeRunDependency(e){var t;if(runDependencies--,null==(t=Module.monitorRunDependencies)||t.call(Module,runDependencies),0==runDependencies&&dependenciesFulfilled){var n=dependenciesFulfilled;dependenciesFulfilled=null,n()}}function abort(e){var t;null==(t=Module.onAbort)||t.call(Module,e),err(e="Aborted("+e+")"),ABORT=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw readyPromiseReject(n),n}function findWasmBinary(){return Module.locateFile?locateFile("talib.wasm"):new URL(""+new URL("talib-CX0CyGM9.wasm",self.location.href).href,self.location.href).href}function getBinarySync(e){if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}async function getWasmBinary(e){if(!wasmBinary)try{var t=await readAsync(e);return new Uint8Array(t)}catch{}return getBinarySync(e)}async function instantiateArrayBuffer(e,t){try{var n=await getWasmBinary(e);return await WebAssembly.instantiate(n,t)}catch(a){err(`failed to asynchronously prepare wasm: ${a}`),abort(a)}}async function instantiateAsync(e,t,n){if(!e&&"function"==typeof WebAssembly.instantiateStreaming&&!isFileURI(t)&&!ENVIRONMENT_IS_NODE)try{var a=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(a,n)}catch(r){err(`wasm streaming compile failed: ${r}`),err("falling back to ArrayBuffer instantiation")}return instantiateArrayBuffer(t,n)}function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}async function createWasm(){function e(e,t){wasmExports=e.exports,wasmExports=relocateExports(wasmExports,1024);var n=getDylinkMetadata(t);return n.neededDynlibs&&(dynamicLibraries=n.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports),LDSO.init(),loadDylibs(),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency(),wasmExports}addRunDependency();var t,n=getWasmImports();if(Module.instantiateWasm)return new Promise(((t,a)=>{Module.instantiateWasm(n,((n,a)=>{e(n,a),t(n.exports)}))}));wasmBinaryFile??(wasmBinaryFile=findWasmBinary());try{var a=await instantiateAsync(wasmBinary,wasmBinaryFile,n);return e((t=a).instance,t.module)}catch(r){return readyPromiseReject(r),Promise.reject(r)}}class ExitStatus{constructor(e){__publicField(this,"name","ExitStatus"),this.message=`Program terminated with exit(${e})`,this.status=e}}var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(e,t){var n=GOT[t];return n||(n=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(t)||(n.required=!0),n}},callRuntimeCallbacks=e=>{for(;e.length>0;)e.shift()(Module)},onPostRuns=[],addOnPostRun=e=>onPostRuns.unshift(e),onPreRuns=[],addOnPreRun=e=>onPreRuns.unshift(e),UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder:void 0,UTF8ArrayToString=(e,t=0,n=NaN)=>{for(var a=t+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var o="";t<r;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var l=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|l:(7&i)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o},getDylinkMetadata=e=>{var t=0,n=0;function a(){for(var n=0,a=1;;){var r=e[t++];if(n+=(127&r)*a,a*=128,!(128&r))break}return n}function r(){var n=a();return UTF8ArrayToString(e,(t+=n)-n,n)}function o(e,t){if(e)throw new Error(t)}var i="dylink.0";if(e instanceof WebAssembly.Module){var s=WebAssembly.Module.customSections(e,i);0===s.length&&(i="dylink",s=WebAssembly.Module.customSections(e,i)),o(0===s.length,"need dylink section"),n=(e=new Uint8Array(s[0])).length}else{o(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),"need to see wasm magic number"),o(0!==e[8],"need the dylink section to be first"),t=9;var l=a();n=t+l,i=r()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==i){u.memorySize=a(),u.memoryAlign=a(),u.tableSize=a(),u.tableAlign=a();for(var p=a(),m=0;m<p;++m){var _=r();u.neededDynlibs.push(_)}}else{o("dylink.0"!==i);for(;t<n;){var c=e[t++],d=a();if(1===c)u.memorySize=a(),u.memoryAlign=a(),u.tableSize=a(),u.tableAlign=a();else if(2===c)for(p=a(),m=0;m<p;++m)_=r(),u.neededDynlibs.push(_);else if(3===c)for(var A=a();A--;){var y=r();256&a()&&u.tlsExports.add(y)}else if(4===c)for(A=a();A--;){r();y=r();1==(3&a())&&u.weakImports.add(y)}else t+=d}}return u};function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP64[e>>3];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];case"*":return HEAPU32[e>>2];default:abort(`invalid type for getValue: ${t}`)}}var newDSO=(e,t,n)=>{var a={refcount:1/0,name:e,exports:n,global:!0};return LDSO.loadedLibsByName[e]=a,null!=t&&(LDSO.loadedLibsByHandle[t]=a),a},LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=70416,alignMemory=(e,t)=>Math.ceil(e/t)*t,getMemory=e=>{if(runtimeInitialized)return _calloc(e,1);var t=___heap_base,n=t+alignMemory(e,16);return ___heap_base=n,GOT.__heap_base.value=n,t},isInternalSym=e=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(e)||e.startsWith("__em_js__"),uleb128Encode=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},sigToWasmTypes=e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},a=1;a<e.length;++a)n.parameters.push(t[e[a]]);return n},generateFuncType=(e,t)=>{var n=e.slice(0,1),a=e.slice(1),r={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),uleb128Encode(a.length,t);for(var o=0;o<a.length;++o)t.push(r[a[o]]);"v"==n?t.push(0):t.push(1,r[n])},convertJsFunctionToWasm=(e,t)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(t),e);var n=[1];generateFuncType(t,n);var a=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,a),a.push(...n),a.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var r=new WebAssembly.Module(new Uint8Array(a));return new WebAssembly.Instance(r,{e:{f:e}}).exports.f},wasmTable=new WebAssembly.Table({initial:1,element:"anyfunc"}),getWasmTableEntry=e=>wasmTable.get(e),updateTableMap=(e,t)=>{if(functionsInTableMap)for(var n=e;n<e+t;n++){var a=getWasmTableEntry(n);a&&functionsInTableMap.set(a,n)}},functionsInTableMap,getFunctionAddress=e=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(e)||0),freeTableIndexes=[],getEmptyTableSlot=()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1},setWasmTableEntry=(e,t)=>wasmTable.set(e,t),addFunction=(e,t)=>{var n=getFunctionAddress(e);if(n)return n;var a=getEmptyTableSlot();try{setWasmTableEntry(a,e)}catch(o){if(!(o instanceof TypeError))throw o;var r=convertJsFunctionToWasm(e,t);setWasmTableEntry(a,r)}return functionsInTableMap.set(e,a),a},updateGOT=(e,t)=>{for(var n in e)if(!isInternalSym(n)){var a=e[n];GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),0==GOT[n].value&&("function"==typeof a?GOT[n].value=addFunction(a):"number"==typeof a?GOT[n].value=a:err(`unhandled export type for '${n}': ${typeof a}`))}},relocateExports=(e,t,n)=>{var a={};for(var r in e){var o=e[r];"object"==typeof o&&(o=o.value),"number"==typeof o&&(o+=t),a[r]=o}return updateGOT(a),a},isSymbolDefined=e=>{var t=wasmImports[e];return!(!t||t.stub)},dynCall=(e,t,n=[])=>getWasmTableEntry(t)(...n),stackSave=()=>_emscripten_stack_get_current(),stackRestore=e=>__emscripten_stack_restore(e),createInvokeFunction=e=>(t,...n)=>{var a=stackSave();try{return dynCall(e,t,n)}catch(r){if(stackRestore(a),r!==r+0)throw r;if(_setThrew(1,0),"j"==e[0])return 0n}},resolveGlobalSymbol=(e,t=!1)=>{var n;return isSymbolDefined(e)?n=wasmImports[e]:e.startsWith("invoke_")&&(n=wasmImports[e]=createInvokeFunction(e.split("_")[1])),{sym:n,name:e}},onPostCtors=[],addOnPostCtor=e=>onPostCtors.unshift(e),UTF8ToString=(e,t)=>e?UTF8ArrayToString(HEAPU8,e,t):"",loadWebAssemblyModule=(binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);function loadModule(){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0,tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e).sym;return!t&&localScope&&(t=localScope[e]),t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}var n;if(t in wasmImports&&!wasmImports[t].stub)return wasmImports[t];t in e||(e[t]=(...e)=>(n||(n=resolveSymbol(t)),n(...e)));return e[t]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&-1!=body.indexOf("$"+arity);arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),"void"!=cSig)for(var i in cSig=cSig.split(","),cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():addOnPostCtor(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then((e=>postInstantiation(e.module,e.instance)))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return currentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(((e,t)=>e.then((()=>loadDynamicLibrary(t,flags,localScope)))),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach((e=>loadDynamicLibrary(e,flags,localScope))),loadModule())},mergeLibSymbols=(e,t)=>{for(var[n,a]of Object.entries(e)){const e=e=>{isSymbolDefined(e)||(wasmImports[e]=a)};e(n);const t="__main_argc_argv";"main"==n&&e(t),n==t&&e("main")}},asyncLoad=async e=>{var t=await readAsync(e);return new Uint8Array(t)},preloadPlugins=Module.preloadPlugins||[],registerWasmPlugin=()=>{var e={promiseChainEnd:Promise.resolve(),canHandle:e=>!Module.noWasmDecoding&&e.endsWith(".so"),handle:(t,n,a,r)=>{e.promiseChainEnd=e.promiseChainEnd.then((()=>loadWebAssemblyModule(t,{loadAsync:!0,nodelete:!0},n,{}))).then((e=>{preloadedWasm[n]=e,a(t)}),(e=>{err(`failed to instantiate wasm: ${n}: ${e}`),r()}))}};preloadPlugins.push(e)},preloadedWasm={};function loadDynamicLibrary(e,t={global:!0,nodelete:!0},n,a){var r=LDSO.loadedLibsByName[e];if(r)return t.global?r.global||(r.global=!0,mergeLibSymbols(r.exports)):n&&Object.assign(n,r.exports),t.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,!t.loadAsync||Promise.resolve(!0);function o(){var n=locateFile(e);if(t.loadAsync)return asyncLoad(n);if(!readBinary)throw new Error(`${n}: file not found, and synchronous loading of external files is not available`);return readBinary(n)}function i(){var a=preloadedWasm[e];return a?t.loadAsync?Promise.resolve(a):a:t.loadAsync?o().then((a=>loadWebAssemblyModule(a,t,e,n))):loadWebAssemblyModule(o(),t,e,n)}function s(e){r.global?mergeLibSymbols(e):n&&Object.assign(n,e),r.exports=e}return(r=newDSO(e,a,"loading")).refcount=t.nodelete?1/0:1,r.global=t.global,t.loadAsync?i().then((e=>(s(e),!0))):(s(i()),!0)}var reportUndefinedSymbols=()=>{for(var[e,t]of Object.entries(GOT))if(0==t.value){var n=resolveGlobalSymbol(e,!0).sym;if(!n&&!t.required)continue;if("function"==typeof n)t.value=addFunction(n,n.sig);else{if("number"!=typeof n)throw new Error(`bad export type for '${e}': ${typeof n}`);t.value=n}}},loadDylibs=()=>{dynamicLibraries.length?(addRunDependency(),dynamicLibraries.reduce(((e,t)=>e.then((()=>loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})))),Promise.resolve()).then((()=>{reportUndefinedSymbols(),removeRunDependency()}))):reportUndefinedSymbols()};function setValue(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[e]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":HEAP64[e>>3]=BigInt(t);break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;case"*":HEAPU32[e>>2]=t;break;default:abort(`invalid type for setValue: ${n}`)}}Module.noExitRuntime;var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},70416);new WebAssembly.Global({value:"i32",mutable:!1},1);var abortOnCannotGrowMemory=e=>{abort("OOM")},_emscripten_resize_heap=e=>{HEAPU8.length,abortOnCannotGrowMemory()};_emscripten_resize_heap.sig="ip";var _proc_exit=e=>{EXITSTATUS=e,quit_(e,new ExitStatus(e))};_proc_exit.sig="vi";var exitJS=(e,t)=>{EXITSTATUS=e,_proc_exit(e)},handleException=e=>{if(e instanceof ExitStatus||"unwind"==e)return EXITSTATUS;quit_(1,e)},lengthBytesUTF8=e=>{for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++n):t+=3}return t},stringToUTF8Array=(e,t,n,a)=>{if(!(a>0))return 0;for(var r=n,o=n+a-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i);if(s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-r},stringToUTF8=(e,t,n)=>stringToUTF8Array(e,HEAPU8,t,n),stackAlloc=e=>__emscripten_stack_alloc(e),stringToUTF8OnStack=e=>{var t=lengthBytesUTF8(e)+1,n=stackAlloc(t);return stringToUTF8(e,n,t),n},getCFunc=e=>Module["_"+e],writeArrayToMemory=(e,t)=>{HEAP8.set(e,t)},ccall=(e,t,n,a,r)=>{var o={string:e=>{var t=0;return null!=e&&0!==e&&(t=stringToUTF8OnStack(e)),t},array:e=>{var t=stackAlloc(e.length);return writeArrayToMemory(e,t),t}};var i=getCFunc(e),s=[],l=0;if(a)for(var u=0;u<a.length;u++){var p=o[n[u]];p?(0===l&&(l=stackSave()),s[u]=p(a[u])):s[u]=a[u]}var m,_=i(...s);return m=_,0!==l&&stackRestore(l),_=function(e){return"string"===t?UTF8ToString(e):"boolean"===t?Boolean(e):e}(m),_};registerWasmPlugin();var wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,emscripten_resize_heap:_emscripten_resize_heap,memory:wasmMemory},wasmExports=await createWasm();wasmExports.__wasm_call_ctors,Module._TA_ACCBANDS=wasmExports.TA_ACCBANDS,Module._malloc=wasmExports.malloc,Module._free=wasmExports.free,Module._TA_SMA=wasmExports.TA_SMA,Module._TA_AD=wasmExports.TA_AD,Module._TA_ADOSC=wasmExports.TA_ADOSC,Module._TA_ADX=wasmExports.TA_ADX,Module._TA_ADXR=wasmExports.TA_ADXR,Module._TA_APO=wasmExports.TA_APO,Module._TA_MA=wasmExports.TA_MA,Module._TA_AROON=wasmExports.TA_AROON,Module._TA_AROONOSC=wasmExports.TA_AROONOSC,Module._TA_ATR=wasmExports.TA_ATR,Module._TA_TRANGE=wasmExports.TA_TRANGE,Module._TA_AVGDEV=wasmExports.TA_AVGDEV,Module._TA_AVGPRICE=wasmExports.TA_AVGPRICE,Module._TA_BBANDS=wasmExports.TA_BBANDS,Module._TA_STDDEV=wasmExports.TA_STDDEV,Module._TA_BOP=wasmExports.TA_BOP,Module._TA_CCI=wasmExports.TA_CCI,Module._TA_CMO=wasmExports.TA_CMO,Module._TA_DEMA=wasmExports.TA_DEMA,Module._TA_DX=wasmExports.TA_DX,Module._TA_EMA=wasmExports.TA_EMA,Module._TA_HT_DCPERIOD=wasmExports.TA_HT_DCPERIOD,Module._TA_HT_DCPHASE=wasmExports.TA_HT_DCPHASE,Module._TA_HT_PHASOR=wasmExports.TA_HT_PHASOR,Module._TA_HT_SINE=wasmExports.TA_HT_SINE,Module._TA_HT_TRENDLINE=wasmExports.TA_HT_TRENDLINE,Module._TA_HT_TRENDMODE=wasmExports.TA_HT_TRENDMODE,Module._TA_IMI=wasmExports.TA_IMI,Module._TA_KAMA=wasmExports.TA_KAMA,Module._TA_WMA=wasmExports.TA_WMA,Module._TA_TEMA=wasmExports.TA_TEMA,Module._TA_TRIMA=wasmExports.TA_TRIMA,Module._TA_MAMA=wasmExports.TA_MAMA,Module._TA_T3=wasmExports.TA_T3,Module._TA_MACD=wasmExports.TA_MACD,Module._TA_MACDEXT=wasmExports.TA_MACDEXT,Module._TA_MACDFIX=wasmExports.TA_MACDFIX,Module._TA_MAVP=wasmExports.TA_MAVP,Module._TA_MEDPRICE=wasmExports.TA_MEDPRICE,Module._TA_MFI=wasmExports.TA_MFI,Module._TA_MIDPOINT=wasmExports.TA_MIDPOINT,Module._TA_MIDPRICE=wasmExports.TA_MIDPRICE,Module._TA_MINUS_DI=wasmExports.TA_MINUS_DI,Module._TA_MINUS_DM=wasmExports.TA_MINUS_DM,Module._TA_MOM=wasmExports.TA_MOM,Module._TA_OBV=wasmExports.TA_OBV,Module._TA_PLUS_DI=wasmExports.TA_PLUS_DI,Module._TA_PLUS_DM=wasmExports.TA_PLUS_DM,Module._TA_PPO=wasmExports.TA_PPO,Module._TA_ROC=wasmExports.TA_ROC,Module._TA_ROCP=wasmExports.TA_ROCP,Module._TA_ROCR=wasmExports.TA_ROCR,Module._TA_ROCR100=wasmExports.TA_ROCR100,Module._TA_RSI=wasmExports.TA_RSI,Module._TA_SAR=wasmExports.TA_SAR,Module._TA_SAREXT=wasmExports.TA_SAREXT,Module._TA_STOCH=wasmExports.TA_STOCH,Module._TA_STOCHF=wasmExports.TA_STOCHF,Module._TA_STOCHRSI=wasmExports.TA_STOCHRSI,Module._TA_TRIX=wasmExports.TA_TRIX,Module._TA_TSF=wasmExports.TA_TSF,Module._TA_TYPPRICE=wasmExports.TA_TYPPRICE,Module._TA_ULTOSC=wasmExports.TA_ULTOSC,Module._TA_VAR=wasmExports.TA_VAR,Module._TA_WCLPRICE=wasmExports.TA_WCLPRICE,Module._TA_WILLR=wasmExports.TA_WILLR;var _calloc=wasmExports.calloc,_setThrew=wasmExports.setThrew,__emscripten_stack_restore=wasmExports._emscripten_stack_restore,__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc,_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current;function callMain(e=[]){var t=resolveGlobalSymbol("main").sym;if(t){e.unshift(thisProgram);var n=e.length,a=stackAlloc(4*(n+1)),r=a;e.forEach((e=>{HEAPU32[r>>2]=stringToUTF8OnStack(e),r+=4})),HEAPU32[r>>2]=0;try{var o=t(n,a);return exitJS(o,!0),o}catch(i){return handleException(i)}}}function run(e=arguments_){function t(){var t;(Module.calledRun=!0,ABORT)||(initRuntime(),readyPromiseResolve(Module),null==(t=Module.onRuntimeInitialized)||t.call(Module),Module.noInitialRun||callMain(e),postRun())}runDependencies>0?dependenciesFulfilled=run:(preRun(),runDependencies>0?dependenciesFulfilled=run:Module.setStatus?(Module.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>Module.setStatus("")),1),t()}),1)):t())}if(wasmExports.__wasm_apply_data_relocs,Module.ccall=ccall,Module.setValue=setValue,Module.getValue=getValue,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();return run(),moduleRtn=readyPromise,moduleRtn}})();const API={ACCBANDS:{name:"ACCBANDS",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:20,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"upperBand",type:"Double[]",plotHint:"limit_upper"},{name:"middleBand",type:"Double[]",plotHint:"line"},{name:"lowerBand",type:"Double[]",plotHint:"limit_lower"}]},AD:{name:"AD",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ADOSC:{name:"ADOSC",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],options:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:3,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:10,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ADX:{name:"ADX",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ADXR:{name:"ADXR",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},APO:{name:"APO",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},AROON:{name:"AROON",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"aroonDown",type:"Double[]",plotHint:"line_dash"},{name:"aroonUp",type:"Double[]",plotHint:"line"}]},AROONOSC:{name:"AROONOSC",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ATR:{name:"ATR",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},AVGDEV:{name:"AVGDEV",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},AVGPRICE:{name:"AVGPRICE",inputs:[{name:"open",type:"Double[]"},{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},BBANDS:{name:"BBANDS",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"nbDevUp",displayName:"Deviations up",defaultValue:2,hint:"Deviation multiplier for upper band",type:"Double",range:{min:-3e37,max:3e37}},{name:"nbDevDn",displayName:"Deviations down",defaultValue:2,hint:"Deviation multiplier for lower band",type:"Double",range:{min:-3e37,max:3e37}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],outputs:[{name:"upperBand",type:"Double[]",plotHint:"limit_upper"},{name:"middleBand",type:"Double[]",plotHint:"line"},{name:"lowerBand",type:"Double[]",plotHint:"limit_lower"}]},BOP:{name:"BOP",inputs:[{name:"open",type:"Double[]"},{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},CCI:{name:"CCI",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},CMO:{name:"CMO",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},DEMA:{name:"DEMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},DX:{name:"DX",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},EMA:{name:"EMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},HT_DCPERIOD:{name:"HT_DCPERIOD",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},HT_DCPHASE:{name:"HT_DCPHASE",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},HT_PHASOR:{name:"HT_PHASOR",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"inPhase",type:"Double[]",plotHint:"line"},{name:"quadrature",type:"Double[]",plotHint:"line_dash"}]},HT_SINE:{name:"HT_SINE",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"sine",type:"Double[]",plotHint:"line"},{name:"leadSine",type:"Double[]",plotHint:"line_dash"}]},HT_TRENDLINE:{name:"HT_TRENDLINE",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},HT_TRENDMODE:{name:"HT_TRENDMODE",inputs:[{name:"inReal",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Integer[]",plotHint:"line"}]},IMI:{name:"IMI",inputs:[{name:"open",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},KAMA:{name:"KAMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MA:{name:"MA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MACD:{name:"MACD",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"signalPeriod",displayName:"Signal Period",defaultValue:9,hint:"Smoothing for the signal line (nb of period)",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"MACD",type:"Double[]",plotHint:"line"},{name:"MACDSignal",type:"Double[]",plotHint:"line_dash"},{name:"MACDHist",type:"Double[]",plotHint:"histogram"}]},MACDEXT:{name:"MACDEXT",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"fastMAType",displayName:"Fast MA",defaultValue:0,hint:"Type of Moving Average for fast MA",type:"MAType"},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowMAType",displayName:"Slow MA",defaultValue:0,hint:"Type of Moving Average for slow MA",type:"MAType"},{name:"signalPeriod",displayName:"Signal Period",defaultValue:9,hint:"Smoothing for the signal line (nb of period)",type:"Integer",range:{min:1,max:1e5}},{name:"signalMAType",displayName:"Signal MA",defaultValue:0,hint:"Type of Moving Average for signal line",type:"MAType"}],outputs:[{name:"MACD",type:"Double[]",plotHint:"line"},{name:"MACDSignal",type:"Double[]",plotHint:"line_dash"},{name:"MACDHist",type:"Double[]",plotHint:"histogram"}]},MACDFIX:{name:"MACDFIX",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"signalPeriod",displayName:"Signal Period",defaultValue:9,hint:"Smoothing for the signal line (nb of period)",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"MACD",type:"Double[]",plotHint:"line"},{name:"MACDSignal",type:"Double[]",plotHint:"line_dash"},{name:"MACDHist",type:"Double[]",plotHint:"histogram"}]},MAMA:{name:"MAMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"fastLimit",displayName:"Fast Limit",defaultValue:.5,hint:"Upper limit use in the adaptive algorithm",type:"Double",range:{min:.01,max:.99}},{name:"slowLimit",displayName:"Slow Limit",defaultValue:.05,hint:"Lower limit use in the adaptive algorithm",type:"Double",range:{min:.01,max:.99}}],outputs:[{name:"MAMA",type:"Double[]",plotHint:"line"},{name:"FAMA",type:"Double[]",plotHint:"line_dash"}]},MAVP:{name:"MAVP",inputs:[{name:"inReal",type:"Double[]"},{name:"inPeriods",type:"Double[]"}],options:[{name:"minPeriod",displayName:"Minimum Period",defaultValue:2,hint:"Value less than minimum will be changed to Minimum period",type:"Integer",range:{min:2,max:1e5}},{name:"maxPeriod",displayName:"Maximum Period",defaultValue:30,hint:"Value higher than maximum will be changed to Maximum period",type:"Integer",range:{min:2,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MEDPRICE:{name:"MEDPRICE",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MFI:{name:"MFI",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MIDPOINT:{name:"MIDPOINT",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MIDPRICE:{name:"MIDPRICE",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MINUS_DI:{name:"MINUS_DI",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MINUS_DM:{name:"MINUS_DM",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},MOM:{name:"MOM",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},OBV:{name:"OBV",inputs:[{name:"inReal",type:"Double[]"},{name:"volume",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},PLUS_DI:{name:"PLUS_DI",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},PLUS_DM:{name:"PLUS_DM",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},PPO:{name:"PPO",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ROC:{name:"ROC",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ROCP:{name:"ROCP",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ROCR:{name:"ROCR",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ROCR100:{name:"ROCR100",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},RSI:{name:"RSI",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},SAR:{name:"SAR",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"acceleration",displayName:"Acceleration Factor",defaultValue:.02,hint:"Acceleration Factor used up to the Maximum value",type:"Double",range:{min:0,max:3e37}},{name:"maximum",displayName:"AF Maximum",defaultValue:.2,hint:"Acceleration Factor Maximum value",type:"Double",range:{min:0,max:3e37}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},SAREXT:{name:"SAREXT",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],options:[{name:"startValue",displayName:"Start Value",defaultValue:0,hint:"Start value and direction. 0 for Auto, >0 for Long, <0 for Short",type:"Double",range:{min:-3e37,max:3e37}},{name:"offsetOnReverse",displayName:"Offset on Reverse",defaultValue:0,hint:"Percent offset added/removed to initial stop on short/long reversal",type:"Double",range:{min:0,max:3e37}},{name:"accelerationInitLong",displayName:"AF Init Long",defaultValue:.02,hint:"Acceleration Factor initial value for the Long direction",type:"Double",range:{min:0,max:3e37}},{name:"accelerationLong",displayName:"AF Long",defaultValue:.02,hint:"Acceleration Factor for the Long direction",type:"Double",range:{min:0,max:3e37}},{name:"accelerationMaxLong",displayName:"AF Max Long",defaultValue:.2,hint:"Acceleration Factor maximum value for the Long direction",type:"Double",range:{min:0,max:3e37}},{name:"accelerationInitShort",displayName:"AF Init Short",defaultValue:.02,hint:"Acceleration Factor initial value for the Short direction",type:"Double",range:{min:0,max:3e37}},{name:"accelerationShort",displayName:"AF Short",defaultValue:.02,hint:"Acceleration Factor for the Short direction",type:"Double",range:{min:0,max:3e37}},{name:"accelerationMaxShort",displayName:"AF Max Short",defaultValue:.2,hint:"Acceleration Factor maximum value for the Short direction",type:"Double",range:{min:0,max:3e37}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},SMA:{name:"SMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},STDDEV:{name:"STDDEV",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"nbDev",displayName:"Deviations",defaultValue:1,hint:"Nb of deviations",type:"Double",range:{min:-3e37,max:3e37}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},STOCH:{name:"STOCH",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"fastK_Period",displayName:"Fast-K Period",defaultValue:5,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}},{name:"slowK_Period",displayName:"Slow-K Period",defaultValue:3,hint:"Smoothing for making the Slow-K line. Usually set to 3",type:"Integer",range:{min:1,max:1e5}},{name:"slowK_MAType",displayName:"Slow-K MA",defaultValue:0,hint:"Type of Moving Average for Slow-K",type:"MAType"},{name:"slowD_Period",displayName:"Slow-D Period",defaultValue:3,hint:"Smoothing for making the Slow-D line",type:"Integer",range:{min:1,max:1e5}},{name:"slowD_MAType",displayName:"Slow-D MA",defaultValue:0,hint:"Type of Moving Average for Slow-D",type:"MAType"}],outputs:[{name:"slowK",type:"Double[]",plotHint:"line_dash"},{name:"slowD",type:"Double[]",plotHint:"line_dash"}]},STOCHF:{name:"STOCHF",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"fastK_Period",displayName:"Fast-K Period",defaultValue:5,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_Period",displayName:"Fast-D Period",defaultValue:3,hint:"Smoothing for making the Fast-D line. Usually set to 3",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_MAType",displayName:"Fast-D MA",defaultValue:0,hint:"Type of Moving Average for Fast-D",type:"MAType"}],outputs:[{name:"fastK",type:"Double[]",plotHint:"line"},{name:"fastD",type:"Double[]",plotHint:"line"}]},STOCHRSI:{name:"STOCHRSI",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"fastK_Period",displayName:"Fast-K Period",defaultValue:5,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_Period",displayName:"Fast-D Period",defaultValue:3,hint:"Smoothing for making the Fast-D line. Usually set to 3",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_MAType",displayName:"Fast-D MA",defaultValue:0,hint:"Type of Moving Average for Fast-D",type:"MAType"}],outputs:[{name:"fastK",type:"Double[]",plotHint:"line"},{name:"fastD",type:"Double[]",plotHint:"line"}]},T3:{name:"T3",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"VFactor",displayName:"Volume Factor",defaultValue:.7,hint:"Volume Factor",type:"Double",range:{min:0,max:1}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TEMA:{name:"TEMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TRANGE:{name:"TRANGE",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TRIMA:{name:"TRIMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TRIX:{name:"TRIX",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TSF:{name:"TSF",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},TYPPRICE:{name:"TYPPRICE",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},ULTOSC:{name:"ULTOSC",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod1",displayName:"First Period",defaultValue:7,hint:"Number of bars for 1st period.",type:"Integer",range:{min:1,max:1e5}},{name:"timePeriod2",displayName:"Second Period",defaultValue:14,hint:"Number of bars fro 2nd period",type:"Integer",range:{min:1,max:1e5}},{name:"timePeriod3",displayName:"Third Period",defaultValue:28,hint:"Number of bars for 3rd period",type:"Integer",range:{min:1,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},VAR:{name:"VAR",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}},{name:"nbDev",displayName:"Deviations",defaultValue:1,hint:"Nb of deviations",type:"Double",range:{min:-3e37,max:3e37}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},WCLPRICE:{name:"WCLPRICE",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},WILLR:{name:"WILLR",inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]},WMA:{name:"WMA",inputs:[{name:"inReal",type:"Double[]"}],options:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],outputs:[{name:"output",type:"Double[]",plotHint:"line"}]}};let Module;function double_array(e){const t=Module._malloc(8*e),n=t/8;return Module.HEAPF64.set(new Float64Array(e),n),{data:Module.HEAPF64.subarray(n,n+e),pointer:t}}function c_pointer(e,t){const n=Module._malloc(4),a={get data(){return Module.getValue(n,e)},set data(t){Module.setValue(n,t,e)},pointer:n};return a.data=t,a}const TA_RET_CODE={0:"TA_SUCCESS",1:"TA_LIB_NOT_INITIALIZE",2:"TA_BAD_PARAM",3:"TA_ALLOC_ERR",4:"TA_GROUP_NOT_FOUND",5:"TA_FUNC_NOT_FOUND",6:"TA_INVALID_HANDLE",7:"TA_INVALID_PARAM_HOLDER",8:"TA_INVALID_PARAM_HOLDER_TYPE",9:"TA_INVALID_PARAM_FUNCTION",10:"TA_INPUT_NOT_ALL_INITIALIZE",11:"TA_OUTPUT_NOT_ALL_INITIALIZE",12:"TA_OUT_OF_RANGE_START_INDEX",13:"TA_OUT_OF_RANGE_END_INDEX",14:"TA_INVALID_LIST_TYPE",15:"TA_BAD_OBJECT",16:"TA_NOT_SUPPORTED",5e3:"TA_INTERNAL_ERROR",65535:"TA_UNKNOWN_ERR"},TA_INTEGER_DEFAULT=-2147483648;function callFunc(e,t){const n=`TA_${e.name}`;if(!Module)throw Error(`${e.name}() called before initialization.`);const a=2+e.inputs.length+e.options.length+2+e.outputs.length,r=new Array(a).fill("number");for(const{name:h}of e.inputs)if(!Array.isArray(t[h])){if(void 0===t[h])throw Error(`Bad Param: "${h}" is required`);throw Error(`Bad Param: "${h}" should be array of number`)}for(const{name:h,range:P}of e.options)if(void 0===t[h])t[h]=TA_INTEGER_DEFAULT;else if(P&&(t[h]<P.min||t[h]>P.max))throw Error(`Bad Param: "${h}" out of range (min: ${P.min}, max: ${P.max})`);let{startIdx:o,endIdx:i}=t;void 0===o&&(o=0);const s=e.inputs.map((({name:e})=>t[e].length));let l=Math.min(...s);void 0===i&&(i=l-1);const u=[o,i],p=[];e.inputs.forEach((({name:e})=>{const n=double_array(i+1-o),a=t[e];for(const t in a)n.data[t]=a[t];p.push(n.pointer),u.push(n.pointer)})),e.options.forEach((({name:e})=>u.push(t[e])));const m=c_pointer("i32",0),_=c_pointer("i32",0);p.push(m.pointer),p.push(_.pointer),u.push(m.pointer),u.push(_.pointer);const c=e.outputs.map((({name:e})=>{const t=double_array(i+1-o);return p.push(t.pointer),u.push(t.pointer),{name:e,array:t}})),d=Module.ccall(n,"number",r,u),A=m.data,y=_.data,f=c.reduce(((e,t)=>{const n=Array.from(t.array.data.slice(0,y));return e[t.name]=n,e}),{outBegIdx:A,outNBElement:y});if(p.forEach((e=>Module._free(e))),0===d)return f;throw Error("[C_ERROR] "+TA_RET_CODE[d])}var MAType$1,MAType2;function init(e){if(Module)return Promise.resolve(Module);if(e&&"string"!=typeof e)return Promise.reject(new Error('Invalid argument, "init(wasmBinaryFilePath)" expects a string that specifies the location of wasm binary file'));return __INIT__({locateFile:e?()=>e:void 0}).then((e=>Module=e)).catch((e=>{let t="TA-Lib WASM runtime init fail.";throw e&&e.message?t+="\nError: \n"+e.message:t+="Unknown reason. Perhaps you specify the wrong file path to wasm binary?",new Error(t)}))}MAType2=MAType$1||(MAType$1={}),MAType2[MAType2.SMA=0]="SMA",MAType2[MAType2.EMA=1]="EMA",MAType2[MAType2.WMA=2]="WMA",MAType2[MAType2.DEMA=3]="DEMA",MAType2[MAType2.TEMA=4]="TEMA",MAType2[MAType2.TRIMA=5]="TRIMA",MAType2[MAType2.KAMA=6]="KAMA",MAType2[MAType2.MAMA=7]="MAMA",MAType2[MAType2.T3=8]="T3";let __ACCBANDS_API__=API.ACCBANDS;function ACCBANDS(e){return callFunc(__ACCBANDS_API__,e)}const accBands=ACCBANDS;let __AD_API__=API.AD;function AD(e){return callFunc(__AD_API__,e)}const ad=AD;let __ADOSC_API__=API.ADOSC;function ADOSC(e){return callFunc(__ADOSC_API__,e)}const adOsc=ADOSC;let __ADX_API__=API.ADX;function ADX(e){return callFunc(__ADX_API__,e)}const adx=ADX;let __ADXR_API__=API.ADXR;function ADXR(e){return callFunc(__ADXR_API__,e)}const adxr=ADXR;let __APO_API__=API.APO;function APO(e){return callFunc(__APO_API__,e)}const apo=APO;let __AROON_API__=API.AROON;function AROON(e){return callFunc(__AROON_API__,e)}const aroon=AROON;let __AROONOSC_API__=API.AROONOSC;function AROONOSC(e){return callFunc(__AROONOSC_API__,e)}const aroonOsc=AROONOSC;let __ATR_API__=API.ATR;function ATR(e){return callFunc(__ATR_API__,e)}const atr=ATR;let __AVGDEV_API__=API.AVGDEV;function AVGDEV(e){return callFunc(__AVGDEV_API__,e)}const avgDev=AVGDEV;let __AVGPRICE_API__=API.AVGPRICE;function AVGPRICE(e){return callFunc(__AVGPRICE_API__,e)}const avgPrice=AVGPRICE;let __BBANDS_API__=API.BBANDS;function BBANDS(e){return callFunc(__BBANDS_API__,e)}const bbands=BBANDS;let __BOP_API__=API.BOP;function BOP(e){return callFunc(__BOP_API__,e)}const bop=BOP;let __CCI_API__=API.CCI;function CCI(e){return callFunc(__CCI_API__,e)}const cci=CCI;let __CMO_API__=API.CMO;function CMO(e){return callFunc(__CMO_API__,e)}const cmo=CMO;let __DEMA_API__=API.DEMA;function DEMA(e){return callFunc(__DEMA_API__,e)}const dema=DEMA;let __DX_API__=API.DX;function DX(e){return callFunc(__DX_API__,e)}const dx=DX;let __EMA_API__=API.EMA;function EMA(e){return callFunc(__EMA_API__,e)}const ema$1=EMA;let __HT_DCPERIOD_API__=API.HT_DCPERIOD;function HT_DCPERIOD(e){return callFunc(__HT_DCPERIOD_API__,e)}const htDcPeriod=HT_DCPERIOD;let __HT_DCPHASE_API__=API.HT_DCPHASE;function HT_DCPHASE(e){return callFunc(__HT_DCPHASE_API__,e)}const htDcPhase=HT_DCPHASE;let __HT_PHASOR_API__=API.HT_PHASOR;function HT_PHASOR(e){return callFunc(__HT_PHASOR_API__,e)}const htPhasor=HT_PHASOR;let __HT_SINE_API__=API.HT_SINE;function HT_SINE(e){return callFunc(__HT_SINE_API__,e)}const htSine=HT_SINE;let __HT_TRENDLINE_API__=API.HT_TRENDLINE;function HT_TRENDLINE(e){return callFunc(__HT_TRENDLINE_API__,e)}const htTrendline=HT_TRENDLINE;let __HT_TRENDMODE_API__=API.HT_TRENDMODE;function HT_TRENDMODE(e){return callFunc(__HT_TRENDMODE_API__,e)}const htTrendMode=HT_TRENDMODE;let __IMI_API__=API.IMI;function IMI(e){return callFunc(__IMI_API__,e)}const imi=IMI;let __KAMA_API__=API.KAMA;function KAMA(e){return callFunc(__KAMA_API__,e)}const kama=KAMA;let __MA_API__=API.MA;function MA(e){return callFunc(__MA_API__,e)}const movingAverage=MA;let __MACD_API__=API.MACD;function MACD(e){return callFunc(__MACD_API__,e)}const macd=MACD;let __MACDEXT_API__=API.MACDEXT;function MACDEXT(e){return callFunc(__MACDEXT_API__,e)}const macdExt=MACDEXT;let __MACDFIX_API__=API.MACDFIX;function MACDFIX(e){return callFunc(__MACDFIX_API__,e)}const macdFix=MACDFIX;let __MAMA_API__=API.MAMA;function MAMA(e){return callFunc(__MAMA_API__,e)}const mama=MAMA;let __MAVP_API__=API.MAVP;function MAVP(e){return callFunc(__MAVP_API__,e)}const movingAverageVariablePeriod=MAVP;let __MEDPRICE_API__=API.MEDPRICE;function MEDPRICE(e){return callFunc(__MEDPRICE_API__,e)}const medPrice=MEDPRICE;let __MFI_API__=API.MFI;function MFI(e){return callFunc(__MFI_API__,e)}const mfi=MFI;let __MIDPOINT_API__=API.MIDPOINT;function MIDPOINT(e){return callFunc(__MIDPOINT_API__,e)}const midPoint=MIDPOINT;let __MIDPRICE_API__=API.MIDPRICE;function MIDPRICE(e){return callFunc(__MIDPRICE_API__,e)}const midPrice=MIDPRICE;let __MINUS_DI_API__=API.MINUS_DI;function MINUS_DI(e){return callFunc(__MINUS_DI_API__,e)}const minusDI=MINUS_DI;let __MINUS_DM_API__=API.MINUS_DM;function MINUS_DM(e){return callFunc(__MINUS_DM_API__,e)}const minusDM=MINUS_DM;let __MOM_API__=API.MOM;function MOM(e){return callFunc(__MOM_API__,e)}const mom=MOM;let __OBV_API__=API.OBV;function OBV(e){return callFunc(__OBV_API__,e)}const obv=OBV;let __PLUS_DI_API__=API.PLUS_DI;function PLUS_DI(e){return callFunc(__PLUS_DI_API__,e)}const plusDI=PLUS_DI;let __PLUS_DM_API__=API.PLUS_DM;function PLUS_DM(e){return callFunc(__PLUS_DM_API__,e)}const plusDM=PLUS_DM;let __PPO_API__=API.PPO;function PPO(e){return callFunc(__PPO_API__,e)}const ppo=PPO;let __ROC_API__=API.ROC;function ROC(e){return callFunc(__ROC_API__,e)}const roc=ROC;let __ROCP_API__=API.ROCP;function ROCP(e){return callFunc(__ROCP_API__,e)}const rocP=ROCP;let __ROCR_API__=API.ROCR;function ROCR(e){return callFunc(__ROCR_API__,e)}const rocR=ROCR;let __ROCR100_API__=API.ROCR100;function ROCR100(e){return callFunc(__ROCR100_API__,e)}const rocR100=ROCR100;let __RSI_API__=API.RSI;function RSI(e){return callFunc(__RSI_API__,e)}const rsi=RSI;let __SAR_API__=API.SAR;function SAR(e){return callFunc(__SAR_API__,e)}const sar$1=SAR;let __SAREXT_API__=API.SAREXT;function SAREXT(e){return callFunc(__SAREXT_API__,e)}const sarExt=SAREXT;let __SMA_API__=API.SMA;function SMA(e){return callFunc(__SMA_API__,e)}const sma=SMA;let __STDDEV_API__=API.STDDEV;function STDDEV(e){return callFunc(__STDDEV_API__,e)}const stdDev=STDDEV;let __STOCH_API__=API.STOCH;function STOCH(e){return callFunc(__STOCH_API__,e)}const stoch=STOCH;let __STOCHF_API__=API.STOCHF;function STOCHF(e){return callFunc(__STOCHF_API__,e)}const stochF=STOCHF;let __STOCHRSI_API__=API.STOCHRSI;function STOCHRSI(e){return callFunc(__STOCHRSI_API__,e)}const stochRsi=STOCHRSI;let __T3_API__=API.T3;function T3(e){return callFunc(__T3_API__,e)}const t3=T3;let __TEMA_API__=API.TEMA;function TEMA(e){return callFunc(__TEMA_API__,e)}const tema=TEMA;let __TRANGE_API__=API.TRANGE;function TRANGE(e){return callFunc(__TRANGE_API__,e)}const trueRange=TRANGE;let __TRIMA_API__=API.TRIMA;function TRIMA(e){return callFunc(__TRIMA_API__,e)}const trima=TRIMA;let __TRIX_API__=API.TRIX;function TRIX(e){return callFunc(__TRIX_API__,e)}const trix$1=TRIX;let __TSF_API__=API.TSF;function TSF(e){return callFunc(__TSF_API__,e)}const tsf=TSF;let __TYPPRICE_API__=API.TYPPRICE;function TYPPRICE(e){return callFunc(__TYPPRICE_API__,e)}const typPrice=TYPPRICE;let __ULTOSC_API__=API.ULTOSC;function ULTOSC(e){return callFunc(__ULTOSC_API__,e)}const ultOsc=ULTOSC;let __VAR_API__=API.VAR;function VAR(e){return callFunc(__VAR_API__,e)}const variance=VAR;let __WCLPRICE_API__=API.WCLPRICE;function WCLPRICE(e){return callFunc(__WCLPRICE_API__,e)}const wclPrice=WCLPRICE;let __WILLR_API__=API.WILLR;function WILLR(e){return callFunc(__WILLR_API__,e)}const willR=WILLR;let __WMA_API__=API.WMA;function WMA(e){return callFunc(__WMA_API__,e)}const wma=WMA;var TA=Object.freeze({__proto__:null,ACCBANDS:ACCBANDS,AD:AD,ADOSC:ADOSC,ADX:ADX,ADXR:ADXR,APO:APO,AROON:AROON,AROONOSC:AROONOSC,ATR:ATR,AVGDEV:AVGDEV,AVGPRICE:AVGPRICE,BBANDS:BBANDS,BOP:BOP,CCI:CCI,CMO:CMO,DEMA:DEMA,DX:DX,EMA:EMA,HT_DCPERIOD:HT_DCPERIOD,HT_DCPHASE:HT_DCPHASE,HT_PHASOR:HT_PHASOR,HT_SINE:HT_SINE,HT_TRENDLINE:HT_TRENDLINE,HT_TRENDMODE:HT_TRENDMODE,IMI:IMI,KAMA:KAMA,MA:MA,MACD:MACD,MACDEXT:MACDEXT,MACDFIX:MACDFIX,MAMA:MAMA,get MAType(){return MAType$1},MAVP:MAVP,MEDPRICE:MEDPRICE,MFI:MFI,MIDPOINT:MIDPOINT,MIDPRICE:MIDPRICE,MINUS_DI:MINUS_DI,MINUS_DM:MINUS_DM,MOM:MOM,OBV:OBV,PLUS_DI:PLUS_DI,PLUS_DM:PLUS_DM,PPO:PPO,ROC:ROC,ROCP:ROCP,ROCR:ROCR,ROCR100:ROCR100,RSI:RSI,SAR:SAR,SAREXT:SAREXT,SMA:SMA,STDDEV:STDDEV,STOCH:STOCH,STOCHF:STOCHF,STOCHRSI:STOCHRSI,T3:T3,TEMA:TEMA,TRANGE:TRANGE,TRIMA:TRIMA,TRIX:TRIX,TSF:TSF,TYPPRICE:TYPPRICE,ULTOSC:ULTOSC,VAR:VAR,WCLPRICE:WCLPRICE,WILLR:WILLR,WMA:WMA,accBands:accBands,ad:ad,adOsc:adOsc,adx:adx,adxr:adxr,apo:apo,aroon:aroon,aroonOsc:aroonOsc,atr:atr,avgDev:avgDev,avgPrice:avgPrice,bbands:bbands,bop:bop,cci:cci,cmo:cmo,dema:dema,dx:dx,ema:ema$1,htDcPeriod:htDcPeriod,htDcPhase:htDcPhase,htPhasor:htPhasor,htSine:htSine,htTrendMode:htTrendMode,htTrendline:htTrendline,imi:imi,init:init,kama:kama,macd:macd,macdExt:macdExt,macdFix:macdFix,mama:mama,medPrice:medPrice,mfi:mfi,midPoint:midPoint,midPrice:midPrice,minusDI:minusDI,minusDM:minusDM,mom:mom,movingAverage:movingAverage,movingAverageVariablePeriod:movingAverageVariablePeriod,obv:obv,plusDI:plusDI,plusDM:plusDM,ppo:ppo,roc:roc,rocP:rocP,rocR:rocR,rocR100:rocR100,rsi:rsi,sar:sar$1,sarExt:sarExt,sma:sma,stdDev:stdDev,stoch:stoch,stochF:stochF,stochRsi:stochRsi,t3:t3,tema:tema,trima:trima,trix:trix$1,trueRange:trueRange,tsf:tsf,typPrice:typPrice,ultOsc:ultOsc,variance:variance,wclPrice:wclPrice,willR:willR,wma:wma});function enumToOptions(e){return Object.keys(e).filter((e=>isNaN(Number(e)))).map((t=>({title:t,value:e[t]})))}var MAType=(e=>(e[e.SMA=0]="SMA",e[e.EMA=1]="EMA",e[e.WMA=2]="WMA",e[e.DEMA=3]="DEMA",e[e.TEMA=4]="TEMA",e[e.TRIMA=5]="TRIMA",e[e.KAMA=6]="KAMA",e[e.MAMA=7]="MAMA",e[e.T3=8]="T3",e))(MAType||{});function extractSource(e,t){return e.map((e=>e.customValues[t]))}enumToOptions(MAType);var wasmUrl=""+new URL("talib-CX0CyGM9.wasm",self.location.href).href;async function initTA(){await init(wasmUrl)}async function calcTA(e,t,n,a){await initTA();const r=Reflect.get(TA,e)(a);return t.map(((e,t)=>{const a=Object.create(null);return a.time=e.time,t<r.outBegIdx||(a.study=Object.create(null),n.forEach((e=>{a.study[e.chartKey]=r[e.taKey][t-r.outBegIdx]}))),a}))}const dmi=async e=>{await initTA();const t=extractSource(e,"high"),n=extractSource(e,"low"),a=extractSource(e,"close"),r=PLUS_DI({high:t,low:n,close:a,timePeriod:14}),o=MINUS_DI({high:t,low:n,close:a,timePeriod:14}),i=ADX({high:t,low:n,close:a,timePeriod:14});return e.map(((e,t)=>{const n=Object.create(null);return n.time=e.time,t>r.outBegIdx&&(n.study||(n.study=Object.create(null)),n.study["+di"]=r.output[t-r.outBegIdx]),t>o.outBegIdx&&(n.study||(n.study=Object.create(null)),n.study["-di"]=o.output[t-o.outBegIdx]),t>i.outBegIdx&&(n.study||(n.study=Object.create(null)),n.study.adx=i.output[t-i.outBegIdx]),n}))},ema=async e=>{await initTA();const t=extractSource(e,"close"),n=EMA({inReal:t,timePeriod:5}),a=EMA({inReal:t,timePeriod:10}),r=EMA({inReal:t,timePeriod:30}),o=EMA({inReal:t,timePeriod:60});return e.map(((e,t)=>{const i=Object.create(null);return i.time=e.time,t>n.outBegIdx&&(i.study||(i.study=Object.create(null)),i.study.ema5=n.output[t-n.outBegIdx]),t>a.outBegIdx&&(i.study.ema10=a.output[t-a.outBegIdx]),t>r.outBegIdx&&(i.study.ema30=r.output[t-r.outBegIdx]),t>o.outBegIdx&&(i.study.ema60=o.output[t-o.outBegIdx]),i}))},emv=e=>{const t=[14,9];let n=0;const a=[];return e.map(((r,o)=>{const i=Object.create(null);if(i.time=r.time,o>0){const s=e[o-1],l=r.customValues.high,u=r.customValues.low,p=r.customValues.volume??0,m=(l+u)/2-(s.customValues.high+s.customValues.low)/2;if(i.study=i.study||{},0===p||l-u==0)i.study.emv=0;else{const e=p/1e8/(l-u);i.study.emv=m/e}n+=i.study.emv,a.push(i.study.emv),o>=t[0]&&(i.study.ma=n/t[0],n-=a[o-t[0]])}return i}))};function getMaxMin(e,t,n){const a=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r=e.length;let o=0;for(;o<r;){const r=e[o];a[0]=Math.max(r.customValues[t]??Number.MIN_SAFE_INTEGER,a[0]),a[1]=Math.min(r.customValues[n]??Number.MAX_SAFE_INTEGER,a[1]),++o}return a}const kdj=e=>{const t=[9,3,3],n=[];return e.forEach(((a,r)=>{var o,i,s,l;const u=Object.create(null);u.time=a.time;const p=a.customValues.close;if(r>=t[0]-1){const a=getMaxMin(e.slice(r-(t[0]-1),r+1),"high","low"),m=a[0],_=a[1],c=m-_,d=(p-_)/(0===c?1:c)*100,A=((t[1]-1)*((null==(i=null==(o=n[r-1])?void 0:o.study)?void 0:i.k)??50)+d)/t[1],y=((t[2]-1)*((null==(l=null==(s=n[r-1])?void 0:s.study)?void 0:l.d)??50)+A)/t[2],f=3*A-2*y;u.study={k:A,d:y,j:f}}n.push(u)})),n},ma=async e=>{await initTA();const t=extractSource(e,"close"),n=MA({inReal:t,timePeriod:5}),a=MA({inReal:t,timePeriod:10}),r=MA({inReal:t,timePeriod:30}),o=MA({inReal:t,timePeriod:60});return e.map(((e,t)=>{const i=Object.create(null);return i.time=e.time,t>n.outBegIdx&&(i.study||(i.study=Object.create(null)),i.study.ma5=n.output[t-n.outBegIdx]),t>a.outBegIdx&&(i.study.ma10=a.output[t-a.outBegIdx]),t>r.outBegIdx&&(i.study.ma30=r.output[t-r.outBegIdx]),t>o.outBegIdx&&(i.study.ma60=o.output[t-o.outBegIdx]),i}))},mtm=e=>{const t=[12,6];let n=0;const a=[];return e.forEach(((r,o)=>{var i,s;const l=Object.create(null);if(l.time=r.time,o>=t[0]){const u=r.customValues.close-e[o-t[0]].customValues.close;n+=u,l.study={mtm:u},o>=t[0]+t[1]-1&&(l.study.ma=n/t[1],n-=(null==(s=null==(i=a[o-(t[1]-1)])?void 0:i.study)?void 0:s.mtm)??0)}a.push(l)})),a},psy=e=>{const t=[12,6],n=[];let a=0,r=0;const o=[];return e.forEach(((i,s)=>{var l;const u=Object.create(null);u.time=i.time;const p=(e[s-1]??i).customValues.close,m=i.customValues.close-p>0?1:0;if(o.push(m),a+=m,s>=t[0]-1){const e=a/t[0]*100;r+=e,u.study={psy:e},s>=t[0]+t[1]-2&&(u.study.ma=r/t[1],r-=(null==(l=n[s-(t[1]-1)].study)?void 0:l.psy)??0),a-=o[s-(t[0]-1)]}n.push(u)})),n},pvt=e=>{let t=0;return e.map(((n,a)=>{const r=Object.create(null);r.time=n.time;const o=n.customValues.close,i=n.customValues.volume??1,s=(e[a-1]??n).customValues.close;let l=0;const u=s*i;return 0!==u&&(l=(o-s)/u),t+=l,r.study={plot:t},r}))};class DataSource{constructor(e){__publicField(this,"_dataItems"),this._dataItems=e}getDataCount(){return this._dataItems.length}getDataAt(e){return this._dataItems[e]}toString(){return JSON.stringify(this._dataItems)}}const _ExprEnv=class e{constructor(e){__publicField(this,"_ds"),__publicField(this,"_firstIndex",-1),this._ds=e}static get(){return e.inst}static set(t){e.inst=t}getDataSource(){return this._ds}setDataSource(e){this._ds=e}getFirstIndex(){return this._firstIndex}setFirstIndex(e){this._firstIndex=e}};__publicField(_ExprEnv,"inst");let ExprEnv=_ExprEnv;class Expr{constructor(){__publicField(this,"_rid"),this._rid=0}reserve(e,t){}clear(){}toString(){return"[ Expr expr ]"}}class ConstExpr extends Expr{constructor(e){super(),__publicField(this,"_value"),this._value=e}execute(){return this._value}}class OpAExpr extends Expr{constructor(e){super(),__publicField(this,"_exprA"),this._exprA=e}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t))}clear(){this._exprA.clear()}}class AssignExpr extends OpAExpr{constructor(e,t){super(t),__publicField(this,"_name"),__publicField(this,"_buf"),this._name=e,this._buf=[]}execute(e){return this._buf[e]&&!isNaN(this._buf[e])||this.assign(e),this._buf[e]}getName(){return this._name}assign(e){if(this._buf[e]=this._exprA.execute(e),ExprEnv.get().getFirstIndex()>=0&&isNaN(this._buf[e])&&!isNaN(this._buf[e-1]))throw this._name+".assign("+e+"): NaN"}reserve(e,t){if(this._rid<e)for(let n=t;n>0;n--)this._buf.push(NaN);super.reserve(e,t)}clear(){super.clear(),this._buf=[]}}class OutputExpr extends AssignExpr{}class OpABCDExpr extends Expr{constructor(e,t,n,a){super(),__publicField(this,"_exprA"),__publicField(this,"_exprB"),__publicField(this,"_exprC"),__publicField(this,"_exprD"),this._exprA=e,this._exprB=t,this._exprC=n,this._exprD=a}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t),this._exprC.reserve(e,t),this._exprD.reserve(e,t))}clear(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}class SarExpr extends OpABCDExpr{constructor(){super(...arguments),__publicField(this,"_buf",[]),__publicField(this,"_range",-1),__publicField(this,"_min"),__publicField(this,"_step"),__publicField(this,"_max")}execute(e){let t;this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0),this._step=this._exprC.execute(0),this._max=this._exprD.execute(0));const n=this._buf[e]||{},a=ExprEnv.get(),r=a.getFirstIndex();if(r<0)n.longPos=!0,n.sar=a.getDataSource().getDataAt(e).low,n.ep=a.getDataSource().getDataAt(e).high,n.af=.02;else{let o=a.getDataSource().getDataAt(e).high,i=a.getDataSource().getDataAt(e).low;const s=this._buf[e-1];if(n.sar=s.sar+s.af*(s.ep-s.sar),s.longPos){if(n.longPos=!0,o>s.ep?(n.ep=o,n.af=Math.min(s.af+this._step,this._max)):(n.ep=s.ep,n.af=s.af),n.sar>i){for(n.longPos=!1,t=e-this._range+1,t=Math.max(t,r);t<e;t++){const e=a.getDataSource().getDataAt(t).high;o<e&&(o=e)}n.sar=o,n.ep=i,n.af=.02}}else if(n.longPos=!1,i<s.ep?(n.ep=i,n.af=Math.min(s.af+this._step,this._max)):(n.ep=s.ep,n.af=s.af),n.sar<o){for(n.longPos=!0,t=e-this._range+1,t=Math.max(t,r);t<e;t++){const e=a.getDataSource().getDataAt(t).low;i>e&&(i=e)}n.sar=i,n.ep=o,n.af=.02}}return n.sar}reserve(e,t){if(this._rid<e)for(let n=t;n>0;n--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});super.reserve(e,t)}clear(){super.clear(),this._range=-1}}class Indicator{constructor(){__publicField(this,"_rid"),__publicField(this,"_params"),__publicField(this,"_assigns"),__publicField(this,"_outputs"),this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}get exprEnv(){return ExprEnv.get()}get outputs(){return this._outputs}addParameter(e){this._params.push(e)}addAssign(e){this._assigns.push(e)}addOutput(e){this._outputs.push(e)}getParameterCount(){return this._params.length}getParameterAt(e){return this._params[e]}getOutputCount(){return this._outputs.length}getOutputAt(e){return this._outputs[e]}clear(){let e,t;for(this.exprEnv.setFirstIndex(-1),t=this._assigns.length,e=0;e<t;e++)this._assigns[e].clear();for(t=this._outputs.length,e=0;e<t;e++)this._outputs[e].clear()}reserve(e){let t,n;for(this._rid++,n=this._assigns.length,t=0;t<n;t++)this._assigns[t].reserve(this._rid,e);for(n=this._outputs.length,t=0;t<n;t++)this._outputs[t].reserve(this._rid,e)}execute(e,t){if(!(t<0)){this.exprEnv.setDataSource(e),ExprEnv.set(this.exprEnv);try{let e,n;for(n=this._assigns.length,e=0;e<n;e++)this._assigns[e].assign(t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].assign(t);this.exprEnv.getFirstIndex()<0&&this.exprEnv.setFirstIndex(t)}catch(n){if(this.exprEnv.getFirstIndex()>=0)throw n}}}getParameters(){const e=[];let t;const n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}setParameters(e){if(e instanceof Array&&e.length==this._params.length)for(const t in this._params)this._params[t].setValue(e[t])}}class Sar extends Indicator{constructor(){super();const e=new ConstExpr(5),t=new ConstExpr(.02),n=new ConstExpr(.02),a=new ConstExpr(.2);this.addOutput(new OutputExpr("sar",new SarExpr(e,t,n,a)))}}const sar=e=>{const t=new DataSource(e.map((e=>e.customValues)));ExprEnv.set(new ExprEnv(t));const n=new Sar,a=t.getDataCount();n.clear(),n.reserve(a);for(let i=0;i<a;i++)n.execute(t,i);const r=n.getOutputCount(),o=Object.create(null);for(let i=0;i<r;i++){const e=n.getOutputAt(i);o[e.getName()]=e._buf.slice()}return e.map(((e,t)=>{const n=Object.create(null);n.time=e.time;const a=o.sar;return isFinite(a[t])&&(n.study||(n.study=Object.create(null)),n.study.plot=a[t]),n}))};class AbsExpr extends OpAExpr{execute(e){return Math.abs(this._exprA.execute(e))}}class CloseExpr extends Expr{execute(e){return ExprEnv.get().getDataSource().getDataAt(e).close}}class OpABExpr extends Expr{constructor(e,t){super(),__publicField(this,"_exprA"),__publicField(this,"_exprB"),this._exprA=e,this._exprB=t}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t))}clear(){this._exprA.clear(),this._exprB.clear()}}class DivExpr extends OpABExpr{execute(e){const t=this._exprA.execute(e),n=this._exprB.execute(e);return 0==t?t:0==n?t>0?1e7:-1e7:t/n}}class RangeExpr extends OpABExpr{constructor(e,t){super(e,t),__publicField(this,"_buf"),__publicField(this,"_range"),this._range=-1,this._buf=[]}execute(e){this._range<0&&this.initRange();const t=this._buf[e].resultA=this._exprA.execute(e);return this._buf[e].result=this.calcResult(e,t)}getRange(){return this._range}initRange(){this._range=this._exprB.execute(0)}reserve(e,t){if(this._rid<e)for(let n=t;n>0;n--)this._buf.push({resultA:NaN,result:NaN});super.reserve(e,t)}clear(){super.clear(),this._range=-1,this._buf=[]}}class HhvExpr extends RangeExpr{calcResult(e,t){if(0==this._range)return NaN;const n=ExprEnv.get().getFirstIndex();if(n<0)return t;if(e>n){let a=t;const r=e-this._range+1;let o=Math.max(n,r);for(;o<e;o++){const e=this._buf[o];a<e.resultA&&(a=e.resultA)}return a}return t}}class LlvExpr extends RangeExpr{calcResult(e,t){if(0==this._range)return NaN;const n=ExprEnv.get().getFirstIndex();if(n<0)return t;if(e>n){let a=t;const r=e-this._range+1;let o=Math.max(n,r);for(;o<e;o++){const e=this._buf[o];a>e.resultA&&(a=e.resultA)}return a}return t}}class MaExpr extends RangeExpr{calcResult(e,t){if(0==this._range)return NaN;const n=ExprEnv.get().getFirstIndex();if(n<0)return t;if(e>n){let a=this._range;return a>=e+1-n?(a=e+1-n,this._buf[e-1].result*(1-1/a)+t/a):this._buf[e-1].result+(t-this._buf[e-a].resultA)/a}return t}}class OPManyExpr extends Expr{constructor(...e){super(),__publicField(this,"_exprs"),this._exprs=e}reserve(e,t){this._rid<e&&(this._rid=e,this._exprs.forEach((n=>n.reserve(e,t))))}clear(){this._exprs.forEach((e=>e.clear()))}}class MaxExpr extends OPManyExpr{execute(e){const t=this._exprs.map((t=>t.execute(e)));return Math.max.apply(null,t)}}class MulExpr extends OpABExpr{execute(e){return this._exprA.execute(e)*this._exprB.execute(e)}}class ParameterExpr extends Expr{constructor(e,t,n,a){super(),__publicField(this,"_name"),__publicField(this,"_minValue"),__publicField(this,"_maxValue"),__publicField(this,"_defaultValue"),__publicField(this,"_value"),this._name=e,this._minValue=t,this._maxValue=n,this._value=this._defaultValue=a}execute(e){return this._value}getMinValue(){return this._minValue}getMaxValue(){return this._maxValue}getDefaultValue(){return this._defaultValue}getValue(){return this._value}setValue(e){0==e?this._value=0:e<this._minValue?this._value=this._minValue:e>this._maxValue?this._value=this._maxValue:this._value=e}}class RefExpr extends OpABExpr{constructor(){super(...arguments),__publicField(this,"_offset",-1)}execute(e){if(this._offset<0&&(this._offset=this._exprB.execute(e),this._offset<0))throw"offset < 0";if((e-=this._offset)<0)throw"index < 0";const t=this._exprA.execute(e);if(isNaN(t))throw"NaN";return t}}class SmaExpr extends RangeExpr{constructor(e,t,n){super(e,t),__publicField(this,"_exprC"),__publicField(this,"_mul"),this._exprC=n}initRange(){super.initRange(),this._mul=this._exprC.execute(0)}calcResult(e,t){if(0==this._range)return NaN;const n=ExprEnv.get().getFirstIndex();if(n<0)return t;if(e>n){let a=this._range;return a>e+1-n&&(a=e+1-n),((a-1)*this._buf[e-1].result+t*this._mul)/a}return t}}class SubExpr extends OpABExpr{execute(e){return this._exprA.execute(e)-this._exprB.execute(e)}}class StochRSI extends Indicator{constructor(){super();const e=new ParameterExpr("N",3,100,14),t=new ParameterExpr("M",3,100,14),n=new ParameterExpr("P1",2,50,3),a=new ParameterExpr("P2",2,50,3);this.addParameter(e),this.addParameter(t),this.addParameter(n),this.addParameter(a);const r=new AssignExpr("LC",new RefExpr(new CloseExpr,new ConstExpr(1)));this.addAssign(r);const o=new AssignExpr("CLOSE_LC",new SubExpr(new CloseExpr,r));this.addAssign(o);const i=new AssignExpr("RSI",new MulExpr(new DivExpr(new SmaExpr(new MaxExpr(o,new ConstExpr(0)),e,new ConstExpr(1)),new SmaExpr(new AbsExpr(o),e,new ConstExpr(1))),new ConstExpr(100)));this.addAssign(i);const s=new OutputExpr("k",new MulExpr(new DivExpr(new MaExpr(new SubExpr(i,new LlvExpr(i,t)),n),new MaExpr(new SubExpr(new HhvExpr(i,t),new LlvExpr(i,t)),n)),new ConstExpr(100)));this.addOutput(s),this.addOutput(new OutputExpr("d",new MaExpr(s,a)))}}const stochrsi=e=>{const t=new DataSource(e.map((e=>e.customValues)));ExprEnv.set(new ExprEnv(t));const n=new StochRSI,a=t.getDataCount();n.clear(),n.reserve(a);for(let i=0;i<a;i++)n.execute(t,i);const r=n.getOutputCount(),o=Object.create(null);for(let i=0;i<r;i++){const e=n.getOutputAt(i);o[e.getName()]=e._buf.slice()}return e.map(((e,t)=>{const n=Object.create(null);n.time=e.time;const a=o.k,r=o.d;return isFinite(a[t])&&(n.study||(n.study=Object.create(null)),n.study.k=a[t]),isFinite(r[t])&&(n.study||(n.study=Object.create(null)),n.study.d=r[t]),n}))};class EmaExpr extends RangeExpr{constructor(){super(...arguments),__publicField(this,"_alpha")}initRange(){super.initRange(),this._alpha=2/(this._range+1)}calcResult(e,t){if(0==this._range)return NaN;const n=ExprEnv.get().getFirstIndex();if(n<0)return t;if(e>n){const n=this._buf[e-1];return this._alpha*(t-n.result)+n.result}return t}}class Trix extends Indicator{constructor(){super();const e=new ParameterExpr("N",2,100,18);this.addParameter(e);const t=new AssignExpr("MTR",new EmaExpr(new EmaExpr(new EmaExpr(new CloseExpr,e),e),e));this.addAssign(t);const n=new OutputExpr("trix",new MulExpr(new DivExpr(new SubExpr(t,new RefExpr(t,new ConstExpr(1))),new RefExpr(t,new ConstExpr(1))),new ConstExpr(1e4)));this.addOutput(n)}}const trix=e=>{const t=new DataSource(e.map((e=>e.customValues)));ExprEnv.set(new ExprEnv(t));const n=new Trix,a=t.getDataCount();n.clear(),n.reserve(a);for(let i=0;i<a;i++)n.execute(t,i);const r=n.getOutputCount(),o=Object.create(null);for(let i=0;i<r;i++){const e=n.getOutputAt(i);o[e.getName()]=e._buf.slice()}return e.map(((e,t)=>{const n=Object.create(null);n.time=e.time;const a=o.trix;return isFinite(a[t])&&(n.study||(n.study=Object.create(null)),n.study.plot=a[t]),n}))},vr=e=>{const t=[26,6],n=[];let a=0,r=0,o=0,i=0;return e.forEach(((s,l)=>{var u;const p=Object.create(null);p.time=s.time;const m=s.customValues.close,_=(e[l-1]??s).customValues.close,c=s.customValues.volume??0;if(m>_?a+=c:m<_?r+=c:o+=c,l>=t[0]-1){const s=o/2;p.study={},p.study.vr=r+s===0?0:(a+s)/(r+s)*100,i+=p.study.vr,l>=t[0]+t[1]-2&&(p.study.ma=i/t[1],i-=(null==(u=n[l-(t[1]-1)].study)?void 0:u.vr)??0);const m=e[l-(t[0]-1)],_=e[l-t[0]]??m,c=m.customValues.close,d=m.customValues.volume??0;c>_.customValues.close?a-=d:c<_.customValues.close?r-=d:o-=d}n.push(p)})),n};var api=Object.freeze({__proto__:null,ao:ao,bbi:bbi,bias:bias,brar:brar,calcTA:calcTA,cr:cr,dmi:dmi,ema:ema,emv:emv,initTA:initTA,kdj:kdj,ma:ma,mtm:mtm,psy:psy,pvt:pvt,sar:sar,stochrsi:stochrsi,trix:trix,vr:vr});expose(api);var __viteBrowserExternal=Object.freeze({__proto__:null})})();
