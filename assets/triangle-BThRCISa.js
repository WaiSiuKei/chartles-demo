import{bD as t,bL as i,y as e,z as n,L as a,aZ as s,u as o,cb as l,bK as h}from"./index-5gyre0hA.js";import{i as d}from"./line-Jebc4sVj.js";class r extends t{hitTest(t){if(null==this._data||this._data.points.length<2)return null;const[a,s]=this._data.points;let o=i(a,s,t);const l=h().line;if(o.distance<=l)return new e(n.MovePoint);if(3!==this._data.points.length)return null;const d=this._data.points[2];return o=i(s,d,t),o.distance<=l?new e(n.MovePoint):(o=i(d,a,t),o.distance<=l?new e(n.MovePoint):null)}drawImpl(t){if(null==this._data||this._data.points.length<2)return;const i=t.context,e=(this._data.lineStyle??a.solid)===a.solid?"round":"butt";i.lineCap=e,i.lineJoin="round",i.strokeStyle=this._data.color,i.lineWidth=this._data.lineWidth,void 0!==this._data.lineStyle&&s(i,this._data.lineStyle);const[n,h,r=h]=this._data.points,{mediaSize:c}=t;if(this._data.fillBackground&&Math.abs((n.x-r.x)*(h.y-r.y)-(h.x-r.x)*(n.y-r.y))>1e-10){let t=[new o(0,0),new o(c.width,0),new o(c.width,c.height),new o(0,c.height)];if(t=l(t,n,h,[h,r]),t=l(t,h,r,[r,n]),t=l(t,r,n,[n,h]),t&&t.length>1){i.save(),i.beginPath(),i.moveTo(t[0].x,t[0].y);for(let e=1;e<t.length;e++)i.lineTo(t[e].x,t[e].y);i.fillStyle=this._data.backColor,i.fill(),i.restore()}}const u=[],f=i.getLineDash().reduce(((t,i)=>t+i),0);[[n,h],[h,r],[r,n]].forEach((([t,i])=>{const e=d(t,i,!1,!1,c.width,c.height,f);e&&u.push(e)})),u.length>0&&(i.beginPath(),u.forEach((([t,e])=>{i.moveTo(t.x,t.y),i.lineTo(e.x,e.y)})),i.stroke())}}export{r as T};
