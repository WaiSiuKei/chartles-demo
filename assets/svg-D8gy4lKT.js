var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);import{e as i,O as s}from"./index-5gyre0hA.js";class r{constructor(t){e(this,"_originalViewBox"),this._originalViewBox=t}apply(t,e){const i=e.targetViewBox;t.translate(i.x,i.y),t.scale(i.width/this._originalViewBox.width,i.height/this._originalViewBox.height),t.beginPath(),t.rect(0,0,this._originalViewBox.width,this._originalViewBox.height),t.clip(),t.translate(-this._originalViewBox.x,-this._originalViewBox.y)}}class n{constructor(t){e(this,"_transformOperations"),this._transformOperations=t}apply(t){null!==this._transformOperations?(t.save(),x(t,this._transformOperations)):t.restore()}}function o(t,e){const i=t.getAttribute(e);return parseFloat(i??"")}function l(t){const e=t.getAttribute("gradientUnits");if("objectBoundingBox"===e)return void console.warn(`Unsupported linearGradient gradientUnits: ${e}`);const i=[],s=t.getElementsByTagName("stop");for(let c=0;c<s.length;++c){const t=s[c],e=o(t,"offset"),r=t.getAttribute("stop-color");null!==r&&i.push([Number.isFinite(e)?e:0,r])}const r=o(t,"x1"),n=o(t,"y1"),l=o(t,"x2"),a=o(t,"y2");return t=>{const e=t.createLinearGradient(r,n,l,a);for(const s of i)e.addColorStop(s[0],s[1]);return e}}function a(t,e){const i=t.split(/[,\s]+/g).map((t=>parseFloat(t.trim())));let s=0;for(const r of i){if(!Number.isFinite(r)&&s<e)return null;s+=1}return i}function c(t,e,i,s=Object.create(null)){const r=t.children;let o,l=s;if("g"===t.tagName||"svg"===t.tagName){l={...s,...p(t,i,!1)};const r=h(t);r&&(o=r,e.push(new n(o)))}for(let n=0;n<r.length;++n){const t=r[n];"defs"!==t.tagName&&c(t,e,i,l)}switch(t.tagName){case"g":case"svg":case"defs":break;case"path":e.push(new g(t,i,s));break;case"circle":e.push(new y(t,i,s));break;case"ellipse":e.push(new _(t,i,s));break;default:console.warn(`Unsupported tag name: ${t.tagName}`)}}const u=/([a-zA-Z]+)\((.*)\)/g;function h(t){var e;const i=null==(e=t.getAttribute("transform"))?void 0:e.toLowerCase();if(void 0===i)return null;const s=[];let r;u.lastIndex=0;do{if(r=u.exec(i),null!==r){const t=r[1],e=r[2];switch(t){case"matrix":{const t=a(e,6);null!==t&&s.push({type:"matrix",a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]});break}case"rotate":{const t=a(e,1);null!==t&&s.push({type:"rotate",a:t[0],x:t[1],y:t[2]});break}case"translate":{const t=a(e,1);null!==t&&s.push({type:"translate",x:t[0],y:t[1]});break}case"scale":{const t=a(e,1);null!==t&&s.push({type:"scale",x:t[0],y:t[1]});break}default:console.warn(`Unsupported transform operation: ${t}`)}}}while(null!==r);return 0===s.length?null:s}function p(t,e,s){const r=Object.create(null),n=t.getAttribute("fill");if(null!==n){const t=d(n);r.getFillStyle=null!==t?s=>i(e.getStyle(t,s)):()=>n}const l=t.getAttribute("stroke");if(null!==l){const t=d(l);r.getStrokeStyle=null!==t?s=>i(e.getStyle(t,s)):()=>l}const a=o(t,"stroke-width");Number.isFinite(a)&&(r.strokeWidth=a);const c=o(t,"opacity");Number.isFinite(c)&&(r.fillOpacity=c,r.strokeOpacity=c);const u=o(t,"stroke-opacity");Number.isFinite(u)&&(r.strokeOpacity=u);const p=o(t,"fill-opacity");if(Number.isFinite(p)&&(r.fillOpacity=p),s){const e=h(t);null!==e&&(r.transform=e)}return r}function d(t){const e=/^url\(#(.*)\)$/.exec(t);return(null==e?void 0:e[1])??null}class f{constructor(t,i,s){e(this,"_styleData"),this._styleData={...s,...p(t,i,!0)}}apply(t,e){if(!this._isValid())return;const{getFillStyle:i,getStrokeStyle:s,strokeWidth:r,transform:n,strokeOpacity:o,fillOpacity:l}=this._styleData,a=void 0!==n||void 0!==o||void 0!==l;a&&(t.save(),void 0!==n&&x(t,n)),this._render(t);const c=null==i?void 0:i(t);"none"!==c&&(e.doNotApplyColors||(void 0!==l&&(t.globalAlpha=l),t.fillStyle=c??"black"),this._fill(t));const u=null==s?void 0:s(t);void 0!==u&&"none"!==u&&(void 0!==r&&(t.lineWidth=r),e.doNotApplyColors||(void 0!==l&&(t.globalAlpha=l),t.strokeStyle=u),this._stroke(t)),a&&t.restore()}_fill(t){t.fill()}_stroke(t){t.stroke()}_isValid(){return!0}}class g extends f{constructor(t,i,s){super(t,i,s),e(this,"_path"),e(this,"_fillRule");const r=t.getAttribute("d");this._path=null!==r?new Path2D(r):null;const n=t.getAttribute("fill-rule");this._fillRule=null!==n?n:void 0}_render(){}_fill(t){t.fill(i(this._path),this._fillRule)}_stroke(t){t.stroke(i(this._path))}_isValid(){return null!==this._path}}class y extends f{constructor(t,i,s){super(t,i,s),e(this,"_cx"),e(this,"_cy"),e(this,"_r"),this._cx=o(t,"cx"),this._cy=o(t,"cy"),this._r=o(t,"r")}_render(t){t.beginPath(),t.arc(this._cx,this._cy,this._r,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._r)}}class _ extends f{constructor(t,i,s){super(t,i,s),e(this,"_cx"),e(this,"_cy"),e(this,"_rx"),e(this,"_ry"),this._cx=o(t,"cx"),this._cy=o(t,"cy"),this._rx=o(t,"rx"),this._ry=o(t,"ry")}_render(t){t.beginPath(),t.ellipse(this._cx,this._cy,this._rx,this._ry,0,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._rx)&&Number.isFinite(this._ry)}}function x(t,e){for(const i of e)switch(i.type){case"matrix":t.transform(i.a,i.b,i.c,i.d,i.e,i.f);break;case"rotate":void 0!==i.x&&void 0!==i.y&&t.translate(i.x,i.y),t.rotate(i.a*Math.PI/180),void 0!==i.x&&void 0!==i.y&&t.translate(-i.x,-i.y);break;case"scale":t.scale(i.x,void 0!==i.y?i.y:i.x);break;case"translate":t.translate(i.x,void 0!==i.y?i.y:0);break;default:s()}}let b;function m(t){const e=(b||(b=new DOMParser)).parseFromString(t,"application/xml"),s=[],n=e.getElementsByTagName("svg")[0],o=i(n.getAttribute("viewBox")).split(" ").map(parseFloat),a={x:o[0],y:o[1],width:o[2],height:o[3]};s.push(new r(a));let u={getStyle:()=>""};const h=n.getElementsByTagName("defs");return h.length>0&&(u=function(t){const e={},s=t.children;for(let n=0;n<s.length;++n){const t=s[n],r=t.getAttribute("id");r&&("linearGradient"===t.tagName?e[r]=i(l(t)):console.warn(`Unsupported defs tag: ${t.tagName}`))}const r=new WeakMap;return{getStyle:(t,i)=>{const s=e[t];if(!s)return;let n=r.get(i);if(void 0===n&&(n=new Map,r.set(i,n)),n.has(t))return n.get(t);const o=s(i);return n.set(t,o),o}}}(h[0])),c(n,s,u),{viewBox:()=>a,render:(t,e)=>{t.save();for(const i of s)i.apply(t,e);t.restore()}}}export{m as s};
