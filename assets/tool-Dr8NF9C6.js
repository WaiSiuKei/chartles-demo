var e=Object.defineProperty,t=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{L as i,A as s,bH as n}from"./index-5gyre0hA.js";import{T as r,a as o,c as l,D as a}from"./toolPaneView-BkZhzbTB.js";import{am as p}from"./index-iNH1zFVl.js";import{P as h,T as c}from"./axisPaneView-B6qY_qE1.js";import{C as d}from"./composite-CCMtJLBO.js";import{P as u}from"./polygon-D49cV0Ps.js";import"./baseTool-BM5mqL4_.js";import"./line-BKuOqRrm.js";class m extends r{constructor(){super(...arguments),t(this,"_renderer",new d(this._hitTestCollector)),t(this,"_poligonRenderer",new u)}renderer(){return this._renderer}_updateImpl(){this._renderer.clear();const e=this._source.properties();this._poligonRenderer.setData({points:this.points(),lineColor:e.lineColor,lineWidth:e.lineWidth,lineStyle:i.solid,leftEnd:e.leftEnd,rightEnd:e.rightEnd}),this._renderer.append(this._poligonRenderer),this.addAnchors(this._renderer)}}class _ extends o{constructor(){super(...arguments),t(this,"_lines",new m(this,this.model)),t(this,"_paneView",[this._lines]),t(this,"_priceAxisPaneViews",[new h(Object.create(null))]),t(this,"_timeAxisPaneViews",[new c(Object.create(null))])}pointsCount(){return 1/0}abort(){return this.updateProps({points:this.controlPoints.slice(0,this.controlPoints.length-1)}),this._props.points.length<2?l.Remove:l.None}updateAllViews(){if(!this.controlPoints.length)return;const e=[],t=[],i=[];for(let n=0;n<this.controlPoints.length;n++){const e=this.controlPoints[n],t=this.pointToScreenPoint(e);if(!t)return;i.push(new s(t,{pointIndex:n}))}e.length&&this._timeAxisPaneViews[0].update(this._calculateTimeAxisPaneViewsData(Math.min.apply(null,e),Math.max.apply(null,e))),t.length&&this._priceAxisPaneViews[0].update(this._calculatePriceAxisPaneViewData(Math.min.apply(null,t),Math.max.apply(null,t))),this._lines.update({points:i})}}class P extends a{constructor(){super(...arguments),t(this,"type",p)}createPrimitive(){return new _({id:this.id,points:[],lineColor:"#2962FFFF",lineWidth:2,leftEnd:n.Normal,rightEnd:n.Arrow},...this.resetArgs)}}export{P as PathTool};
