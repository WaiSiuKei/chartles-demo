var e=Object.defineProperty,t=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{al as i,Q as s,U as o,S as n,f as a,h as r,am as l,K as c,an as h,a0 as d,a1 as p,W as v,a8 as g,X as b,ao as u,aa as m,ap as y,aq as f,Z as x,ar as w,as as S,at as T,$ as A,o as C,ad as R,ae as k,au as z,av as _,d as P,e as B,aw as E,ah as M,ai as $}from"./index-5gyre0hA.js";function j(e,t){i.write(e,t)}var I=v('<button aria-label="ScrollToRealTime"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" class="svelte-1yhdz8y"><path fill="currentColor" d="M7.45 3.5 12.48 9l-5.03 5.49 1.1 1.01L14.52 9 8.55 2.49 7.45 3.5Z"></path><path fill="currentColor" d="m3.93 5.99 2.58 3-2.58 3.02 1.14.98 3.42-4-3.42-3.98L3.93 6Z"></path></svg></button> <!>',1);const L={hash:"svelte-1yhdz8y",code:".btn.svelte-1yhdz8y {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;position:absolute;right:82px;bottom:55px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;z-index:3;pointer-events:auto;transition:color 0.3s, visibility 0.4s, opacity 0.4s;box-shadow:var(--cl-dialog-shadow) 0px 2px 4px 0px;background-color:var(--cl-button-background);color:var(--cl-button-foreground);visibility:hidden;opacity:0;}.btn.svelte-1yhdz8y > svg:where(.svelte-1yhdz8y) {color:inherit;}\n@media (hover: hover) and (pointer: fine) {.btn.svelte-1yhdz8y:hover {color:var(--cl-primary);}\n}.visible.svelte-1yhdz8y {visibility:visible;opacity:1;}"};function V(e,t){p(t,!0),s(e,L);const i=o(C),{t:v}=n(),z=a.RightArrow|r.Alt|r.Shift,P=()=>{t.scrollToRealTime()};let B;l(i.registerCommandAndKeybindingRule({id:"hides",primary:z,weight:c.ChartContrib,handler(){P()}})),t.__registerComponent({getElement:()=>B}),h(e,{children:(e,i)=>{var s=I(),o=g(s);o.__click=P,b(o,(e=>B=e),(()=>B)),u(o,((e,t)=>null==j?void 0:j(e,t)),(()=>_.TimeScaleControl));var n=m(o,2);y(n,{yPos:"side",xPos:"side_start",children:(e,t)=>{{let t=k((()=>v("nav.scrollToRealtime")));f(e,{get content(){return R(t)},get keybinding(){return z}})}},$$slots:{default:!0}}),x((e=>T(o,1,e,"svelte-1yhdz8y")),[()=>w(S("btn",t.visible&&"visible"))]),A(e,s)},$$slots:{default:!0}}),d()}z(["click"]);var O=Object.getOwnPropertyDescriptor,X=(e,t)=>(i,s)=>t(i,s,e);let Z=class extends P{constructor(e,i){super(),t(this,"componentApi"),this.chartService=e;this.componentApi=this._register(i.showComponent({Component:V,props:{visible:!1,scrollToRealTime:()=>{e.getTimeScale().scrollToRealTime(1e3),setTimeout((()=>{this._checkBtnVisibility()}),1e3)}}})),this._register(e.onMouseMove((e=>{let t=!1;const i=this.chartService.getTimeScale().getVisibleLogicalRange();if(i){const e=i.to,s=this.chartService.mainSeriesApi.getSeries().barsProvider().lastIndex();!E(s)&&e<s&&(t=!0)}const s=this.isPointerNearBox(e);t&&s?this.componentApi.update({visible:!0}):this.componentApi.update({visible:!1})})))}_checkBtnVisibility(){let e=!1;const t=this.chartService.getTimeScale().getVisibleLogicalRange();if(t){const i=t.to,s=this.chartService.mainSeriesApi.getSeries().barsProvider().lastIndex();!E(s)&&i<s&&(e=!0)}this.componentApi.update({visible:e})}isPointerNearBox(e){const t=this.chartService.getModel();if(t.currentCreating||t.currentEditing)return!1;const i=B(e.asMouseInputEvent()).originEvent,s=this.componentApi.getInstance();if(!s)return!1;const o=s.getElement();if(!o)return!1;const n=o.getBoundingClientRect();return i.clientX>=n.left-100&&i.clientX<=n.right+100&&i.clientY>=n.top-0&&i.clientY<=n.bottom+100}};Z=((e,t,i,s)=>{for(var o,n=s>1?void 0:s?O(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(n=o(n)||n);return n})([X(0,M),X(1,$)],Z);export{Z as ScrollToRealTimeContrib};
