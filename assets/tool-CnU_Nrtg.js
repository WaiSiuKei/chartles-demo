var e=Object.defineProperty,i=(i,t,s)=>((i,t,s)=>t in i?e(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s)(i,"symbol"!=typeof t?t+"":t,s);import{H as t,y as s,z as r,A as n,L as o}from"./index-5gyre0hA.js";import{T as l,a as h,D as a}from"./toolPaneView-BkZhzbTB.js";import{Q as c}from"./index-iNH1zFVl.js";import{P as p}from"./priceLabelPriceAxisView-CKrbEFjY.js";import{T as d}from"./timeLabelTimeAxisView-DLVMuesT.js";import{C as w}from"./composite-CCMtJLBO.js";import{V as m}from"./verticalLine-EvGXqPib.js";import"./baseTool-BM5mqL4_.js";class u extends l{constructor(){super(...arguments),i(this,"_renderer",new w(this._hitTestCollector)),i(this,"_horizLineRenderer",new t(void 0,void 0,new s(r.MovePoint))),i(this,"_vertLineRenderer",new m)}renderer(){return this._renderer}_updateImpl(){this._renderer.clear();const e=this.points();if(0===(null==e?void 0:e.length))return;const i=this._source.properties();this._horizLineRenderer.setData({lineColor:i.linecolor,lineStyle:i.linestyle,lineWidth:i.linewidth,y:e[0].y}),this._vertLineRenderer.setData({lineColor:i.linecolor,lineStyle:i.linestyle,lineWidth:i.linewidth,x:e[0].x}),this._vertLineRenderer.setHitTest(new s(r.MovePoint)),this._renderer.append(this._horizLineRenderer),this._renderer.append(this._vertLineRenderer),this.addAnchors(this._renderer)}}class _ extends h{constructor(){super(...arguments),i(this,"_line",new u(this,this.model)),i(this,"_paneView",[this._line]),i(this,"_timeAxisViews",[new d(Object.create(null))]),i(this,"_priceAxisViews",[new p(Object.create(null))])}pointsCount(){return 1}updateAllViews(){if(!this.controlPoints.length)return;const e=[];for(let i=0;i<this.controlPoints.length;i++){const t=this.controlPoints[i],s=this.pointToScreenPoint(t);if(!s)return;e.push(new n(s,{pointIndex:i}))}this.controlPoints.forEach(((i,t)=>{this._timeAxisViews[t].update(this._calculateTimeAxisViewData(i.time,e[t].x)),this._priceAxisViews[t].update(this._calculatePriceAxisViewData(i.price,e[t].y))})),this._paneView[0].update({points:e})}priceAxisViews(){return this.properties().showPrice?this._priceAxisViews:[]}timeAxisViews(){return this.properties().showTime?this._timeAxisViews:[]}}class x extends a{constructor(){super(...arguments),i(this,"type",c)}createPrimitive(){return new _({id:this.id,points:[],linecolor:"#2A62FF",linestyle:o.solid,linewidth:2,showPrice:!0,showTime:!0},...this.resetArgs)}}export{x as CrossLineTool};
