const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Left-C5irHVyC.js","./index-iNH1zFVl.js","./baseTool-BM5mqL4_.js","./index-CC9hyIS3.js","./toolPaneView-BkZhzbTB.js","./adjustValue-DAhiMl70.js","./index-7EbfpDoB.js","./priceLabelPriceAxisView-CKrbEFjY.js","./composite-CCMtJLBO.js","./text-BhorOBkg.js","./text-BFLAaZ9z.js","./ctx-BQtFq0AI.js"])))=>i.map(i=>d[i]);
var t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,m,g,v,y,_,b=Object.defineProperty,w=t=>{throw TypeError(t)},x=(t,e,i)=>((t,e,i)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),S=(t,e,i)=>e.has(t)||w("Cannot "+i),T=(t,e,i)=>(S(t,e,"read from private field"),i?i.call(t):e.get(t)),C=(t,e,i)=>e.has(t)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),M=(t,e,i,n)=>(S(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),I=(t,e,i)=>(S(t,e,"access private method"),i);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const E={},A=function(t,e,i){let n=Promise.resolve();if(e&&e.length>0){let t=function(t){return Promise.all(t.map((t=>Promise.resolve(t).then((t=>({status:"fulfilled",value:t})),(t=>({status:"rejected",reason:t}))))))};const s=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),o=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));n=t(e.map((t=>{if(t=function(t,e){return new URL(t,e).href}(t,i),t in E)return;E[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(!!i)for(let i=s.length-1;i>=0;i--){const n=s[i];if(n.href===t&&(!e||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${t}"]${n}`))return;const r=document.createElement("link");return r.rel=e?"stylesheet":"modulepreload",e||(r.as="script"),r.crossOrigin="",r.href=t,o&&r.setAttribute("nonce",o),document.head.appendChild(r),e?new Promise(((e,i)=>{r.addEventListener("load",e),r.addEventListener("error",(()=>i(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function s(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return n.then((e=>{for(const t of e||[])"rejected"===t.status&&s(t.reason);return t().catch(s)}))};function D(t,e,i=0,n=t.length){let s=i,r=n;for(;s<r;){const i=Math.floor((s+r)/2);e(t[i])?r=i:s=i+1}return s}function k(t,e,i){const n=t.slice(0,i).sort(e);return function(t,e,i,n,s){for(const r=i.length;n<s;n++){const s=t[n];if(e(s,i[r-1])<0){i.pop();const t=D(i,(t=>e(s,t)<0));i.splice(t,0,s)}}}(t,e,n,i,t.length),n}function P(t,e,i,n=0,s=t.length){let r=s-n;for(;r>0;){const s=r>>1,o=n+s;i(e,t[o])?r=s:(n=o+1,r-=s+1)}return n}function O(t,e,i,n=0,s=t.length){return function(t,e,i,n,s){let r=s-n;for(;r>0;){const s=r>>1,o=n+s;i(t(o),e)?(n=o+1,r-=s+1):r=s}return n}((e=>t[e]),e,i,n,s)}const R={localize:function(t,e,...i){return function(t,e){let i;return i=0===e.length?t:t.replace(/\{(\d+)\}/g,((t,i)=>{const n=i[0];return void 0!==e[n]?e[n]:t})),i}(e,i)}};function L(t){return"string"==typeof t}function N(t){return"number"==typeof t&&!isNaN(t)}function F(t){return"number"==typeof t}function B(t){return void 0===t}function z(t){return B(t)||null===t}const V=new class{constructor(){x(this,"unexpectedErrorHandler"),x(this,"listeners"),this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout((()=>{if(t.stack)throw new Error(t.message+"\n\n"+t.stack);throw t}),0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach((e=>{e(t)}))}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}};function $(t){K(t)||V.onUnexpectedError(t)}const H="Canceled";function K(t){return t instanceof j||t instanceof Error&&t.name===H&&t.message===H}function W(t){return new Error(`Illegal argument: ${t}`)}class j extends Error{constructor(){super(H),this.name=this.message}}class U extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,U.prototype)}}function G(...t){throw t.length&&console.error(...t),new Error("not reached")}function q(...t){t.length&&console.error(...t)}function Y(t=null,e=!1){if(!t)return R.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(t)){const i=t.filter((t=>!!t)),n=Y(i[0],e);return i.length>1?R.localize("error.moreErrors","{0} ({1} errors in total)",n,i.length):n}if(L(t))return t;if(t.detail){const i=t.detail;if(i.error)return X(i.error,e);if(i.exception)return X(i.exception,e)}return t.stack?X(t,e):t.message?t.message:R.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function X(t,e){return e&&(t.stack||t.stacktrace)?R.localize("stackTrace.format","{0}: {1}",Q(t),Z(t.stack)||Z(t.stacktrace)):Q(t)}function Z(t){return Array.isArray(t)?t.join("\n"):t}function Q(t){return t.message||R.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}class J{constructor(){x(this,"map",new Map)}add(t){const e=t.id;this.map.has(e)&&q(),this.map.set(e,t)}remove(t){this.map.delete(t)}has(t){return this.map.has(t)}value(t){return this.map.get(t)}values(){return Array.from(this.map.values())}dispose(){this.map.clear()}}var tt=(t=>(t[t.Bar=0]="Bar",t[t.Candle=1]="Candle",t[t.Line=2]="Line",t[t.Area=3]="Area",t[t.HollowCandle=9]="HollowCandle",t))(tt||{});const et=new class extends J{};function it(t){return[0,1,9].includes(t)}const nt=[{id:tt.Candle,icon:()=>A((()=>import("./candle-B2imvc4p.js")),[],import.meta.url).then((t=>t.default)),label:"chartStyle.candle"},{id:tt.HollowCandle,icon:()=>A((()=>import("./hollowCandle-gr-rOHlm.js")),[],import.meta.url).then((t=>t.default)),label:"chartStyle.hollowCandle"},{id:tt.Bar,icon:()=>A((()=>import("./bar--2Qste-v.js")),[],import.meta.url).then((t=>t.default)),label:"chartStyle.bar"},{id:tt.Line,icon:()=>A((()=>import("./line-gHbPNxzf.js")),[],import.meta.url).then((t=>t.default)),label:"chartStyle.line"},{id:tt.Area,icon:()=>A((()=>import("./area-C8xevla7.js")),[],import.meta.url).then((t=>t.default)),label:"chartStyle.area"}];nt.forEach((t=>{et.add(t)}));const st=new class extends J{},rt={1:[{id:"s",slotCount:1,icon:()=>A((()=>import("./1-hg0hOKVQ.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"'}}],2:[{id:"2h",slotCount:2,icon:()=>A((()=>import("./2-1-D1KFAFc6.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"'}},{id:"2v",slotCount:2,icon:()=>A((()=>import("./2-2-Dz0pVSHP.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"'}}],3:[{id:"3v",slotCount:3,icon:()=>A((()=>import("./3-1-C6q3CetD.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"\n"c"'}},{id:"3h",slotCount:3,icon:()=>A((()=>import("./3-2-Qsy3nG39.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c"'}},{id:"3s",slotCount:3,icon:()=>A((()=>import("./3-3-BJFw6n7G.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"a c"'}},{id:"2-1",slotCount:3,icon:()=>A((()=>import("./3-4-DNypt6kg.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"c c"'}},{id:"1-2",slotCount:3,icon:()=>A((()=>import("./3-5-BT6ZBWBr.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a"\n"b c"'}},{id:"3r",slotCount:3,icon:()=>A((()=>import("./3-6-C75kEw94.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a c"\n"b c"'}}],4:[{id:"4",slotCount:4,icon:()=>A((()=>import("./4-1-D3IgP4Ot.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"c d"'}},{id:"4h",slotCount:4,icon:()=>A((()=>import("./4-4v-DbptxGdN.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d"'}},{id:"4v",slotCount:4,icon:()=>A((()=>import("./4-4h-9nBq7BfY.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"\n"c"\n"d"'}},{id:"4s",slotCount:4,icon:()=>A((()=>import("./4-4s-DxWaiAxI.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"a c"\n"a d"'}},{id:"4s-l",slotCount:4,icon:()=>A((()=>import("./4-4s-l-DNP-w4gW.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a d"\n"b d"\n"c d"'}},{id:"1-3",slotCount:4,icon:()=>A((()=>import("./4-1-3-CczCKQmJ.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a a"\n"b c d"'}},{id:"3-1",slotCount:4,icon:()=>A((()=>import("./4-3-1-CjnT9vQE.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c"\n"d d d"'}},{id:"2-2",slotCount:4,icon:()=>A((()=>import("./4-7-Cwo5wLnK.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b" 2fr\n"c c" 1fr\n"d d" 1fr\n'}},{id:"2-2-l",slotCount:4,icon:()=>A((()=>import("./4-8-p-AJyKW6.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c"\n"a b d" / 1fr 1fr 2fr\n'}}],5:[{id:"1-4",slotCount:5,icon:()=>A((()=>import("./5-1-l4SdXjrP.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a a a"\n"b c d e"\n'}},{id:"5s",slotCount:5,icon:()=>A((()=>import("./5-2-CkMfFQgr.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"a c"\n"a d"\n"a e"\n'}},{id:"2-3",slotCount:5,icon:()=>A((()=>import("./5-3-CRFGr-zx.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a a b b b"\n"c c d d e e"'}},{id:"3-2",slotCount:5,icon:()=>A((()=>import("./5-4-BxxevH5r.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a b b c c"\n"d d d e e e"'}},{id:"5h",slotCount:5,icon:()=>A((()=>import("./5-5-BmmAgGEt.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d e"'}},{id:"5v",slotCount:5,icon:()=>A((()=>import("./5-6-4X-pWRJ2.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"\n"c"\n"d"\n"e"\n'}}],6:[{id:"6",slotCount:6,icon:()=>A((()=>import("./6-1-1O609YGP.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c"\n"d e f"'}},{id:"6c",slotCount:6,icon:()=>A((()=>import("./6-2-me5VAm-I.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"c d"\n"e f"'}},{id:"2-4",slotCount:6,icon:()=>A((()=>import("./6-3-e94JYgu1.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a a b b"\n"c d e f"'}},{id:"6h",slotCount:6,icon:()=>A((()=>import("./6-4-Dzr0kPPR.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d e f"'}},{id:"6v",slotCount:6,icon:()=>A((()=>import("./6-5-BOL-dyGq.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"\n"c"\n"d"\n"e"\n"f"'}}],7:[{id:"7h",slotCount:7,icon:()=>A((()=>import("./7-1-CTzSOOLl.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d e f g"'}}],8:[{id:"8",slotCount:8,icon:()=>A((()=>import("./8-1-CNZ4Zko7.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d"\n"e f g h"\n'}},{id:"8c",slotCount:8,icon:()=>A((()=>import("./8-2-D5zi8oX4.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b"\n"c d"\n"e f"\n"g h"\n'}},{id:"8h",slotCount:8,icon:()=>A((()=>import("./8-3-CTzSOOLl.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a b c d e f g h"'}},{id:"8v",slotCount:8,icon:()=>A((()=>import("./8-4-BOL-dyGq.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n"a"\n"b"\n"c"\n"d"\n"e"\n"f"\n"g"\n"h"'}}],9:[{id:"9s",slotCount:9,icon:()=>A((()=>import("./9-1-CdvRRRmG.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c"\n  "d e f"\n  "g h i"'}},{id:"9h",slotCount:9,icon:()=>A((()=>import("./9-2-CTzSOOLl.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e f g h i"'}},{id:"9v",slotCount:9,icon:()=>A((()=>import("./9-3-BOL-dyGq.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a"\n  "b"\n  "c"\n  "d"\n  "e"\n  "f"\n  "g"\n  "h"\n  "i"'}}],10:[{id:"10c5",slotCount:10,icon:()=>A((()=>import("./10-1-DRFsuebB.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e"\n  "f g h i j"'}},{id:"10h",slotCount:10,icon:()=>A((()=>import("./10-2-CTzSOOLl.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e f g h i j"'}},{id:"10v",slotCount:10,icon:()=>A((()=>import("./10-3-BOL-dyGq.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a"\n  "b"\n  "c"\n  "d"\n  "e"\n  "f"\n  "g"\n  "h"\n  "i"\n  "j"'}}],12:[{id:"12c6",slotCount:12,icon:()=>A((()=>import("./12-1-_ejOHml3.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e f"\n  "g h i j k l"'}},{id:"12c4",slotCount:12,icon:()=>A((()=>import("./12-2-CKSICQFo.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c"\n  "d e f"\n  "g h i"\n  "j k l"'}}],14:[{id:"14c7",slotCount:14,icon:()=>A((()=>import("./14-1-BZLtMR2n.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e f g"\n  "h i j k l m n"'}}],16:[{id:"16c8",slotCount:16,icon:()=>A((()=>import("./16-1-BZLtMR2n.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d e f g h"\n  "i j k l m n o p"'}},{id:"16c4",slotCount:16,icon:()=>A((()=>import("./16-2-MV8R2rzs.js")),[],import.meta.url).then((t=>t.default)),layout:{gridTemplate:'\n  "a b c d"\n  "e f g h"\n  "i j k l"\n  "m n o p"'}}],get length(){const t=Object.keys(this).map((t=>parseInt(t))).filter(isFinite);return Math.max(...t)+1}};Array.from(rt).forEach((t=>{t&&t.forEach((t=>{st.add(t)}))}));const{userAgent:ot}=navigator,at=ot.indexOf("Windows")>=0,lt=ot.indexOf("Macintosh")>=0;ot.indexOf("Linux");const ct=ot.indexOf("Mobi")>=0,ht=(ot.indexOf("Macintosh")>=0||ot.indexOf("iPad")>=0||ot.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ut=!!(ot&&ot.indexOf("Android")>=0);var dt=(t=>(t[t.Windows=1]="Windows",t[t.Macintosh=2]="Macintosh",t[t.Linux=3]="Linux",t))(dt||{});const pt=lt||ht?2:at?1:3,ft=globalThis,mt="function"==typeof ft.postMessage&&!ft.importScripts,gt=(()=>{if(mt){const t=[];ft.addEventListener("message",(e=>{if(e.data&&e.data.vscodeScheduleAsyncWork)for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n.id===e.data.vscodeScheduleAsyncWork)return t.splice(i,1),void n.callback()}}));let e=0;return i=>{const n=++e;t.push({id:n,callback:i}),ft.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();function vt(t){return!!t&&"function"==typeof t.then}let yt;class _t{constructor(t,e){this.didTimeout=t,this.timeRemaining=e}}yt="function"!=typeof globalThis.requestIdleCallback||"function"!=typeof globalThis.cancelIdleCallback?(t,e,i)=>{gt((()=>{if(n)return;const t=Date.now()+15,i=new _t(!0,(()=>Math.max(0,t-Date.now())));e(Object.freeze(i))}));let n=!1;return{dispose(){n||(n=!0)}}}:(t,e,i)=>{const n=t.requestIdleCallback(e,"number"==typeof i?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,t.cancelIdleCallback(n))}}};class bt{constructor(t,e){x(this,"_executor"),x(this,"_handle"),x(this,"_didRun",!1),x(this,"_value"),x(this,"_error"),this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=yt(t,(()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class wt extends bt{constructor(t){super(globalThis,t)}}let xt=class{constructor(){x(this,"completeCallback"),x(this,"errorCallback"),x(this,"outcome"),x(this,"p"),this.p=new Promise(((t,e)=>{this.completeCallback=t,this.errorCallback=e}))}get isRejected(){var t;return 1===(null==(t=this.outcome)?void 0:t.outcome)}get isResolved(){var t;return 0===(null==(t=this.outcome)?void 0:t.outcome)}get isSettled(){return!!this.outcome}get value(){var t,e;return 0===(null==(t=this.outcome)?void 0:t.outcome)?null==(e=this.outcome)?void 0:e.value:void 0}complete(t){return new Promise((e=>{this.completeCallback(t),this.outcome={outcome:0,value:t},e()}))}error(t){return new Promise((e=>{this.errorCallback(t),this.outcome={outcome:1,value:t},e()}))}cancel(){return this.error(new j)}};class St{constructor(){x(this,"_isOpen"),x(this,"_promise"),x(this,"_completePromise"),this._isOpen=!1,this._promise=new Promise((t=>{this._completePromise=t}))}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}class Tt{constructor(t,e){x(this,"runner"),x(this,"timeoutToken"),x(this,"timeout"),x(this,"timeoutHandler"),this.timeoutToken=-1,this.runner=t,this.timeout=e,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(t=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)}get delay(){return this.timeout}set delay(t){this.timeout=t}isScheduled(){return-1!==this.timeoutToken}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var t;null==(t=this.runner)||t.call(this)}}var Ct;function Mt(t){Promise.resolve().then((()=>t()))}(Ct||(Ct={})).settled=async function(t){let e;const i=await Promise.all(t.map((t=>t.then((t=>t),(t=>{e||(e=t)})))));if(void 0!==e)throw e;return i};class It{constructor(t,e=()=>Date.now()){x(this,"lastIncrementTime",0),x(this,"value",0),this.interval=t,this.nowFn=e}increment(){const t=this.nowFn();return t-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=t,this.value=0),this.value++,this.value}}var Et=(t=>(t[t.Unknown=0]="Unknown",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Delete=46]="Delete",t[t.Digit0=48]="Digit0",t[t.Digit1=49]="Digit1",t[t.Digit2=50]="Digit2",t[t.Digit3=51]="Digit3",t[t.Digit4=52]="Digit4",t[t.Digit5=53]="Digit5",t[t.Digit6=54]="Digit6",t[t.Digit7=55]="Digit7",t[t.Digit8=56]="Digit8",t[t.Digit9=57]="Digit9",t[t.KeyA=65]="KeyA",t[t.KeyB=66]="KeyB",t[t.KeyC=67]="KeyC",t[t.KeyD=68]="KeyD",t[t.KeyE=69]="KeyE",t[t.KeyF=70]="KeyF",t[t.KeyG=71]="KeyG",t[t.KeyH=72]="KeyH",t[t.KeyI=73]="KeyI",t[t.KeyJ=74]="KeyJ",t[t.KeyK=75]="KeyK",t[t.KeyL=76]="KeyL",t[t.KeyM=77]="KeyM",t[t.KeyN=78]="KeyN",t[t.KeyO=79]="KeyO",t[t.KeyP=80]="KeyP",t[t.KeyQ=81]="KeyQ",t[t.KeyR=82]="KeyR",t[t.KeyS=83]="KeyS",t[t.KeyT=84]="KeyT",t[t.KeyU=85]="KeyU",t[t.KeyV=86]="KeyV",t[t.KeyW=87]="KeyW",t[t.KeyX=88]="KeyX",t[t.KeyY=89]="KeyY",t[t.KeyZ=90]="KeyZ",t[t.Meta=91]="Meta",t[t.Equal=187]="Equal",t[t.Minus=189]="Minus",t[t.Slash=191]="Slash",t[t.Backslash=220]="Backslash",t))(Et||{}),At=(t=>(t[t.CtrlCmd=2048]="CtrlCmd",t[t.Shift=1024]="Shift",t[t.Alt=512]="Alt",t[t.WinCtrl=256]="WinCtrl",t))(At||{});const Dt={8:"Backspace",9:"Tab",13:"Enter",46:"Del",27:"Esc",32:"Space",37:"←",39:"→",38:"↑",40:"↓",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",189:"-",187:"=",191:"/"};var kt;function Pt(t,e=pt){if("number"==typeof t){if(0===t)return null;const i=(65535&t)>>>0,n=(4294901760&t)>>>16;return new Lt(0!==n?[Ot(i,e),Ot(n,e)]:[Ot(i,e)])}{const i=[];for(let n=0;n<t.length;n++)i.push(Ot(t[n],e));return new Lt(i)}}function Ot(t,e){const i=!!(2048&t),n=!!(256&t),s=e===dt.Macintosh?n:i,r=!!(1024&t),o=!!(512&t),a=e===dt.Macintosh?i:n;return new Rt(s,r,o,a,255&t)}(kt||(kt={})).toString=function(t){return Dt[t]};class Rt{constructor(t,e,i,n,s){this.ctrlKey=t,this.shiftKey=e,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(t){return t instanceof Rt&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){return`K${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return this.keyCode===Et.Unknown||this.keyCode===Et.Ctrl||this.keyCode===Et.Meta||this.keyCode===Et.Alt||this.keyCode===Et.Shift}toKeybinding(){return new Lt([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===Et.Ctrl||this.shiftKey&&this.keyCode===Et.Shift||this.altKey&&this.keyCode===Et.Alt||this.metaKey&&this.keyCode===Et.Meta}}class Lt{constructor(t){if(x(this,"chords"),0===t.length)throw W("chords");this.chords=t}getHashCode(){let t="";for(let e=0,i=this.chords.length;e<i;e++)0!==e&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(null===t)return!1;if(this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}}const Nt=navigator.userAgent,Ft=Nt.indexOf("Firefox")>=0,Bt=Nt.indexOf("AppleWebKit")>=0,zt=!(Nt.indexOf("Chrome")>=0)&&Nt.indexOf("Safari")>=0;Nt.indexOf("Electron/");const Vt=lt?At.WinCtrl:At.CtrlCmd,$t=At.Alt,Ht=At.Shift,Kt=lt?At.CtrlCmd:At.WinCtrl;class Wt{constructor(t){var e;x(this,"_standardKeyboardEventBrand",!0),x(this,"browserEvent"),x(this,"target"),x(this,"ctrlKey"),x(this,"shiftKey"),x(this,"altKey"),x(this,"metaKey"),x(this,"altGraphKey"),x(this,"keyCode"),x(this,"code"),x(this,"_asKeybinding"),x(this,"_asKeyCodeChord");const i=t;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=null==(e=i.getModifierState)?void 0:e.call(i,"AltGraph"),this.keyCode=function(t){const e=t.keyCode;if(3===e);else if(Ft);else if(Bt){if(lt&&93===e)return Et.Meta;if(!lt&&92===e)return Et.Meta}return e}(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===Et.Ctrl,this.altKey=this.altKey||this.keyCode===Et.Alt,this.shiftKey=this.shiftKey||this.keyCode===Et.Shift,this.metaKey=this.metaKey||this.keyCode===Et.Meta,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=Et.Unknown;this.keyCode!==Et.Ctrl&&this.keyCode!==Et.Shift&&this.keyCode!==Et.Alt&&this.keyCode!==Et.Meta&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=Vt),this.altKey&&(e|=$t),this.shiftKey&&(e|=Ht),this.metaKey&&(e|=Kt),e|=t,e}_computeKeyCodeChord(){let t=Et.Unknown;return this.keyCode!==Et.Ctrl&&this.keyCode!==Et.Shift&&this.keyCode!==Et.Alt&&this.keyCode!==Et.Meta&&(t=this.keyCode),new Rt(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}}class jt{constructor(t){x(this,"browserEvent"),x(this,"leftButton"),x(this,"middleButton"),x(this,"rightButton"),x(this,"buttons"),x(this,"target"),x(this,"detail"),x(this,"posx"),x(this,"posy"),x(this,"ctrlKey"),x(this,"shiftKey"),x(this,"altKey"),x(this,"metaKey"),x(this,"timestamp"),this.timestamp=t.timeStamp,this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.posx=t.clientX,this.posy=t.clientY}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}function Ut(t){return e=>{(function(t){return 0===t.button})(e)&&t(e)}}const{getWindow:Gt}=function(){return{getWindow(t){var e;const i=t;if(null==(e=null==i?void 0:i.ownerDocument)?void 0:e.defaultView)return i.ownerDocument.defaultView.window;const n=t;return(null==n?void 0:n.view)?n.view.window:window}}}(),qt={CLICK:"click",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_LEAVE:"mouseleave",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_UP:"keyup",DRAG_START:"dragstart",DRAG:"drag",DROP:"drop",DRAG_END:"dragend"};class Yt{constructor(t,e,i,n){x(this,"_handler"),x(this,"_node"),x(this,"_type"),x(this,"_options"),this._node=t,this._type=e,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Xt(t,e,i,n){return new Yt(t,e,i,n)}const Zt=function(t,e,i,n){let s=i;return"click"===e||"mousedown"===e?s=function(t){return function(e){return t(new jt(e))}}(i):"keydown"!==e&&"keypress"!==e&&"keyup"!==e||(s=function(t){return function(e){return t(new Wt(e))}}(i)),Xt(t,e,s,n)};let Qt;class Jt{constructor(t,e=0){x(this,"_runner"),x(this,"priority"),x(this,"_canceled"),this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(oR){$(oR)}}static sort(t,e){return e.priority-t.priority}}function te(t,e){return yt(window,t,e)}function ee(t){if(null===t)throw new Error("Value is null");if(void 0===t)throw new Error("Value is undefined");if(!1===t)throw new Error("Value is falsy");return t}function ie(t,e="unexpected state"){if(!1===t||z(t)){throw"string"==typeof e?new U(`Assertion Failed: ${e}`):e}}function ne(t,e){const i=this;let n,s=!1;return function(){return s||(s=!0,n=t.apply(i,arguments)),n}}var se,re;function oe(t){return"object"==typeof t&&null!==t&&"function"==typeof t.dispose&&0===t.dispose.length}function ae(t){if(se.is(t)){const e=[];for(const i of t)if(i)try{i.dispose()}catch(oR){e.push(oR)}if(1===e.length)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}if(t)return t.dispose(),t}function le(t){return{dispose:ne((()=>{t()}))}}!function(){let t,e=!1;Qt=(i,n=0)=>{const s=new Jt(i,n);let r=t;return r||(r=[],t=r),r.push(s),e||(e=!0,window.requestAnimationFrame((()=>(()=>{e=!1;const i=t.slice();for(t.length=0;i.length>0;)i.sort(Jt.sort),i.shift().execute()})()))),s}}(),(re=se||(se={})).is=function(t){return t&&"object"==typeof t&&"function"==typeof t[Symbol.iterator]},re.first=function(t){return t[Symbol.iterator]().next().value};class ce{constructor(){x(this,"_toDispose",new Set),x(this,"_isDisposed",!1)}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{ae(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&this._toDispose.delete(t)}}x(ce,"DISABLE_DISPOSED_WARNING",!1);class he{constructor(){x(this,"_store",new ce),x(this,"_disposed",!1)}dispose(){this._disposed=!0,this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}}x(he,"None",Object.freeze({dispose(){}}));class ue{constructor(){x(this,"_store",new Map),x(this,"_isDisposed",!1)}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ae(this._store.values())}finally{this._store.clear()}}has(t){return this._store.has(t)}get size(){return this._store.size}get(t){return this._store.get(t)}set(t,e,i=!1){var n;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||null==(n=this._store.get(t))||n.dispose(),this._store.set(t,e)}deleteAndDispose(t){var e;null==(e=this._store.get(t))||e.dispose(),this._store.delete(t)}deleteAndLeak(t){const e=this._store.get(t);return this._store.delete(t),e}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const de=function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);const t=new Uint8Array(16),e=[];for(let i=0;i<256;i++)e.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let i=0,n="";return n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n+="-",n+=e[t[i++]],n+=e[t[i++]],n+="-",n+=e[t[i++]],n+=e[t[i++]],n+="-",n+=e[t[i++]],n+=e[t[i++]],n+="-",n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n+=e[t[i++]],n}}(),pe=!1;var fe,me,ge={exports:{}},ve={};var ye=(me||(me=1,ge.exports=(fe||(fe=1,function(t){function e(t,e){var i=t.length;t.push(e);t:for(;0<i;){var n=i-1>>>1,r=t[n];if(!(0<s(r,e)))break t;t[n]=e,t[i]=r,i=n}}function i(t){return 0===t.length?null:t[0]}function n(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var n=0,r=t.length,o=r>>>1;n<o;){var a=2*(n+1)-1,l=t[a],c=a+1,h=t[c];if(0>s(l,i))c<r&&0>s(h,l)?(t[n]=h,t[c]=i,n=c):(t[n]=l,t[a]=i,n=a);else{if(!(c<r&&0>s(h,i)))break t;t[n]=h,t[c]=i,n=c}}}return e}function s(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,p=!1,f=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function b(t){for(var s=i(c);null!==s;){if(null===s.callback)n(c);else{if(!(s.startTime<=t))break;n(c),s.sortIndex=s.expirationTime,e(l,s)}s=i(c)}}function w(t){if(m=!1,b(t),!f)if(null!==i(l))f=!0,S||(S=!0,x());else{var e=i(c);null!==e&&k(w,e.startTime-t)}}var x,S=!1,T=-1,C=5,M=-1;function I(){return!(!g&&t.unstable_now()-M<C)}function E(){if(g=!1,S){var e=t.unstable_now();M=e;var s=!0;try{t:{f=!1,m&&(m=!1,y(T),T=-1),p=!0;var r=d;try{e:{for(b(e),u=i(l);null!==u&&!(u.expirationTime>e&&I());){var o=u.callback;if("function"==typeof o){u.callback=null,d=u.priorityLevel;var a=o(u.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof a){u.callback=a,b(e),s=!0;break e}u===i(l)&&n(l),b(e)}else n(l);u=i(l)}if(null!==u)s=!0;else{var h=i(c);null!==h&&k(w,h.startTime-e),s=!1}}break t}finally{u=null,d=r,p=!1}s=void 0}}finally{s?x():S=!1}}}if("function"==typeof _)x=function(){_(E)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=E,x=function(){D.postMessage(null)}}else x=function(){v(E,0)};function k(e,i){T=v((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var i=d;d=e;try{return t()}finally{d=i}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=d;d=t;try{return e()}finally{d=i}},t.unstable_scheduleCallback=function(n,s,r){var o=t.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?o+r:o,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return n={id:h++,callback:s,priorityLevel:n,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(n.sortIndex=r,e(c,n),null===i(l)&&n===i(c)&&(m?(y(T),T=-1):m=!0,k(w,r-o))):(n.sortIndex=a,e(l,n),f||p||(f=!0,S||(S=!0,x()))),n},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(t){var e=d;return function(){var i=d;d=e;try{return t.apply(this,arguments)}finally{d=i}}}}(ve)),ve)),ge.exports);function _e(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function be(t,e){return t.width===e.width&&t.height===e.height}var we=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter((function(t){return t!==i}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(e){return e.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}();var xe=function(){function t(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=_e({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null===(n=null==i?void 0:i.allowResizeObserver)||void 0===n||n,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(e=this._devicePixelRatioObservable)||void 0===e||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return _e({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=_e(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(e){return e!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(e){return e!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;be(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach((function(n){return n.call(i,t,e)}))},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=_e(this._transformBitmapSize(t,this._canvasElementClientSize)),n=be(this.bitmapSize,i)?null:i;null===e&&null===n||null!==e&&null!==n&&be(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach((function(n){return n.call(i,t,e)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var e=new ResizeObserver((function(i){t(i.every((function(t){return"devicePixelContentBoxSize"in t}))),e.disconnect()}));e.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=Se(this._canvasElement);if(null===e)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new we(t)}(e),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,e;if(null!==this._canvasElement){var i=Se(this._canvasElement);if(null!==i){var n=null!==(e=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==e?e:i.devicePixelRatio,s=this._canvasElement.getClientRects(),r=void 0!==s[0]?function(t,e){return _e({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}(s[0],n):_e({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(r)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(e){var i=e.find((function(e){return e.target===t._canvasElement}));if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var n=i.devicePixelContentBoxSize[0],s=_e({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(s)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Se(t){return t.ownerDocument.defaultView}var Te=function(){function t(t,e,i){if(0===e.width||0===e.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ce(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var n=t.bitmapSize;if(0===n.width||0===n.height)return null;var s=t.canvasElement.getContext("2d",e);return null===s?null:new Te(s,i,n)}const Me={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Ie,Ee,Ae;function De(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function ke(t,e,i,n){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(i,e+s),t.lineTo(n,e+s),t.stroke()}function Pe(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Oe(t){if(void 0===t)throw new Error("Value is undefined");return t}function Re(t){if(null===t)throw new Error("Value is null");return t}function Le(t){return Re(Oe(t))}(Ae=Ie||(Ie={}))[Ae.Simple=0]="Simple",Ae[Ae.WithSteps=1]="WithSteps",Ae[Ae.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Ee||(Ee={}));let Ne=class{constructor(){this.t=[]}i(t,e,i){const n={h:t,l:e,o:!0===i};this.t.push(n)}_(t){const e=this.t.findIndex((e=>t===e.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,i){const n=[...this.t];this.t=this.t.filter((t=>!t.o)),n.forEach((n=>n.h(t,e,i)))}v(){return this.t.length>0}m(){this.t=[]}};function Fe(t,...e){for(const i of e)for(const e in i)void 0!==i[e]&&Object.prototype.hasOwnProperty.call(i,e)&&!["__proto__","constructor","prototype"].includes(e)&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:Fe(t[e],i[e]));return t}function Be(t){return"number"==typeof t&&isFinite(t)}function ze(t){return"number"==typeof t&&t%1==0}function Ve(t){return"string"==typeof t}function $e(t){return"boolean"==typeof t}function He(t){const e=t;if(!e||"object"!=typeof e)return e;let i,n,s;for(n in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(s=e[n],i[n]=s&&"object"==typeof s?He(s):s);return i}function Ke(t){return null!==t}function We(t){return null===t?void 0:t}const je="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ue(t,e,i){return void 0===e&&(e=je),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class Ge{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",I:"",B:0,V:0,A:0,L:0,O:0},this.N=t}F(){const t=this.M,e=this.W(),i=this.H();return t.P===e&&t.T===i||(t.P=e,t.T=i,t.k=Ue(e,i),t.L=2.5/12*e,t.B=t.L,t.V=e/12*t.C,t.A=e/12*t.C,t.O=0),t.R=this.U(),t.D=this.$(),t.I=this.q(),this.M}U(){return this.N.F().layout.textColor}$(){const t=this.N.F().rightPriceScale.background;return t?"solid"===t.type?t.color:t.topColor:this.N.Y()}q(){const t=this.N.F().rightPriceScale.background;return t?"solid"===t.type?t.color:t.bottomColor:this.N.j()}W(){return this.N.F().layout.fontSize}H(){return this.N.F().layout.fontFamily}}function qe(t){return t<0?0:t>255?255:Math.round(t)||0}function Ye(t){return.199*t[0]+.687*t[1]+.114*t[2]}class Xe{constructor(t,e){this.K=new Map,this.X=t,e&&(this.K=e)}G(t,e){if("transparent"===t)return t;const i=this.Z(t),n=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*n})`}J(t){const e=this.Z(t);return{tt:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,it:Ye(e)>160?"black":"white"}}st(t){return Ye(this.Z(t))}nt(t,e,i){const[n,s,r,o]=this.Z(t),[a,l,c,h]=this.Z(e),u=[qe(n+i*(a-n)),qe(s+i*(l-s)),qe(r+i*(c-r)),(d=o+i*(h-o),d<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4)];var d;return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`}Z(t){const e=this.K.get(t);if(e)return e;const i=function(t){const e=document.createElement("div");e.style.display="none",document.body.appendChild(e),e.style.color=t;const i=window.getComputedStyle(e).color;return document.body.removeChild(e),i}(t).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!i){if(this.X.length)for(const e of this.X){const i=e(t);if(i)return this.K.set(t,i),i}throw new Error(`Failed to parse color: ${t}`)}const n=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[4]?parseFloat(i[4]):1];return this.K.set(t,n),n}}class Ze{constructor(){this.et=[]}rt(t){this.et=t}ht(t,e){var i;for(const n of this.et){const s=null==(i=n.ht)?void 0:i.call(n,t,e);if(s)return s}return null}lt(t,e,i){this.et.forEach((n=>{n.lt(t,e,i)}))}}class Qe{lt(t,e,i){t.useBitmapCoordinateSpace((t=>this.ot(t,e,i)))}}class Je extends Qe{constructor(){super(...arguments),this._t=null}ut(t){this._t=t}ot({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this._t||null===this._t.ct)return;const n=this._t.ct,s=this._t,r=Math.max(1,Math.floor(e))%2/2,o=o=>{t.beginPath();for(let a=n.to-1;a>=n.from;--a){const n=s.dt[a],l=Math.round(n.ft*e)+r,c=n.vt*i,h=o*i+r;t.moveTo(l,c),t.arc(l,c,h,0,2*Math.PI)}t.fill()};s.wt>0&&(t.fillStyle=s.Mt,o(s.gt+s.wt)),t.fillStyle=s.bt,o(s.gt)}}function ti(){return{dt:[{ft:0,vt:0,xt:0,St:0}],bt:"",Mt:"",gt:0,wt:0,ct:null}}const ei={from:0,to:1};class ii{constructor(t,e,i){this.Ct=new Ze,this.Pt=[],this.kt=[],this.yt=!0,this.N=t,this.Tt=e,this.Rt=i,this.Ct.rt(this.Pt)}Dt(t){this.It(),this.yt=!0}Bt(){return this.yt&&(this.Vt(),this.yt=!1),this.Ct}It(){const t=this.Rt.Et();t.length!==this.Pt.length&&(this.kt=t.map(ti),this.Pt=this.kt.map((t=>{const e=new Je;return e.ut(t),e})),this.Ct.rt(this.Pt))}Vt(){const t=2===this.Tt.F().mode||!this.Tt.At(),e=this.Rt.zt(),i=this.Tt.Lt(),n=this.N.Ot();this.It(),e.forEach(((e,s)=>{const r=this.kt[s],o=e.Nt(i),a=e.Ft();!t&&null!==o&&e.At()&&null!==a?(r.bt=o.Wt,r.gt=o.gt,r.wt=o.Ht,r.dt[0].St=o.St,r.dt[0].vt=e.$t().Ut(o.St,a.qt),r.Mt=o.Yt??this.N.jt(r.dt[0].vt/e.$t().Kt()),r.dt[0].xt=i,r.dt[0].ft=n.Xt(i),r.ct=ei):r.ct=null}))}}class ni extends Qe{constructor(t){super(),this.Gt=t}ot({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.Gt)return;const s=this.Gt.Zt.At,r=this.Gt.Jt.At;if(!s&&!r)return;const o=Math.round(this.Gt.ft*i),a=Math.round(this.Gt.vt*n);t.lineCap="butt",s&&o>=0&&(t.lineWidth=Math.floor(this.Gt.Zt.wt*i),t.strokeStyle=this.Gt.Zt.R,t.fillStyle=this.Gt.Zt.R,De(t,this.Gt.Zt.Qt),function(t,e,i,n){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(e+s,0),t.lineTo(e+s,n),t.stroke()}(t,o,0,e.height)),r&&a>=0&&(t.lineWidth=Math.floor(this.Gt.Jt.wt*n),t.strokeStyle=this.Gt.Jt.R,t.fillStyle=this.Gt.Jt.R,De(t,this.Gt.Jt.Qt),ke(t,a,0,e.width))}}class si{constructor(t,e){this.yt=!0,this.ti={Zt:{wt:1,Qt:0,R:"",At:!1},Jt:{wt:1,Qt:0,R:"",At:!1},ft:0,vt:0},this.ii=new ni(this.ti),this.si=t,this.Rt=e}Dt(){this.yt=!0}Bt(t){return this.yt&&(this.Vt(),this.yt=!1),this.ii}Vt(){const t=this.si.At(),e=this.Rt.ni().F().crosshair,i=this.ti;if(2===e.mode)return i.Jt.At=!1,void(i.Zt.At=!1);i.Jt.At=t&&this.si.ei(this.Rt),i.Zt.At=t&&this.si.ri(),i.Jt.wt=e.horzLine.width,i.Jt.Qt=e.horzLine.style,i.Jt.R=e.horzLine.color,i.Zt.wt=e.vertLine.width,i.Zt.Qt=e.vertLine.style,i.Zt.R=e.vertLine.color,i.ft=this.si.hi(),i.vt=this.si.ai()}}function ri(t,e,i,n,s,r){t.fillRect(e+r,i,n-2*r,r),t.fillRect(e+r,i+s-r,n-2*r,r),t.fillRect(e,i,r,s),t.fillRect(e+n-r,i,r,s)}function oi(t,e,i,n,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,n,s),t.restore()}function ai(t,e,i,n,s,r){t.beginPath(),t.roundRect?t.roundRect(e,i,n,s,r):(t.lineTo(e+n-r[1],i),0!==r[1]&&t.arcTo(e+n,i,e+n,i+r[1],r[1]),t.lineTo(e+n,i+s-r[2]),0!==r[2]&&t.arcTo(e+n,i+s,e+n-r[2],i+s,r[2]),t.lineTo(e+r[3],i+s),0!==r[3]&&t.arcTo(e,i+s,e,i+s-r[3],r[3]),t.lineTo(e,i+r[0]),0!==r[0]&&t.arcTo(e,i,e+r[0],i,r[0]))}function li(t,e,i,n,s,r,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===r)return ai(t,e,i,n,s,a),t.fillStyle=r,t.fill(),void t.restore();const c=o/2;var h;ai(t,e+c,i+c,n-o,s-o,(h=-c,a.map((t=>0===t?t:t+h)))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==l&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function ci(t,e,i,n,s,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,n,s),t.restore()}class hi{constructor(t,e){this.ut(t,e)}ut(t,e){this.Gt=t,this.li=e}Kt(t,e){return this.Gt.At?t.P+t.L+t.B:0}lt(t,e,i,n){if(!this.Gt.At||0===this.Gt.oi.length)return;const s=this.Gt.R,r=this.li.tt,o=this.Gt._i,a=t.useBitmapCoordinateSpace((t=>{const a=t.context;a.font=e.k;const l=this.ui(t,e,i,n,o),c=l.ci;return l.di?li(a,c.fi,c.pi,c.mi,c.wi,r,c.Mi,[c.gt,0,0,c.gt],o||r):li(a,c.gi,c.pi,c.mi,c.wi,r,c.Mi,[0,c.gt,c.gt,0],o||r),this.Gt.bi&&(a.fillStyle=s,a.fillRect(c.gi,c.xi,c.Si-c.gi,c.Ci)),this.Gt.Pi&&(a.fillStyle=e.D,a.fillStyle=e.D,a.fillRect(l.di?c.ki-c.Mi:0,c.pi,c.Mi,c.yi-c.pi)),l}));t.useMediaCoordinateSpace((({context:t})=>{const i=a.Ti;t.font=e.k,t.textAlign=a.di?"right":"left",t.textBaseline="middle",t.fillStyle=s,t.fillText(this.Gt.oi,i.Ri,(i.pi+i.yi)/2+i.Di)}))}ui(t,e,i,n,s){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,h=this.Gt.bi||!this.Gt.Ii?e.C:0,u=this.Gt.Bi||s?e.S:0,d=e.L+this.li.Vi,p=e.B+this.li.Ei,f=e.V,m=e.A,g=this.Gt.oi,v=e.P,y=i.yMidCorrection(r,g),_=Math.ceil(i.measureText(r,g)),b=v+d+p,w=e.S+f+m+_+h,x=Math.max(1,Math.floor(c));let S=Math.round(b*c);S%2!=x%2&&(S+=1);const T=u>0?Math.max(1,Math.floor(u*l)):0,C=Math.round(w*l),M=Math.round(h*l),I=this.li.Ai??this.li.zi,E=Math.round(I*c)-Math.floor(.5*c),A=Math.floor(E+x/2-S/2),D=A+S,k="right"===n,P=k?a.width-u:u,O=k?o.width-T:T;let R,L,N;return k?(R=O-C,L=O-M,N=P-h-f-u):(R=O+C,L=O+M,N=P+h+f),{di:k,ci:{pi:A,xi:E,yi:D,mi:C,wi:S,gt:2*l,Mi:T,fi:R,gi:O,Si:L,Ci:x,ki:o.width},Ti:{pi:A/c,yi:D/c,Ri:N,Di:y}}}}class ui{constructor(t){this.Li={zi:0,tt:"#000",Ei:0,Vi:0},this.Oi={oi:"",At:!1,bi:!0,Ii:!1,Yt:"",R:"#FFF",Pi:!1,Bi:!1},this.Ni={oi:"",At:!1,bi:!1,Ii:!0,Yt:"",R:"#FFF",Pi:!0,Bi:!0},this.yt=!0,this.Fi=new(t||hi)(this.Oi,this.Li),this.Wi=new(t||hi)(this.Ni,this.Li)}oi(){return this.Hi(),this.Oi.oi}zi(){return this.Hi(),this.Li.zi}Dt(){this.yt=!0}Kt(t,e=!1){return Math.max(this.Fi.Kt(t,e),this.Wi.Kt(t,e))}Ui(){return this.Li.Ai||0}$i(t){this.Li.Ai=t}qi(){return this.Hi(),this.Oi.At||this.Ni.At}Yi(){return this.Hi(),this.Oi.At}Bt(t){return this.Hi(),this.Oi.bi=this.Oi.bi&&t.F().ticksVisible,this.Ni.bi=this.Ni.bi&&t.F().ticksVisible,this.Fi.ut(this.Oi,this.Li),this.Wi.ut(this.Ni,this.Li),this.Fi}ji(){return this.Hi(),this.Fi.ut(this.Oi,this.Li),this.Wi.ut(this.Ni,this.Li),this.Wi}Hi(){this.yt&&(this.Oi.bi=!0,this.Ni.bi=!1,this.Ki(this.Oi,this.Ni,this.Li))}}class di extends ui{constructor(t,e,i){super(),this.si=t,this.Xi=e,this.Gi=i}Ki(t,e,i){if(t.At=!1,2===this.si.F().mode)return;const n=this.si.F().horzLine;if(!n.labelVisible)return;const s=this.Xi.Ft();if(!this.si.At()||this.Xi.Zi()||null===s)return;const r=this.Xi.Ji().J(n.labelBackgroundColor);i.tt=r.tt,t.R=r.it;const o=2/12*this.Xi.P();i.Vi=o,i.Ei=o;const a=this.Gi(this.Xi);i.zi=a.zi,t.oi=this.Xi.Qi(a.St,s),t.At=!0}}const pi=/[1-9]/g;class fi{constructor(){this.Gt=null}ut(t){this.Gt=t}lt(t,e){if(null===this.Gt||!1===this.Gt.At||0===this.Gt.oi.length)return;const i=t.useMediaCoordinateSpace((({context:t})=>(t.font=e.k,Math.round(e.ts.measureText(t,Re(this.Gt).oi,pi)))));if(i<=0)return;const n=e.ss,s=i+2*n,r=s/2,o=this.Gt.ns;let a=this.Gt.zi,l=Math.floor(a-r)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-r)+.5):l+s>o&&(a-=Math.abs(o-(l+s)),l=Math.floor(a-r)+.5);const c=l+s,h=Math.ceil(0+e.S+e.C+e.L+e.P+e.B);t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:i,verticalPixelRatio:n})=>{const s=Re(this.Gt);t.fillStyle=s.tt;const r=Math.round(l*i),o=Math.round(0*n),a=Math.round(c*i),u=Math.round(h*n),d=Math.round(2*i);if(t.beginPath(),t.moveTo(r,o),t.lineTo(r,u-d),t.arcTo(r,u,r+d,u,d),t.lineTo(a-d,u),t.arcTo(a,u,a,u-d,d),t.lineTo(a,o),t.fill(),s.bi){const r=Math.round(s.zi*i),a=o,l=Math.round((a+e.C)*n);t.fillStyle=s.R;const c=Math.max(1,Math.floor(i)),h=Math.floor(.5*i);t.fillRect(r-h,a,c,l-a)}})),t.useMediaCoordinateSpace((({context:t})=>{const i=Re(this.Gt),s=0+e.S+e.C+e.L+e.P/2;t.font=e.k,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.R;const r=e.ts.yMidCorrection(t,"Apr0");t.translate(l+n,s+r),t.fillText(i.oi,0,0)}))}}class mi{constructor(t,e,i){this.yt=!0,this.ii=new fi,this.ti={At:!1,tt:"#4c525e",R:"white",oi:"",ns:0,zi:NaN,bi:!0},this.Tt=t,this.es=e,this.Gi=i}Dt(){this.yt=!0}Bt(){return this.yt&&(this.Vt(),this.yt=!1),this.ii.ut(this.ti),this.ii}Vt(){const t=this.ti;if(t.At=!1,2===this.Tt.F().mode)return;const e=this.Tt.F().vertLine;if(!e.labelVisible)return;const i=this.es.Ot();if(i.Zi())return;t.ns=i.ns();const n=this.Gi();if(null===n)return;t.zi=n.zi;const s=i.rs(this.Tt.Lt());t.oi=i.hs(Re(s)),t.At=!0;const r=this.es.Ji().J(e.labelBackgroundColor);t.tt=r.tt,t.R=r.it,t.bi=i.F().ticksVisible}}class gi{constructor(){this.ls=null,this._s=0}us(){return this._s}cs(t){this._s=t}$t(){return this.ls}ds(t){this.ls=t}fs(t){return[]}ps(){return[]}At(){return!0}}var vi;!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC",t[t.MagnetOHLCWeak=4]="MagnetOHLCWeak"}(vi||(vi={}));class yi extends gi{constructor(t,e){super(),this.Rt=null,this.vs=NaN,this.ws=0,this.Ms=!1,this.gs=new Map,this.bs=!1,this.xs=new WeakMap,this.Ss=new WeakMap,this.Cs=NaN,this.Ps=NaN,this.ks=NaN,this.ys=NaN,this.es=t,this.Ts=e,this.Rs=((t,e)=>i=>{const n=e(),s=t();if(i===Re(this.Rt).Ds())return{St:s,zi:n};{const t=Re(i.Ft());return{St:i.Is(n,t),zi:n}}})((()=>this.vs),(()=>this.Ps));const i=((t,e)=>()=>{const i=this.es.Ot().Bs(t()),n=e();return i&&Number.isFinite(n)?{xt:i,zi:n}:null})((()=>this.ws),(()=>this.hi()));this.Vs=new mi(this,t,i)}F(){return this.Ts}Es(t,e){this.ks=t,this.ys=e}As(){this.ks=NaN,this.ys=NaN}zs(){return this.ks}Ls(){return this.ys}Os(t,e,i){this.bs||(this.bs=!0),this.Ms=!0,this.Ns(t,e,i)}Fs(){return{x:this.Cs,y:this.Ps}}Ws(){return this.Rt}Lt(){return this.ws}hi(){return this.Cs}ai(){return this.Ps}At(){return this.Ms}Hs(){this.Ms=!1,this.Us(),this.vs=NaN,this.Cs=NaN,this.Ps=NaN,this.Rt=null,this.As(),this.$s()}qs(t){let e=this.xs.get(t);e||(e=new si(this,t),this.xs.set(t,e));let i=this.Ss.get(t);return i||(i=new ii(this.es,this,t),this.Ss.set(t,i)),[e,i]}ei(t){return t===this.Rt&&this.Ts.horzLine.visible}ri(){return this.Ts.vertLine.visible}Ys(t,e){this.Ms&&this.Rt===t||this.gs.clear();const i=[];return this.Rt===t&&i.push(this.js(this.gs,e,this.Rs)),i}ps(){return this.Ms?[this.Vs]:[]}Ks(){return this.Rt}$s(){this.es.Xs().forEach((t=>{var e,i;null==(e=this.xs.get(t))||e.Dt(),null==(i=this.Ss.get(t))||i.Dt()})),this.gs.forEach((t=>t.Dt())),this.Vs.Dt()}Gs(t){return t&&!t.Ds().Zi()?t.Ds():null}Ns(t,e,i){this.Zs(t,e,i)&&this.$s()}Zs(t,e,i){const n=this.Cs,s=this.Ps,r=this.vs,o=this.ws,a=this.Rt,l=this.Gs(i);this.ws=t,this.Cs=isNaN(t)?NaN:this.es.Ot().Xt(t),this.Rt=i;const c=null!==l?l.Ft():null;return null!==l&&null!==c?(this.vs=e,this.Ps=l.Ut(e,c)):(this.vs=NaN,this.Ps=NaN),n!==this.Cs||s!==this.Ps||o!==this.ws||r!==this.vs||a!==this.Rt}Us(){const t=this.es.Js().map((t=>t.Qs().lastIndex())).filter(Ke),e=0===t.length?null:Math.max(...t);this.ws=null!==e?e:NaN}js(t,e,i){let n=t.get(e);return void 0===n&&(n=new di(this,e,i),t.set(e,n)),n}}function _i(t){return"left"===t||"right"===t}class bi{constructor(t){this.tn=new Map,this.sn=[],this.nn=t}en(t,e){const i=(n=this.tn.get(t),s=e,void 0===n?s:{rn:Math.max(n.rn,s.rn),hn:n.hn||s.hn});var n,s;this.tn.set(t,i)}an(){return this.nn}ln(t){const e=this.tn.get(t);return void 0===e?{rn:this.nn}:{rn:Math.max(this.nn,e.rn),hn:e.hn}}_n(){this.un(),this.sn=[{cn:0}]}dn(t){this.un(),this.sn=[{cn:1,qt:t}]}fn(t){this.pn(),this.sn.push({cn:5,qt:t})}un(){this.pn(),this.sn.push({cn:6})}vn(){this.un(),this.sn=[{cn:4}]}mn(t){this.un(),this.sn.push({cn:2,qt:t})}wn(t){this.un(),this.sn.push({cn:3,qt:t})}Mn(){return this.sn}gn(t){for(const e of t.sn)this.bn(e);this.nn=Math.max(this.nn,t.nn),t.tn.forEach(((t,e)=>{this.en(e,t)}))}static xn(){return new bi(2)}static Sn(){return new bi(3)}bn(t){switch(t.cn){case 0:this._n();break;case 1:this.dn(t.qt);break;case 2:this.mn(t.qt);break;case 3:this.wn(t.qt);break;case 4:this.vn();break;case 5:this.fn(t.qt);break;case 6:this.pn()}}pn(){const t=this.sn.findIndex((t=>5===t.cn));-1!==t&&this.sn.splice(t,1)}}class wi{formatTickmarks(t){return t.map((t=>this.format(t)))}}function xi(t,e){if(!Be(t))return"n/a";if(!ze(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Si extends wi{constructor(t,e){if(super(),e||(e=1),Be(t)&&ze(t)||(t=100),t<0)throw new TypeError("invalid base");this.Xi=t,this.Cn=e,this.Pn()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.kn(t)}Pn(){if(this._fractionalLength=0,this.Xi>0&&this.Cn>0){let t=this.Xi;for(;t>1;)t/=10,this._fractionalLength++}}kn(t){const e=this.Xi/this.Cn;let i=Math.floor(t),n="";const s=void 0!==this._fractionalLength?this._fractionalLength:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this._fractionalLength);r>=e&&(r-=e,i+=1),n="."+xi(+r.toFixed(this._fractionalLength)*this.Cn,s)}else i=Math.round(i*e)/e,s>0&&(n="."+xi(0,s));return i.toFixed(0)+n}}class Ti extends Si{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Ci extends wi{constructor(t){super(),this.yn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.Tn(t):t<999995?e+this.Tn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Tn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Tn(t/1e9)+"B")}Tn(t){let e;const i=Math.pow(10,this.yn);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.yn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((t,e)=>e))}}const Mi=/[2-9]/g;class Ii{constructor(t=50){this.Rn=0,this.Dn=1,this.In=1,this.Bn={},this.Vn=new Map,this.En=t}reset(){this.Rn=0,this.Vn.clear(),this.Dn=1,this.In=1,this.Bn={}}measureText(t,e,i){return this.getMetrics(t,e,i).width}yMidCorrection(t,e,i){const n=this.getMetrics(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}getMetrics(t,e,i){const n=i||Mi,s=String(e).replace(n,"0");if(this.Vn.has(s))return Oe(this.Vn.get(s)).An;if(this.Rn===this.En){const t=this.Bn[this.In];delete this.Bn[this.In],this.Vn.delete(t),this.In++,this.Rn--}t.save(),t.textBaseline="middle";const r=t.measureText(s);return t.restore(),0===r.width&&e.length||(this.Vn.set(s,{An:r,zn:this.Dn}),this.Bn[this.Dn]=s,this.Rn++,this.Dn++),r}}class Ei{constructor(t){this.Ln=null,this.M=null,this.On="right",this.Nn=t}Fn(t,e,i){this.Ln=t,this.M=e,this.On=i}lt(t){null!==this.M&&null!==this.Ln&&this.Ln.lt(t,this.M,this.Nn,this.On)}}class Ai{constructor(t,e,i){this.Wn=t,this.Nn=new Ii(50),this.Hn=e,this.N=i,this.W=-1,this.ii=new Ei(this.Nn)}Bt(){const t=this.N.Un(this.Hn);if(null===t)return null;const e=t.$n(this.Hn)?t.qn():this.Hn.$t();if(null===e)return null;const i=t.Yn(e);if("overlay"===i)return null;const n=this.N.jn();return n.P!==this.W&&(this.W=n.P,this.Nn.reset()),this.ii.Fn(this.Wn.ji(),n,i),this.ii}}class Di extends Qe{constructor(){super(...arguments),this.Gt=null}ut(t){this.Gt=t}ht(t,e){var i;if(!(null==(i=this.Gt)?void 0:i.At))return null;const{vt:n,wt:s,Kn:r}=this.Gt;return e>=n-s-7&&e<=n+s+7?{hitTestData:this.Gt,externalId:r}:null}ot({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.Gt)return;if(!1===this.Gt.At)return;const s=Math.round(this.Gt.vt*n);s<0||s>e.height||(t.lineCap="butt",t.strokeStyle=this.Gt.R,t.lineWidth=Math.floor(this.Gt.wt*i),De(t,this.Gt.Qt),ke(t,s,0,e.width))}}class ki{constructor(t){this.Xn={vt:0,R:"rgba(0, 0, 0, 0)",wt:1,Qt:0,At:!1},this.Gn=new Di,this.yt=!0,this.Zn=t,this.Jn=t.ni(),this.Gn.ut(this.Xn)}Dt(){this.yt=!0}Bt(){return this.Zn.At()?(this.yt&&(this.Qn(),this.yt=!1),this.Gn):null}}class Pi extends ki{constructor(t){super(t)}Qn(){this.Xn.At=!1;const t=this.Zn.$t(),e=t.te().te;if(2!==e&&3!==e)return;const i=this.Zn.F();if(!i.baseLineVisible||!this.Zn.At())return;const n=this.Zn.Ft();null!==n&&(this.Xn.At=!0,this.Xn.vt=t.Ut(n.qt,n.qt),this.Xn.R=i.baseLineColor,this.Xn.wt=i.baseLineWidth,this.Xn.Qt=i.baseLineStyle)}}class Oi extends Qe{constructor(){super(...arguments),this.Gt=null}ut(t){this.Gt=t}ie(){return this.Gt}ot({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Gt;if(null===n)return;const s=Math.max(1,Math.floor(e)),r=s%2/2,o=Math.round(n.se.x*e)+r,a=n.se.y*i;t.fillStyle=n.ne,t.beginPath();const l=Math.max(2,1.5*n.ee)*e;t.arc(o,a,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.re,t.beginPath(),t.arc(o,a,n.gt*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=s,t.strokeStyle=n.he,t.beginPath(),t.arc(o,a,n.gt*e+s/2,0,2*Math.PI,!1),t.stroke()}}const Ri=[{ae:0,le:.25,oe:4,_e:10,ue:.25,ce:0,de:.4,fe:.8},{ae:.25,le:.525,oe:10,_e:14,ue:0,ce:0,de:.8,fe:0},{ae:.525,le:1,oe:14,_e:14,ue:0,ce:0,de:0,fe:0}];class Li{constructor(t){this.ii=new Oi,this.yt=!0,this.pe=!0,this.ve=performance.now(),this.me=this.ve-1,this.we=t}Me(){this.me=this.ve-1,this.Dt()}ge(){if(this.Dt(),2===this.we.F().lastPriceAnimation){const t=performance.now(),e=this.me-t;if(e>0)return void(e<650&&(this.me+=2600));this.ve=t,this.me=t+2600}}Dt(){this.yt=!0}be(){this.pe=!0}At(){return 0!==this.we.F().lastPriceAnimation}xe(){switch(this.we.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.me}}Bt(){return this.yt?(this.Vt(),this.yt=!1,this.pe=!1):this.pe&&(this.Se(),this.pe=!1),this.ii}Vt(){this.ii.ut(null);const t=this.we.ni().Ot(),e=t.Ce(),i=this.we.Ft();if(null===e||null===i)return;const n=this.we.Pe(!0);if(n.ke||!e.ye(n.Te))return;const s={x:t.Xt(n.Te),y:this.we.$t().Ut(n.St,i.qt)},r=n.R,o=this.we.F().lineWidth,a=this.Re(this.De(),r);this.ii.ut({ne:r,ee:o,re:a.re,he:a.he,gt:a.gt,se:s})}Se(){const t=this.ii.ie();if(null!==t){const e=this.Re(this.De(),t.ne);t.re=e.re,t.he=e.he,t.gt=e.gt}}De(){return this.xe()?performance.now()-this.ve:2599}Ie(t,e,i,n){const s=i+(n-i)*e;return this.we.ni().Ji().G(t,s)}Re(t,e){const i=t%2600/2600;let n;for(const l of Ri)if(i>=l.ae&&i<=l.le){n=l;break}Pe(void 0!==n,"Last price animation internal logic error");const s=(i-n.ae)/(n.le-n.ae);return{re:this.Ie(e,s,n.ue,n.ce),he:this.Ie(e,s,n.de,n.fe),gt:(r=s,o=n.oe,a=n._e,o+(a-o)*r)};var r,o,a}}class Ni extends ki{constructor(t){super(t)}Qn(){const t=this.Xn;t.At=!1;const e=this.Zn.F();if(!e.priceLineVisible||!this.Zn.At())return;const i=this.Zn.Pe(0===e.priceLineSource);i.ke||(t.At=!0,t.vt=i.zi,t.R=this.Zn.Be(i.R),t.wt=e.priceLineWidth,t.Qt=e.priceLineStyle)}}class Fi extends ui{constructor(t){super(),this.si=t}Ki(t,e,i){t.At=!1,e.At=!1;const n=this.si;if(!n.At())return;const s=n.F(),r=s.lastValueVisible,o=""!==n.Ve(),a=0===s.seriesLastValueMode,l=n.Pe(!1);if(l.ke)return;r&&(t.oi=this.Ee(l,r,a),t.At=0!==t.oi.length),(o||a)&&(e.oi=this.Ae(l,r,o,a),e.At=e.oi.length>0);const c=n.Be(l.R),h=this.si.ni().Ji().J(c);i.tt=h.tt,i.zi=l.zi,e.Yt=n.ni().jt(l.zi/n.$t().Kt()),t.Yt=c,t.R=h.it,e.R=h.it}Ae(t,e,i,n){let s="";const r=this.si.Ve();return i&&0!==r.length&&(s+=`${r} `),e&&n&&(s+=this.si.$t().ze()?t.Le:t.Oe),s.trim()}Ee(t,e,i){return e?i?this.si.$t().ze()?t.Oe:t.Le:t.oi:""}}function Bi(t,e,i,n){const s=Number.isFinite(e),r=Number.isFinite(i);return s&&r?t(e,i):s||r?s?e:i:n}class zi{constructor(t,e){this.Ne=t,this.Fe=e}We(t){return null!==t&&this.Ne===t.Ne&&this.Fe===t.Fe}He(){return new zi(this.Ne,this.Fe)}Ue(){return this.Ne}$e(){return this.Fe}qe(){return this.Fe-this.Ne}Zi(){return this.Fe===this.Ne||Number.isNaN(this.Fe)||Number.isNaN(this.Ne)}gn(t){return null===t?this:new zi(Bi(Math.min,this.Ue(),t.Ue(),-1/0),Bi(Math.max,this.$e(),t.$e(),1/0))}Ye(t){if(!Be(t))return;if(0==this.Fe-this.Ne)return;const e=.5*(this.Fe+this.Ne);let i=this.Fe-e,n=this.Ne-e;i*=t,n*=t,this.Fe=e+i,this.Ne=e+n}je(t){Be(t)&&(this.Fe+=t,this.Ne+=t)}Ke(){return{minValue:this.Ne,maxValue:this.Fe}}static Xe(t){return null===t?null:new zi(t.minValue,t.maxValue)}}class Vi{constructor(t,e){this.Ge=t,this.Ze=e||null}Je(){return this.Ge}Qe(){return this.Ze}Ke(){return{priceRange:null===this.Ge?null:this.Ge.Ke(),margins:this.Ze||void 0}}static Xe(t){return null===t?null:new Vi(zi.Xe(t.priceRange),t.margins)}}class $i extends ki{constructor(t,e){super(t),this.tr=e}Qn(){const t=this.Xn;t.At=!1;const e=this.tr.F();if(!this.Zn.At()||!e.lineVisible)return;const i=this.tr.ir();null!==i&&(t.At=!0,t.vt=i,t.R=e.color,t.wt=e.lineWidth,t.Qt=e.lineStyle,t.Kn=this.tr.F().id)}}class Hi extends ui{constructor(t,e){super(),this.we=t,this.tr=e}Ki(t,e,i){t.At=!1,e.At=!1;const n=this.tr.F(),s=n.axisLabelVisible,r=""!==n.title,o=this.we;if(!s||!o.At())return;const a=this.tr.ir();if(null===a)return;r&&(e.oi=n.title,e.At=!0),e.Yt=o.ni().jt(a/o.$t().Kt()),t.oi=this.sr(n.price),t.At=!0;const l=this.we.ni().Ji().J(n.axisLabelColor||n.color);i.tt=l.tt;const c=n.axisLabelTextColor||l.it;t.R=c,e.R=c,t._i=n.axisLabelBorderColor,i.zi=a}sr(t){return this.we.nr().format(t)}}class Ki{constructor(t,e){this.we=t,this.Ts=e,this.er=new $i(t,this),this.Wn=new Hi(t,this),this.rr=new Ai(this.Wn,t,t.ni())}hr(t){Fe(this.Ts,t),this.Dt(),this.we.ni().ar()}F(){return this.Ts}lr(){return this.er}_r(){return this.rr}ur(){return this.Wn}Dt(){this.er.Dt(),this.Wn.Dt()}ir(){const t=this.we,e=t.$t();if(t.ni().Ot().Zi()||e.Zi())return null;const i=t.Ft();return null===i?null:e.Ut(this.Ts.price,i.qt)}}class Wi extends gi{constructor(t){super(),this.es=t}ni(){return this.es}}const ji={Bar:(t,e,i,n)=>{const s=e.upColor,r=e.downColor,o=Re(t(i,n)),a=Le(o.value[0])<=Le(o.value[3]);return{cr:o.R??(a?s:r)}},Candlestick:(t,e,i,n)=>{const s=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,h=Re(t(i,n)),u=Le(h.value[0])<=Le(h.value[3]);return{cr:h.R??(u?s:r),dr:h.Yt??(u?o:a),pr:h.vr??(u?l:c)}},HollowCandlestick:(t,e,i,n)=>{const s=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,h=Re(t(i,n)),u=t(i-1),d=Le(h.value[0]),p=u?Le(u.value[3]):d,f=Le(h.value[3]),m=p<=f,g=f<d;return{cr:h.R??(m?s:r),dr:h.Yt??(m?o:a),pr:h.vr??(m?l:c),mr:g}},Custom:(t,e,i,n)=>({cr:Re(t(i,n)).R??e.color}),Area:(t,e,i,n)=>{const s=Re(t(i,n));return{cr:s.bt??e.lineColor,bt:s.bt??e.lineColor,wr:s.wr??e.topColor,Mr:s.Mr??e.bottomColor}},Baseline:(t,e,i,n)=>{const s=Re(t(i,n));return{cr:s.value[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:s.gr??e.topLineColor,br:s.br??e.bottomLineColor,Sr:s.Sr??e.topFillColor1,Cr:s.Cr??e.topFillColor2,Pr:s.Pr??e.bottomFillColor1,kr:s.kr??e.bottomFillColor2}},Line:(t,e,i,n)=>{const s=Re(t(i,n));return{cr:s.R??e.color,bt:s.R??e.color}},Histogram:(t,e,i,n)=>({cr:Re(t(i,n)).R??e.color})};class Ui{constructor(t){this.yr=(t,e)=>void 0!==e?e.qt:this.we.Qs().Tr(t),this.we=t,this.Rr=ji[t.Dr()]}Ir(t,e){return this.Rr(this.yr,this.we.F(),t,e)}}function Gi(t,e,i,n,s=0,r=e.length){let o=r-s;for(;0<o;){const r=o>>1,a=s+r;n(e[a],i)===t?(s=a+1,o-=r+1):o=r}return s}const qi=Gi.bind(null,!0),Yi=Gi.bind(null,!1);var Xi;!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(Xi||(Xi={}));const Zi=30;class Qi{constructor(){this.Br=[],this.Vr=new Map,this.Er=new Map,this.Ar=[]}zr(){return this.size()>0?this.Br[this.Br.length-1]:null}firstIndex(){return this.size()>0?this.Lr(0):null}lastIndex(){return this.size()>0?this.Lr(this.Br.length-1):null}size(){return this.Br.length}Zi(){return 0===this.size()}ye(t){return null!==this.Or(t,0)}Tr(t){return this.Nr(t)}Nr(t,e=0){const i=this.Or(t,e);return null===i?null:{...this.Fr(i),index:this.Lr(i)}}Wr(){return this.Br}Hr(t,e,i){if(this.Zi())return null;let n=null;for(const s of i)n=Ji(n,this.Ur(t,e,s));return n}ut(t){this.Er.clear(),this.Vr.clear(),this.Br=t,this.Ar=t.map((t=>t.index))}$r(){return this.Ar}fullRangeIterator(){return this.qr(0,this.size())}rangeIterator(t,e){const i=this.Yr(t),n=this.jr(e);return this.qr(i,n)}Lr(t){return this.Br[t].index}Fr(t){return this.Br[t]}Or(t,e){const i=this.Kr(t);if(null===i&&0!==e)switch(e){case-1:return this.Xr(t);case 1:return this.Gr(t);default:throw new TypeError("Unknown search mode")}return i}Xr(t){let e=this.Yr(t);return e>0&&(e-=1),e!==this.Br.length&&this.Lr(e)<t?e:null}Gr(t){const e=this.jr(t);return e!==this.Br.length&&t<this.Lr(e)?e:null}Kr(t){const e=this.Yr(t);return e===this.Br.length||t<this.Br[e].index?null:e}Yr(t){return qi(this.Br,t,((t,e)=>t.index<e))}jr(t){return Yi(this.Br,t,((t,e)=>t.index>e))}Zr(t,e,i){let n=null;for(let s=t;s<e;s++){const t=this.Br[s].value[i];Number.isNaN(t)||(null===n?n={Jr:t,Qr:t}:(t<n.Jr&&(n.Jr=t),t>n.Qr&&(n.Qr=t)))}return n}Ur(t,e,i){if(this.Zi())return null;let n=null;const s=Re(this.firstIndex()),r=Re(this.lastIndex()),o=Math.max(t,s),a=Math.min(e,r),l=Math.ceil(o/Zi)*Zi,c=Math.max(l,Math.floor(a/Zi)*Zi);{const t=this.Yr(o),s=this.jr(Math.min(a,l,e));n=Ji(n,this.Zr(t,s,i))}let h=this.Vr.get(i);void 0===h&&(h=new Map,this.Vr.set(i,h));for(let u=Math.max(l+1,o);u<c;u+=Zi){const t=Math.floor(u/Zi);let e=h.get(t);if(void 0===e){const n=this.Yr(t*Zi),s=this.jr((t+1)*Zi-1);e=this.Zr(n,s,i),h.set(t,e)}n=Ji(n,e)}{const t=this.Yr(c),e=this.jr(a);n=Ji(n,this.Zr(t,e,i))}return n}qr(t,e){let i=t-1;return{[Symbol.iterator](){return this},next:()=>(i+=1,i>=e?{done:!0,value:void 0}:{done:!1,value:this.Br[i]})}}}function Ji(t,e){return null===t?e:null===e?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}class tn{constructor(t){this.th=t}lt(t,e,i){this.th.draw(t)}ih(t,e,i){var n,s;null==(s=(n=this.th).drawBackground)||s.call(n,t)}}class en{constructor(t){this.Vn=null,this.sh=t}Bt(){var t;const e=this.sh.renderer();if(null===e)return null;if((null==(t=this.Vn)?void 0:t.nh)===e)return this.Vn.eh;const i=new tn(e);return this.Vn={nh:e,eh:i},i}rh(){var t,e;return(null==(e=(t=this.sh).zOrder)?void 0:e.call(t))??"normal"}}class nn{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}$s(){var t,e;null==(e=(t=this.ah).updateAllViews)||e.call(t)}qs(){var t,e,i;const n=(null==(e=(t=this.ah).paneViews)?void 0:e.call(t))??[];if((null==(i=this.hh)?void 0:i.nh)===n)return this.hh.eh;const s=n.map((t=>new en(t)));return this.hh={nh:n,eh:s},s}ht(t,e){var i,n;return(null==(n=(i=this.ah).hitTest)?void 0:n.call(i,t,e))??null}}let sn=class extends nn{fs(){return[]}};class rn{constructor(t){this.th=t}lt(t,e,i){this.th.draw(t)}ih(t,e,i){var n,s;null==(s=(n=this.th).drawBackground)||s.call(n,t)}}class on{constructor(t){this.Vn=null,this.sh=t}Bt(){var t;const e=this.sh.renderer();if(null===e)return null;if((null==(t=this.Vn)?void 0:t.nh)===e)return this.Vn.eh;const i=new rn(e);return this.Vn={nh:e,eh:i},i}rh(){var t,e;return(null==(e=(t=this.sh).zOrder)?void 0:e.call(t))??"normal"}}function an(t){var e,i,n,s;return{oi:t.text(),zi:t.coordinate(),Ai:null==(e=t.fixedCoordinate)?void 0:e.call(t),R:t.textColor(),tt:t.backColor(),_h:null==(i=t.borderColor)?void 0:i.call(t),At:(null==(n=t.visible)?void 0:n.call(t))??!0,bi:(null==(s=t.tickVisible)?void 0:s.call(t))??!0}}class ln{constructor(t,e){this.ii=new fi,this.uh=t,this.dh=e}Bt(){return this.ii.ut({ns:this.dh.ns(),...an(this.uh)}),this.ii}}class cn extends ui{constructor(t,e){super(),this.uh=t,this.Xi=e}Ki(t,e,i){const n=an(this.uh);i.tt=n.tt,t.R=n.R,t._i=n._h;const s=2/12*this.Xi.P();i.Vi=s,i.Ei=s,i.zi=n.zi,i.Ai=n.Ai,t.oi=n.oi,t.At=n.At,t.bi=n.bi}}class hn extends nn{constructor(t,e){super(t),this.fh=null,this.ph=null,this.mh=null,this.wh=null,this.we=e}ps(){var t,e,i;const n=(null==(e=(t=this.ah).timeAxisViews)?void 0:e.call(t))??[];if((null==(i=this.fh)?void 0:i.nh)===n)return this.fh.eh;const s=this.we.ni().Ot(),r=n.map((t=>new ln(t,s)));return this.fh={nh:n,eh:r},r}Ys(){var t,e,i;const n=(null==(e=(t=this.ah).priceAxisViews)?void 0:e.call(t))??[];if((null==(i=this.ph)?void 0:i.nh)===n)return this.ph.eh;const s=this.we.$t(),r=n.map((t=>new cn(t,s)));return this.ph={nh:n,eh:r},r}Mh(){var t,e,i;const n=(null==(e=(t=this.ah).priceAxisPaneViews)?void 0:e.call(t))??[];if((null==(i=this.mh)?void 0:i.nh)===n)return this.mh.eh;const s=n.map((t=>new on(t)));return this.mh={nh:n,eh:s},s}gh(){var t,e,i;const n=(null==(e=(t=this.ah).timeAxisPaneViews)?void 0:e.call(t))??[];if((null==(i=this.wh)?void 0:i.nh)===n)return this.wh.eh;const s=n.map((t=>new on(t)));return this.wh={nh:n,eh:s},s}bh(t,e){var i,n;return(null==(n=(i=this.ah).autoscaleInfo)?void 0:n.call(i,t,e))??null}}function un(t,e,i,n){t.forEach((t=>{e(t).forEach((t=>{t.rh()===i&&n.push(t)}))}))}function dn(t){return t.qs()}function pn(t){return t.Mh()}function fn(t){return t.gh()}const mn=["Area","Line","Baseline"];class gn extends Wi{constructor(t,e,i,n,s){super(t),this.Gt=new Qi,this.er=new Ni(this),this.xh=[],this.Sh=new Pi(this),this.Ch=null,this.Ph=null,this.kh=null,this.yh=[],this.Ts=i,this.Th=e;const r=new Fi(this);this.gs=[r],this.rr=new Ai(r,this,t),mn.includes(this.Th)&&(this.Ch=new Li(this)),this.Rh(),this.sh=n(this,this.ni(),s)}m(){null!==this.kh&&clearTimeout(this.kh)}Be(t){return this.Ts.priceLineColor||t}Pe(t){const e={ke:!0},i=this.$t();if(this.ni().Ot().Zi()||i.Zi()||this.Gt.Zi())return e;const n=this.ni().Ot().Ce(),s=this.Ft();if(null===n||null===s)return e;let r,o;if(t){const t=this.Gt.zr();if(null===t)return e;r=t,o=t.index}else{const t=this.Gt.Nr(n.ki(),-1);if(null===t)return e;if(r=this.Gt.Tr(t.index),null===r)return e;o=t.index}const a=r.value[3],l=this.Dh().Ir(o,{qt:r}),c=i.Ut(a,s.qt);return{ke:!1,St:a,oi:i.Qi(a,s.qt),Le:i.Ih(a),Oe:i.Bh(a,s.qt),R:l.cr,zi:c,Te:o}}Dh(){return null!==this.Ph||(this.Ph=new Ui(this)),this.Ph}F(){return this.Ts}hr(t){const e=t.priceScaleId;void 0!==e&&e!==this.Ts.priceScaleId&&this.ni().Vh(this,e),Fe(this.Ts,t),void 0!==t.priceFormat&&(this.Rh(),this.ni().Eh()),this.ni().Ah(this),this.ni().zh(),this.sh.Dt("options")}ut(t,e){this.Gt.ut(t),this.sh.Dt("data"),null!==this.Ch&&(e&&e.Lh?this.Ch.ge():0===t.length&&this.Ch.Me());const i=this.ni().Un(this);this.ni().Oh(i),this.ni().Ah(this),this.ni().zh(),this.ni().ar()}Nh(t){const e=new Ki(this,t);return this.xh.push(e),this.ni().Ah(this),e}Fh(t){const e=this.xh.indexOf(t);-1!==e&&this.xh.splice(e,1),this.ni().Ah(this)}Wh(){return this.xh}Dr(){return this.Th}Ft(){const t=this.Hh();return null===t?null:{qt:t.value[3],Uh:t.time}}Hh(){const t=this.ni().Ot().Ce();if(null===t)return null;const e=t.$h();return this.Gt.Nr(e,1)}Qs(){return this.Gt}qh(t){const e=this.Gt.Tr(t);return null===e?null:"Bar"===this.Th||"Candlestick"===this.Th||"Custom"===this.Th?{Yh:e.value[0],jh:e.value[1],Kh:e.value[2],Xh:e.value[3]}:e.value[3]}Gh(t){const e=[];un(this.yh,dn,"top",e);const i=this.Ch;return null!==i&&i.At()?(null===this.kh&&i.xe()&&(this.kh=setTimeout((()=>{this.kh=null,this.ni().Zh()}),0)),i.be(),e.unshift(i),e):e}qs(){const t=[];this.Jh()||t.push(this.Sh),t.push(this.sh,this.er);const e=this.xh.map((t=>t.lr()));return t.push(...e),un(this.yh,dn,"normal",t),t}Qh(){return this.ta(dn,"bottom")}ia(){return this.ta(dn,"under")}sa(t){return this.ta(pn,t)}na(t){return this.ta(fn,t)}ea(t,e){return this.yh.map((i=>i.ht(t,e))).filter((t=>null!==t))}fs(){return[this.rr,...this.xh.map((t=>t._r()))]}Ys(t,e){if(e!==this.ls&&!this.Jh())return[];const i=[...this.gs];for(const n of this.xh)i.push(n.ur());return this.yh.forEach((t=>{i.push(...t.Ys())})),i}ps(){const t=[];return this.yh.forEach((e=>{t.push(...e.ps())})),t}bh(t,e){if(void 0!==this.Ts.autoscaleInfoProvider){const i=this.Ts.autoscaleInfoProvider((()=>{const i=this.ra(t,e);return null===i?null:i.Ke()}));return Vi.Xe(i)}return this.ra(t,e)}nh(){const t=this.Ts.priceFormat;return t.base??1/t.minMove}nr(){return this.ha}$s(){var t;this.sh.Dt();for(const e of this.gs)e.Dt();for(const e of this.xh)e.Dt();this.er.Dt(),this.Sh.Dt(),null==(t=this.Ch)||t.Dt(),this.yh.forEach((t=>t.$s()))}$t(){return Re(super.$t())}Nt(t){if("Line"!==this.Th&&"Area"!==this.Th&&"Baseline"!==this.Th||!this.Ts.crosshairMarkerVisible)return null;const e=this.Gt.Tr(t);return null===e?null:{St:e.value[3],gt:this.aa(),Yt:this.la(),Ht:this.oa(),Wt:this._a(t)}}Ve(){return this.Ts.title}At(){return this.Ts.visible}ua(t){this.yh.push(new hn(t,this))}ca(t){this.yh=this.yh.filter((e=>e.oh()!==t))}da(){return this.yh.slice().map((t=>t.oh()))}fa(){if("Custom"===this.Th)return t=>this.sh.pa(t)}va(){if("Custom"===this.Th)return t=>this.sh.ma(t)}wa(){return this.Gt.$r()}Jh(){return!_i(this.$t().Ma())}ra(t,e){if(!ze(t)||!ze(e)||this.Gt.Zi())return null;const i="Line"===this.Th||"Area"===this.Th||"Baseline"===this.Th||"Histogram"===this.Th?[3]:[2,1],n=this.Gt.Hr(t,e,i);let s=null!==n?new zi(n.Jr,n.Qr):null,r=null;if("Histogram"===this.Dr()){const t=this.Ts.base,e=new zi(t,t);s=null!==s?s.gn(e):e}return this.yh.forEach((i=>{const n=i.bh(t,e);if(null==n?void 0:n.priceRange){const t=new zi(n.priceRange.minValue,n.priceRange.maxValue);s=null!==s?s.gn(t):t}(null==n?void 0:n.margins)&&(r=n.margins)})),new Vi(s,r)}aa(){switch(this.Th){case"Line":case"Area":case"Baseline":return this.Ts.crosshairMarkerRadius}return 0}la(){switch(this.Th){case"Line":case"Area":case"Baseline":{const t=this.Ts.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}oa(){switch(this.Th){case"Line":case"Area":case"Baseline":return this.Ts.crosshairMarkerBorderWidth}return 0}_a(t){switch(this.Th){case"Line":case"Area":case"Baseline":{const t=this.Ts.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.Dh().Ir(t).cr}Rh(){switch(this.Ts.priceFormat.type){case"custom":{const t=this.Ts.priceFormat.formatter;this.ha={format:t,formatTickmarks:this.Ts.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.ha=new Ci(this.Ts.priceFormat.precision);break;case"percent":this.ha=new Ti(this.Ts.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ts.priceFormat.precision);this.ha=new Si(t,this.Ts.priceFormat.minMove*t)}}null!==this.ls&&this.ls.ga()}ta(t,e){const i=[];return un(this.yh,t,e,i),i}}const vn=[3],yn=[0,1,2,3];class _n{constructor(t){this.Ts=t}ba(t,e,i){let n=t;if(0===this.Ts.mode)return n;const s=i.Ds(),r=s.Ft();if(null===r)return n;const o=s.Ut(t,r),a=i.xa().filter((t=>t instanceof gn)).reduce(((t,n)=>{if(i.$n(n)||!n.At())return t;const s=n.$t(),r=n.Qs();if(s.Zi()||!r.ye(e))return t;const o=r.Tr(e);if(null===o)return t;const a=Le(n.Ft()),l=1===this.Ts.mode?vn:yn;return t.concat(l.map((t=>s.Ut(o.value[t],a.qt))))}),[]);if(0===a.length)return n;a.sort(((t,e)=>Math.abs(t-o)-Math.abs(e-o)));const l=a[0],c=1===this.Ts.mode||3===this.Ts.mode,h=4===this.Ts.mode&&Math.abs(l-o)<50;return n=c||h?s.Is(l,r):t,n}}function bn(t,e,i){return Math.min(Math.max(t,e),i)}function wn(t,e,i){return e-t<=i}class xn extends Qe{constructor(){super(...arguments),this.Gt=null}ut(t){this.Gt=t}ot({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.Gt)return;const s=Math.max(1,Math.floor(i));var r,o;t.lineWidth=s,o=()=>{const r=Re(this.Gt);if(r.Sa){t.strokeStyle=r.Ca,De(t,r.Pa),t.beginPath();for(const n of r.ka){const r=Math.round(n.ya*i);t.moveTo(r,-s),t.lineTo(r,e.height+s)}t.stroke()}if(r.Ta){t.strokeStyle=r.Ra,De(t,r.Da),t.beginPath();for(const i of r.Ia){const r=Math.round(i.ya*n);t.moveTo(-s,r),t.lineTo(e.width+s,r)}t.stroke()}},(r=t).save(),r.lineWidth%2&&r.translate(.5,.5),o(),r.restore()}}class Sn{constructor(t){this.ii=new xn,this.yt=!0,this.Rt=t}Dt(){this.yt=!0}Bt(){if(this.yt){const t=this.Rt.ni().F().grid,e={Ta:t.horzLines.visible,Sa:t.vertLines.visible,Ra:t.horzLines.color,Ca:t.vertLines.color,Da:t.horzLines.style,Pa:t.vertLines.style,Ia:this.Rt.Ds().Ba(),ka:(this.Rt.ni().Ot().Ba()||[]).map((t=>({ya:t.coord})))};this.ii.ut(e),this.yt=!1}return this.ii}}class Tn{constructor(t){this.sh=new Sn(t)}lr(){return this.sh}}const Cn={Va:4,Ea:1e-4};function Mn(t,e){const i=100*(t-e)/e;return e<0?-i:i}function In(t,e){const i=Mn(t.Ue(),e),n=Mn(t.$e(),e);return new zi(i,n)}function En(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function An(t,e){const i=En(t.Ue(),e),n=En(t.$e(),e);return new zi(i,n)}function Dn(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const n=Math.log10(i+e.Ea)+e.Va;return t<0?-n:n}function kn(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const n=Math.pow(10,i-e.Va)-e.Ea;return t<0?-n:n}function Pn(t,e){if(null===t)return null;const i=Dn(t.Ue(),e),n=Dn(t.$e(),e);return new zi(i,n)}function On(t,e){if(null===t)return null;const i=kn(t.Ue(),e),n=kn(t.$e(),e);return new zi(i,n)}function Rn(t){if(null===t)return Cn;const e=Math.abs(t.$e()-t.Ue());if(e>=1||e<1e-15)return Cn;const i=Math.ceil(Math.abs(Math.log10(e))),n=Cn.Va+i;return{Va:n,Ea:1/Math.pow(10,n)}}class Ln{constructor(t,e){if(this.Aa=t,this.za=e,function(t){if(t<0)return!1;if(t>1e18)return!0;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.Aa))this.La=[2,2.5,2];else{this.La=[];for(let t=this.Aa;1!==t;){if(t%2==0)this.La.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.La.push(2,2.5),t/=5}if(this.La.length>100)throw new Error("something wrong with base")}}}Oa(t,e,i){const n=0===this.Aa?0:1/this.Aa;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,o=this.za[0];for(;;){const t=wn(s,n,1e-14)&&s>n+1e-14,e=wn(s,i*o,1e-14),a=wn(s,1,1e-14);if(!(t&&e&&a))break;s/=o,o=this.za[++r%this.za.length]}if(s<=n+1e-14&&(s=n),s=Math.max(1,s),this.La.length>0&&(a=s,Math.abs(a-1)<1e-14))for(r=0,o=this.La[0];wn(s,i*o,1e-14)&&s>n+1e-14;)s/=o,o=this.La[++r%this.La.length];var a;return s}}class Nn{constructor(t,e,i,n){this.Na=[],this.Xi=t,this.Aa=e,this.Fa=i,this.Wa=n}Oa(t,e){if(t<e)throw new Error("high < low");const i=this.Xi.Kt(),n=(t-e)*this.Ha()/i,s=new Ln(this.Aa,[2,2.5,2]),r=new Ln(this.Aa,[2,2,2.5]),o=new Ln(this.Aa,[2.5,2,2]),a=[];return a.push(s.Oa(t,e,n),r.Oa(t,e,n),o.Oa(t,e,n)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(a)}Ua(){const t=this.Xi,e=t.Ft();if(null===e)return void(this.Na=[]);const i=t.Kt(),n=this.Fa(i-1,e),s=this.Fa(0,e),r=this.Xi.F().entireTextOnly?this.$a()/2:0,o=r,a=i-1-r,l=Math.max(n,s),c=Math.min(n,s);if(l===c)return void(this.Na=[]);const h=this.Oa(l,c);if(this.qa(e,h,l,c,o,a),t.Ya()&&this.ja(h,c,l)){const t=this.Xi.Ka();this.Xa(e,h,o,a,t,2*t)}const u=this.Na.map((t=>t.Ga)),d=this.Xi.Za(u);for(let p=0;p<this.Na.length;p++)this.Na[p].Ja=d[p]}Ba(){return this.Na}$a(){return this.Xi.P()}Ha(){return Math.ceil(2.5*this.$a())}qa(t,e,i,n,s,r){const o=this.Na,a=this.Xi;let l=i%e;l+=l<0?e:0;const c=i>=n?1:-1;let h=null,u=0;for(let d=i-l;d>n;d-=e){const i=this.Wa(d,t,!0);null!==h&&Math.abs(i-h)<this.Ha()||i<s||i>r||(u<o.length?(o[u].ya=i,o[u].Ja=a.Qa(d),o[u].Ga=d):o.push({ya:i,Ja:a.Qa(d),Ga:d}),u++,h=i,a.tl()&&(e=this.Oa(d*c,n)))}o.length=u}Xa(t,e,i,n,s,r){const o=this.Na,a=this.il(t,i,s,r),l=this.il(t,n,-r,-s),c=this.Wa(0,t,!0)-this.Wa(e,t,!0);o.length>0&&o[0].ya-a.ya<c/2&&o.shift(),o.length>0&&l.ya-o[o.length-1].ya<c/2&&o.pop(),o.unshift(a),o.push(l)}il(t,e,i,n){const s=(i+n)/2,r=this.Fa(e+i,t),o=this.Fa(e+n,t),a=Math.min(r,o),l=Math.max(r,o),c=Math.max(.1,this.Oa(l,a)),h=this.Fa(e+s,t),u=h-h%c,d=this.Wa(u,t,!0);return{Ja:this.Xi.Qa(u),ya:d,Ga:u}}ja(t,e,i){let n=Le(this.Xi.Je());return this.Xi.tl()&&(n=On(n,this.Xi.sl())),n.Ue()-e<t&&i-n.$e()<t}}function Fn(t){return t.slice().sort(((t,e)=>Re(t.us())-Re(e.us())))}var Bn;!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Bn||(Bn={}));const zn=new Ti,Vn=new Si(100,1);class $n{constructor(t,e,i,n,s){this.nl=0,this.el=null,this.Ge=null,this.rl=null,this.hl={al:!1,ll:null},this.ol=!1,this._l=0,this.ul=0,this.cl=new Ne,this.dl=new Ne,this.fl=[],this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.Ml=null,this.ha=Vn,this.gl=Rn(null),this.bl=t,this.Ts=e,this.xl=i,this.Sl=n,this.Cl=s,this.Pl=new Nn(this,100,this.kl.bind(this),this.yl.bind(this))}Ma(){return this.bl}F(){return this.Ts}hr(t){if(Fe(this.Ts,t),this.ga(),void 0!==t.mode&&this.Tl({te:t.mode}),void 0!==t.scaleMargins){const e=Oe(t.scaleMargins.top),i=Oe(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Rl(),this.ml=null}}Dl(){return this.Ts.autoScale}Il(){return this.ol}tl(){return 1===this.Ts.mode}ze(){return 2===this.Ts.mode}Bl(){return 3===this.Ts.mode}sl(){return this.gl}te(){return{hn:this.Ts.autoScale,Vl:this.Ts.invertScale,te:this.Ts.mode}}Tl(t){const e=this.te();let i=null;void 0!==t.hn&&(this.Ts.autoScale=t.hn),void 0!==t.te&&(this.Ts.mode=t.te,2!==t.te&&3!==t.te||(this.Ts.autoScale=!0),this.hl.al=!1),1===e.te&&t.te!==e.te&&(function(t,e){if(null===t)return!1;const i=kn(t.Ue(),e),n=kn(t.$e(),e);return isFinite(i)&&isFinite(n)}(this.Ge,this.gl)?(i=On(this.Ge,this.gl),null!==i&&this.El(i)):this.Ts.autoScale=!0),1===t.te&&t.te!==e.te&&(i=Pn(this.Ge,this.gl),null!==i&&this.El(i));const n=e.te!==this.Ts.mode;n&&(2===e.te||this.ze())&&this.ga(),n&&(3===e.te||this.Bl())&&this.ga(),void 0!==t.Vl&&e.Vl!==t.Vl&&(this.Ts.invertScale=t.Vl,this.Al()),this.dl.p(e,this.te())}zl(){return this.dl}P(){return this.xl.fontSize}Kt(){return this.nl}Ll(t){this.nl!==t&&(this.nl=t,this.Rl(),this.ml=null)}Ol(){if(this.el)return this.el;const t=this.Kt()-this.Nl()-this.Fl();return this.el=t,t}Je(){return this.Wl(),this.Ge}El(t,e){const i=this.Ge;(e||null===i&&null!==t||null!==i&&!i.We(t))&&(this.ml=null,this.Ge=t)}Hl(t){this.El(t),this.Ul(null!==t)}Zi(){return this.Wl(),0===this.nl||!this.Ge||this.Ge.Zi()}$l(t){return this.Vl()?t:this.Kt()-1-t}Ut(t,e){return this.ze()?t=Mn(t,e):this.Bl()&&(t=En(t,e)),this.yl(t,e)}ql(t,e,i){this.Wl();const n=this.Fl(),s=Re(this.Je()),r=s.Ue(),o=s.$e(),a=this.Ol()-1,l=this.Vl(),c=a/(o-r),h=void 0===i?0:i.from,u=void 0===i?t.length:i.to,d=this.Yl();for(let p=h;p<u;p++){const i=t[p],s=i.St;if(isNaN(s))continue;let o=s;null!==d&&(o=d(i.St,e));const a=n+c*(o-r),h=l?a:this.nl-1-a;i.vt=h}}jl(t,e,i){this.Wl();const n=this.Fl(),s=Re(this.Je()),r=s.Ue(),o=s.$e(),a=this.Ol()-1,l=this.Vl(),c=a/(o-r),h=void 0===i?0:i.from,u=void 0===i?t.length:i.to,d=this.Yl();for(let p=h;p<u;p++){const i=t[p];let s=i.Yh,o=i.jh,a=i.Kh,h=i.Xh;null!==d&&(s=d(i.Yh,e),o=d(i.jh,e),a=d(i.Kh,e),h=d(i.Xh,e));let u=n+c*(s-r),f=l?u:this.nl-1-u;i.Kl=f,u=n+c*(o-r),f=l?u:this.nl-1-u,i.Xl=f,u=n+c*(a-r),f=l?u:this.nl-1-u,i.Gl=f,u=n+c*(h-r),f=l?u:this.nl-1-u,i.Zl=f}}Is(t,e){const i=this.kl(t,e);return this.Jl(i,e)}Jl(t,e){let i=t;return this.ze()?(n=i,(s=e)<0&&(n=-n),i=n/100*s+s):this.Bl()&&(i=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(i,e)),i;var n,s}xa(){return this.fl}Et(){return this.vl||(this.vl=Fn(this.fl)),this.vl}Ql(t){-1===this.fl.indexOf(t)&&(this.fl.push(t),this.ga(),this.io())}so(t){const e=this.fl.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.fl.splice(e,1),0===this.fl.length&&(this.Tl({hn:!0}),this.El(null)),this.ga(),this.io()}Ft(){let t=null;for(const e of this.fl){const i=e.Ft();null!==i&&(null===t||i.Uh<t.Uh)&&(t=i)}return null===t?null:t.qt}Vl(){return this.Ts.invertScale}Ba(){const t=null===this.Ft();if(null!==this.ml&&(t||this.ml.no===t))return this.ml.Ba;this.Pl.Ua();const e=this.Pl.Ba();return this.ml={Ba:e,no:t},this.cl.p(),e}eo(){return this.cl}ro(t){this.ze()||this.Bl()||null===this.wl&&null===this.rl&&(this.Zi()||(this.wl=this.nl-t,this.rl=Re(this.Je()).He()))}ho(t){if(this.ze()||this.Bl())return;if(null===this.wl)return;this.Tl({hn:!1}),(t=this.nl-t)<0&&(t=0);let e=(this.wl+.2*(this.nl-1))/(t+.2*(this.nl-1));const i=Re(this.rl).He();e=Math.max(e,.1),i.Ye(e),this.El(i)}ao(){this.ze()||this.Bl()||(this.wl=null,this.rl=null)}lo(t){this.Dl()||null===this.Ml&&null===this.rl&&(this.Zi()||(this.Ml=t,this.rl=Re(this.Je()).He()))}oo(t){if(this.Dl())return;if(null===this.Ml)return;const e=Re(this.Je()).qe()/(this.Ol()-1);let i=t-this.Ml;this.Vl()&&(i*=-1);const n=i*e,s=Re(this.rl).He();s.je(n),this.El(s,!0),this.ml=null}_o(){this.Dl()||null!==this.Ml&&(this.Ml=null,this.rl=null)}nr(){return this.ha||this.ga(),this.ha}Qi(t,e){switch(this.Ts.mode){case 2:return this.uo(Mn(t,e));case 3:return this.nr().format(En(t,e));default:return this.sr(t)}}Qa(t){switch(this.Ts.mode){case 2:return this.uo(t);case 3:return this.nr().format(t);default:return this.sr(t)}}Za(t){switch(this.Ts.mode){case 2:return this.co(t);case 3:return this.nr().formatTickmarks(t);default:return this.do(t)}}Ih(t){return this.sr(t,Re(this.pl).nr())}Bh(t,e){return t=Mn(t,e),this.uo(t,zn)}fo(){return this.fl}po(t){this.hl={ll:t,al:!1}}$s(){this.fl.forEach((t=>t.$s()))}Ya(){return this.Ts.ensureEdgeTickMarksVisible&&this.Dl()}Ka(){return this.P()/2}ga(){this.ml=null;let t=1/0;this.pl=null;for(const i of this.fl)i.us()<t&&(t=i.us(),this.pl=i);let e=100;null!==this.pl&&(e=Math.round(this.pl.nh())),this.ha=Vn,this.ze()?(this.ha=zn,e=100):this.Bl()?(this.ha=new Si(100,1),e=100):null!==this.pl&&(this.ha=this.pl.nr()),this.Pl=new Nn(this,e,this.kl.bind(this),this.yl.bind(this)),this.Pl.Ua()}io(){this.vl=null}Ji(){return this.Cl}Ul(t){this.ol=t}Nl(){return this.Vl()?this.Ts.scaleMargins.bottom*this.Kt()+this.ul:this.Ts.scaleMargins.top*this.Kt()+this._l}Fl(){return this.Vl()?this.Ts.scaleMargins.top*this.Kt()+this._l:this.Ts.scaleMargins.bottom*this.Kt()+this.ul}Wl(){this.hl.al||(this.hl.al=!0,this.vo())}Rl(){this.el=null}yl(t,e){if(this.Wl(),this.Zi())return 0;t=this.tl()&&t?Dn(t,this.gl):t;const i=Re(this.Je()),n=this.Fl()+(this.Ol()-1)*(t-i.Ue())/i.qe();return this.$l(n)}kl(t,e){if(this.Wl(),this.Zi())return 0;const i=this.$l(t),n=Re(this.Je()),s=n.Ue()+n.qe()*((i-this.Fl())/(this.Ol()-1));return this.tl()?kn(s,this.gl):s}Al(){this.ml=null,this.Pl.Ua()}vo(){if(this.Il()&&!this.Dl())return;const t=this.hl.ll;if(null===t)return;let e=null;const i=this.fo();let n=0,s=0;for(const a of i){if(!a.At())continue;const i=a.Ft();if(null===i)continue;const r=a.bh(t.$h(),t.ki());let o=r&&r.Je();if(null!==o){switch(this.Ts.mode){case 1:o=Pn(o,this.gl);break;case 2:o=In(o,i.qt);break;case 3:o=An(o,i.qt)}if(e=null===e?o:e.gn(Re(o)),null!==r){const t=r.Qe();null!==t&&(n=Math.max(n,t.above),s=Math.max(s,t.below))}}}if(this.Ya()&&(n=Math.max(n,this.Ka()),s=Math.max(s,this.Ka())),n===this._l&&s===this.ul||(this._l=n,this.ul=s,this.ml=null,this.Rl()),null!==e){if(e.Ue()===e.$e()){const t=this.pl,i=5*(null===t||this.ze()||this.Bl()?1:1/t.nh());this.tl()&&(e=On(e,this.gl)),e=new zi(e.Ue()-i,e.$e()+i),this.tl()&&(e=Pn(e,this.gl))}if(this.tl()){const t=On(e,this.gl),i=Rn(t);if(r=i,o=this.gl,r.Va!==o.Va||r.Ea!==o.Ea){const n=null!==this.rl?On(this.rl,this.gl):null;this.gl=i,e=Pn(t,i),null!==n&&(this.rl=Pn(n,i))}}this.El(e)}else null===this.Ge&&(this.El(new zi(-.5,.5)),this.gl=Rn(null));var r,o}Yl(){return this.ze()?Mn:this.Bl()?En:this.tl()?t=>Dn(t,this.gl):null}mo(t,e,i){return void 0===e?(void 0===i&&(i=this.nr()),i.format(t)):e(t)}wo(t,e,i){return void 0===e?(void 0===i&&(i=this.nr()),i.formatTickmarks(t)):e(t)}sr(t,e){return this.mo(t,this.Sl.priceFormatter,e)}do(t,e){const i=this.Sl.priceFormatter;return this.wo(t,this.Sl.tickmarksPriceFormatter??(i?t=>t.map(i):void 0),e)}uo(t,e){return this.mo(t,this.Sl.percentageFormatter,e)}co(t,e){const i=this.Sl.percentageFormatter;return this.wo(t,this.Sl.tickmarksPercentageFormatter??(i?t=>t.map(i):void 0),e)}}function Hn(t){return t instanceof gn}class Kn{constructor(t,e){this.fl=[],this.Mo=new Map,this.nl=0,this.bo=0,this.xo=1,this.vl=null,this.So=!1,this.Co=new Ne,this.yh=[],this.dh=t,this.es=e,this.Po=new Tn(this);const i=e.F();this.ko=this.yo("left",i.leftPriceScale),this.To=this.yo("right",i.rightPriceScale),this.ko.zl().i(this.Ro.bind(this,this.ko),this),this.To.zl().i(this.Ro.bind(this,this.To),this),this.Do(i)}Do(t){if(t.leftPriceScale&&this.ko.hr(t.leftPriceScale),t.rightPriceScale&&this.To.hr(t.rightPriceScale),t.localization&&(this.ko.ga(),this.To.ga()),t.overlayPriceScales){const e=Array.from(this.Mo.values());for(const i of e){const e=Re(i[0].$t());e.hr(t.overlayPriceScales),t.localization&&e.ga()}}}Io(t){switch(t){case"left":return this.ko;case"right":return this.To}return this.Mo.has(t)?Oe(this.Mo.get(t))[0].$t():null}m(){this.ni().Bo().u(this),this.ko.zl().u(this),this.To.zl().u(this),this.fl.forEach((t=>{t.m&&t.m()})),this.yh=this.yh.filter((t=>{const e=t.oh();return e.detached&&e.detached(),!1})),this.Co.p()}Vo(){return this.xo}Eo(t){this.xo=t}ni(){return this.es}ns(){return this.bo}Kt(){return this.nl}Ao(t){this.bo=t,this.zo()}Ll(t){this.nl=t,this.ko.Ll(t),this.To.Ll(t),this.fl.forEach((e=>{if(this.$n(e)){const i=e.$t();null!==i&&i.Ll(t)}})),this.zo()}Lo(t){this.So=t}Oo(){return this.So}No(){return this.fl.filter(Hn)}xa(){return this.fl}$n(t){const e=t.$t();return null===e||this.ko!==e&&this.To!==e}Ql(t,e,i){this.Fo(t,e,i?t.us():this.fl.length)}so(t,e){const i=this.fl.indexOf(t);Pe(-1!==i,"removeDataSource: invalid data source"),this.fl.splice(i,1),e||this.fl.forEach(((t,e)=>t.cs(e)));const n=Re(t.$t()).Ma();if(this.Mo.has(n)){const e=Oe(this.Mo.get(n)),i=e.indexOf(t);-1!==i&&(e.splice(i,1),0===e.length&&this.Mo.delete(n))}const s=t.$t();s&&s.xa().indexOf(t)>=0&&(s.so(t),this.Wo(s)),this.vl=null}Yn(t){return t===this.ko?"left":t===this.To?"right":"overlay"}Ho(){return this.ko}Uo(){return this.To}$o(t,e){t.ro(e)}qo(t,e){t.ho(e),this.zo()}Yo(t){t.ao()}jo(t,e){t.lo(e)}Ko(t,e){t.oo(e),this.zo()}Xo(t){t._o()}zo(){this.fl.forEach((t=>{t.$s()}))}Ds(){let t=null;return this.es.F().rightPriceScale.visible&&0!==this.To.xa().length?t=this.To:this.es.F().leftPriceScale.visible&&0!==this.ko.xa().length?t=this.ko:0!==this.fl.length&&(t=this.fl[0].$t()),null===t&&(t=this.To),t}qn(){let t=null;return this.es.F().rightPriceScale.visible?t=this.To:this.es.F().leftPriceScale.visible&&(t=this.ko),t}Wo(t){null!==t&&t.Dl()&&this.Go(t)}Zo(t){const e=this.dh.Ce();t.Tl({hn:!0}),null!==e&&t.po(e),this.zo()}Jo(){this.Go(this.ko),this.Go(this.To)}Qo(){this.Wo(this.ko),this.Wo(this.To),this.fl.forEach((t=>{this.$n(t)&&this.Wo(t.$t())})),this.zo(),this.es.ar()}Et(){return null===this.vl&&(this.vl=Fn(this.fl)),this.vl}t_(t,e){e=bn(e,0,this.fl.length-1);const i=this.fl.indexOf(t);Pe(-1!==i,"setSeriesOrder: invalid data source"),this.fl.splice(i,1),this.fl.splice(e,0,t),this.fl.forEach(((t,e)=>t.cs(e))),this.vl=null;for(const n of[this.ko,this.To])n.io(),n.ga();this.es.ar()}zt(){return this.Et().filter(Hn)}i_(){return this.Co}s_(){return this.Po}ua(t){this.yh.push(new sn(t))}ca(t){this.yh=this.yh.filter((e=>e.oh()!==t)),t.detached&&t.detached(),this.es.ar()}da(){return this.yh}ea(t,e){return this.yh.map((i=>i.ht(t,e))).filter((t=>null!==t))}Go(t){const e=t.fo();if(e&&e.length>0&&!this.dh.Zi()){const e=this.dh.Ce();null!==e&&t.po(e)}t.$s()}Fo(t,e,i){let n=this.Io(e);if(null===n&&(n=this.yo(e,this.es.F().overlayPriceScales)),this.fl.splice(i,0,t),!_i(e)){const i=this.Mo.get(e)||[];i.push(t),this.Mo.set(e,i)}t.cs(i),n.Ql(t),t.ds(n),this.Wo(n),this.vl=null}Ro(t,e,i){e.te!==i.te&&this.Go(t)}yo(t,e){const i={visible:!0,autoScale:!0,...He(e)},n=new $n(t,i,this.es.F().layout,this.es.F().localization,this.es.Ji());return n.Ll(this.Kt()),n}}function Wn(t){return{n_:t.n_,e_:{externalId:t.r_.externalId},h_:t.r_.cursorStyle}}function jn(t,e,i,n){for(const s of t){const t=s.Bt(n);if(null!==t&&t.ht){const n=t.ht(e,i);if(null!==n)return{a_:s,e_:n}}}return null}function Un(t){return void 0!==t.qs}function Gn(t,e,i){const n=[t,...t.Et()],s=e<1e9?function(t,e,i){var n;let s,r;for(const l of t){const t=(null==(n=l.ea)?void 0:n.call(l,e,i))??[];for(const e of t)o=e.zOrder,(!(a=null==s?void 0:s.zOrder)||"top"===o&&"top"!==a||"normal"===o&&"bottom"===a)&&(s=e,r=l)}var o,a;return s&&r?{r_:s,n_:r}:null}(n,e,i):null;if("top"===(null==s?void 0:s.r_.zOrder))return Wn(s);for(const r of n){if(s&&s.n_===r&&"bottom"!==s.r_.zOrder&&!s.r_.isBackground)return Wn(s);if(Un(r)){const n=jn(r.qs(t),e,i,t);if(null!==n)return{n_:r,a_:n.a_,e_:n.e_}}if(s&&s.n_===r&&"bottom"!==s.r_.zOrder&&s.r_.isBackground)return Wn(s)}return(null==s?void 0:s.r_)?Wn(s):null}class qn{constructor(t,e,i=50){this.Rn=0,this.Dn=1,this.In=1,this.Vn=new Map,this.Bn=new Map,this.l_=t,this.o_=e,this.En=i}__(t){const e=t.time,i=this.o_.cacheKey(e),n=this.Vn.get(i);if(void 0!==n)return n.u_;if(this.Rn===this.En){const t=this.Bn.get(this.In);this.Bn.delete(this.In),this.Vn.delete(Oe(t)),this.In++,this.Rn--}const s=this.l_(t);return this.Vn.set(i,{u_:s,zn:this.Dn}),this.Bn.set(this.Dn,i),this.Rn++,this.Dn++,s}}class Yn{constructor(t,e){Pe(t<=e,"right should be >= left"),this.c_=t,this.d_=e}$h(){return this.c_}ki(){return this.d_}f_(){return this.d_-this.c_+1}ye(t){return this.c_<=t&&t<=this.d_}We(t){return this.c_===t.$h()&&this.d_===t.ki()}}function Xn(t,e){return null===t||null===e?t===e:t.We(e)}class Zn{constructor(){this.p_=new Map,this.Vn=null,this.v_=!1}m_(t){this.v_=t,this.Vn=null}w_(t,e){this.M_(e),this.Vn=null;for(let i=e;i<t.length;++i){const e=t[i];let n=this.p_.get(e.timeWeight);void 0===n&&(n=[],this.p_.set(e.timeWeight,n)),n.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}g_(t,e,i,n,s){const r=Math.ceil(e/t);return null!==this.Vn&&this.Vn.b_===r&&s===this.Vn.x_&&i===this.Vn.S_||(this.Vn={x_:s,S_:i,Ba:this.C_(r,i,n),b_:r}),this.Vn.Ba}M_(t){if(0===t)return void this.p_.clear();const e=[];this.p_.forEach(((i,n)=>{t<=i[0].index?e.push(n):i.splice(qi(i,t,(e=>e.index<t)),1/0)}));for(const i of e)this.p_.delete(i)}C_(t,e,i){let n=[];const s=t=>!e||i.has(t.index);for(const r of Array.from(this.p_.keys()).sort(((t,e)=>e-t))){if(!this.p_.get(r))continue;const e=n;n=[];const i=e.length;let o=0;const a=Oe(this.p_.get(r)),l=a.length;let c=1/0,h=-1/0;for(let r=0;r<l;r++){const l=a[r],u=l.index;for(;o<i;){const t=e[o],i=t.index;if(!(i<u&&s(t))){c=i;break}o++,n.push(t),h=i,c=1/0}if(c-u>=t&&u-h>=t&&s(l))n.push(l),h=u;else if(this.v_)return e}for(;o<i;o++)s(e[o])&&n.push(e[o])}return n}}class Qn{constructor(t){this.P_=t}k_(){return null===this.P_?null:new Yn(Math.floor(this.P_.$h()),Math.ceil(this.P_.ki()))}y_(){return this.P_}static T_(){return new Qn(null)}}function Jn(t,e){return t.weight>e.weight?t:e}class ts{constructor(t,e,i,n){this.bo=0,this.R_=null,this.D_=[],this.Ml=null,this.wl=null,this.I_=new Zn,this.B_=new Map,this.V_=Qn.T_(),this.E_=!0,this.A_=new Ne,this.z_=new Ne,this.L_=new Ne,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ts=e,this.Sl=i,this.U_=e.rightOffset,this.q_=e.barSpacing,this.es=t,this.o_=n,this.Y_(),this.I_.m_(e.uniformDistribution),this.j_()}F(){return this.Ts}K_(t){Fe(this.Sl,t),this.X_(),this.Y_()}hr(t,e){Fe(this.Ts,t),this.Ts.fixLeftEdge&&this.G_(),this.Ts.fixRightEdge&&this.Z_(),void 0!==t.barSpacing&&this.es.mn(t.barSpacing),void 0!==t.rightOffset&&this.es.wn(t.rightOffset),void 0===t.minBarSpacing&&void 0===t.maxBarSpacing||this.es.mn(t.barSpacing??this.q_),void 0!==t.ignoreWhitespaceIndices&&t.ignoreWhitespaceIndices!==this.Ts.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}J_(t){var e;return(null==(e=this.D_[t])?void 0:e.time)??null}Bs(t){var e,i;const n=this.D_.length-1;if(t>n){const i=t-n,s=this.D_[n].originalTime;return(null==(e=this.F().extendedScale)?void 0:e.getExtendedTime(s,i))??null}return(null==(i=this.D_[t])?void 0:i.time)??null}Q_(t){return this.D_[t]??null}rs(t){var e;const i=this.D_.length-1;if(t>i){const n=t-i,s=this.D_[i].originalTime,r=null==(e=this.F().extendedScale)?void 0:e.getExtendedTime(s,n);return{timeWeight:0,time:r,originalTime:r}}return this.D_[t]??null}tu(t,e){if(this.D_.length<1)return null;if(this.o_.key(t)>this.o_.key(this.D_[this.D_.length-1].time))return e?this.D_.length-1:null;const i=qi(this.D_,this.o_.key(t),((t,e)=>this.o_.key(t.time)<e));return this.o_.key(t)<this.o_.key(this.D_[i].time)?e?i:null:i}Zi(){return 0===this.bo||0===this.D_.length||null===this.R_}iu(){return this.D_.length>0}Ce(){return this.su(),this.V_.k_()}nu(){return this.su(),this.V_.y_()}eu(){const t=this.Ce();if(null===t)return null;const e={from:t.$h(),to:t.ki()};return this.ru(e)}ru(t){const e=Math.round(t.from),i=Math.round(t.to),n=Re(this.hu()),s=Re(this.au());return{from:Re(this.Q_(Math.max(n,e))),to:Re(this.Q_(Math.min(s,i)))}}lu(t){return{from:Re(this.tu(t.from,!0)),to:Re(this.tu(t.to,!0))}}ns(){return this.bo}Ao(t){if(!isFinite(t)||t<=0)return;if(this.bo===t)return;const e=this.nu(),i=this.bo;if(this.bo=t,this.E_=!0,this.Ts.lockVisibleTimeRangeOnResize&&0!==i){const e=this.q_*t/i;this.q_=e}if(this.Ts.fixLeftEdge&&null!==e&&e.$h()<=0){const e=i-t;this.U_-=Math.round(e/this.q_)+1,this.E_=!0}this.ou(),this._u()}Xt(t){if(this.Zi()||!ze(t))return 0;const e=this.uu()+this.U_-t;return this.bo-(e+.5)*this.q_-1}cu(t,e){const i=this.uu(),n=void 0===e?0:e.from,s=void 0===e?t.length:e.to;for(let r=n;r<s;r++){const e=t[r].xt,n=i+this.U_-e,s=this.bo-(n+.5)*this.q_-1;t[r].ft=s}}du(t,e){const i=Math.ceil(this.fu(t));return e&&this.Ts.ignoreWhitespaceIndices&&!this.pu(i)?this.vu(i):i}wn(t){this.E_=!0,this.U_=t,this._u(),this.es.mu(),this.es.ar()}wu(){return this.q_}mn(t){this.Mu(t),this._u(),this.es.mu(),this.es.ar()}gu(){return this.U_}Ba(){if(this.Zi())return null;if(null!==this.N_)return this.N_;const t=this.q_,e=5*(this.es.F().layout.fontSize+4)/8*(this.Ts.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=Re(this.Ce()),s=Math.max(n.$h(),n.$h()-i),r=Math.max(n.ki(),n.ki()-i),o=this.I_.g_(t,e,this.Ts.ignoreWhitespaceIndices,this.F_,this.W_),a=this.hu()+i,l=this.au()-i,c=this.bu(),h=this.Ts.fixLeftEdge||c,u=this.Ts.fixRightEdge||c;let d=0;for(const p of o){if(!(s<=p.index&&p.index<=r))continue;let t;d<this.H_.length?(t=this.H_[d],t.coord=this.Xt(p.index),t.label=this.xu(p),t.weight=p.weight):(t={needAlignCoordinate:!1,coord:this.Xt(p.index),label:this.xu(p),weight:p.weight},this.H_.push(t)),this.q_>e/2&&!c?t.needAlignCoordinate=!1:t.needAlignCoordinate=h&&p.index<=a||u&&p.index>=l,d++}return this.H_.length=d,this.N_=this.H_,this.H_}Su(){this.E_=!0,this.mn(this.Ts.barSpacing),this.wn(this.Ts.rightOffset)}Cu(t){this.E_=!0,this.R_=t,this._u(),this.G_()}Pu(t,e){const i=this.fu(t),n=this.wu(),s=n+e*(n/10);this.mn(s),this.Ts.rightBarStaysOnScroll||this.wn(this.gu()+(i-this.fu(t)))}ro(t){this.Ml&&this._o(),null===this.wl&&null===this.O_&&(this.Zi()||(this.wl=t,this.ku()))}ho(t){if(null===this.O_)return;const e=bn(this.bo-t,0,this.bo),i=bn(this.bo-Re(this.wl),0,this.bo);0!==e&&0!==i&&this.mn(this.O_.wu*e/i)}ao(){null!==this.wl&&(this.wl=null,this.yu())}lo(t){null===this.Ml&&null===this.O_&&(this.Zi()||(this.Ml=t,this.ku()))}oo(t){if(null===this.Ml)return;const e=(this.Ml-t)/this.wu();this.U_=Re(this.O_).gu+e,this.E_=!0,this._u()}_o(){null!==this.Ml&&(this.Ml=null,this.yu())}Tu(t=400){this.Ru(this.Ts.rightOffset,t)}Ru(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_;this.es.fn(new es(i,t,e))}Dt(t,e){this.E_=!0,this.D_=t,this.I_.w_(t,e),this._u()}Du(){return this.A_}Iu(){return this.z_}Bu(){return this.L_}uu(){return this.R_||0}Vu(t){const e=t.f_();this.Mu(this.bo/e),this.U_=t.ki()-this.uu(),this._u(),this.E_=!0,this.es.mu(),this.es.ar()}Eu(){const t=this.hu(),e=this.au();null!==t&&null!==e&&this.Vu(new Yn(t,e+this.Ts.rightOffset))}Au(t){const e=new Yn(t.from,t.to);this.Vu(e)}hs(t){return void 0!==this.Sl.timeFormatter?this.Sl.timeFormatter(t.originalTime):this.o_.formatHorzItem(t.time)}j_(){if(!this.Ts.ignoreWhitespaceIndices)return;this.F_.clear();const t=this.es.Js();for(const e of t)for(const t of e.wa())this.F_.set(t,!0);this.W_++}zu(){return this.hu()}Lu(){return this.au()}Ou(){return this.D_}bu(){const t=this.es.F().handleScroll,e=this.es.F().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}hu(){return 0===this.D_.length?null:0}au(){return 0===this.D_.length?null:this.D_.length-1}Nu(t){return(this.bo-1-t)/this.q_}fu(t){const e=this.Nu(t),i=this.uu()+this.U_-e;return Math.round(1e6*i)/1e6}Mu(t){const e=this.q_;this.q_=t,this.ou(),e!==this.q_&&(this.E_=!0,this.Fu())}su(){if(!this.E_)return;if(this.E_=!1,this.Zi())return void this.Wu(Qn.T_());const t=this.uu(),e=this.bo/this.q_,i=this.U_+t,n=new Yn(i-e+1,i);this.Wu(new Qn(n))}ou(){const t=bn(this.q_,this.Hu(),this.Uu());this.q_!==t&&(this.q_=t,this.E_=!0)}Uu(){return this.Ts.maxBarSpacing>0?this.Ts.maxBarSpacing:.5*this.bo}Hu(){return this.Ts.fixLeftEdge&&this.Ts.fixRightEdge&&0!==this.D_.length?this.bo/this.D_.length:this.Ts.minBarSpacing}_u(){const t=this.$u();null!==t&&this.U_<t&&(this.U_=t,this.E_=!0);const e=this.qu();this.U_>e&&(this.U_=e,this.E_=!0)}$u(){const t=this.hu(),e=this.R_;return null===t||null===e?null:t-e-1+(this.Ts.fixLeftEdge?this.bo/this.q_:Math.min(2,this.D_.length))}qu(){return this.Ts.fixRightEdge?0:this.bo/this.q_-Math.min(2,this.D_.length)}ku(){this.O_={wu:this.wu(),gu:this.gu()}}yu(){this.O_=null}xu(t){let e=this.B_.get(t.weight);return void 0===e&&(e=new qn((t=>this.Yu(t)),this.o_),this.B_.set(t.weight,e)),e.__(t)}Yu(t){return this.o_.formatTickmark(t,this.Sl)}Wu(t){const e=this.V_;this.V_=t,Xn(e.k_(),this.V_.k_())||this.A_.p(),Xn(e.y_(),this.V_.y_())||this.z_.p(),this.Fu()}Fu(){this.N_=null}X_(){this.Fu(),this.B_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}G_(){if(!this.Ts.fixLeftEdge)return;const t=this.hu();if(null===t)return;const e=this.Ce();if(null===e)return;const i=e.$h()-t;if(i<0){const t=this.U_-i-1;this.wn(t)}this.ou()}Z_(){this._u(),this.ou()}pu(t){return!this.Ts.ignoreWhitespaceIndices||this.F_.get(t)||!1}vu(t){const e=function*(t){const e=Math.round(t),i=e<t;let n=1;for(;;)i?(yield e+n,yield e-n):(yield e-n,yield e+n),n++}(t),i=this.au();for(;i;){const t=e.next().value;if(this.F_.get(t))return t;if(t<0||t>i)break}return t}}class es{constructor(t,e,i){this.ju=performance.now(),this.Ku=t,this.Xu=e,this.Gu=i}Fs(t){const e=this.Zu(t),i=is(e);return this.Ku*(1-(n=i))+this.Xu*n;var n}Ju(t){return(t-this.ju)/this.Gu>=1}Zu(t){const e=t-this.ju;return e>=this.Gu?1:e/this.Gu}}const is=t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;var ns,ss,rs,os,as;!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(ns||(ns={}));class ls{constructor(t,e,i){this.Qu=[],this.tc=[],this.bo=0,this.sc=null,this.nc=null,this.ec=new Ne,this.rc=new Ne,this.hc=null,this.ac=t,this.Ts=e,this.o_=i,this.Cl=new Xe(this.Ts.layout.colorParsers),this.lc=new Ge(this),this.dh=new ts(this,e.timeScale,this.Ts.localization,i),this.Tt=new yi(this,e.crosshair),this.oc=new _n(e.crosshair),e.addDefaultPane&&(this._c(0),this.Qu[0].Eo(2)),this.uc=this.cc(0),this.dc=this.cc(1)}Eh(){this.fc(bi.Sn())}ar(){this.fc(bi.xn())}Zh(){this.fc(new bi(1))}Ah(t){const e=this.vc(t);this.fc(e)}mc(){return this.sc}wc(t){var e,i,n,s;if((null==(e=this.sc)?void 0:e.n_)===(null==t?void 0:t.n_)&&(null==(n=null==(i=this.sc)?void 0:i.e_)?void 0:n.externalId)===(null==(s=null==t?void 0:t.e_)?void 0:s.externalId))return;const r=this.sc;this.sc=t,null!==r&&this.Ah(r.n_),null!==t&&t.n_!==(null==r?void 0:r.n_)&&this.Ah(t.n_)}Mc(){return this.nc}gc(t){this.nc=t}F(){return this.Ts}hr(t){Fe(this.Ts,t),this.Qu.forEach((e=>e.Do(t))),void 0!==t.timeScale&&this.dh.hr(t.timeScale),void 0!==t.localization&&this.dh.K_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.ec.p(),this.uc=this.cc(0),this.dc=this.cc(1),this.Eh()}bc(t,e,i=0){const n=this.Qu[i];if(void 0===n)return;if("left"===t)return Fe(this.Ts,{leftPriceScale:e}),n.Do({leftPriceScale:e}),this.ec.p(),void this.Eh();if("right"===t)return Fe(this.Ts,{rightPriceScale:e}),n.Do({rightPriceScale:e}),this.ec.p(),void this.Eh();const s=this.xc(t,i);null!==s&&(s.$t.hr(e),this.ec.p())}xc(t,e){const i=this.Qu[e];if(void 0===i)return null;const n=i.Io(t);return null!==n?{Ks:i,$t:n}:null}Ot(){return this.dh}Xs(){return this.Qu}Sc(){return this.Tt}Cc(){return this.rc}Pc(t,e){t.Ll(e),this.mu()}Ao(t){this.bo=t,this.dh.Ao(this.bo),this.Qu.forEach((e=>e.Ao(t))),this.mu()}kc(t){1!==this.Qu.length&&(Pe(t>=0&&t<this.Qu.length,"Invalid pane index"),this.Qu.splice(t,1),this.Eh())}yc(t,e){if(this.Qu.length<2)return;Pe(t>=0&&t<this.Qu.length,"Invalid pane index");const i=this.Qu[t],n=this.Qu.reduce(((t,e)=>t+e.Vo()),0),s=this.Qu.reduce(((t,e)=>t+e.Kt()),0),r=s-30*(this.Qu.length-1);e=Math.min(r,Math.max(30,e));const o=n/s,a=i.Kt();i.Eo(e*o);let l=e-a,c=this.Qu.length-1;for(const h of this.Qu)if(h!==i){const t=Math.min(r,Math.max(30,h.Kt()-l/c));l-=h.Kt()-t,c-=1;const e=t*o;h.Eo(e)}this.Eh()}Tc(t,e){Pe(t>=0&&t<this.Qu.length&&e>=0&&e<this.Qu.length,"Invalid pane index");const i=this.Qu[t],n=this.Qu[e];this.Qu[t]=n,this.Qu[e]=i,this.Eh()}Rc(t,e){if(Pe(t>=0&&t<this.Qu.length&&e>=0&&e<this.Qu.length,"Invalid pane index"),t===e)return;const[i]=this.Qu.splice(t,1);this.Qu.splice(e,0,i),this.Eh()}$o(t,e,i){t.$o(e,i)}qo(t,e,i){t.qo(e,i),this.zh(),this.fc(this.Dc(t,2))}Yo(t,e){t.Yo(e),this.fc(this.Dc(t,2))}jo(t,e,i){e.Dl()||t.jo(e,i)}Ko(t,e,i){e.Dl()||(t.Ko(e,i),this.zh(),this.fc(this.Dc(t,2)))}Xo(t,e){e.Dl()||(t.Xo(e),this.fc(this.Dc(t,2)))}Zo(t,e){t.Zo(e),this.fc(this.Dc(t,2))}Ic(t){this.dh.ro(t)}Bc(t,e){const i=this.Ot();if(i.Zi()||0===e)return;const n=i.ns();t=Math.max(1,Math.min(t,n)),i.Pu(t,e),this.mu()}Vc(t){this.Ec(0),this.Ac(t),this.zc()}Lc(t){this.dh.ho(t),this.mu()}Oc(){this.dh.ao(),this.ar()}Ec(t){this.dh.lo(t)}Ac(t){this.dh.oo(t),this.mu()}zc(){this.dh._o(),this.ar()}Js(){return this.tc}Nc(t,e,i,n,s){this.Tt.Es(t,e);let r=NaN,o=this.dh.du(t,!0);const a=this.dh.Ce();null!==a&&(o=Math.min(Math.max(a.$h(),o),a.ki()));const l=n.Ds(),c=l.Ft();if(null!==c&&(r=l.Is(e,c)),r=this.oc.ba(r,o,n),this.Tt.Os(o,r,n),this.Zh(),!s){const s=Gn(n,t,e);this.wc(s&&{n_:s.n_,e_:s.e_,h_:s.h_||null}),this.rc.p(this.Tt.Lt(),{x:t,y:e},i)}}Fc(){const t=this.Tt.Fs(),e=this.Tt.Ws(),i=e?this.Wc(e):void 0;return{x:t.x,y:t.y,paneIndex:i}}Hc(t,e,i){const n=i.Ds(),s=n.Ft(),r=n.Ut(t,Re(s)),o=this.dh.tu(e,!0),a=this.dh.Xt(Re(o));this.Nc(a,r,null,i,!0)}Uc(t){this.Sc().Hs(),this.Zh(),t||this.rc.p(null,null,null)}zh(){const t=this.Tt.Ks();if(null!==t){const e=this.Tt.zs(),i=this.Tt.Ls();this.Nc(e,i,null,t)}this.Tt.$s()}$c(t,e,i){const n=this.dh.J_(0);void 0!==e&&void 0!==i&&this.dh.Dt(e,i);const s=this.dh.J_(0),r=this.dh.uu(),o=this.dh.Ce();if(null!==o&&null!==n&&null!==s){const e=o.ye(r),a=this.o_.key(n)>this.o_.key(s),l=null!==t&&t>r&&!a,c=this.dh.F().allowShiftVisibleRangeOnWhitespaceReplacement,h=e&&(!(void 0===i)||c)&&this.dh.F().shiftVisibleRangeOnNewBar;if(l&&!h){const e=t-r;this.dh.wn(this.dh.gu()-e)}}this.dh.Cu(t)}Oh(t){null!==t&&t.Qo()}Un(t){if(t instanceof Kn)return t;const e=this.Qu.find((e=>e.Et().includes(t)));return void 0===e?null:e}mu(){this.Qu.forEach((t=>t.Qo())),this.zh()}m(){this.Qu.forEach((t=>t.m())),this.Qu.length=0,this.Ts.localization.priceFormatter=void 0,this.Ts.localization.percentageFormatter=void 0,this.Ts.localization.timeFormatter=void 0}qc(){return this.lc}jn(){return this.lc.F()}Bo(){return this.ec}Yc(t,e){const i=this._c(e);this.jc(t,i),this.tc.push(t),1===this.tc.length?this.Eh():this.ar()}Kc(t){const e=this.Un(t),i=this.tc.indexOf(t);Pe(-1!==i,"Series not found");const n=Re(e);this.tc.splice(i,1),n.so(t),t.m&&t.m(),this.dh.j_(),this.Xc(n)}Vh(t,e){const i=Re(this.Un(t));i.so(t,!0),i.Ql(t,e,!0)}Eu(){const t=bi.xn();t._n(),this.fc(t)}Gc(t){const e=bi.xn();e.dn(t),this.fc(e)}vn(){const t=bi.xn();t.vn(),this.fc(t)}mn(t){const e=bi.xn();e.mn(t),this.fc(e)}wn(t){const e=bi.xn();e.wn(t),this.fc(e)}fn(t){const e=bi.xn();e.fn(t),this.fc(e)}un(){const t=bi.xn();t.un(),this.fc(t)}Zc(){return this.Ts.rightPriceScale.visible?"right":"left"}Jc(t,e){if(Pe(e>=0,"Index should be greater or equal to 0"),e===this.Qc(t))return;const i=Re(this.Un(t));i.so(t);const n=this._c(e);this.jc(t,n),0===i.xa().length&&this.Xc(i),this.Eh()}j(){return this.dc}Y(){return this.uc}jt(t){const e=this.dc,i=this.uc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.hc||this.hc.wr!==i||this.hc.Mr!==e)this.hc={wr:i,Mr:e,td:new Map};else{const e=this.hc.td.get(t);if(void 0!==e)return e}const n=this.Cl.nt(i,e,t/100);return this.hc.td.set(t,n),n}Wc(t){return this.Qu.indexOf(t)}Ji(){return this.Cl}sd(){return this.nd()}nd(t){const e=new Kn(this.dh,this);this.Qu.push(e);const i=t??this.Qu.length-1,n=bi.Sn();return n.en(i,{rn:0,hn:!0}),this.fc(n),e}_c(t){return Pe(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Qu.length,t))<this.Qu.length?this.Qu[t]:this.nd(t)}Qc(t){return this.Qu.findIndex((e=>e.No().includes(t)))}Dc(t,e){const i=new bi(e);if(null!==t){const n=this.Qu.indexOf(t);i.en(n,{rn:e})}return i}vc(t,e){return void 0===e&&(e=2),this.Dc(this.Un(t),e)}fc(t){this.ac&&this.ac(t),this.Qu.forEach((t=>t.s_().lr().Dt()))}jc(t,e){const i=t.F().priceScaleId,n=void 0!==i?i:this.Zc();e.Ql(t,n),_i(n)||t.hr(t.F())}cc(t){const e=this.Ts.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}Xc(t){!t.Oo()&&0===t.xa().length&&this.Qu.length>1&&this.Qu.splice(this.Wc(t),1)}}function cs(t){return!Be(t)&&!Ve(t)}function hs(t){return Be(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(ss||(ss={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(rs||(rs={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(os||(os={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(as||(as={}));const us=t=>t.getUTCFullYear();class ds{constructor(t="yyyy-MM-dd",e="default"){this.ed=t,this.rd=e}__(t){return function(t,e,i){return e.replace(/yyyy/g,(n=t,xi(us(n),4))).replace(/yy/g,(t=>xi(us(t)%100,2))(t)).replace(/MMMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"}))(t,i)).replace(/MMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"}))(t,i)).replace(/MM/g,(t=>xi(t.getUTCMonth()+1,2))(t)).replace(/dd/g,(t=>xi(t.getUTCDate(),2))(t));var n}(t,this.ed,this.rd)}}class ps{constructor(t){this.hd=t||"%h:%m:%s"}__(t){return this.hd.replace("%h",xi(t.getUTCHours(),2)).replace("%m",xi(t.getUTCMinutes(),2)).replace("%s",xi(t.getUTCSeconds(),2))}}const fs={ad:"yyyy-MM-dd",ld:"%h:%m:%s",od:" ",_d:"default"};class ms{constructor(t={}){const e={...fs,...t};this.ud=new ds(e.ad,e._d),this.dd=new ps(e.ld),this.fd=e.od}__(t){return`${this.ud.__(t)}${this.fd}${this.dd.__(t)}`}}function gs(t){return 60*t*60*1e3}function vs(t){return 60*t*1e3}const ys=[{pd:1e3,vd:10},{pd:vs(1),vd:20},{pd:vs(5),vd:21},{pd:vs(30),vd:22},{pd:gs(1),vd:30},{pd:gs(3),vd:31},{pd:gs(6),vd:32},{pd:gs(12),vd:33}];function _s(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=ys.length-1;i>=0;--i)if(Math.floor(e.getTime()/ys[i].pd)!==Math.floor(t.getTime()/ys[i].pd))return ys[i].vd;return 0}function bs(t){let e=t;if(Ve(t)&&(e=xs(t)),!cs(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{md:Math.round(i.getTime()/1e3),wd:e}}function ws(t){if(!hs(t))throw new Error("time must be of type isUTCTimestamp");return{md:t}}function xs(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Ss(t){Ve(t.time)&&(t.time=xs(t.time))}class Ts{options(){return this.Ts}setOptions(t){this.Ts=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?t.forEach(Ss):Ss(t)}createConverterToInternalObj(t){return Re(0===(e=t).length?null:cs(e[0].time)||Ve(e[0].time)?bs:ws);var e}key(t){return"object"==typeof t&&"md"in t?t.md:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return void 0===e.wd?new Date(1e3*e.md).getTime():new Date(Date.UTC(e.wd.year,e.wd.month-1,e.wd.day)).getTime()}convertHorzItemToInternal(t){return hs(e=t)?ws(e):cs(e)?bs(e):bs(xs(e));var e}updateFormatter(t){if(!this.Ts)return;const e=t.dateFormat;this.Ts.timeScale.timeVisible?this.Md=new ms({ad:e,ld:this.Ts.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",od:"   ",_d:t.locale}):this.Md=new ds(e,t.locale)}formatHorzItem(t){const e=t;return this.Md.__(new Date(1e3*e.md))}formatTickmark(t,e){const i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.Ts.timeScale.timeVisible,this.Ts.timeScale.secondsVisible),n=this.Ts.timeScale;if(void 0!==n.tickMarkFormatter){const s=n.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==s)return s}return function(t,e,i){const n={};switch(e){case 0:n.year="numeric";break;case 1:n.month="short";break;case 2:n.day="numeric";break;case 3:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case 4:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit"}const s=void 0===t.wd?new Date(1e3*t.md):new Date(Date.UTC(t.wd.year,t.wd.month-1,t.wd.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(i,n)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Jn,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.md,n=null!==i?new Date(1e3*i):null,s=0;for(let r=e;r<t.length;++r){const e=t[r],o=new Date(1e3*e.time.md);null!==n&&(e.timeWeight=_s(o,n)),s+=e.time.md-(i||e.time.md),i=e.time.md,n=o}if(0===e&&t.length>1){const e=Math.ceil(s/(t.length-1)),i=new Date(1e3*(t[0].time.md-e));t[0].timeWeight=_s(new Date(1e3*t[0].time.md),i)}}(t,e)}static gd(t){return Fe({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Cs="undefined"!=typeof window;function Ms(){return!!Cs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Is(){return!!Cs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Es(t){return t+t%2}class As{constructor(t,e,i){this.bd=0,this.xd=null,this.Sd={ft:Number.NEGATIVE_INFINITY,vt:Number.POSITIVE_INFINITY},this.Cd=0,this.Pd=null,this.kd={ft:Number.NEGATIVE_INFINITY,vt:Number.POSITIVE_INFINITY},this.yd=null,this.Td=!1,this.Rd=null,this.Dd=null,this.Id=!1,this.Bd=!1,this.Vd=!1,this.Ed=null,this.Ad=null,this.zd=null,this.Ld=null,this.Od=null,this.Nd=null,this.Fd=null,this.Wd=0,this.Hd=!1,this.Ud=!1,this.$d=!1,this.qd=0,this.Yd=null,this.jd=!Is(),this.Kd=t=>{this.Xd(t)},this.Gd=t=>{if(this.Zd(t)){const e=this.Jd(t);if(++this.Cd,this.Pd&&this.Cd>1){const{Qd:i}=this.tf(Ps(t),this.kd);i<30&&!this.Vd&&this.if(e,this.nf.sf),this.ef()}}else{const e=this.Jd(t);if(++this.bd,this.xd&&this.bd>1){const{Qd:i}=this.tf(Ps(t),this.Sd);i<5&&!this.Bd&&this.rf(e,this.nf.hf),this.af()}}},this.lf=t,this.nf=e,this.Ts=i,this._f()}m(){null!==this.Ed&&(this.Ed(),this.Ed=null),null!==this.Ad&&(this.Ad(),this.Ad=null),null!==this.Ld&&(this.Ld(),this.Ld=null),null!==this.Od&&(this.Od(),this.Od=null),null!==this.Nd&&(this.Nd(),this.Nd=null),null!==this.zd&&(this.zd(),this.zd=null),this.uf(),this.af()}cf(t){this.Ld&&this.Ld();const e=this.df.bind(this);if(this.Ld=()=>{this.lf.removeEventListener("mousemove",e)},this.lf.addEventListener("mousemove",e),this.Zd(t))return;const i=this.Jd(t);this.rf(i,this.nf.ff),this.jd=!0}af(){null!==this.xd&&clearTimeout(this.xd),this.bd=0,this.xd=null,this.Sd={ft:Number.NEGATIVE_INFINITY,vt:Number.POSITIVE_INFINITY}}ef(){null!==this.Pd&&clearTimeout(this.Pd),this.Cd=0,this.Pd=null,this.kd={ft:Number.NEGATIVE_INFINITY,vt:Number.POSITIVE_INFINITY}}df(t){if(this.$d||null!==this.Dd)return;if(this.Zd(t))return;const e=this.Jd(t);this.rf(e,this.nf.pf),this.jd=!0}vf(t){const e=Rs(t.changedTouches,Re(this.Yd));if(null===e)return;if(this.qd=Os(t),null!==this.Fd)return;if(this.Ud)return;this.Hd=!0;const i=this.tf(Ps(e),Re(this.Dd)),{mf:n,wf:s,Qd:r}=i;if(this.Id||!(r<5)){if(!this.Id){const t=.5*n,e=s>=t&&!this.Ts.Mf(),i=t>s&&!this.Ts.gf();e||i||(this.Ud=!0),this.Id=!0,this.Vd=!0,this.uf(),this.ef()}if(!this.Ud){const i=this.Jd(t,e);this.if(i,this.nf.bf),ks(t)}}}xf(t){if(0!==t.button)return;const e=this.tf(Ps(t),Re(this.Rd)),{Qd:i}=e;if(i>=5&&(this.Bd=!0,this.af()),this.Bd){const e=this.Jd(t);this.rf(e,this.nf.Sf)}}tf(t,e){const i=Math.abs(e.ft-t.ft),n=Math.abs(e.vt-t.vt);return{mf:i,wf:n,Qd:i+n}}Cf(t){let e=Rs(t.changedTouches,Re(this.Yd));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.Yd=null,this.qd=Os(t),this.uf(),this.Dd=null,this.Nd&&(this.Nd(),this.Nd=null);const i=this.Jd(t,e);if(this.if(i,this.nf.Pf),++this.Cd,this.Pd&&this.Cd>1){const{Qd:t}=this.tf(Ps(e),this.kd);t<30&&!this.Vd&&this.if(i,this.nf.sf),this.ef()}else this.Vd||(this.if(i,this.nf.kf),this.nf.kf&&ks(t));0===this.Cd&&ks(t),0===t.touches.length&&this.Td&&(this.Td=!1,ks(t))}Xd(t){if(0!==t.button)return;const e=this.Jd(t);if(this.Rd=null,this.$d=!1,this.Od&&(this.Od(),this.Od=null),Ms()&&this.lf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Kd),!this.Zd(t))if(this.rf(e,this.nf.yf),++this.bd,this.xd&&this.bd>1){const{Qd:i}=this.tf(Ps(t),this.Sd);i<5&&!this.Bd&&this.rf(e,this.nf.hf),this.af()}else this.Bd||this.rf(e,this.nf.Tf)}uf(){null!==this.yd&&(clearTimeout(this.yd),this.yd=null)}Rf(t){if(null!==this.Yd)return;const e=t.changedTouches[0];this.Yd=e.identifier,this.qd=Os(t);const i=this.lf.ownerDocument.documentElement;this.Vd=!1,this.Id=!1,this.Ud=!1,this.Dd=Ps(e),this.Nd&&(this.Nd(),this.Nd=null);{const e=this.vf.bind(this),n=this.Cf.bind(this);this.Nd=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",n)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",n,{passive:!1}),this.uf(),this.yd=setTimeout(this.Df.bind(this,t),240)}const n=this.Jd(t,e);this.if(n,this.nf.If),this.Pd||(this.Cd=0,this.Pd=setTimeout(this.ef.bind(this),500),this.kd=Ps(e))}Bf(t){if(0!==t.button)return;const e=this.lf.ownerDocument.documentElement;Ms()&&e.addEventListener("mouseleave",this.Kd),this.Bd=!1,this.Rd=Ps(t),this.Od&&(this.Od(),this.Od=null);{const t=this.xf.bind(this),i=this.Xd.bind(this);this.Od=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.$d=!0,this.Zd(t))return;const i=this.Jd(t);this.rf(i,this.nf.Vf),this.xd||(this.bd=0,this.xd=setTimeout(this.af.bind(this),500),this.Sd=Ps(t))}_f(){this.lf.addEventListener("mouseenter",this.cf.bind(this)),this.lf.addEventListener("touchcancel",this.uf.bind(this));{const t=this.lf.ownerDocument,e=t=>{this.nf.Ef&&(t.composed&&this.lf.contains(t.composedPath()[0])||t.target&&this.lf.contains(t.target)||this.nf.Ef())};this.Ad=()=>{t.removeEventListener("touchstart",e)},this.Ed=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Is()&&(this.zd=()=>{this.lf.removeEventListener("dblclick",this.Gd)},this.lf.addEventListener("dblclick",this.Gd)),this.lf.addEventListener("mouseleave",this.Af.bind(this)),this.lf.addEventListener("touchstart",this.Rf.bind(this),{passive:!0}),function(t){Cs&&void 0!==window.chrome&&t.addEventListener("mousedown",(t=>{if(1===t.button)return t.preventDefault(),!1}))}(this.lf),this.lf.addEventListener("mousedown",this.Bf.bind(this)),this.zf(),this.lf.addEventListener("touchmove",(()=>{}),{passive:!1})}zf(){void 0===this.nf.Lf&&void 0===this.nf.Of&&void 0===this.nf.Nf||(this.lf.addEventListener("touchstart",(t=>this.Ff(t.touches)),{passive:!0}),this.lf.addEventListener("touchmove",(t=>{if(2===t.touches.length&&null!==this.Fd&&void 0!==this.nf.Of){const e=Ds(t.touches[0],t.touches[1])/this.Wd;this.nf.Of(this.Fd,e),ks(t)}}),{passive:!1}),this.lf.addEventListener("touchend",(t=>{this.Ff(t.touches)})))}Ff(t){1===t.length&&(this.Hd=!1),2!==t.length||this.Hd||this.Td?this.Wf():this.Hf(t)}Hf(t){const e=this.lf.getBoundingClientRect()||{left:0,top:0};this.Fd={ft:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,vt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Wd=Ds(t[0],t[1]),void 0!==this.nf.Lf&&this.nf.Lf(),this.uf()}Wf(){null!==this.Fd&&(this.Fd=null,void 0!==this.nf.Nf&&this.nf.Nf())}Af(t){var e,i;if(this.Ld&&this.Ld(),this.Zd(t))return;if(!this.jd)return;if(null==(i=(e=this.Ts).Uf)?void 0:i.call(e))return;const n=this.Jd(t);this.rf(n,this.nf.$f),this.jd=!Is()}Df(t){const e=Rs(t.touches,Re(this.Yd));if(null===e)return;const i=this.Jd(t,e);this.if(i,this.nf.qf),this.Vd=!0,this.Td=!0}Zd(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Os(t)<this.qd+500}if(t,e){e&&e.call(this.nf,t)}rf(t,e){e&&e.call(this.nf,t)}Jd(t,e){const i=e||t,n=this.lf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Yf:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,jf:t.type,Kf:i.target,a_:t.view,Xf:()=>{"touchstart"!==t.type&&ks(t)}}}}function Ds(t,e){const i=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(i*i+n*n)}function ks(t){t.cancelable&&t.preventDefault()}function Ps(t){return{ft:t.pageX,vt:t.pageY}}function Os(t){return t.timeStamp||performance.now()}function Rs(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}class Ls{constructor(t,e,i){this.Gf=null,this.Zf=null,this.Jf=!0,this.Qf=null,this.tp=t,this.ip=t.sp()[e],this.np=t.sp()[i],this.ep=document.createElement("tr"),this.ep.style.height="1px",this.rp=document.createElement("td"),this.rp.style.position="relative",this.rp.style.padding="0",this.rp.style.margin="0",this.rp.setAttribute("colspan","3"),this.hp(),this.ep.appendChild(this.rp),this.Jf=this.tp.F().layout.panes.enableResize,this.Jf?this.ap():(this.Gf=null,this.Zf=null)}m(){null!==this.Zf&&this.Zf.m()}lp(){return this.ep}op(){return _e({width:this.ip.op().width,height:1})}_p(){return _e({width:this.ip._p().width,height:1*window.devicePixelRatio})}up(t,e,i){const n=this._p();t.fillStyle=this.tp.F().layout.panes.separatorColor,t.fillRect(e,i,n.width,n.height)}Dt(){this.hp(),this.tp.F().layout.panes.enableResize!==this.Jf&&(this.Jf=this.tp.F().layout.panes.enableResize,this.Jf?this.ap():(null!==this.Gf&&(this.rp.removeChild(this.Gf.cp),this.rp.removeChild(this.Gf.dp),this.Gf=null),null!==this.Zf&&(this.Zf.m(),this.Zf=null)))}ap(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.rp.appendChild(t);const i=document.createElement("div"),n=i.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.rp.appendChild(i);const s={ff:this.fp.bind(this),$f:this.pp.bind(this),Vf:this.vp.bind(this),If:this.vp.bind(this),Sf:this.mp.bind(this),bf:this.mp.bind(this),yf:this.wp.bind(this),Pf:this.wp.bind(this)};this.Zf=new As(i,s,{Mf:()=>!1,gf:()=>!0}),this.Gf={dp:i,cp:t}}hp(){this.rp.style.background=this.tp.F().layout.panes.separatorColor}fp(t){null!==this.Gf&&(this.Gf.dp.style.backgroundColor=this.tp.F().layout.panes.separatorHoverColor)}pp(t){null!==this.Gf&&null===this.Qf&&(this.Gf.dp.style.backgroundColor="")}vp(t){if(null===this.Gf)return;const e=this.ip.Mp().Vo()+this.np.Mp().Vo(),i=e/(this.ip.op().height+this.np.op().height),n=30*i;e<=2*n||(this.Qf={gp:t.pageY,bp:this.ip.Mp().Vo(),xp:e-n,Sp:e,Cp:i,Pp:n},this.Gf.cp.style.display="block")}mp(t){const e=this.Qf;if(null===e)return;const i=(t.pageY-e.gp)*e.Cp,n=bn(e.bp+i,e.Pp,e.xp);this.ip.Mp().Eo(n),this.np.Mp().Eo(e.Sp-n),this.tp.ni().Eh()}wp(t){null!==this.Qf&&null!==this.Gf&&(this.Qf=null,this.Gf.cp.style.display="none")}}function Ns(t,e){return t.kp-e.kp}function Fs(t,e,i){const n=(t.kp-e.kp)/(t.xt-e.xt);return Math.sign(n)*Math.min(Math.abs(n),i)}class Bs{constructor(t,e,i,n){this.yp=null,this.Tp=null,this.Rp=null,this.Dp=null,this.Ip=null,this.Bp=0,this.Vp=0,this.Ep=t,this.Ap=e,this.zp=i,this.Cn=n}Lp(t,e){if(null!==this.yp){if(this.yp.xt===e)return void(this.yp.kp=t);if(Math.abs(this.yp.kp-t)<this.Cn)return}this.Dp=this.Rp,this.Rp=this.Tp,this.Tp=this.yp,this.yp={xt:e,kp:t}}ae(t,e){if(null===this.yp||null===this.Tp)return;if(e-this.yp.xt>50)return;let i=0;const n=Fs(this.yp,this.Tp,this.Ap),s=Ns(this.yp,this.Tp),r=[n],o=[s];if(i+=s,null!==this.Rp){const t=Fs(this.Tp,this.Rp,this.Ap);if(Math.sign(t)===Math.sign(n)){const e=Ns(this.Tp,this.Rp);if(r.push(t),o.push(e),i+=e,null!==this.Dp){const t=Fs(this.Rp,this.Dp,this.Ap);if(Math.sign(t)===Math.sign(n)){const e=Ns(this.Rp,this.Dp);r.push(t),o.push(e),i+=e}}}}let a=0;for(let l=0;l<r.length;++l)a+=o[l]/i*r[l];Math.abs(a)<this.Ep||(this.Ip={kp:t,xt:e},this.Vp=a,this.Bp=function(t,e){const i=Math.log(e);return Math.log(1*i/-t)/i}(Math.abs(a),this.zp))}Fs(t){const e=Re(this.Ip),i=t-e.xt;return e.kp+this.Vp*(Math.pow(this.zp,i)-1)/Math.log(this.zp)}Ju(t){return null===this.Ip||this.Op(t)===this.Bp}Op(t){const e=t-Re(this.Ip).xt;return Math.min(e,this.Bp)}}function zs(t,e){const i=Re(t.ownerDocument).createElement("canvas");t.appendChild(i);const n=new xe(i,(s={options:{allowResizeObserver:!0},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})}).transform,s.options);var s;return n.resizeCanvasElement(e),n}function Vs(t){var e;t.width=1,t.height=1,null==(e=t.getContext("2d"))||e.clearRect(0,0,1,1)}function $s(t,e,i,n){t.ih&&t.ih(e,i,n)}function Hs(t,e,i,n){t.lt(e,i,n)}function Ks(t,e,i,n){const s=t(i,n);for(const r of s){const t=r.Bt(n);null!==t&&e(t)}}function Ws(t,e){return i=>{var n,s;return void 0===i.$t||((null==(n=i.$t())?void 0:n.Ma())??"")!==e?[]:(null==(s=i.sa)?void 0:s.call(i,t))??[]}}function js(t,e,i,n){if(!t.length)return;let s=0;const r=t[0].Kt(n,!0);let o=1===e?i/2-(t[0].Ui()-r/2):t[0].Ui()-r/2-i/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const r=t[a],l=t[a-1],c=l.Kt(n,!1),h=r.Ui(),u=l.Ui();if(1===e?h>u-c:h<u+c){const n=u-c*e;r.$i(n);const a=n-e*c/2;if((1===e?a<0:a>i)&&o>0){const n=1===e?-1-a:a-i,r=Math.min(n,o);for(let i=s;i<t.length;i++)t[i].$i(t[i].Ui()+e*r);o-=r}}else s=a,o=1===e?u-c-h:h-(u+c)}}class Us{constructor(t,e,i,n){this.Xi=null,this.Np=null,this.Fp=!1,this.Wp=new Ii(200),this.Hp=null,this.Up=0,this.$p=!1,this.qp=()=>{this.$p||this.Rt.Yp().ni().ar()},this.jp=()=>{this.$p||this.Rt.Yp().ni().ar()},this.Rt=t,this.Ts=e,this.xl=e.layout,this.lc=i,this.Kp="left"===n,this.Xp=Ws("normal",n),this.Gp=Ws("top",n),this.Zp=Ws("bottom",n),this.rp=document.createElement("div"),this.rp.style.height="100%",this.rp.style.overflow="hidden",this.rp.style.width="25px",this.rp.style.left="0",this.rp.style.position="relative",this.Jp=zs(this.rp,_e({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Jp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Qp=zs(this.rp,_e({width:16,height:16})),this.Qp.subscribeSuggestedBitmapSizeChanged(this.jp);const r=this.Qp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const o={Vf:this.vp.bind(this),If:this.vp.bind(this),Sf:this.mp.bind(this),bf:this.mp.bind(this),Ef:this.tv.bind(this),yf:this.wp.bind(this),Pf:this.wp.bind(this),hf:this.iv.bind(this),sf:this.iv.bind(this),ff:this.sv.bind(this),$f:this.pp.bind(this)};this.Zf=new As(this.Qp.canvasElement,o,{Mf:()=>!this.Ts.handleScroll.vertTouchDrag,gf:()=>!0})}m(){this.Zf.m(),this.Qp.unsubscribeSuggestedBitmapSizeChanged(this.jp),Vs(this.Qp.canvasElement),this.Qp.dispose(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Vs(this.Jp.canvasElement),this.Jp.dispose(),null!==this.Xi&&this.Xi.eo().u(this),this.Xi=null}lp(){return this.rp}P(){return this.xl.fontSize}nv(){const t=this.lc.F();return this.Hp!==t.k&&(this.Wp.reset(),this.Hp=t.k),t}ev(){if(null===this.Xi)return 0;let t=0;const e=this.nv(),i=Re(this.Jp.canvasElement.getContext("2d",{colorSpace:this.Rt.Yp().F().layout.colorSpace}));i.save();const n=this.Xi.Ba();i.font=this.rv(),n.length>0&&(t=Math.max(this.Wp.measureText(i,n[0].Ja),this.Wp.measureText(i,n[n.length-1].Ja)));const s=this.hv();for(let l=s.length;l--;){const e=this.Wp.measureText(i,s[l].oi());e>t&&(t=e)}const r=this.Xi.Ft();if(null!==r&&null!==this.Np&&2!==(o=this.Ts.crosshair).mode&&o.horzLine.visible&&o.horzLine.labelVisible){const e=this.Xi.Is(1,r),n=this.Xi.Is(this.Np.height-2,r);t=Math.max(t,this.Wp.measureText(i,this.Xi.Qi(Math.floor(Math.min(e,n))+.11111111111111,r)),this.Wp.measureText(i,this.Xi.Qi(Math.ceil(Math.max(e,n))-.11111111111111,r)))}var o;i.restore();const a=t||34;return Es(Math.ceil(e.S+e.C+e.V+e.A+5+a))}av(t){null!==this.Np&&be(this.Np,t)||(this.Np=t,this.$p=!0,this.Jp.resizeCanvasElement(t),this.Qp.resizeCanvasElement(t),this.$p=!1,this.rp.style.width=`${t.width}px`,this.rp.style.height=`${t.height}px`)}lv(){return Re(this.Np).width}ds(t){this.Xi!==t&&(null!==this.Xi&&this.Xi.eo().u(this),this.Xi=t,t.eo().i(this.cl.bind(this),this))}$t(){return this.Xi}ov(){const t=this.Rt.Mp();this.Rt.Yp().ni().Zo(t,Re(this.$t()))}_v(t){if(null===this.Np)return;const e={colorSpace:this.Rt.Yp().F().layout.colorSpace};if(1!==t){this.uv(),this.Jp.applySuggestedBitmapSize();const t=Ce(this.Jp,e);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.cv(t),this.dv(t)})),this.Rt.fv(t,this.Zp),this.pv(t),this.Rt.fv(t,this.Xp),this.vv(t))}this.Qp.applySuggestedBitmapSize();const i=Ce(this.Qp,e);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.mv(i),this.Rt.fv(i,this.Gp))}_p(){return this.Jp.bitmapSize}up(t,e,i){const n=this._p();n.width>0&&n.height>0&&t.drawImage(this.Jp.canvasElement,e,i)}Dt(){var t;null==(t=this.Xi)||t.Ba()}vp(t){if(null===this.Xi||this.Xi.Zi()||!this.Ts.handleScale.axisPressedMouseMove.price)return;const e=this.Rt.Yp().ni(),i=this.Rt.Mp();this.Fp=!0,e.$o(i,this.Xi,t.localY)}mp(t){if(null===this.Xi||!this.Ts.handleScale.axisPressedMouseMove.price)return;const e=this.Rt.Yp().ni(),i=this.Rt.Mp(),n=this.Xi;e.qo(i,n,t.localY)}tv(){if(null===this.Xi||!this.Ts.handleScale.axisPressedMouseMove.price)return;const t=this.Rt.Yp().ni(),e=this.Rt.Mp(),i=this.Xi;this.Fp&&(this.Fp=!1,t.Yo(e,i))}wp(t){if(null===this.Xi||!this.Ts.handleScale.axisPressedMouseMove.price)return;const e=this.Rt.Yp().ni(),i=this.Rt.Mp();this.Fp=!1,e.Yo(i,this.Xi)}iv(t){this.Ts.handleScale.axisDoubleClickReset.price&&this.ov()}sv(t){null!==this.Xi&&(!this.Rt.Yp().ni().F().handleScale.axisPressedMouseMove.price||this.Xi.ze()||this.Xi.Bl()||this.wv(1))}pp(t){this.wv(0)}hv(){const t=[],e=null===this.Xi?void 0:this.Xi;return(i=>{for(let n=0;n<i.length;++n){const s=i[n].Ys(this.Rt.Mp(),e);for(let e=0;e<s.length;e++)t.push(s[e])}})(this.Rt.Mp().Et()),t}cv({context:t,bitmapSize:e}){const{width:i,height:n}=e,s=this.nv().D,r=this.nv().I;s===r?oi(t,0,0,i,n,s):ci(t,0,0,i,n,s,r)}dv({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(null===this.Np||null===this.Xi||!this.Xi.F().borderVisible)return;t.fillStyle=this.Xi.F().borderColor;const n=Math.max(1,Math.floor(this.nv().S*i));let s;s=this.Kp?e.width-n:0,t.fillRect(s,0,n,e.height)}pv(t){if(null===this.Np||null===this.Xi)return;const e=this.Xi.Ba(),i=this.Xi.F(),n=this.nv(),s=this.Kp?this.Np.width-n.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:r,verticalPixelRatio:o})=>{t.fillStyle=i.borderColor;const a=Math.max(1,Math.floor(o)),l=Math.floor(.5*o),c=Math.round(n.C*r);t.beginPath();for(const i of e)t.rect(Math.floor(s*r),Math.round(i.ya*o)-l,c,a);t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{t.font=this.rv(),t.fillStyle=i.textColor??this.xl.textColor,t.textAlign=this.Kp?"right":"left",t.textBaseline="middle";const r=this.Kp?Math.round(s-n.V):Math.round(s+n.C+n.V),o=e.map((e=>this.Wp.yMidCorrection(t,e.Ja)));for(let i=e.length;i--;){const n=e[i];t.fillText(n.Ja,r,n.ya+o[i])}}))}uv(){if(null===this.Np||null===this.Xi)return;let t=this.Np.height/2;const e=[],i=this.Xi.Et().slice(),n=this.Rt.Mp(),s=this.nv();this.Xi===n.qn()&&this.Rt.Mp().Et().forEach((t=>{n.$n(t)&&i.push(t)}));const r=this.Xi.xa()[0],o=this.Xi;i.forEach((i=>{const s=i.Ys(n,o);s.forEach((t=>{t.$i(null),t.qi()&&e.push(t)})),r===i&&s.length>0&&(t=s[0].zi())})),e.forEach((t=>t.$i(t.zi()))),this.Xi.F().alignLabels&&this.Mv(e,s,t)}Mv(t,e,i){if(null===this.Np)return;const n=t.filter((t=>t.zi()<=i)),s=t.filter((t=>t.zi()>i));n.sort(((t,e)=>e.zi()-t.zi())),n.length&&s.length&&s.push(n[0]),s.sort(((t,e)=>t.zi()-e.zi()));for(const r of t){const t=Math.floor(r.Kt(e)/2),i=r.zi();i>-t&&i<t&&r.$i(t),i>this.Np.height-t&&i<this.Np.height+t&&r.$i(this.Np.height-t)}js(n,1,this.Np.height,e),js(s,-1,this.Np.height,e)}vv(t){if(null===this.Np)return;const e=this.hv(),i=this.nv(),n=this.Kp?"right":"left";e.forEach((e=>{e.Yi()&&e.Bt(Re(this.Xi)).lt(t,i,this.Wp,n)}))}mv(t){if(null===this.Np||null===this.Xi)return;const e=this.Rt.Yp().ni(),i=[],n=this.Rt.Mp(),s=e.Sc().Ys(n,this.Xi);s.length&&i.push(s);const r=this.nv(),o=this.Kp?"right":"left";i.forEach((e=>{e.forEach((e=>{e.Bt(Re(this.Xi)).lt(t,r,this.Wp,o)}))}))}wv(t){this.rp.style.cursor=1===t?"ns-resize":"default"}cl(){const t=this.ev();this.Up<t&&this.Rt.Yp().ni().Eh(),this.Up=t}rv(){return Ue(this.xl.fontSize,this.xl.fontFamily)}}function Gs(t,e){var i;return(null==(i=t.Qh)?void 0:i.call(t,e))??[]}function qs(t,e){var i;return(null==(i=t.ia)?void 0:i.call(t,e))??[]}function Ys(t,e){var i;return(null==(i=t.qs)?void 0:i.call(t,e))??[]}function Xs(t,e){var i;return(null==(i=t.fs)?void 0:i.call(t,e))??[]}function Zs(t,e){var i;return(null==(i=t.Gh)?void 0:i.call(t,e))??[]}class Qs{constructor(t,e){this.Np=_e({width:0,height:0}),this.gv=null,this.bv=null,this.xv=null,this.Sv=!1,this.Cv=new Ne,this.Pv=new Ne,this.kv=0,this.yv=!1,this.Tv=null,this.Rv=!1,this.Dv=null,this.Iv=null,this.$p=!1,this.qp=()=>{this.$p||null===this.Bv||this.es().ar()},this.jp=()=>{this.$p||null===this.Bv||this.es().ar()},this.Vv=t,this.Bv=e,this.Bv.i_().i(this.Ev.bind(this),this,!0),this.Av=document.createElement("td"),this.Av.style.padding="0",this.Av.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.zv=document.createElement("td"),this.zv.style.padding="0",this.Lv=document.createElement("td"),this.Lv.style.padding="0",this.Av.appendChild(i),this.Jp=zs(i,_e({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.qp);const n=this.Jp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Qp=zs(i,_e({width:16,height:16})),this.Qp.subscribeSuggestedBitmapSizeChanged(this.jp);const s=this.Qp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.ep=document.createElement("tr"),this.ep.appendChild(this.zv),this.ep.appendChild(this.Av),this.ep.appendChild(this.Lv),this.Ov(),this.Zf=new As(this.Qp.canvasElement,this,{Mf:()=>null===this.Tv&&!this.Vv.F().handleScroll.vertTouchDrag,gf:()=>null===this.Tv&&!this.Vv.F().handleScroll.horzTouchDrag,Uf:this.Vv.F().preventLeave})}m(){null!==this.gv&&this.gv.m(),null!==this.bv&&this.bv.m(),this.Qp.unsubscribeSuggestedBitmapSizeChanged(this.jp),Vs(this.Qp.canvasElement),this.Qp.dispose(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Vs(this.Jp.canvasElement),this.Jp.dispose(),null!==this.Bv&&(this.Bv.i_().u(this),this.Bv.m()),this.Zf.m()}Mp(){return Re(this.Bv)}Nv(t){null!==this.Bv&&this.Bv.i_().u(this),this.Bv=t,null!==this.Bv&&this.Bv.i_().i(Qs.prototype.Ev.bind(this),this,!0),this.Ov()}Yp(){return this.Vv}lp(){return this.ep}Ov(){if(null!==this.Bv&&(this.Fv(),0!==this.es().Js().length)){if(null!==this.gv){const t=this.Bv.Ho();this.gv.ds(Re(t))}if(null!==this.bv){const t=this.Bv.Uo();this.bv.ds(Re(t))}}}Wv(){null!==this.gv&&this.gv.Dt(),null!==this.bv&&this.bv.Dt()}Vo(){return null!==this.Bv?this.Bv.Vo():0}Eo(t){this.Bv&&this.Bv.Eo(t)}ff(t){if(!this.Bv)return;this.Hv();const e=t.localX,i=t.localY;this.Uv(e,i,t)}Vf(t){this.Hv(),this.$v(),this.Uv(t.localX,t.localY,t)}pf(t){if(!this.Bv)return;this.Hv();const e=t.localX,i=t.localY;this.Uv(e,i,t)}Tf(t){null!==this.Bv&&(this.Hv(),this.qv(t))}hf(t){null!==this.Bv&&this.Yv(this.Pv,t)}sf(t){this.hf(t)}Sf(t){this.Hv(),this.jv(t),this.Uv(t.localX,t.localY,t)}yf(t){null!==this.Bv&&(this.Hv(),this.yv=!1,this.Kv(t))}kf(t){null!==this.Bv&&this.qv(t)}qf(t){if(this.yv=!0,null===this.Tv){const e={x:t.localX,y:t.localY};this.Xv(e,e,t)}}$f(t){null!==this.Bv&&(this.Hv(),this.Bv.ni().wc(null),this.Gv())}Zv(){return this.Cv}Jv(){return this.Pv}Lf(){this.kv=1,this.es().un()}Of(t,e){if(!this.Vv.F().handleScale.pinch)return;const i=5*(e-this.kv);this.kv=e,this.es().Bc(t.ft,i)}If(t){this.yv=!1,this.Rv=null!==this.Tv,this.$v();const e=this.es().Sc();null!==this.Tv&&e.At()&&(this.Dv={x:e.hi(),y:e.ai()},this.Tv={x:t.localX,y:t.localY})}bf(t){if(null===this.Bv)return;const e=t.localX,i=t.localY;if(null===this.Tv)this.jv(t);else{this.Rv=!1;const n=Re(this.Dv),s=n.x+(e-this.Tv.x),r=n.y+(i-this.Tv.y);this.Uv(s,r,t)}}Pf(t){0===this.Yp().F().trackingMode.exitMode&&(this.Rv=!0),this.Qv(),this.Kv(t)}ht(t,e){const i=this.Bv;return null===i?null:Gn(i,t,e)}tm(t,e){Re("left"===e?this.gv:this.bv).av(_e({width:t,height:this.Np.height}))}op(){return this.Np}av(t){be(this.Np,t)||(this.Np=t,this.$p=!0,this.Jp.resizeCanvasElement(t),this.Qp.resizeCanvasElement(t),this.$p=!1,this.Av.style.width=t.width+"px",this.Av.style.height=t.height+"px")}im(){const t=Re(this.Bv);t.Wo(t.Ho()),t.Wo(t.Uo());for(const e of t.xa())if(t.$n(e)){const i=e.$t();null!==i&&t.Wo(i),e.$s()}for(const e of t.da())e.$s()}_p(){return this.Jp.bitmapSize}up(t,e,i){const n=this._p();n.width>0&&n.height>0&&t.drawImage(this.Jp.canvasElement,e,i)}_v(t){if(0===t)return;if(null===this.Bv)return;t>1&&this.im(),null!==this.gv&&this.gv._v(t),null!==this.bv&&this.bv._v(t);const e={colorSpace:this.Vv.F().layout.colorSpace};if(1!==t){this.Jp.applySuggestedBitmapSize();const t=Ce(this.Jp,e);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.cv(t)})),this.Bv&&(this.sm(t,Gs),this.nm(t),this.sm(t,qs),this.sm(t,Ys),this.sm(t,Xs)))}this.Qp.applySuggestedBitmapSize();const i=Ce(this.Qp,e);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.rm(i),this.sm(i,Zs),this.sm(i,Xs))}hm(){return this.gv}am(){return this.bv}fv(t,e){this.sm(t,e)}Ev(){null!==this.Bv&&this.Bv.i_().u(this),this.Bv=null}qv(t){this.Yv(this.Cv,t)}Yv(t,e){const i=e.localX,n=e.localY;t.v()&&t.p(this.es().Ot().du(i),{x:i,y:n},e)}cv({context:t,bitmapSize:e}){const{width:i,height:n}=e,s=this.es(),r=s.Y(),o=s.j();r===o?oi(t,0,0,i,n,o):ci(t,0,0,i,n,r,o)}nm(t){const e=Re(this.Bv),i=e.s_().lr().Bt(e);null!==i&&i.lt(t,!1)}rm(t){this.lm(t,Ys,Hs,this.es().Sc())}sm(t,e){const i=Re(this.Bv),n=i.Et(),s=i.da();for(const r of s)this.lm(t,e,$s,r);for(const r of n)this.lm(t,e,$s,r);for(const r of s)this.lm(t,e,Hs,r);for(const r of n)this.lm(t,e,Hs,r)}lm(t,e,i,n){const s=Re(this.Bv),r=s.ni().mc(),o=null!==r&&r.n_===n,a=null!==r&&o&&void 0!==r.e_?r.e_.hitTestData:void 0;Ks(e,(e=>i(e,t,o,a)),n,s)}Fv(){if(null===this.Bv)return;const t=this.Vv,e=this.Bv.Ho().F().visible,i=this.Bv.Uo().F().visible;e||null===this.gv||(this.zv.removeChild(this.gv.lp()),this.gv.m(),this.gv=null),i||null===this.bv||(this.Lv.removeChild(this.bv.lp()),this.bv.m(),this.bv=null);const n=t.ni().qc();e&&null===this.gv&&(this.gv=new Us(this,t.F(),n,"left"),this.zv.appendChild(this.gv.lp())),i&&null===this.bv&&(this.bv=new Us(this,t.F(),n,"right"),this.Lv.appendChild(this.bv.lp()))}om(t){return t.Yf&&this.yv||null!==this.Tv}_m(t){return Math.max(0,Math.min(t,this.Np.width-1))}um(t){return Math.max(0,Math.min(t,this.Np.height-1))}Uv(t,e,i){this.es().Nc(this._m(t),this.um(e),i,Re(this.Bv))}Gv(){this.es().Uc()}Qv(){this.Rv&&(this.Tv=null,this.Gv())}Xv(t,e,i){this.Tv=t,this.Rv=!1,this.Uv(e.x,e.y,i);const n=this.es().Sc();this.Dv={x:n.hi(),y:n.ai()}}es(){return this.Vv.ni()}Kv(t){if(!this.Sv)return;const e=this.es(),i=this.Mp();if(e.Xo(i,i.Ds()),this.xv=null,this.Sv=!1,e.zc(),null!==this.Iv){const t=performance.now(),i=e.Ot();this.Iv.ae(i.gu(),t),this.Iv.Ju(t)||e.fn(this.Iv)}}Hv(){this.Tv=null}$v(){this.Bv&&(this.es().un(),!this.Bv.Ds().Zi()&&this.es().Ot().Zi())}jv(t){if(null===this.Bv)return;const e=this.es(),i=e.Ot();if(i.Zi())return;const n=this.Vv.F(),s=n.handleScroll,r=n.kineticScroll;if((!s.pressedMouseMove||t.Yf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!t.Yf))return;const o=this.Bv.Ds(),a=performance.now();if(null!==this.xv||this.om(t)||(this.xv={x:t.clientX,y:t.clientY,md:a,dm:t.localX,fm:t.localY}),null!==this.xv&&!this.Sv&&(this.xv.x!==t.clientX||this.xv.y!==t.clientY)){if(t.Yf&&r.touch||!t.Yf&&r.mouse){const t=i.wu();this.Iv=new Bs(.2/t,7/t,.997,15/t),this.Iv.Lp(i.gu(),this.xv.md)}else this.Iv=null;o.Zi()||e.jo(this.Bv,o,t.localY),e.Ec(t.localX),this.Sv=!0}this.Sv&&(o.Zi()||e.Ko(this.Bv,o,t.localY),e.Ac(t.localX),null!==this.Iv&&this.Iv.Lp(i.gu(),a))}}class Js{constructor(t,e,i,n,s){this.yt=!0,this.Np=_e({width:0,height:0}),this.qp=()=>this._v(3),this.Kp="left"===t,this.lc=i.qc,this.Ts=e,this.pm=n,this.vm=s,this.rp=document.createElement("div"),this.rp.style.width="25px",this.rp.style.height="100%",this.rp.style.overflow="hidden",this.Jp=zs(this.rp,_e({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.qp)}m(){this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Vs(this.Jp.canvasElement),this.Jp.dispose()}lp(){return this.rp}op(){return this.Np}av(t){be(this.Np,t)||(this.Np=t,this.Jp.resizeCanvasElement(t),this.rp.style.width=`${t.width}px`,this.rp.style.height=`${t.height}px`,this.yt=!0)}_v(t){if(t<3&&!this.yt)return;if(0===this.Np.width||0===this.Np.height)return;this.yt=!1,this.Jp.applySuggestedBitmapSize();const e=Ce(this.Jp,{colorSpace:this.Ts.layout.colorSpace});null!==e&&e.useBitmapCoordinateSpace((t=>{this.cv(t),this.dv(t)}))}_p(){return this.Jp.bitmapSize}up(t,e,i){const n=this._p();n.width>0&&n.height>0&&t.drawImage(this.Jp.canvasElement,e,i)}dv({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.pm())return;t.fillStyle=this.Ts.timeScale.borderColor;const s=Math.floor(this.lc.F().S*i),r=Math.floor(this.lc.F().S*n),o=this.Kp?e.width-s:0;t.fillRect(o,0,s,r)}cv({context:t,bitmapSize:e}){oi(t,0,0,e.width,e.height,this.vm())}}function tr(t){return e=>{var i;return(null==(i=e.na)?void 0:i.call(e,t))??[]}}const er=tr("normal"),ir=tr("top"),nr=tr("bottom");class sr{constructor(t,e){this.wm=null,this.Mm=null,this.M=null,this.gm=!1,this.Np=_e({width:0,height:0}),this.bm=new Ne,this.Wp=new Ii(5),this.$p=!1,this.qp=()=>{this.$p||this.Vv.ni().ar()},this.jp=()=>{this.$p||this.Vv.ni().ar()},this.Vv=t,this.o_=e,this.Ts=t.F().layout,this.xm=document.createElement("tr"),this.Sm=document.createElement("td"),this.Sm.style.padding="0",this.Cm=document.createElement("td"),this.Cm.style.padding="0",this.rp=document.createElement("td"),this.rp.style.height="25px",this.rp.style.padding="0",this.Pm=document.createElement("div"),this.Pm.style.width="100%",this.Pm.style.height="100%",this.Pm.style.position="relative",this.Pm.style.overflow="hidden",this.rp.appendChild(this.Pm),this.Jp=zs(this.Pm,_e({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Qp=zs(this.Pm,_e({width:16,height:16})),this.Qp.subscribeSuggestedBitmapSizeChanged(this.jp);const n=this.Qp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.xm.appendChild(this.Sm),this.xm.appendChild(this.rp),this.xm.appendChild(this.Cm),this.km(),this.Vv.ni().Bo().i(this.km.bind(this),this),this.Zf=new As(this.Qp.canvasElement,this,{Mf:()=>!0,gf:()=>!this.Vv.F().handleScroll.horzTouchDrag})}m(){this.Zf.m(),null!==this.wm&&this.wm.m(),null!==this.Mm&&this.Mm.m(),this.Qp.unsubscribeSuggestedBitmapSizeChanged(this.jp),Vs(this.Qp.canvasElement),this.Qp.dispose(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Vs(this.Jp.canvasElement),this.Jp.dispose()}lp(){return this.xm}ym(){return this.wm}Tm(){return this.Mm}Vf(t){if(this.gm)return;this.gm=!0;const e=this.Vv.ni();!e.Ot().Zi()&&this.Vv.F().handleScale.axisPressedMouseMove.time&&e.Ic(t.localX)}If(t){this.Vf(t)}Ef(){const t=this.Vv.ni();!t.Ot().Zi()&&this.gm&&(this.gm=!1,this.Vv.F().handleScale.axisPressedMouseMove.time&&t.Oc())}Sf(t){const e=this.Vv.ni();!e.Ot().Zi()&&this.Vv.F().handleScale.axisPressedMouseMove.time&&e.Lc(t.localX)}bf(t){this.Sf(t)}yf(){this.gm=!1;const t=this.Vv.ni();t.Ot().Zi()&&!this.Vv.F().handleScale.axisPressedMouseMove.time||t.Oc()}Pf(){this.yf()}hf(){this.Vv.F().handleScale.axisDoubleClickReset.time&&this.Vv.ni().vn()}sf(){this.hf()}ff(){this.Vv.ni().F().handleScale.axisPressedMouseMove.time&&this.wv(1)}$f(){this.wv(0)}op(){return this.Np}Rm(){return this.bm}Dm(t,e,i){be(this.Np,t)||(this.Np=t,this.$p=!0,this.Jp.resizeCanvasElement(t),this.Qp.resizeCanvasElement(t),this.$p=!1,this.rp.style.width=`${t.width}px`,this.rp.style.height=`${t.height}px`,this.bm.p(t)),null!==this.wm&&this.wm.av(_e({width:e,height:t.height})),null!==this.Mm&&this.Mm.av(_e({width:i,height:t.height}))}Im(){const t=this.Bm();return Math.ceil(t.S+t.C+t.P+t.L+t.B+t.Vm)}Dt(){this.Vv.ni().Ot().Ba()}_p(){return this.Jp.bitmapSize}up(t,e,i){const n=this._p();n.width>0&&n.height>0&&t.drawImage(this.Jp.canvasElement,e,i)}_v(t){if(0===t)return;const e={colorSpace:this.Ts.colorSpace};if(1!==t){this.Jp.applySuggestedBitmapSize();const i=Ce(this.Jp,e);null!==i&&(i.useBitmapCoordinateSpace((t=>{this.cv(t),this.dv(t),this.Em(i,nr)})),this.pv(i),this.Em(i,er)),null!==this.wm&&this.wm._v(t),null!==this.Mm&&this.Mm._v(t)}this.Qp.applySuggestedBitmapSize();const i=Ce(this.Qp,e);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.Am([...this.Vv.ni().Js(),this.Vv.ni().Sc()],i),this.Em(i,ir))}Em(t,e){const i=this.Vv.ni().Js();for(const n of i)Ks(e,(e=>$s(e,t,!1,void 0)),n,void 0);for(const n of i)Ks(e,(e=>Hs(e,t,!1,void 0)),n,void 0)}cv({context:t,bitmapSize:e}){oi(t,0,0,e.width,e.height,this.Vv.ni().j())}dv({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Vv.F().timeScale.borderVisible){t.fillStyle=this.zm();const n=Math.max(1,Math.floor(this.Bm().S*i));t.fillRect(0,0,e.width,n)}}pv(t){const e=this.Vv.ni().Ot(),i=e.Ba();if(!i||0===i.length)return;const n=this.o_.maxTickMarkWeight(i),s=this.Bm(),r=e.F();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:e,verticalPixelRatio:n})=>{t.strokeStyle=this.zm(),t.fillStyle=this.zm();const r=Math.max(1,Math.floor(e)),o=Math.floor(.5*e);t.beginPath();const a=Math.round(s.C*n);for(let s=i.length;s--;){const n=Math.round(i[s].coord*e);t.rect(n-o,0,r,a)}t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{const e=s.S+s.C+s.L+s.P/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.U(),t.font=this.rv();for(const s of i)if(s.weight<n){const i=s.needAlignCoordinate?this.Lm(t,s.coord,s.label):s.coord;t.fillText(s.label,i,e)}this.Vv.F().timeScale.allowBoldLabels&&(t.font=this.Om());for(const s of i)if(s.weight>=n){const i=s.needAlignCoordinate?this.Lm(t,s.coord,s.label):s.coord;t.fillText(s.label,i,e)}}))}Lm(t,e,i){const n=this.Wp.measureText(t,i),s=n/2,r=Math.floor(e-s)+.5;return r<0?e+=Math.abs(0-r):r+n>this.Np.width&&(e-=Math.abs(this.Np.width-(r+n))),e}Am(t,e){const i=this.Bm();for(const n of t)for(const t of n.ps())t.Bt().lt(e,i)}zm(){return this.Vv.F().timeScale.borderColor}U(){return this.Ts.textColor}W(){return this.Ts.fontSize}rv(){return Ue(this.W(),this.Ts.fontFamily)}Om(){return Ue(this.W(),this.Ts.fontFamily,"bold")}Bm(){null===this.M&&(this.M={S:1,O:NaN,L:NaN,B:NaN,ss:NaN,C:5,P:NaN,k:"",ts:new Ii,Vm:0});const t=this.M,e=this.rv();if(t.k!==e){const i=this.W();t.P=i,t.k=e,t.L=3*i/12,t.B=3*i/12,t.ss=9*i/12,t.O=0,t.Vm=4*i/12,t.ts.reset()}return this.M}wv(t){this.rp.style.cursor=1===t?"ew-resize":"default"}km(){const t=this.Vv.ni(),e=t.F();e.leftPriceScale.visible||null===this.wm||(this.Sm.removeChild(this.wm.lp()),this.wm.m(),this.wm=null),e.rightPriceScale.visible||null===this.Mm||(this.Cm.removeChild(this.Mm.lp()),this.Mm.m(),this.Mm=null);const i={qc:this.Vv.ni().qc()},n=()=>e.leftPriceScale.borderVisible&&t.Ot().F().borderVisible,s=()=>t.j();e.leftPriceScale.visible&&null===this.wm&&(this.wm=new Js("left",e,i,n,s),this.Sm.appendChild(this.wm.lp())),e.rightPriceScale.visible&&null===this.Mm&&(this.Mm=new Js("right",e,i,n,s),this.Cm.appendChild(this.Mm.lp()))}}const rr=!!Cs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!Cs&&((null==(t=null==navigator?void 0:navigator.userAgentData)?void 0:t.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class or{constructor(t,e,i){var n;this.Nm=[],this.Fm=[],this.Wm=0,this.nl=0,this.bo=0,this.Hm=0,this.Um=0,this.$m=null,this.qm=!1,this.Cv=new Ne,this.Pv=new Ne,this.rc=new Ne,this.Ym=null,this.jm=null,this.Km=t,this.Ts=e,this.o_=i,this.xm=document.createElement("div"),this.xm.classList.add("tv-lightweight-charts"),this.xm.style.overflow="hidden",this.xm.style.direction="ltr",this.xm.style.width="100%",this.xm.style.height="100%",(n=this.xm).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Xm=document.createElement("table"),this.Xm.setAttribute("cellspacing","0"),this.xm.appendChild(this.Xm),this.Gm=this.Zm.bind(this),ar(this.Ts)&&this.Jm(!0),this.es=new ls(this.ac.bind(this),this.Ts,i),this.ni().Cc().i(this.Qm.bind(this),this),this.tw=new sr(this,this.o_),this.Xm.appendChild(this.tw.lp());const s=e.autoSize&&this.iw();let r=this.Ts.width,o=this.Ts.height;if(s||0===r||0===o){const e=t.getBoundingClientRect();r=r||e.width,o=o||e.height}this.sw(r,o),this.nw(),t.appendChild(this.xm),this.ew(),this.es.Ot().Bu().i(this.es.Eh.bind(this.es),this),this.es.Bo().i(this.es.Eh.bind(this.es),this)}ni(){return this.es}F(){return this.Ts}sp(){return this.Nm}rw(){return this.tw}m(){this.Jm(!1),0!==this.Wm&&window.cancelAnimationFrame(this.Wm),this.es.Cc().u(this),this.es.Ot().Bu().u(this),this.es.Bo().u(this),this.es.m();for(const t of this.Nm)this.Xm.removeChild(t.lp()),t.Zv().u(this),t.Jv().u(this),t.m();this.Nm=[];for(const t of this.Fm)this.hw(t);this.Fm=[],Re(this.tw).m(),null!==this.xm.parentElement&&this.xm.parentElement.removeChild(this.xm),this.rc.m(),this.Cv.m(),this.Pv.m(),this.aw()}sw(t,e,i=!1){if(this.nl===e&&this.bo===t)return;const n=function(t){const e=Math.floor(t.width),i=Math.floor(t.height);return _e({width:e-e%2,height:i-i%2})}(_e({width:t,height:e}));this.nl=n.height,this.bo=n.width;const s=this.nl+"px",r=this.bo+"px";Re(this.xm).style.height=s,Re(this.xm).style.width=r,this.Xm.style.height=s,this.Xm.style.width=r,i?this.lw(bi.Sn(),performance.now()):this.es.Eh()}_v(t){void 0===t&&(t=bi.Sn());for(let e=0;e<this.Nm.length;e++)this.Nm[e]._v(t.ln(e).rn);this.Ts.timeScale.visible&&this.tw._v(t.an())}hr(t){var e;const i=ar(this.Ts);this.es.hr(t);const n=ar(this.Ts);n!==i&&this.Jm(n),(null==(e=t.layout)?void 0:e.panes)&&this.ow(),this.ew(),this._w(t)}Zv(){return this.Cv}Jv(){return this.Pv}Cc(){return this.rc}uw(){null!==this.$m&&(this.lw(this.$m,performance.now()),this.$m=null);const t=this.cw(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=Re(e.getContext("2d"));return this.cw(i),e}dw(t){return("left"!==t||this.fw())&&("right"!==t||this.pw())?0===this.Nm.length?0:Re("left"===t?this.Nm[0].hm():this.Nm[0].am()).lv():0}mw(){return this.Ts.autoSize&&null!==this.Ym}dp(){return this.xm}ww(t){this.jm=t,this.jm?this.dp().style.setProperty("cursor",t):this.dp().style.removeProperty("cursor")}Mw(){return this.jm}gw(t){return Oe(this.Nm[t]).op()}ow(){this.Fm.forEach((t=>{t.Dt()}))}_w(t){(void 0!==t.autoSize||!this.Ym||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Ym&&this.iw(),!1===t.autoSize&&null!==this.Ym&&this.aw(),t.autoSize||void 0===t.width&&void 0===t.height||this.sw(t.width||this.bo,t.height||this.nl))}cw(t){let e=0,i=0;const n=this.Nm[0],s=(e,i)=>{let n=0;for(let s=0;s<this.Nm.length;s++){const r=this.Nm[s],o=Re("left"===e?r.hm():r.am()),a=o._p();if(null!==t&&o.up(t,i,n),n+=a.height,s<this.Nm.length-1){const e=this.Fm[s],r=e._p();null!==t&&e.up(t,i,n),n+=r.height}}};this.fw()&&(s("left",0),e+=Re(n.hm())._p().width);for(let o=0;o<this.Nm.length;o++){const n=this.Nm[o],s=n._p();if(null!==t&&n.up(t,e,i),i+=s.height,o<this.Nm.length-1){const n=this.Fm[o],s=n._p();null!==t&&n.up(t,e,i),i+=s.height}}e+=n._p().width,this.pw()&&(s("right",e),e+=Re(n.am())._p().width);const r=(e,i,n)=>{Re("left"===e?this.tw.ym():this.tw.Tm()).up(Re(t),i,n)};if(this.Ts.timeScale.visible){const e=this.tw._p();if(null!==t){let s=0;this.fw()&&(r("left",s,i),s=Re(n.hm())._p().width),this.tw.up(t,s,i),s+=e.width,this.pw()&&r("right",s,i)}i+=e.height}return _e({width:e,height:i})}bw(){let t=0,e=0,i=0;for(const m of this.Nm)this.fw()&&(e=Math.max(e,Re(m.hm()).ev(),this.Ts.leftPriceScale.minimumWidth)),this.pw()&&(i=Math.max(i,Re(m.am()).ev(),this.Ts.rightPriceScale.minimumWidth)),t+=m.Vo();e=Es(e),i=Es(i);const n=this.bo,s=this.nl,r=Math.max(n-e-i,0),o=1*this.Fm.length,a=this.Ts.timeScale.visible;let l=a?Math.max(this.tw.Im(),this.Ts.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const h=o+l,u=s<h?0:s-h,d=u/t;let p=0;const f=window.devicePixelRatio||1;for(let m=0;m<this.Nm.length;++m){const t=this.Nm[m];t.Nv(this.es.Xs()[m]);let n=0,s=0;s=m===this.Nm.length-1?Math.ceil((u-p)*f)/f:Math.round(t.Vo()*d*f)/f,n=Math.max(s,2),p+=n,t.av(_e({width:r,height:n})),this.fw()&&t.tm(e,"left"),this.pw()&&t.tm(i,"right"),t.Mp()&&this.es.Pc(t.Mp(),n)}this.tw.Dm(_e({width:a?r:0,height:l}),a?e:0,a?i:0),this.es.Ao(r),this.Hm!==e&&(this.Hm=e),this.Um!==i&&(this.Um=i)}Jm(t){t?this.xm.addEventListener("wheel",this.Gm,{passive:!1}):this.xm.removeEventListener("wheel",this.Gm)}xw(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return rr?1/window.devicePixelRatio:1}Zm(t){if(!(0!==t.deltaX&&this.Ts.handleScroll.mouseWheel||0!==t.deltaY&&this.Ts.handleScale.mouseWheel))return;const e=this.xw(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==n&&this.Ts.handleScale.mouseWheel){const e=Math.sign(n)*Math.min(1,Math.abs(n)),i=t.clientX-this.xm.getBoundingClientRect().left;this.ni().Bc(i,e)}0!==i&&this.Ts.handleScroll.mouseWheel&&this.ni().Vc(-80*i)}lw(t,e){var i;const n=t.an();3===n&&this.Sw(),3!==n&&2!==n||(this.Cw(t),this.Pw(t,e),this.tw.Dt(),this.Nm.forEach((t=>{t.Wv()})),3===(null==(i=this.$m)?void 0:i.an())&&(this.$m.gn(t),this.Sw(),this.Cw(this.$m),this.Pw(this.$m,e),t=this.$m,this.$m=null)),this._v(t)}Pw(t,e){for(const i of t.Mn())this.bn(i,e)}Cw(t){const e=this.es.Xs();for(let i=0;i<e.length;i++)t.ln(i).hn&&e[i].Jo()}bn(t,e){const i=this.es.Ot();switch(t.cn){case 0:i.Eu();break;case 1:i.Au(t.qt);break;case 2:i.mn(t.qt);break;case 3:i.wn(t.qt);break;case 4:i.Su();break;case 5:t.qt.Ju(e)||i.wn(t.qt.Fs(e))}}ac(t){null!==this.$m?this.$m.gn(t):this.$m=t,this.qm||(this.qm=!0,this.Wm=window.requestAnimationFrame((t=>{if(this.qm=!1,this.Wm=0,null!==this.$m){const e=this.$m;this.$m=null,this.lw(e,t);for(const i of e.Mn())if(5===i.cn&&!i.qt.Ju(t)){this.ni().fn(i.qt);break}}})))}Sw(){this.nw()}hw(t){this.Xm.removeChild(t.lp()),t.m()}nw(){const t=this.es.Xs(),e=t.length,i=this.Nm.length;for(let n=e;n<i;n++){const t=Oe(this.Nm.pop());this.Xm.removeChild(t.lp()),t.Zv().u(this),t.Jv().u(this),t.m();const e=this.Fm.pop();void 0!==e&&this.hw(e)}for(let n=i;n<e;n++){const e=new Qs(this,t[n]);if(e.Zv().i(this.kw.bind(this,e),this),e.Jv().i(this.yw.bind(this,e),this),this.Nm.push(e),n>0){const t=new Ls(this,n-1,n);this.Fm.push(t),this.Xm.insertBefore(t.lp(),this.tw.lp())}this.Xm.insertBefore(e.lp(),this.tw.lp())}for(let n=0;n<e;n++){const e=t[n],i=this.Nm[n];i.Mp()!==e?i.Nv(e):i.Ov()}this.ew(),this.bw()}Tw(t,e,i,n){var s;const r=new Map;let o;if(null!==t&&this.es.Js().forEach((e=>{const i=e.Qs().Nr(t);null!==i&&r.set(e,i)})),null!==t){const e=null==(s=this.es.Ot().Q_(t))?void 0:s.originalTime;void 0!==e&&(o=e)}const a=this.ni().mc(),l=null!==a&&a.n_ instanceof gn?a.n_:void 0,c=null!==a&&void 0!==a.e_?a.e_.externalId:void 0,h=this.Rw(n);return{Dw:o,Te:t??void 0,Iw:e??void 0,Bw:-1!==h?h:void 0,Vw:l,Ew:r,Aw:c,zw:i??void 0}}Rw(t){let e=-1;if(t)e=this.Nm.indexOf(t);else{const t=this.ni().Sc().Ks();null!==t&&(e=this.ni().Xs().indexOf(t))}return e}kw(t,e,i,n){this.Cv.p((()=>this.Tw(e,i,n,t)))}yw(t,e,i,n){this.Pv.p((()=>this.Tw(e,i,n,t)))}Qm(t,e,i){var n;this.ww((null==(n=this.ni().mc())?void 0:n.h_)??null),this.rc.p((()=>this.Tw(t,e,i)))}ew(){const t=this.Ts.timeScale.visible?"":"none";this.tw.lp().style.display=t}fw(){return this.Nm[0].Mp().Ho().F().visible}pw(){return this.Nm[0].Mp().Uo().F().visible}iw(){return"ResizeObserver"in window&&(this.Ym=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.sw(e.contentRect.width,e.contentRect.height)})),this.Ym.observe(this.Km,{box:"border-box"}),!0)}aw(){null!==this.Ym&&this.Ym.disconnect(),this.Ym=null}}function ar(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function lr(t,e,i,n){const s=i.value,r={index:e,time:t,value:[s,s,s,s],originalTime:n};return void 0!==i.color&&(r.R=i.color),r}function cr(t,e,i,n){const s=i.value,r={index:e,time:t,value:[s,s,s,s],originalTime:n};return void 0!==i.lineColor&&(r.bt=i.lineColor),void 0!==i.topColor&&(r.wr=i.topColor),void 0!==i.bottomColor&&(r.Mr=i.bottomColor),r}function hr(t,e,i,n){const s=i.value,r={index:e,time:t,value:[s,s,s,s],originalTime:n};return void 0!==i.topLineColor&&(r.gr=i.topLineColor),void 0!==i.bottomLineColor&&(r.br=i.bottomLineColor),void 0!==i.topFillColor1&&(r.Sr=i.topFillColor1),void 0!==i.topFillColor2&&(r.Cr=i.topFillColor2),void 0!==i.bottomFillColor1&&(r.Pr=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(r.kr=i.bottomFillColor2),r}function ur(t,e,i,n){const s={index:e,time:t,value:[i.open,i.high,i.low,i.close],originalTime:n};return void 0!==i.color&&(s.R=i.color),s}function dr(t,e,i,n){const s={index:e,time:t,value:[i.open,i.high,i.low,i.close],originalTime:n};return void 0!==i.color&&(s.R=i.color),void 0!==i.borderColor&&(s.Yt=i.borderColor),void 0!==i.wickColor&&(s.vr=i.wickColor),s}function pr(t,e,i,n){const s={index:e,time:t,value:[i.open,i.high,i.low,i.close],originalTime:n};return void 0!==i.color&&(s.R=i.color),void 0!==i.borderColor&&(s.Yt=i.borderColor),void 0!==i.wickColor&&(s.vr=i.wickColor),s}function fr(t,e,i,n,s){const r=Oe(s)(i),o=Math.max(...r),a=Math.min(...r),l=r[r.length-1],c=[l,o,a,l],{time:h,...u}=i;return{index:e,time:t,value:c,originalTime:n,ie:u,R:u.color}}function mr(t){return void 0!==t.value}function gr(t,e){return void 0!==e.customValues&&(t.customValues=e.customValues),t}function vr(t){return(e,i,n,s,r,o)=>{return a=n,((l=o)?l(a):function(t){return void 0===t.open&&void 0===t.value}(a))?gr({xt:e,Te:i,Dw:s},n):gr(t(e,i,n,s,r),n);var a,l}}function yr(t){return{Candlestick:vr(dr),HollowCandlestick:vr(pr),Bar:vr(ur),Area:vr(cr),Baseline:vr(hr),Histogram:vr(lr),Line:vr(lr),Custom:vr(fr)}[t]}function _r(t){return{Te:0,Lw:new Map,Uh:t}}function br(t,e){if(void 0!==t&&0!==t.length)return{Ow:e.key(t[0].time),Nw:e.key(t[t.length-1].time)}}function wr(t){let e;return t.forEach((t=>{void 0===e&&(e=t.originalTime)})),Oe(e)}class xr{constructor(t){this.Fw=new Map,this.Ww=new Map,this.Hw=new Map,this.Uw=[],this.o_=t}m(){this.Fw.clear(),this.Ww.clear(),this.Hw.clear(),this.Uw=[]}$w(t,e){let i=0!==this.Fw.size,n=!1;const s=this.Ww.get(t);if(void 0!==s)if(1===this.Ww.size)i=!1,n=!0,this.Fw.clear();else for(const a of this.Uw)a.pointData.Lw.delete(t)&&(n=!0);let r=[];if(0!==e.length){const i=e.map((t=>t.time)),s=this.o_.createConverterToInternalObj(e),o=yr(t.Dr()),a=t.fa(),l=t.va();r=e.map(((e,r)=>{const c=s(e.time),h=this.o_.key(c);let u=this.Fw.get(h);void 0===u&&(u=_r(c),this.Fw.set(h,u),n=!0);const d=o(c,u.Te,e,i[r],a,l);return u.Lw.set(t,d),d}))}i&&this.qw(),this.Yw(t,r);let o=-1;if(n){const t=[];this.Fw.forEach((e=>{t.push({timeWeight:0,time:e.Uh,pointData:e,originalTime:wr(e.Lw)})})),t.sort(((t,e)=>this.o_.key(t.time)-this.o_.key(e.time))),o=this.jw(t)}return this.Kw(t,o,function(t,e,i){const n=br(t,i),s=br(e,i);if(void 0!==n&&void 0!==s)return{Xw:!1,Lh:n.Nw>=s.Nw&&n.Ow>=s.Ow}}(this.Ww.get(t),s,this.o_))}Kc(t){return this.$w(t,[])}Gw(t,e,i){const n=e;var s;void 0===(s=n).Dw&&(s.Dw=s.time),this.o_.preprocessData(e);const r=this.o_.createConverterToInternalObj([e])(e.time),o=this.Hw.get(t);if(!i&&void 0!==o&&this.o_.key(r)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.Fw.get(this.o_.key(r));if(i&&void 0===a)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=void 0===a;void 0===a&&(a=_r(r),this.Fw.set(this.o_.key(r),a));const c=yr(t.Dr()),h=t.fa(),u=t.va(),d=c(r,a.Te,e,n.Dw,h,u);a.Lw.set(t,d),i?this.Zw(t,d,a.Te):this.Jw(t,d);const p={Lh:mr(d),Xw:i};if(!l)return this.Kw(t,-1,p);const f={timeWeight:0,time:a.Uh,pointData:a,originalTime:wr(a.Lw)},m=qi(this.Uw,this.o_.key(f.time),((t,e)=>this.o_.key(t.time)<e));this.Uw.splice(m,0,f);for(let g=m;g<this.Uw.length;++g)Sr(this.Uw[g].pointData,g);return this.o_.fillWeightsForPoints(this.Uw,m),this.Kw(t,m,p)}Jw(t,e){let i=this.Ww.get(t);void 0===i&&(i=[],this.Ww.set(t,i));const n=0!==i.length?i[i.length-1]:null;null===n||this.o_.key(e.time)>this.o_.key(n.time)?mr(e)&&i.push(e):mr(e)?i[i.length-1]=e:i.splice(-1,1),this.Hw.set(t,e.time)}Zw(t,e,i){const n=this.Ww.get(t);if(void 0===n)return;const s=qi(n,i,((t,e)=>t.index<e));mr(e)?n[s]=e:n.splice(s,1)}Yw(t,e){0!==e.length?(this.Ww.set(t,e.filter(mr)),this.Hw.set(t,e[e.length-1].time)):(this.Ww.delete(t),this.Hw.delete(t))}qw(){for(const t of this.Uw)0===t.pointData.Lw.size&&this.Fw.delete(this.o_.key(t.time))}jw(t){let e=-1;for(let i=0;i<this.Uw.length&&i<t.length;++i){const n=this.Uw[i],s=t[i];if(this.o_.key(n.time)!==this.o_.key(s.time)){e=i;break}s.timeWeight=n.timeWeight,Sr(s.pointData,i)}if(-1===e&&this.Uw.length!==t.length&&(e=Math.min(this.Uw.length,t.length)),-1===e)return-1;for(let i=e;i<t.length;++i)Sr(t[i].pointData,i);return this.o_.fillWeightsForPoints(t,e),this.Uw=t,e}Qw(){if(0===this.Ww.size)return null;let t=0;return this.Ww.forEach((e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].index))})),t}Kw(t,e,i){const n={No:new Map,Ot:{uu:this.Qw()}};if(-1!==e)this.Ww.forEach(((e,s)=>{n.No.set(s,{ie:e,tM:s===t?i:void 0})})),this.Ww.has(t)||n.No.set(t,{ie:[],tM:i}),n.Ot.Ou=this.Uw,n.Ot.iM=e;else{const e=this.Ww.get(t);n.No.set(t,{ie:e||[],tM:i})}return n}}function Sr(t,e){t.Te=e,t.Lw.forEach((t=>{t.index=e}))}class Tr{constructor(t){this.sM=null,this.nM=null,this.eM=null,this.rM=t}hM(){const t=this.rM.nu();if(null===t)return[];const e=Math.round(t.$h()),i=Math.round(t.ki()),n=this.rM.uu();if(null===this.nM||null===this.eM||this.sM!==n){const t=this.rM.wu();this.eM=Math.floor(120/t),this.nM=i%this.eM,this.sM=n}const s=Le(this.nM),r=[];let o=Math.floor((e-s)/this.eM);const a=Math.floor((i-s)/this.eM);for(;o<=a;o++)r.push(s+o*this.eM);return r}aM(){this.nM=null,this.sM=null,this.eM=null}}function Cr(t,e){return t.xt<e}function Mr(t,e){return e<t.xt}class Ir{constructor(t,e,i){this.lM=!0,this.oM=!0,this._M=!0,this.uM=[],this.cM=null,this.Zn=t,this.Jn=e,this.dM=i,this.fM=new Tr(this.Jn.Ot())}Dt(t){this.lM=!0,"data"===t&&(this.oM=!0),"options"===t&&(this._M=!0)}Bt(){return this.Zn.At()?(this.pM(),null===this.cM?null:this.vM):null}mM(){this.uM=this.uM.map((t=>({...t,...this.Zn.Dh().Ir(t.xt)})))}wM(){this.cM=null}MM(){const t=this.Jn.Un(this.Zn);if(!t)return null;const e=t.Kt(),i={Ou:[],gM:[],At:!0},n=this.Zn.Ft();if(null===n)return null;for(const s of this.fM.hM()){const t=Math.round(s),r=this.Zn.Qs().Nr(t);if(!r)continue;const o=r.value,a=o.reduce(((t,e)=>t+e))/o.length,l=this.Jn.Ot().Xt(t),c=this.Zn.$t().Ut(a,n.qt);i.Ou.push({x:l,y:c});const h=c/e,u=this.Jn.jt(h);i.gM.push(u)}return i}pM(){this.oM&&(this.fM.aM(),this.bM(),this.oM=!1),this._M&&(this.mM(),this._M=!1),this.lM&&(this.xM(),this.lM=!1)}xM(){const t=this.Zn.$t(),e=this.Jn.Ot();if(this.wM(),e.Zi()||t.Zi())return;const i=e.Ce();if(null===i)return;if(0===this.Zn.Qs().size())return;const n=this.Zn.Ft();null!==n&&(this.cM=function(t,e,i){const n=e.$h(),s=e.ki(),r=qi(t,n,Cr),o=Yi(t,s,Mr);if(!i)return{from:r,to:o};let a=r,l=o;return r>0&&r<t.length&&t[r].xt>=n&&(a=r-1),o>0&&o<t.length&&t[o-1].xt<=s&&(l=o+1),{from:a,to:l}}(this.uM,i,this.dM),this.SM(t,e,n.qt),this.CM())}}class Er{constructor(t,e){this.PM=t,this.Xi=e}lt(t,e,i){this.PM.draw(t,this.Xi,e,i)}ht(t,e){return this.PM.hitTest?this.PM.hitTest(t,e):null}}class Ar extends Ir{constructor(t,e,i){super(t,e,!1),this.sh=i,this.vM=new Er(this.sh.renderer(),(e=>{const i=t.Ft();return null===i?null:t.$t().Ut(e,i.qt)}))}pa(t){return this.sh.priceValueBuilder(t)}ma(t){return this.sh.isWhitespace(t)}bM(){const t=this.Zn.Dh();this.uM=this.Zn.Qs().Wr().map((e=>({xt:e.index,ft:NaN,...t.Ir(e.index),kM:e.ie})))}SM(t,e){e.cu(this.uM,We(this.cM))}CM(){this.sh.update({bars:this.uM.map(Dr),barSpacing:this.Jn.Ot().wu(),visibleRange:this.cM},this.Zn.F())}}function Dr(t){return{x:t.ft,time:t.xt,originalData:t.kM,barColor:t.cr}}const kr={color:"#2196f3"},Pr=(t,e,i)=>{const n=Le(i);return new Ar(t,e,n)};function Or(t){const e={value:t.value[3],time:t.originalTime};return void 0!==t.customValues&&(e.customValues=t.customValues),e}function Rr(t){const e=Or(t);return void 0!==t.R&&(e.color=t.R),e}function Lr(t){const e=Or(t);return void 0!==t.bt&&(e.lineColor=t.bt),void 0!==t.wr&&(e.topColor=t.wr),void 0!==t.Mr&&(e.bottomColor=t.Mr),e}function Nr(t){const e=Or(t);return void 0!==t.gr&&(e.topLineColor=t.gr),void 0!==t.br&&(e.bottomLineColor=t.br),void 0!==t.Sr&&(e.topFillColor1=t.Sr),void 0!==t.Cr&&(e.topFillColor2=t.Cr),void 0!==t.Pr&&(e.bottomFillColor1=t.Pr),void 0!==t.kr&&(e.bottomFillColor2=t.kr),e}function Fr(t){const e={open:t.value[0],high:t.value[1],low:t.value[2],close:t.value[3],time:t.originalTime};return void 0!==t.customValues&&(e.customValues=t.customValues),e}function Br(t){const e=Fr(t);return void 0!==t.R&&(e.color=t.R),e}function zr(t){const e=Fr(t),{R:i,Yt:n,vr:s}=t;return void 0!==i&&(e.color=i),void 0!==n&&(e.borderColor=n),void 0!==s&&(e.wickColor=s),e}function Vr(t){const e=Fr(t),{R:i,Yt:n,vr:s}=t;return void 0!==i&&(e.color=i),void 0!==n&&(e.borderColor=n),void 0!==s&&(e.wickColor=s),e}function $r(t){return{Area:Lr,Line:Rr,Baseline:Nr,Histogram:Rr,Bar:Br,Candlestick:zr,HollowCandlestick:Vr,Custom:Hr}[t]}function Hr(t){const e=t.originalTime;return{...t.ie,time:e}}const Kr={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Wr={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},jr={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:je,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Ur={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Gr={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function qr(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:jr,crosshair:Kr,grid:Wr,overlayPriceScales:{...Ur},leftPriceScale:{...Ur,visible:!1},rightPriceScale:{...Ur,visible:!0},timeScale:Gr,localization:{locale:Cs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Yr{constructor(t,e,i){this.tp=t,this.yM=e,this.TM=i??0}applyOptions(t){this.tp.ni().bc(this.yM,t,this.TM)}options(){return this.Xi().F()}width(){return _i(this.yM)?this.tp.dw(this.yM):0}setVisibleRange(t){this.setAutoScale(!1),this.Xi().Hl(new zi(t.from,t.to))}getVisibleRange(){const t=this.Xi().Je();return null===t?null:{from:t.Ue(),to:t.$e()}}setAutoScale(t){this.applyOptions({autoScale:t})}Xi(){return Re(this.tp.ni().xc(this.yM,this.TM)).$t}}class Xr{constructor(t,e,i,n){this.tp=t,this.Rt=i,this.RM=e,this.DM=n}getHeight(){return this.Rt.Kt()}setHeight(t){const e=this.tp.ni(),i=e.Wc(this.Rt);e.yc(i,t)}getStretchFactor(){return this.Rt.Vo()}setStretchFactor(t){this.Rt.Eo(t),this.tp.ni().Eh()}paneIndex(){return this.tp.ni().Wc(this.Rt)}moveTo(t){const e=this.paneIndex();e!==t&&(Pe(t>=0&&t<this.tp.sp().length,"Invalid pane index"),this.tp.ni().Rc(e,t))}getSeries(){return this.Rt.No().map((t=>this.RM(t)))??[]}getHTMLElement(){const t=this.tp.sp();return t&&0!==t.length&&t[this.paneIndex()]?t[this.paneIndex()].lp():null}attachPrimitive(t){this.Rt.ua(t),t.attached&&t.attached({chart:this.DM,requestUpdate:()=>this.Rt.ni().Eh()})}detachPrimitive(t){this.Rt.ca(t)}priceScale(t){if(null===this.Rt.Io(t))throw new Error(`Cannot find price scale with id: ${t}`);return new Yr(this.tp,t,this.paneIndex())}setPreserveEmptyPane(t){this.Rt.Lo(t)}preserveEmptyPane(){return this.Rt.Oo()}addCustomSeries(t,e={},i=0){return this.DM.addCustomSeries(t,e,i)}addSeries(t,e={}){return this.DM.addSeries(t,e,this.paneIndex())}}const Zr={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:"",axisLabelBorderColor:""};class Qr{constructor(t){this.tr=t}applyOptions(t){this.tr.hr(t)}options(){return this.tr.F()}IM(){return this.tr}}class Jr{constructor(t,e,i,n,s,r){this.BM=new Ne,this.Zn=t,this.VM=e,this.EM=i,this.o_=s,this.DM=n,this.AM=r}m(){this.BM.m()}priceFormatter(){return this.Zn.nr()}priceToCoordinate(t){const e=this.Zn.Ft();return null===e?null:this.Zn.$t().Ut(t,e.qt)}coordinateToPrice(t){const e=this.Zn.Ft();return null===e?null:this.Zn.$t().Is(t,e.qt)}barsInLogicalRange(t){if(null===t)return null;const e=new Qn(new Yn(t.from,t.to)).k_(),i=this.Zn.Qs();if(i.Zi())return null;const n=i.Nr(e.$h(),1),s=i.Nr(e.ki(),-1),r=Re(i.firstIndex()),o=Re(i.lastIndex());if(null!==n&&null!==s&&n.index>s.index)return{barsBefore:t.from-r,barsAfter:o-t.to};const a={barsBefore:null===n||n.index===r?t.from-r:n.index-r,barsAfter:null===s||s.index===o?o-t.to:o-s.index};return null!==n&&null!==s&&(a.from=n.originalTime,a.to=s.originalTime),a}setData(t){this.o_,this.Zn.Dr(),this.VM.zM(this.Zn,t),this.LM("full")}update(t,e=!1){this.Zn.Dr(),this.VM.OM(this.Zn,t,e),this.LM("update")}dataByIndex(t,e){const i=this.Zn.Qs().Nr(t,e);return null===i?null:$r(this.seriesType())(i)}barsProvider(){return{firstIndex:()=>this.Zn.Qs().firstIndex(),lastIndex:()=>this.Zn.Qs().lastIndex()}}plots(){return this.Zn.Qs()}data(){const t=$r(this.seriesType());return this.Zn.Qs().Wr().map((e=>t(e)))}subscribeDataChanged(t){this.BM.i(t)}unsubscribeDataChanged(t){this.BM._(t)}applyOptions(t){this.Zn.hr(t)}options(){return He(this.Zn.F())}priceScale(){return this.EM.priceScale(this.Zn.$t().Ma(),this.getPane().paneIndex())}createPriceLine(t){const e=Fe(He(Zr),t),i=this.Zn.Nh(e);return new Qr(i)}removePriceLine(t){this.Zn.Fh(t.IM())}priceLines(){return this.Zn.Wh().map((t=>new Qr(t)))}seriesType(){return this.Zn.Dr()}attachPrimitive(t){this.Zn.ua(t),t.attached&&t.attached({chart:this.DM,series:this,requestUpdate:()=>this.Zn.ni().Eh(),horzScaleBehavior:this.o_})}detachPrimitive(t){this.Zn.ca(t),t.detached&&t.detached(),this.Zn.ni().Eh()}primitives(){return this.Zn.da()}getPane(){const t=this.Zn,e=Re(this.Zn.ni().Un(t));return this.AM(e)}moveToPane(t){this.Zn.ni().Jc(this.Zn,t)}seriesOrder(){const t=this.Zn.ni().Un(this.Zn);return null===t?-1:t.No().indexOf(this.Zn)}setSeriesOrder(t){const e=this.Zn.ni().Un(this.Zn);null!==e&&e.t_(this.Zn,t)}updateAllViews(){this.Zn.$s()}requestUpdate(){return this.Zn.ni().Eh()}LM(t){this.BM.v()&&this.BM.p(t)}}class to{constructor(t,e,i){this.NM=new Ne,this.z_=new Ne,this.bm=new Ne,this.es=t,this.dh=t.Ot(),this.tw=e,this.dh.Du().i(this.FM.bind(this)),this.dh.Iu().i(this.WM.bind(this)),this.tw.Rm().i(this.HM.bind(this)),this.o_=i}m(){this.dh.Du().u(this),this.dh.Iu().u(this),this.tw.Rm().u(this),this.NM.m(),this.z_.m(),this.bm.m()}scrollPosition(){return this.dh.gu()}scrollToPosition(t,e){e?this.dh.Ru(t,1e3):this.es.wn(t)}scrollToRealTime(t){this.dh.Tu(t)}getVisibleRange(){const t=this.dh.eu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.o_.convertHorzItemToInternal(t.from),to:this.o_.convertHorzItemToInternal(t.to)},i=this.dh.lu(e);this.es.Gc(i)}getVisibleLogicalRange(){const t=this.dh.nu();return null===t?null:{from:t.$h(),to:t.ki()}}setVisibleLogicalRange(t){Pe(t.from<=t.to,"The from index cannot be after the to index."),this.es.Gc(t)}resetTimeScale(){this.es.vn()}fitContent(){this.es.Eu()}logicalToCoordinate(t){const e=this.es.Ot();return e.Zi()?null:e.Xt(t)}coordinateToLogical(t){return this.dh.Zi()?null:this.dh.du(t)}timeToIndex(t,e){const i=this.o_.convertHorzItemToInternal(t);return this.dh.tu(i,e)}timeToIndexEx(t){var e,i;const n=this.o_.convertHorzItemToInternal(t),s=this.dh.Ou();if(s.length<1)return null;if(this.o_.key(n)>this.o_.key(s[s.length-1].time)){const i=this.dh.Ou()[s.length-1],n=null==(e=this.dh.F().extendedScale)?void 0:e.getAdvanceUnit(i.originalTime,t);return void 0===n?null:s.length-1+n}const r=qi(s,this.o_.key(n),((t,e)=>this.o_.key(t.time)<e));if(this.o_.key(n)<this.o_.key(s[r].time)){const e=this.dh.Ou()[r],n=null==(i=this.dh.F().extendedScale)?void 0:i.getAdvanceUnit(t,e.originalTime);return void 0===n?null:r-n}return r}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return null===e?null:this.dh.Xt(e)}timeToCoordinateEx(t){var e,i;const n=this.o_.convertHorzItemToInternal(t),s=this.dh.zu(),r=this.dh.Lu();if(null===s||null===r)return null;const o=this.dh.Ou()[r];if(this.o_.key(n)>this.o_.key(o.time)){const i=null==(e=this.dh.F().extendedScale)?void 0:e.getAdvanceUnit(o.originalTime,t);return void 0===i?null:this.dh.Xt(r+i)}const a=qi(this.dh.Ou(),this.o_.key(t),((t,e)=>this.o_.key(t.time)<e));if(this.o_.key(t)<this.o_.key(this.dh.Ou()[a].time)){const e=this.dh.Ou()[a],n=null==(i=this.dh.F().extendedScale)?void 0:i.getAdvanceUnit(e.originalTime,t);return void 0===n?null:this.dh.Xt(a+n)}return this.dh.Xt(a)}coordinateToTime(t){const e=this.es.Ot(),i=e.du(t),n=e.Q_(i);return null===n?null:n.originalTime}coordinateToTimeEx(t){var e,i;const n=this.es.Ot(),s=n.du(t),r=n.zu(),o=n.Lu();if(null===r||null===o)return null;if(s>o){const t=n.Q_(o);if(null===t)return null;const i=t.originalTime;return(null==(e=n.F().extendedScale)?void 0:e.getExtendedTime(i,s-o))??null}if(s<r){const t=n.Q_(r);if(null===t)return null;const e=t.originalTime;return(null==(i=n.F().extendedScale)?void 0:i.getExtendedTime(e,s-o))??null}{const t=n.Q_(s);return null===t?null:t.originalTime}}width(){return this.tw.op().width}height(){return this.tw.op().height}subscribeVisibleTimeRangeChange(t){this.NM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.NM._(t)}subscribeVisibleLogicalRangeChange(t){this.z_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.z_._(t)}subscribeSizeChange(t){this.bm.i(t)}unsubscribeSizeChange(t){this.bm._(t)}applyOptions(t){this.dh.hr(t)}options(){return{...He(this.dh.F()),barSpacing:this.dh.wu()}}barSpacing(){return this.dh.wu()}baseIndex(){return this.dh.uu()}rightOffset(){return this.dh.gu()}FM(){this.NM.v()&&this.NM.p(this.getVisibleRange())}WM(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}HM(t){this.bm.p(t.width,t.height)}}function eo(t){return function(t){if($e(t.handleScale)){const e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;$e(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),$e(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}const e=t.handleScroll;$e(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class io{constructor(t,e,i){this.UM=new Map,this.$M=new Map,this.qM=new Ne,this.YM=new Ne,this.jM=new Ne,this.Qu=new WeakMap,this.KM=new xr(e);const n=void 0===i?He(qr()):Fe(He(qr()),eo(i));this.XM=e,this.tp=new or(t,n,e),this.tp.Zv().i((t=>{this.qM.v()&&this.qM.p(this.GM(t()))}),this),this.tp.Jv().i((t=>{this.YM.v()&&this.YM.p(this.GM(t()))}),this),this.tp.Cc().i((t=>{this.jM.v()&&this.jM.p(this.GM(t()))}),this);const s=this.tp.ni();this.ZM=new to(s,this.tp.rw(),this.XM)}remove(){this.tp.Zv().u(this),this.tp.Jv().u(this),this.tp.Cc().u(this),this.ZM.m(),this.tp.m(),this.UM.clear(),this.$M.clear(),this.qM.m(),this.YM.m(),this.jM.m(),this.KM.m()}resize(t,e,i){this.autoSizeActive()||this.tp.sw(t,e,i)}addCustomSeries(t,e={},i=0){const n=(s=Le(t),{type:"Custom",isBuiltIn:!1,defaultOptions:{...kr,...s.defaultOptions()},JM:Pr,QM:s});var s;return this.tg(n,e,i)}addSeries(t,e={},i=0){return this.tg(t,e,i)}removeSeries(t){const e=Oe(this.UM.get(t)),i=this.KM.Kc(e);this.tp.ni().Kc(e),this.ig(i),this.UM.delete(t),this.$M.delete(e)}zM(t,e){this.ig(this.KM.$w(t,e))}OM(t,e,i){this.ig(this.KM.Gw(t,e,i))}subscribeClick(t){this.qM.i(t)}unsubscribeClick(t){this.qM._(t)}subscribeCrosshairMove(t){this.jM.i(t)}unsubscribeCrosshairMove(t){this.jM._(t)}subscribeDblClick(t){this.YM.i(t)}unsubscribeDblClick(t){this.YM._(t)}priceScale(t,e=0){return new Yr(this.tp,t,e)}timeScale(){return this.ZM}applyOptions(t){this.tp.hr(eo(t))}options(){return this.tp.F()}takeScreenshot(){return this.tp.uw()}addPane(t=!1){const e=this.tp.ni().sd();return e.Lo(t),this.sg(e)}removePane(t){this.tp.ni().kc(t)}swapPanes(t,e){this.tp.ni().Tc(t,e)}autoSizeActive(){return this.tp.mw()}chartElement(){return this.tp.dp()}panes(){return this.tp.ni().Xs().map((t=>this.sg(t)))}paneSize(t=0){const e=this.tp.gw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){const n=this.UM.get(i);if(void 0===n)return;const s=this.tp.ni().Un(n);null!==s&&this.tp.ni().Hc(t,e,s)}getCrosshairPosition(){return this.tp.ni().Fc()}clearCrosshairPosition(){this.tp.ni().Uc(!0)}horzBehaviour(){return this.XM}selectedSource(){const t=this.tp.ni().Mc();return t?Oe(this.$M.get(t))??null:null}setSelectedSource(t){if(!t)return void this.tp.ni().gc(null);const e=Oe(this.UM.get(t));this.tp.ni().gc(e)}tg(t,e={},i=0){var n;Pe(void 0!==t.JM),function(t){if(void 0===t||"custom"===t.type)return;const e=t;void 0!==e.minMove&&void 0===e.precision&&(e.precision=function(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e}(e.minMove))}(e.priceFormat),"Candlestick"===t.type&&(void 0!==(n=e).borderColor&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),void 0!==n.wickColor&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor));const s=Fe(He(Me),He(t.defaultOptions),e),r=t.JM,o=new gn(this.tp.ni(),t.type,s,r,t.QM);this.tp.ni().Yc(o,i);const a=new Jr(o,this,this,this,this.XM,(t=>this.sg(t)));return this.UM.set(a,o),this.$M.set(o,a),a}ig(t){const e=this.tp.ni();e.$c(t.Ot.uu,t.Ot.Ou,t.Ot.iM),t.No.forEach(((t,e)=>e.ut(t.ie,t.tM))),e.Ot().j_(),e.mu()}ng(t){return Oe(this.$M.get(t))}GM(t){const e=new Map;t.Ew.forEach(((t,i)=>{const n=i.Dr(),s=$r(n)(t);if("Custom"!==n)Pe(function(t){return void 0!==t.open||function(t){return void 0!==t.value}(t)}(s));else{const t=i.va();Pe(!t||!1===t(s))}e.set(this.ng(i),s)}));const i=void 0!==t.Vw&&this.$M.has(t.Vw)?this.ng(t.Vw):void 0;return{time:t.Dw,logical:t.Te,point:t.Iw,paneIndex:t.Bw,hoveredSeries:i,hoveredObjectId:t.Aw,seriesData:e,sourceEvent:t.zw}}sg(t){let e=this.Qu.get(t);return e||(e=new Xr(this.tp,(t=>this.ng(t)),t,this),this.Qu.set(t,e)),e}}function no(t,e,i){const n=function(t){if(Ve(t)){const e=document.getElementById(t);return Pe(null!==e,`Cannot find element in DOM with id=${t}`),e}return t}(t),s=new io(n,e,i);return e.setOptions(s.options()),s}class so extends Ir{constructor(t,e){super(t,e,!0)}SM(t,e,i){e.cu(this.uM,We(this.cM)),t.ql(this.uM,i,We(this.cM))}eg(t,e){return{xt:t,St:e,ft:NaN,vt:NaN}}bM(){const t=this.Zn.Dh();this.uM=this.Zn.Qs().Wr().map((e=>{const i=e.value[3];return this.rg(e.index,i,t)}))}}function ro(t,e,i){const n=ao(e,t),s=ao(i,t),r=n.ft*n.ft+n.vt*n.vt,o=n.ft*s.ft+n.vt*s.vt,a=r>0?o/r:0,l=Math.max(0,Math.min(1,a));return c=ao(oo(t.ft+n.ft*l,t.vt+n.vt*l),i),Math.sqrt(c.ft*c.ft+c.vt*c.vt);var c}function oo(t,e){return{ft:t,vt:e}}function ao(t,e){return{ft:t.ft-e.ft,vt:t.vt-e.vt}}function lo(t,e,i,n,s,r,o){if(0===e.length||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,h=e[n.from];let u=r(t,h),d=h;if(n.to-n.from<2){const e=s/2;a.beginPath();const i={ft:h.ft-e,vt:h.vt},n={ft:h.ft+e,vt:h.vt};a.moveTo(i.ft*l,i.vt*c),a.lineTo(n.ft*l,n.vt*c),o(t,u,i,n)}else{const s=(e,i)=>{o(t,u,d,i),a.beginPath(),u=e,d=i};let p=d;a.beginPath(),a.moveTo(h.ft*l,h.vt*c);for(let o=n.from+1;o<n.to;++o){p=e[o];const n=r(t,p);switch(i){case 0:a.lineTo(p.ft*l,p.vt*c);break;case 1:a.lineTo(p.ft*l,e[o-1].vt*c),n!==u&&(s(n,p),a.lineTo(p.ft*l,e[o-1].vt*c)),a.lineTo(p.ft*l,p.vt*c);break;case 2:{const[t,i]=po(e,o-1,o);a.bezierCurveTo(t.ft*l,t.vt*c,i.ft*l,i.vt*c,p.ft*l,p.vt*c);break}}1!==i&&n!==u&&(s(n,p),a.moveTo(p.ft*l,p.vt*c))}(d!==p||d===p&&1===i)&&o(t,u,d,p)}}const co=6;function ho(t,e){return{ft:t.ft-e.ft,vt:t.vt-e.vt}}function uo(t,e){return{ft:t.ft/e,vt:t.vt/e}}function po(t,e,i){const n=Math.max(0,e-1),s=Math.min(t.length-1,i+1);var r,o;return[(r=t[e],o=uo(ho(t[i],t[n]),co),{ft:r.ft+o.ft,vt:r.vt+o.vt}),ho(t[i],uo(ho(t[s],t[e]),co))]}function fo(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class mo extends Qe{constructor(){super(...arguments),this._t=null}ut(t){this._t=t}ht(t,e){var i,n;if(null===this._t)return null;const s=2+this._t.wt/2,r=this._t.dt.length-1;let o=bn((null==(i=this._t.ct)?void 0:i.from)??0,0,r),a=bn(((null==(n=this._t.ct)?void 0:n.to)??this._t.dt.length)-1,0,r);for(;a-o>2;){const e=Math.round((o+a)/2);this._t.dt[e].ft<=t?o=e:a=e}o=Math.max(1,o-1),a=Math.min(this._t.dt.length-1,a+1);for(let l=o;l<=a;++l){const i=this._t.dt[l-1],n=this._t.dt[l],r=i.ft,o=n.ft;if(ro(oo(r,i.vt),oo(o,n.vt),oo(t,e))<=s)return{hitTestData:null,externalId:"series"}}return null}ot(t){if(null===this._t)return;const{dt:e,ct:i,hg:n,ag:s,wt:r,Qt:o,lg:a}=this._t;if(null===i)return;const l=t.context;l.lineCap="butt",l.lineWidth=r*t.verticalPixelRatio,De(l,o),l.lineJoin="round";const c=this.og.bind(this);void 0!==s&&lo(t,e,s,i,n,c,fo),a&&function(t,e,i,n,s){if(n.to-n.from<=0)return;const{horizontalPixelRatio:r,verticalPixelRatio:o,context:a}=t;let l=null;const c=Math.max(1,Math.floor(r))%2/2,h=i*o+c;for(let u=n.to-1;u>=n.from;--u){const i=e[u];if(i){const e=s(t,i);e!==l&&(a.beginPath(),null!==l&&a.fill(),a.fillStyle=e,l=e);const n=Math.round(i.ft*r)+c,u=i.vt*o;a.moveTo(n,u),a.arc(n,u,h,0,2*Math.PI)}}a.fill()}(t,e,a,i,c)}}class go extends mo{og(t,e){return e.bt}}class vo extends Qe{constructor(){super(...arguments),this.Gt=null}ut(t){this.Gt=t}ot(t){if(!this.Gt||!this.Gt.At)return;const{context:e,horizontalPixelRatio:i}=t;e.strokeStyle=this.Gt.R??"#2A62FF",e.lineCap="butt";const n=Math.max(1,Math.floor(i));e.lineWidth=n;const s=this.Gt._g??0;for(let r=0;r<this.Gt.Ou.length;++r){const i=this.Gt.Ou[r];Number.isFinite(i.x)&&Number.isFinite(i.y)&&(e.fillStyle=this.Gt.gM[r],this.ug(t,{ft:i.x,vt:i.y},s,n))}}ug(t,e,i,n){const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let a=Math.round(3.5*r*2);a%2!=n%2&&(a+=1);let l=Math.round(a+2*(.5*n+.75*r));l%2!=n%2&&(l+=1);const c=Math.round(e.ft*r),h=Math.round((e.vt+i)*o),u=n%2/2;s.beginPath(),s.arc(c+u,h+u,l/2,0,2*Math.PI,!0),s.closePath(),s.fill(),s.beginPath(),s.arc(c+u,h+u,a/2,0,2*Math.PI,!0),s.closePath(),s.stroke()}}class yo extends so{constructor(t,e){super(t,e),this.vM=new Ze,this.Gn=new go,this.cg=new vo,this.vM.rt([this.Gn,this.cg])}rg(t,e,i){return{...this.eg(t,e),...i.Ir(t)}}CM(){const t=this.Zn.F(),e={dt:this.uM,Qt:t.lineStyle,ag:t.lineVisible?t.lineType:void 0,wt:t.lineWidth,lg:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,ct:this.cM,hg:this.Jn.Ot().wu()};this.Gn.ut(e),this.Jn.Mc()===this.Zn?this.cg.ut(this.MM()):this.cg.ut(null)}}const _o={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},JM:(t,e)=>new yo(t,e)};function bo(t,e,i,n,s){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=e;r.lineTo(s.ft*o,t*a),r.lineTo(n.ft*o,t*a),r.closePath(),r.fillStyle=i,r.fill()}class wo extends Qe{constructor(){super(...arguments),this._t=null}ut(t){this._t=t}ot(t){if(null===this._t)return;const{dt:e,ct:i,hg:n,wt:s,Qt:r,ag:o}=this._t,a=this._t.Mg??(this._t.gg?0:t.mediaSize.height);if(null===i)return;const l=t.context;l.lineCap="butt",l.lineJoin="round",l.lineWidth=s,De(l,r),l.lineWidth=1,lo(t,e,o,i,n,this.bg.bind(this),bo.bind(null,a))}}class xo{xg(t,e){const i=this.Sg,{Cg:n,Pg:s,kg:r,yg:o,Mg:a,Tg:l,Rg:c}=e;if(void 0===this.Dg||void 0===i||i.Cg!==n||i.Pg!==s||i.kg!==r||i.yg!==o||i.Mg!==a||i.Tg!==l||i.Rg!==c){const{verticalPixelRatio:i}=t,h=a||l>0?i:1,u=l*h,d=c===t.bitmapSize.height?c:c*h,p=(a??0)*h,f=t.context.createLinearGradient(0,u,0,d);if(f.addColorStop(0,n),null!=a){const t=bn((p-u)/(d-u),0,1);f.addColorStop(t,s),f.addColorStop(t,r)}f.addColorStop(1,o),this.Dg=f,this.Sg=e}return this.Dg}}class So extends wo{constructor(){super(...arguments),this.Ig=new xo}bg(t,e){var i;return this.Ig.xg(t,{Cg:e.wr,Pg:"",kg:"",yg:e.Mr,Tg:(null==(i=this._t)?void 0:i.Tg)??0,Rg:t.bitmapSize.height})}}class To extends so{constructor(t,e){super(t,e),this.vM=new Ze,this.Ag=new So,this.zg=new go,this.Lg=new vo,this.vM.rt([this.Ag,this.zg,this.Lg])}rg(t,e,i){return{...this.eg(t,e),...i.Ir(t)}}CM(){const t=this.Zn.F();if(null===this.cM||0===this.uM.length)return;let e;if(t.relativeGradient){e=this.uM[this.cM.from].vt;for(let t=this.cM.from;t<this.cM.to;t++){const i=this.uM[t];i.vt<e&&(e=i.vt)}}this.Ag.ut({ag:t.lineType,dt:this.uM,Qt:t.lineStyle,wt:t.lineWidth,Mg:null,Tg:e,gg:t.invertFilledArea,ct:this.cM,hg:this.Jn.Ot().wu()}),this.zg.ut({ag:t.lineVisible?t.lineType:void 0,dt:this.uM,Qt:t.lineStyle,wt:t.lineWidth,ct:this.cM,hg:this.Jn.Ot().wu(),lg:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0}),this.Jn.Mc()===this.Zn?this.Lg.ut(this.MM()):this.Lg.ut(null)}}const Co={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},JM:(t,e)=>new To(t,e)};function Mo(t,e){return e=e??window.devicePixelRatio??1,Math.floor(.3*t*e)}function Io(t,e){if(e=e??window.devicePixelRatio??1,t>=2.5&&t<=4)return Math.floor(3*e);const i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),n=Math.floor(t*i*e),s=Math.floor(t*e),r=Math.min(n,s);return Math.max(Math.floor(e),r)}class Eo extends Qe{constructor(){super(...arguments),this.Gt=null,this.Og=0,this.Ng=0}ut(t){this.Gt=t}ht(t,e){return null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct?null:Ao(t,e,this.Gt.Qs,this.Og,2,this.Gt.ct)?{hitTestData:null,externalId:"series"}:null}ot({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct)return;this.Og=this.Fg(e),this.Og>=2&&Math.max(1,Math.floor(e))%2!=this.Og%2&&this.Og--,this.Ng=this.Gt.Wg?Math.min(this.Og,Math.floor(e)):this.Og;let n=null;const s=this.Ng<=this.Og&&this.Gt.wu>=Math.floor(1.5*e);for(let r=this.Gt.ct.from;r<this.Gt.ct.to;++r){const o=this.Gt.Qs[r];n!==o.cr&&(t.fillStyle=o.cr,n=o.cr);const a=Math.floor(.5*this.Ng),l=Math.round(o.ft*e),c=l-a,h=this.Ng,u=c+h-1,d=Math.min(o.Xl,o.Gl),p=Math.max(o.Xl,o.Gl),f=Math.round(d*i)-a,m=Math.round(p*i)+a,g=Math.max(m-f,this.Ng);t.fillRect(c,f,h,g);const v=Math.ceil(1.5*this.Og);if(s){if(this.Gt.Hg){const e=l-v;let n=Math.max(f,Math.round(o.Kl*i)-a),s=n+h-1;s>f+g-1&&(s=f+g-1,n=s-h+1),t.fillRect(e,n,c-e,s-n+1)}const e=l+v;let n=Math.max(f,Math.round(o.Zl*i)-a),s=n+h-1;s>f+g-1&&(s=f+g-1,n=s-h+1),t.fillRect(u+1,n,e-u,s-n+1)}}}Fg(t){const e=Math.floor(t);return Math.max(e,Math.floor(Mo(Re(this.Gt).wu,t)))}}function Ao(t,e,i,n,s=2,r=null){if(!i.length)return!1;const o=bn((null==r?void 0:r.from)??0,0,i.length-1),a=bn((null==r?void 0:r.to)??i.length-1,0,i.length-1),l=i[o],c=i[a],h=n/2;if(isFinite(l.ft)&&t<l.ft-h-s||isFinite(c.ft)&&t>c.ft+h+s)return!1;let u=o,d=a,p=-1;for(;u<=d;){const e=Math.floor((u+d)/2),n=i[e];if(t>=n.ft-h&&t<=n.ft+h){p=e;break}t>n.ft+h?u=e+1:d=e-1}if(-1===p)return!1;if(Do(i[p],e,s))return!0;let f=p;for(;f>=1&&t-i[f-1].ft+h<s;)f--;let m=p;for(;m<=i.length-2&&i[m+1].ft-h-t<s;)m++;for(let g=f;g<=m;g++)if(g!==p&&Do(i[g],e,s))return!0;return!1}function Do(t,e,i){const n=Math.min(t.Xl,t.Gl),s=Math.max(t.Xl,t.Gl);return n-i<=e&&e<=s+i}class ko extends Ir{constructor(t,e){super(t,e,!1)}SM(t,e,i){e.cu(this.uM,We(this.cM)),t.jl(this.uM,i,We(this.cM))}Ug(t,e,i){return{xt:t,Yh:e.value[0],jh:e.value[1],Kh:e.value[2],Xh:e.value[3],ft:NaN,Kl:NaN,Xl:NaN,Gl:NaN,Zl:NaN}}bM(){const t=this.Zn.Dh();this.uM=this.Zn.Qs().Wr().map((e=>this.rg(e.index,e,t)))}}class Po extends ko{constructor(t,e){super(t,e),this.vM=new Ze,this.$g=new Eo,this.cg=new vo,this.vM.rt([this.$g,this.cg])}rg(t,e,i){return{...this.Ug(t,e,i),...i.Ir(t)}}CM(){const t=this.Zn.F();this.$g.ut({Qs:this.uM,wu:this.Jn.Ot().wu(),Hg:t.openVisible,Wg:t.thinBars,ct:this.cM}),this.Jn.Mc()===this.Zn?this.cg.ut(this.MM()):this.cg.ut(null)}}const Oo={type:"Bar",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},JM:(t,e)=>new Po(t,e)};class Ro extends Qe{constructor(){super(...arguments),this.Gt=null,this.Og=0}ut(t){this.Gt=t}ht(t,e){return null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct?null:Ao(t,e,this.Gt.Qs,this.Gt.wu,2,this.Gt.ct)?{hitTestData:null,externalId:"series"}:null}ot(t){if(null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct)return;const{horizontalPixelRatio:e}=t;this.Og=Io(this.Gt.wu,e),this.Og>=2&&Math.floor(e)%2!=this.Og%2&&this.Og--;const i=this.Gt.Qs;this.Gt.qg&&this.Yg(t,i,this.Gt.ct),this.Gt.Pi&&this.dv(t,i,this.Gt.ct);const n=this.jg(e);(!this.Gt.Pi||this.Og>2*n)&&this.Kg(t,i,this.Gt.ct)}Yg(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="",a=Math.min(Math.floor(s),Math.floor(this.Gt.wu*s));a=Math.max(Math.floor(s),Math.min(a,this.Og));const l=Math.floor(.5*a);let c=null;for(let h=i.from;h<i.to;h++){const t=e[h];t.pr!==o&&(n.fillStyle=t.pr,o=t.pr);const i=Math.round(Math.min(t.Kl,t.Zl)*r),u=Math.round(Math.max(t.Kl,t.Zl)*r),d=Math.round(t.Xl*r),p=Math.round(t.Gl*r);let f=Math.round(s*t.ft)-l;const m=f+a-1;null!==c&&(f=Math.max(c+1,f),f=Math.min(f,m));const g=m-f+1;n.fillRect(f,d,g,i-d),n.fillRect(f,u+1,g,p-u),c=m}}jg(t){let e=Math.floor(1*t);this.Og<=2*e&&(e=Math.floor(.5*(this.Og-1)));const i=Math.max(Math.floor(t),e);return this.Og<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}dv(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.jg(s);let l=null;for(let c=i.from;c<i.to;c++){const t=e[c];t.dr!==o&&(n.fillStyle=t.dr,o=t.dr);let i=Math.round(t.ft*s)-Math.floor(.5*this.Og);const h=i+this.Og-1,u=Math.round(Math.min(t.Kl,t.Zl)*r),d=Math.round(Math.max(t.Kl,t.Zl)*r);if(null!==l&&(i=Math.max(l+1,i),i=Math.min(i,h)),this.Gt.wu*s>2*a)ri(n,i,u,h-i+1,d-u+1,a);else{const t=h-i+1;n.fillRect(i,u,t,d-u+1)}l=h}}Kg(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.jg(s);for(let l=i.from;l<i.to;l++){const t=e[l];let i=Math.round(Math.min(t.Kl,t.Zl)*r),c=Math.round(Math.max(t.Kl,t.Zl)*r),h=Math.round(t.ft*s)-Math.floor(.5*this.Og),u=h+this.Og-1;if(t.cr!==o){const e=t.cr;n.fillStyle=e,o=e}this.Gt.Pi&&(h+=a,i+=a,u-=a,c-=a),i>c||n.fillRect(h,i,u-h+1,c-i+1)}}}class Lo extends ko{constructor(t,e){super(t,e),this.vM=new Ze,this.Xg=new Ro,this.cg=new vo,this.vM.rt([this.Xg,this.cg])}rg(t,e,i){return{...this.Ug(t,e,i),...i.Ir(t)}}CM(){const t=this.Zn.F();this.Xg.ut({Qs:this.uM,wu:this.Jn.Ot().wu(),qg:t.wickVisible,Pi:t.borderVisible,ct:this.cM}),this.Jn.Mc()===this.Zn?this.cg.ut(this.MM()):this.cg.ut(null)}}const No={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},JM:(t,e)=>new Lo(t,e)};class Fo extends Qe{constructor(){super(...arguments),this.Gt=null,this.Og=0}ut(t){this.Gt=t}ht(t,e){return null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct?null:Ao(t,e,this.Gt.Qs,this.Gt.wu,2,this.Gt.ct)?{hitTestData:null,externalId:"series"}:null}ot(t){if(null===this.Gt||0===this.Gt.Qs.length||null===this.Gt.ct)return;const{horizontalPixelRatio:e}=t;this.Og=Io(this.Gt.wu,e),this.Og>=2&&Math.floor(e)%2!=this.Og%2&&this.Og--;const i=this.Gt.Qs;this.Gt.qg&&this.Yg(t,i,this.Gt.ct),this.Gt.Pi&&this.dv(t,i,this.Gt.ct);const n=this.jg(e);(!this.Gt.Pi||this.Og>2*n)&&this.Kg(t,i,this.Gt.ct)}Yg(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="",a=Math.min(Math.floor(s),Math.floor(this.Gt.wu*s));a=Math.max(Math.floor(s),Math.min(a,this.Og));const l=Math.floor(.5*a);let c=null;for(let h=i.from;h<i.to;h++){const t=e[h];t.pr!==o&&(n.fillStyle=t.pr,o=t.pr);const i=Math.round(Math.min(t.Kl,t.Zl)*r),u=Math.round(Math.max(t.Kl,t.Zl)*r),d=Math.round(t.Xl*r),p=Math.round(t.Gl*r);let f=Math.round(s*t.ft)-l;const m=f+a-1;null!==c&&(f=Math.max(c+1,f),f=Math.min(f,m));const g=m-f+1;n.fillRect(f,d,g,i-d),n.fillRect(f,u+1,g,p-u),c=m}}jg(t){let e=Math.floor(1*t);this.Og<=2*e&&(e=Math.floor(.5*(this.Og-1)));const i=Math.max(Math.floor(t),e);return this.Og<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}dv(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.jg(s);let l=null;for(let c=i.from;c<i.to;c++){const t=e[c];t.dr!==o&&(n.fillStyle=t.dr,o=t.dr);let i=Math.round(t.ft*s)-Math.floor(.5*this.Og);const h=i+this.Og-1,u=Math.round(Math.min(t.Kl,t.Zl)*r),d=Math.round(Math.max(t.Kl,t.Zl)*r);if(null!==l&&(i=Math.max(l+1,i),i=Math.min(i,h)),this.Gt.wu*s>2*a)ri(n,i,u,h-i+1,d-u+1,a);else{const t=h-i+1;n.fillRect(i,u,t,d-u+1)}l=h}}Kg(t,e,i){if(null===this.Gt)return;const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;let o="";const a=this.jg(s);for(let l=i.from;l<i.to;l++){const t=e[l];let i=Math.round(Math.min(t.Kl,t.Zl)*r),c=Math.round(Math.max(t.Kl,t.Zl)*r),h=Math.round(t.ft*s)-Math.floor(.5*this.Og),u=h+this.Og-1;if(t.cr!==o){const e=t.cr;n.fillStyle=e,o=e}t.mr&&(this.Gt.Pi&&(h+=a,i+=a,u-=a,c-=a),i>c||n.fillRect(h,i,u-h+1,c-i+1))}}}class Bo extends ko{constructor(t,e){super(t,e),this.vM=new Ze,this.Gg=new Fo,this.cg=new vo,this.vM.rt([this.Gg,this.cg])}rg(t,e,i){return{...this.Ug(t,e,i),...i.Ir(t)}}CM(){const t=this.Zn.F();this.Gg.ut({Qs:this.uM,wu:this.Jn.Ot().wu(),qg:t.wickVisible,Pi:t.borderVisible,ct:this.cM}),this.Jn.Mc()===this.Zn?this.cg.ut(this.MM()):this.cg.ut(null)}}const zo={type:"HollowCandlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},JM:(t,e)=>new Bo(t,e)},Vo={...Me,color:"#2196f3"};var $o,Ho;(Ho=$o||($o={})).serviceIds=new Map,Ho.DI_TARGET="$di$target",Ho.DI_DEPENDENCIES="$di$dependencies",Ho.getServiceDependencies=function(t){return t[Ho.DI_DEPENDENCIES]||[]};const Ko=Wo("instantiationService");function Wo(t){if($o.serviceIds.has(t))return $o.serviceIds.get(t);const e=function(t,i,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(t,e,i){e[$o.DI_TARGET]===e?e[$o.DI_DEPENDENCIES].push({id:t,index:i}):(e[$o.DI_DEPENDENCIES]=[{id:t,index:i}],e[$o.DI_TARGET]=e)}(e,t,n)};return e.toString=()=>t,$o.serviceIds.set(t,e),e}const jo=Wo("chartService"),Uo=Wo("chartGuiService"),Go=Wo("chartManagementService"),qo=1,Yo=2,Xo=4;let Zo=(e=class{constructor(t){x(this,"element"),x(this,"next"),x(this,"prev"),this.element=t,this.next=e.Undefined,this.prev=e.Undefined}},x(e,"Undefined",new e(void 0)),e);class Qo{constructor(){x(this,"_first",Zo.Undefined),x(this,"_last",Zo.Undefined),x(this,"_size",0)}get size(){return this._size}isEmpty(){return this._first===Zo.Undefined}clear(){let t=this._first;for(;t!==Zo.Undefined;){const e=t.next;t.prev=Zo.Undefined,t.next=Zo.Undefined,t=e}this._first=Zo.Undefined,this._last=Zo.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){const i=new Zo(t);if(this._first===Zo.Undefined)this._first=i,this._last=i;else if(e){const t=this._last;this._last=i,i.prev=t,t.next=i}else{const t=this._first;this._first=i,i.next=t,t.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Zo.Undefined){const t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==Zo.Undefined){const t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==Zo.Undefined&&t.next!==Zo.Undefined){const e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===Zo.Undefined&&t.next===Zo.Undefined?(this._first=Zo.Undefined,this._last=Zo.Undefined):t.next===Zo.Undefined?(this._last=this._last.prev,this._last.next=Zo.Undefined):t.prev===Zo.Undefined&&(this._first=this._first.next,this._first.prev=Zo.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==Zo.Undefined;)yield t.element,t=t.next}}const Jo=Wo("commandService"),ta=Wo("commandRegistry");class ea{constructor(){x(this,"_serviceBrand"),x(this,"_commands",new Map)}registerCommand(t){const{id:e}=t;let i=this._commands.get(e);i||(i=new Qo,this._commands.set(e,i));const n=i.unshift(t);return le((()=>{n();const t=this._commands.get(e);(null==t?void 0:t.isEmpty())&&this._commands.delete(e)}))}getCommand(t){const e=this._commands.get(t);if(e&&!e.isEmpty())return se.first(e)}dispose(){this._commands.clear()}}var ia=Object.getOwnPropertyDescriptor;const na=Wo("keybindingsRegistry");var sa=(t=>(t[t.ChartCore=0]="ChartCore",t[t.ChartContrib=100]="ChartContrib",t[t.WorkbenchContrib=200]="WorkbenchContrib",t[t.BuiltinExtension=300]="BuiltinExtension",t[t.ExternalExtension=400]="ExternalExtension",t))(sa||{});class ra{constructor(t,e,i,n=0,s=0,r=void 0){this.keybinding=t,this.command=e,this.commandArgs=i,this.weight1=n,this.weight2=s,this.when=r}}let oa=class{constructor(t){x(this,"_serviceBrand"),x(this,"_coreKeybindings"),x(this,"_cachedMergedKeybindings"),this.commandRegistry=t,this._coreKeybindings=new Qo,this._cachedMergedKeybindings=null}static bindToCurrentPlatform(t){if(pt===dt.Windows){if(t&&t.win)return t.win}else if(pt===dt.Macintosh){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const e=oa.bindToCurrentPlatform(t),i=new ce;if(e&&e.primary){const n=Pt(e.primary,pt);n&&i.add(this._registerDefaultKeybinding(n,t.id,t.args,t.weight,0,t.when))}if(e&&Array.isArray(e.secondary))for(let n=0,s=e.secondary.length;n<s;n++){const s=Pt(e.secondary[n],pt);s&&i.add(this._registerDefaultKeybinding(s,t.id,t.args,t.weight,-n-1,t.when))}return i}registerCommandAndKeybindingRule(t){return function(...t){return le((()=>ae(t)))}(this.registerKeybindingRule(t),this.commandRegistry.registerCommand(t))}_registerDefaultKeybinding(t,e,i,n=0,s=0,r=void 0){const o=this._coreKeybindings.push(new ra(t,e,i,n,s,r));return this._cachedMergedKeybindings=null,le((()=>{o(),this._cachedMergedKeybindings=null}))}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings),this._cachedMergedKeybindings.sort(ca)),this._cachedMergedKeybindings.slice(0)}dispose(){this._coreKeybindings.clear()}};var aa,la;function ca(t,e){if(t.weight1!==e.weight1)return t.weight1-e.weight1;if(t.command&&e.command){if(t.command<e.command)return-1;if(t.command>e.command)return 1}return t.weight2-e.weight2}oa=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?ia(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([(aa=0,la=ta,(t,e)=>la(t,e,aa))],oa);var ha=Object.getOwnPropertyDescriptor,ua=(t,e)=>(i,n)=>e(i,n,t);const da=Et.KeyL|At.Alt,pa=Et.KeyP|At.Alt;let fa=class extends he{constructor(t,e){super(),this._register(e.registerCommandAndKeybindingRule({id:"priceScale.log",primary:da,weight:sa.ChartCore,handler:()=>{var e;const i=null==(e=t.activeChart())?void 0:e.chartApi;i&&i.applyOptions({rightPriceScale:{mode:i.options().rightPriceScale.mode===Bn.Logarithmic?Bn.Normal:Bn.Logarithmic}})}})),this._register(e.registerCommandAndKeybindingRule({id:"priceScale.percent",primary:pa,weight:sa.ChartCore,handler:()=>{const e=t.activeChart().chartApi;e&&e.applyOptions({rightPriceScale:{mode:e.options().rightPriceScale.mode===Bn.Percentage?Bn.Normal:Bn.Percentage}})}}))}};fa=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?ha(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([ua(0,Go),ua(1,na)],fa);var ma=Object.getOwnPropertyDescriptor,ga=(t,e)=>(i,n)=>e(i,n,t);let va=class extends he{constructor(t,e){super(),this._register(e.registerCommandAndKeybindingRule({id:"study.remove",primary:Et.Delete,secondary:[Et.Backspace],weight:sa.ChartCore,when:()=>{var e;const i=t.activeChart(),n=i.getModel().currentActive;return!!n&&(!!(null==(e=n.isSeries)?void 0:e.call(n))&&n!==i.mainSeriesApi)},handler:()=>{const e=t.activeChart(),i=ee(e.getModel().currentActive);e.removeEntity(i.id)}}))}};va=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?ma(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([ga(0,Go),ga(1,na)],va);var ya=Object.getOwnPropertyDescriptor,_a=(t,e)=>(i,n)=>e(i,n,t);const ba=Et.LeftArrow,wa=Et.RightArrow;let xa=class extends he{constructor(t,e){super(),this._register(e.registerCommandAndKeybindingRule({id:"timeScale.moveLeft",primary:ba,weight:sa.ChartCore,handler:()=>{var e;const i=null==(e=t.activeChart())?void 0:e.chartApi;if(!i)return;const n=i.timeScale().getVisibleLogicalRange();n&&i.timeScale().setVisibleLogicalRange({from:n.from+1,to:n.to+1})}})),this._register(e.registerCommandAndKeybindingRule({id:"timeScale.moveRight",primary:wa,weight:sa.ChartCore,handler:()=>{var e;const i=null==(e=t.activeChart())?void 0:e.chartApi;if(!i)return;const n=i.timeScale().getVisibleLogicalRange();n&&i.timeScale().setVisibleLogicalRange({from:n.from-1,to:n.to-1})}}))}};xa=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?ya(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([_a(0,Go),_a(1,na)],xa);const Sa=Wo("undoRedoService");var Ta=(t=>(t[t.Resource=0]="Resource",t[t.Workspace=1]="Workspace",t))(Ta||{}),Ca=Object.getOwnPropertyDescriptor,Ma=(t,e)=>(i,n)=>e(i,n,t);let Ia=class extends he{constructor(t,e,i){super(),this._register(i.registerCommandAndKeybindingRule({id:"core.undo",primary:Et.KeyZ|At.CtrlCmd,weight:sa.ChartCore,handler:()=>{const i=e.activeChart();t.canUndo(i.id)&&t.undo(i.id)}})),this._register(i.registerCommandAndKeybindingRule({id:"core.redo",primary:Et.KeyZ|At.CtrlCmd|At.Shift,weight:sa.ChartCore,handler:()=>{const i=e.activeChart();t.canRedo(i.id)&&t.redo(i.id)}}))}};Ia=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?Ca(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([Ma(0,Sa),Ma(1,Go),Ma(2,na)],Ia);const Ea="drawing.cancel",Aa=Wo("chartContributionRegistry");var Da=(t=>(t[t.Eager=0]="Eager",t[t.AfterFirstRender=1]="AfterFirstRender",t[t.Eventually=2]="Eventually",t[t.Lazy=3]="Lazy",t))(Da||{});class ka{constructor(){x(this,"_serviceBrand"),x(this,"contributions",[])}register(t,e,i){this.contributions.push({id:t,ctor:e,instantiation:i})}getContributions(){return this.contributions}dispose(){this.contributions.length=0}}function Pa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Oa="object"==typeof global&&global&&global.Object===Object&&global,Ra="object"==typeof self&&self&&self.Object===Object&&self,La=Oa||Ra||Function("return this")(),Na=function(){return La.Date.now()},Fa=/\s/;var Ba=/^\s+/;function za(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Fa.test(t.charAt(e)););return e}(t)+1).replace(Ba,""):t}var Va=La.Symbol,$a=Object.prototype,Ha=$a.hasOwnProperty,Ka=$a.toString,Wa=Va?Va.toStringTag:void 0;var ja=Object.prototype.toString;var Ua=Va?Va.toStringTag:void 0;function Ga(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ua&&Ua in Object(t)?function(t){var e=Ha.call(t,Wa),i=t[Wa];try{t[Wa]=void 0;var n=!0}catch(oR){}var s=Ka.call(t);return n&&(e?t[Wa]=i:delete t[Wa]),s}(t):function(t){return ja.call(t)}(t)}function qa(t){return null!=t&&"object"==typeof t}function Ya(t){return"symbol"==typeof t||qa(t)&&"[object Symbol]"==Ga(t)}var Xa=/^[-+]0x[0-9a-f]+$/i,Za=/^0b[01]+$/i,Qa=/^0o[0-7]+$/i,Ja=parseInt;function tl(t){if("number"==typeof t)return t;if(Ya(t))return NaN;if(Pa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Pa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=za(t);var i=Za.test(t);return i||Qa.test(t)?Ja(t.slice(2),i?2:8):Xa.test(t)?NaN:+t}var el=Math.max,il=Math.min;function nl(t,e,i){var n,s,r,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var i=n,r=s;return n=s=void 0,c=e,o=t.apply(r,i)}function f(t){var i=t-l;return void 0===l||i>=e||i<0||u&&t-c>=r}function m(){var t=Na();if(f(t))return g(t);a=setTimeout(m,function(t){var i=e-(t-l);return u?il(i,r-(t-c)):i}(t))}function g(t){return a=void 0,d&&n?p(t):(n=s=void 0,o)}function v(){var t=Na(),i=f(t);if(n=arguments,s=this,l=t,i){if(void 0===a)return function(t){return c=t,a=setTimeout(m,e),h?p(t):o}(l);if(u)return clearTimeout(a),a=setTimeout(m,e),p(l)}return void 0===a&&(a=setTimeout(m,e)),o}return e=tl(e)||0,Pa(i)&&(h=!!i.leading,r=(u="maxWait"in i)?el(tl(i.maxWait)||0,e):r,d="trailing"in i?!!i.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},v.flush=function(){return void 0===a?o:g(Na())},v}function sl(t,e){return i=i=>{const n=nl(i,t,e);return function(...t){n.apply(this,t)}},(t,e,n)=>{let s=null,r=null;if("function"==typeof n.value?(s="value",r=n.value):"function"==typeof n.get&&(s="get",r=n.get),!r||"symbol"==typeof e)throw new Error("not supported");n[s]=i(r,e)};var i}function rl(t,e,i){let n=null,s=null;if("function"==typeof i.value?(n="value",s=i.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",s=i.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;i[n]=function(...t){return Object.prototype.hasOwnProperty.call(this,r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,t)}),this[r]}}const ol=()=>he.None;function al(t){return(e,i=null,n)=>{let s,r=!1;return s=t((t=>{if(!r)return s?s.dispose():r=!0,e.call(i,t)}),null,n),r&&s.dispose(),s}}let ll=0;class cl{constructor(t){x(this,"stack"),x(this,"id",ll++),this.value=t}}class hl{constructor(t){this.value=t}static create(){const t=new Error;return new hl(t.stack??"")}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class ul{constructor(){x(this,"i",-1),x(this,"end",0),x(this,"current"),x(this,"value")}enqueue(t,e,i){this.i=0,this.end=i,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class dl{constructor(t){var e;x(this,"_options"),x(this,"_leakageMon"),x(this,"_perfMon"),x(this,"_disposed"),x(this,"_event"),x(this,"_listeners"),x(this,"_deliveryQueue"),x(this,"_size",0),this._options=t,this._deliveryQueue=null==(e=this._options)?void 0:e.deliveryQueue}dispose(){var t,e,i,n;this._disposed||(this._disposed=!0,(null==(t=this._deliveryQueue)?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null==(i=null==(e=this._options)?void 0:e.onDidRemoveLastListener)||i.call(e),null==(n=this._leakageMon)||n.dispose())}get event(){return this._event??(this._event=(t,e,i)=>{var n,s,r,o,a,l,c;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const t=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(t);const e=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],i=new pl(`${t}. HINT: Stack shows most frequent listener (${e[1]}-times)`,e[0]);return((null==(n=this._options)?void 0:n.onListenerError)||$)(i),he.None}if(this._disposed)return he.None;e&&(t=t.bind(e));const h=new cl(t);let u;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(h.stack=hl.create(),u=this._leakageMon.check(h.stack,this._size+1)),this._listeners?this._listeners instanceof cl?(this._deliveryQueue??(this._deliveryQueue=new ul),this._listeners=[this._listeners,h]):this._listeners.push(h):(null==(r=null==(s=this._options)?void 0:s.onWillAddFirstListener)||r.call(s,this),this._listeners=h,null==(a=null==(o=this._options)?void 0:o.onDidAddFirstListener)||a.call(o,this)),null==(c=null==(l=this._options)?void 0:l.onDidAddListener)||c.call(l,this),this._size++;const d=le((()=>{null==u||u(),this._removeListener(h)}));return i instanceof ce?i.add(d):Array.isArray(i)&&i.push(d),d}),this._event}_removeListener(t){var e,i,n,s;if(null==(i=null==(e=this._options)?void 0:e.onWillRemoveListener)||i.call(e,this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,null==(s=null==(n=this._options)?void 0:n.onDidRemoveLastListener)||s.call(n,this),void(this._size=0);const r=this._listeners,o=r.indexOf(t);if(-1===o)throw new Error("Attempted to dispose unknown listener");this._size--,r[o]=void 0;const a=this._deliveryQueue.current===this;if(2*this._size<=r.length){let t=0;for(let e=0;e<r.length;e++)r[e]?r[t++]=r[e]:a&&t<this._deliveryQueue.end&&(this._deliveryQueue.end--,t<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=t}}_deliver(t,e){var i;if(!t)return;const n=(null==(i=this._options)?void 0:i.onListenerError)||$;if(n)try{t.value(e)}catch(oR){n(oR)}else t.value(e)}_deliverQueue(t){const e=t.current._listeners;for(;t.i<t.end;)this._deliver(e[t.i++],t.value);t.reset()}fire(t){var e,i,n,s;if((null==(e=this._deliveryQueue)?void 0:e.current)&&(this._deliverQueue(this._deliveryQueue),null==(i=this._perfMon)||i.stop()),null==(n=this._perfMon)||n.start(this._size),this._listeners)if(this._listeners instanceof cl)this._deliver(this._listeners,t);else{const e=this._deliveryQueue;e.enqueue(this,t,this._listeners.length),this._deliverQueue(e)}else;null==(s=this._perfMon)||s.stop()}hasListeners(){return this._size>0}}class pl extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}}function fl(t,e){for(var i=-1,n=null==t?0:t.length,s=Array(n);++i<n;)s[i]=e(t[i],i,t);return s}var ml=Array.isArray,gl=Va?Va.prototype:void 0,vl=gl?gl.toString:void 0;function yl(t){if("string"==typeof t)return t;if(ml(t))return fl(t,yl)+"";if(Ya(t))return vl?vl.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}var _l=1/0;function bl(t){var e=function(t){return t?(t=tl(t))===_l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),i=e%1;return e==e?i?e-i:e:0}function wl(t){return t}function xl(t){if(!Pa(t))return!1;var e=Ga(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Sl,Tl=La["__core-js_shared__"],Cl=(Sl=/[^.]+$/.exec(Tl&&Tl.keys&&Tl.keys.IE_PROTO||""))?"Symbol(src)_1."+Sl:"";var Ml=Function.prototype.toString;function Il(t){if(null!=t){try{return Ml.call(t)}catch(oR){}try{return t+""}catch(oR){}}return""}var El=/^\[object .+?Constructor\]$/,Al=Function.prototype,Dl=Object.prototype,kl=Al.toString,Pl=Dl.hasOwnProperty,Ol=RegExp("^"+kl.call(Pl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rl(t){return!(!Pa(t)||(e=t,Cl&&Cl in e))&&(xl(t)?Ol:El).test(Il(t));var e}function Ll(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Rl(i)?i:void 0}var Nl=Ll(La,"WeakMap"),Fl=Object.create,Bl=function(){function t(){}return function(e){if(!Pa(e))return{};if(Fl)return Fl(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function zl(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}var Vl=Date.now;var $l,Hl,Kl,Wl=function(){try{var t=Ll(Object,"defineProperty");return t({},"",{}),t}catch(oR){}}(),jl=Wl?function(t,e){return Wl(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:wl,Ul=($l=jl,Hl=0,Kl=0,function(){var t=Vl(),e=16-(t-Kl);if(Kl=t,e>0){if(++Hl>=800)return arguments[0]}else Hl=0;return $l.apply(void 0,arguments)});var Gl=/^(?:0|[1-9]\d*)$/;function ql(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&Gl.test(t))&&t>-1&&t%1==0&&t<e}function Yl(t,e,i){"__proto__"==e&&Wl?Wl(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Xl(t,e){return t===e||t!=t&&e!=e}var Zl=Object.prototype.hasOwnProperty;function Ql(t,e,i){var n=t[e];Zl.call(t,e)&&Xl(n,i)&&(void 0!==i||e in t)||Yl(t,e,i)}function Jl(t,e,i,n){var s=!i;i||(i={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=void 0;void 0===l&&(l=t[a]),s?Yl(i,a,l):Ql(i,a,l)}return i}var tc=Math.max;function ec(t,e,i){return e=tc(void 0===e?t.length-1:e,0),function(){for(var n=arguments,s=-1,r=tc(n.length-e,0),o=Array(r);++s<r;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=i(o),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,a)}}function ic(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function nc(t){return null!=t&&ic(t.length)&&!xl(t)}var sc=Object.prototype;function rc(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||sc)}function oc(t){return qa(t)&&"[object Arguments]"==Ga(t)}var ac=Object.prototype,lc=ac.hasOwnProperty,cc=ac.propertyIsEnumerable,hc=oc(function(){return arguments}())?oc:function(t){return qa(t)&&lc.call(t,"callee")&&!cc.call(t,"callee")};var uc="object"==typeof exports&&exports&&!exports.nodeType&&exports,dc=uc&&"object"==typeof module&&module&&!module.nodeType&&module,pc=dc&&dc.exports===uc?La.Buffer:void 0,fc=(pc?pc.isBuffer:void 0)||function(){return!1},mc={};function gc(t){return function(e){return t(e)}}mc["[object Float32Array]"]=mc["[object Float64Array]"]=mc["[object Int8Array]"]=mc["[object Int16Array]"]=mc["[object Int32Array]"]=mc["[object Uint8Array]"]=mc["[object Uint8ClampedArray]"]=mc["[object Uint16Array]"]=mc["[object Uint32Array]"]=!0,mc["[object Arguments]"]=mc["[object Array]"]=mc["[object ArrayBuffer]"]=mc["[object Boolean]"]=mc["[object DataView]"]=mc["[object Date]"]=mc["[object Error]"]=mc["[object Function]"]=mc["[object Map]"]=mc["[object Number]"]=mc["[object Object]"]=mc["[object RegExp]"]=mc["[object Set]"]=mc["[object String]"]=mc["[object WeakMap]"]=!1;var vc="object"==typeof exports&&exports&&!exports.nodeType&&exports,yc=vc&&"object"==typeof module&&module&&!module.nodeType&&module,_c=yc&&yc.exports===vc&&Oa.process,bc=function(){try{var t=yc&&yc.require&&yc.require("util").types;return t||_c&&_c.binding&&_c.binding("util")}catch(oR){}}(),wc=bc&&bc.isTypedArray,xc=wc?gc(wc):function(t){return qa(t)&&ic(t.length)&&!!mc[Ga(t)]},Sc=Object.prototype.hasOwnProperty;function Tc(t,e){var i=ml(t),n=!i&&hc(t),s=!i&&!n&&fc(t),r=!i&&!n&&!s&&xc(t),o=i||n||s||r,a=o?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=a.length;for(var c in t)!e&&!Sc.call(t,c)||o&&("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ql(c,l))||a.push(c);return a}function Cc(t,e){return function(i){return t(e(i))}}var Mc=Cc(Object.keys,Object),Ic=Object.prototype.hasOwnProperty;function Ec(t){if(!rc(t))return Mc(t);var e=[];for(var i in Object(t))Ic.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Ac(t){return nc(t)?Tc(t):Ec(t)}var Dc=Object.prototype.hasOwnProperty;function kc(t){if(!Pa(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=rc(t),i=[];for(var n in t)("constructor"!=n||!e&&Dc.call(t,n))&&i.push(n);return i}function Pc(t){return nc(t)?Tc(t,!0):kc(t)}var Oc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rc=/^\w*$/;function Lc(t,e){if(ml(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Ya(t))||(Rc.test(t)||!Oc.test(t)||null!=e&&t in Object(e))}var Nc=Ll(Object,"create");var Fc=Object.prototype.hasOwnProperty;var Bc=Object.prototype.hasOwnProperty;function zc(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Vc(t,e){for(var i=t.length;i--;)if(Xl(t[i][0],e))return i;return-1}zc.prototype.clear=function(){this.__data__=Nc?Nc(null):{},this.size=0},zc.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},zc.prototype.get=function(t){var e=this.__data__;if(Nc){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return Fc.call(e,t)?e[t]:void 0},zc.prototype.has=function(t){var e=this.__data__;return Nc?void 0!==e[t]:Bc.call(e,t)},zc.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Nc&&void 0===e?"__lodash_hash_undefined__":e,this};var $c=Array.prototype.splice;function Hc(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Hc.prototype.clear=function(){this.__data__=[],this.size=0},Hc.prototype.delete=function(t){var e=this.__data__,i=Vc(e,t);return!(i<0)&&(i==e.length-1?e.pop():$c.call(e,i,1),--this.size,!0)},Hc.prototype.get=function(t){var e=this.__data__,i=Vc(e,t);return i<0?void 0:e[i][1]},Hc.prototype.has=function(t){return Vc(this.__data__,t)>-1},Hc.prototype.set=function(t,e){var i=this.__data__,n=Vc(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};var Kc=Ll(La,"Map");function Wc(t,e){var i,n,s=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof e?"string":"hash"]:s.map}function jc(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}jc.prototype.clear=function(){this.size=0,this.__data__={hash:new zc,map:new(Kc||Hc),string:new zc}},jc.prototype.delete=function(t){var e=Wc(this,t).delete(t);return this.size-=e?1:0,e},jc.prototype.get=function(t){return Wc(this,t).get(t)},jc.prototype.has=function(t){return Wc(this,t).has(t)},jc.prototype.set=function(t,e){var i=Wc(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function Uc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,s=e?e.apply(this,n):n[0],r=i.cache;if(r.has(s))return r.get(s);var o=t.apply(this,n);return i.cache=r.set(s,o)||r,o};return i.cache=new(Uc.Cache||jc),i}Uc.Cache=jc;var Gc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qc=/\\(\\)?/g,Yc=function(t){var e=Uc(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Gc,(function(t,i,n,s){e.push(n?s.replace(qc,"$1"):i||t)})),e}));function Xc(t){return null==t?"":yl(t)}function Zc(t,e){return ml(t)?t:Lc(t,e)?[t]:Yc(Xc(t))}function Qc(t){if("string"==typeof t||Ya(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Jc(t,e){for(var i=0,n=(e=Zc(e,t)).length;null!=t&&i<n;)t=t[Qc(e[i++])];return i&&i==n?t:void 0}function th(t,e){for(var i=-1,n=e.length,s=t.length;++i<n;)t[s+i]=e[i];return t}var eh=Va?Va.isConcatSpreadable:void 0;function ih(t){return ml(t)||hc(t)||!!(eh&&t&&t[eh])}function nh(t){return(null==t?0:t.length)?function(t,e,i,n,s){var r=-1,o=t.length;for(i||(i=ih),s||(s=[]);++r<o;){var a=t[r];i(a)?th(s,a):s[s.length]=a}return s}(t):[]}var sh=Cc(Object.getPrototypeOf,Object),rh=Function.prototype,oh=Object.prototype,ah=rh.toString,lh=oh.hasOwnProperty,ch=ah.call(Object);function hh(t){if(!qa(t)||"[object Object]"!=Ga(t))return!1;var e=sh(t);if(null===e)return!0;var i=lh.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ah.call(i)==ch}function uh(t){var e=this.__data__=new Hc(t);this.size=e.size}uh.prototype.clear=function(){this.__data__=new Hc,this.size=0},uh.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},uh.prototype.get=function(t){return this.__data__.get(t)},uh.prototype.has=function(t){return this.__data__.has(t)},uh.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Hc){var n=i.__data__;if(!Kc||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new jc(n)}return i.set(t,e),this.size=i.size,this};var dh="object"==typeof exports&&exports&&!exports.nodeType&&exports,ph=dh&&"object"==typeof module&&module&&!module.nodeType&&module,fh=ph&&ph.exports===dh?La.Buffer:void 0,mh=fh?fh.allocUnsafe:void 0;function gh(t,e){if(e)return t.slice();var i=t.length,n=mh?mh(i):new t.constructor(i);return t.copy(n),n}function vh(){return[]}var yh=Object.prototype.propertyIsEnumerable,_h=Object.getOwnPropertySymbols,bh=_h?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,s=0,r=[];++i<n;){var o=t[i];e(o,i,t)&&(r[s++]=o)}return r}(_h(t),(function(e){return yh.call(t,e)})))}:vh;var wh=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)th(e,bh(t)),t=sh(t);return e}:vh;function xh(t,e,i){var n=e(t);return ml(t)?n:th(n,i(t))}function Sh(t){return xh(t,Ac,bh)}function Th(t){return xh(t,Pc,wh)}var Ch=Ll(La,"DataView"),Mh=Ll(La,"Promise"),Ih=Ll(La,"Set"),Eh="[object Map]",Ah="[object Promise]",Dh="[object Set]",kh="[object WeakMap]",Ph="[object DataView]",Oh=Il(Ch),Rh=Il(Kc),Lh=Il(Mh),Nh=Il(Ih),Fh=Il(Nl),Bh=Ga;(Ch&&Bh(new Ch(new ArrayBuffer(1)))!=Ph||Kc&&Bh(new Kc)!=Eh||Mh&&Bh(Mh.resolve())!=Ah||Ih&&Bh(new Ih)!=Dh||Nl&&Bh(new Nl)!=kh)&&(Bh=function(t){var e=Ga(t),i="[object Object]"==e?t.constructor:void 0,n=i?Il(i):"";if(n)switch(n){case Oh:return Ph;case Rh:return Eh;case Lh:return Ah;case Nh:return Dh;case Fh:return kh}return e});var zh=Object.prototype.hasOwnProperty;var Vh=La.Uint8Array;function $h(t){var e=new t.constructor(t.byteLength);return new Vh(e).set(new Vh(t)),e}var Hh=/\w*$/;var Kh=Va?Va.prototype:void 0,Wh=Kh?Kh.valueOf:void 0;function jh(t,e){var i=e?$h(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Uh(t,e,i){var n,s,r,o=t.constructor;switch(e){case"[object ArrayBuffer]":return $h(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var i=e?$h(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return jh(t,i);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(r=new(s=t).constructor(s.source,Hh.exec(s))).lastIndex=s.lastIndex,r;case"[object Symbol]":return n=t,Wh?Object(Wh.call(n)):{}}}function Gh(t){return"function"!=typeof t.constructor||rc(t)?{}:Bl(sh(t))}var qh=bc&&bc.isMap,Yh=qh?gc(qh):function(t){return qa(t)&&"[object Map]"==Bh(t)};var Xh=bc&&bc.isSet,Zh=Xh?gc(Xh):function(t){return qa(t)&&"[object Set]"==Bh(t)},Qh="[object Arguments]",Jh="[object Function]",tu="[object Object]",eu={};function iu(t,e,i,n,s,r){var o,a=1&e,l=2&e,c=4&e;if(i&&(o=s?i(t,n,s,r):i(t)),void 0!==o)return o;if(!Pa(t))return t;var h=ml(t);if(h){if(o=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&zh.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!a)return zl(t,o)}else{var u=Bh(t),d=u==Jh||"[object GeneratorFunction]"==u;if(fc(t))return gh(t,a);if(u==tu||u==Qh||d&&!s){if(o=l||d?{}:Gh(t),!a)return l?function(t,e){return Jl(t,wh(t),e)}(t,function(t,e){return t&&Jl(e,Pc(e),t)}(o,t)):function(t,e){return Jl(t,bh(t),e)}(t,function(t,e){return t&&Jl(e,Ac(e),t)}(o,t))}else{if(!eu[u])return s?t:{};o=Uh(t,u,a)}}r||(r=new uh);var p=r.get(t);if(p)return p;r.set(t,o),Zh(t)?t.forEach((function(n){o.add(iu(n,e,i,n,t,r))})):Yh(t)&&t.forEach((function(n,s){o.set(s,iu(n,e,i,s,t,r))}));var f=h?void 0:(c?l?Th:Sh:l?Pc:Ac)(t);return function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););}(f||t,(function(n,s){f&&(n=t[s=n]),Ql(o,s,iu(n,e,i,s,t,r))})),o}eu[Qh]=eu["[object Array]"]=eu["[object ArrayBuffer]"]=eu["[object DataView]"]=eu["[object Boolean]"]=eu["[object Date]"]=eu["[object Float32Array]"]=eu["[object Float64Array]"]=eu["[object Int8Array]"]=eu["[object Int16Array]"]=eu["[object Int32Array]"]=eu["[object Map]"]=eu["[object Number]"]=eu[tu]=eu["[object RegExp]"]=eu["[object Set]"]=eu["[object String]"]=eu["[object Symbol]"]=eu["[object Uint8Array]"]=eu["[object Uint8ClampedArray]"]=eu["[object Uint16Array]"]=eu["[object Uint32Array]"]=!0,eu["[object Error]"]=eu[Jh]=eu["[object WeakMap]"]=!1;function nu(t){return iu(t,5)}function su(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new jc;++e<i;)this.add(t[e])}function ru(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}su.prototype.add=su.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},su.prototype.has=function(t){return this.__data__.has(t)};function ou(t,e,i,n,s,r){var o=1&i,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),h=r.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,p=2&i?new su:void 0;for(r.set(t,e),r.set(e,t);++u<a;){var f=t[u],m=e[u];if(n)var g=o?n(m,f,u,e,t,r):n(f,m,u,t,e,r);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!ru(e,(function(t,e){if(o=e,!p.has(o)&&(f===t||s(f,t,i,n,r)))return p.push(e);var o}))){d=!1;break}}else if(f!==m&&!s(f,m,i,n,r)){d=!1;break}}return r.delete(t),r.delete(e),d}function au(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function lu(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var cu=Va?Va.prototype:void 0,hu=cu?cu.valueOf:void 0;var uu=Object.prototype.hasOwnProperty;var du="[object Arguments]",pu="[object Array]",fu="[object Object]",mu=Object.prototype.hasOwnProperty;function gu(t,e,i,n,s,r){var o=ml(t),a=ml(e),l=o?pu:Bh(t),c=a?pu:Bh(e),h=(l=l==du?fu:l)==fu,u=(c=c==du?fu:c)==fu,d=l==c;if(d&&fc(t)){if(!fc(e))return!1;o=!0,h=!1}if(d&&!h)return r||(r=new uh),o||xc(t)?ou(t,e,i,n,s,r):function(t,e,i,n,s,r,o){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new Vh(t),new Vh(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xl(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=au;case"[object Set]":var l=1&n;if(a||(a=lu),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;n|=2,o.set(t,e);var h=ou(a(t),a(e),n,s,r,o);return o.delete(t),h;case"[object Symbol]":if(hu)return hu.call(t)==hu.call(e)}return!1}(t,e,l,i,n,s,r);if(!(1&i)){var p=h&&mu.call(t,"__wrapped__"),f=u&&mu.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return r||(r=new uh),s(m,g,i,n,r)}}return!!d&&(r||(r=new uh),function(t,e,i,n,s,r){var o=1&i,a=Sh(t),l=a.length;if(l!=Sh(e).length&&!o)return!1;for(var c=l;c--;){var h=a[c];if(!(o?h in e:uu.call(e,h)))return!1}var u=r.get(t),d=r.get(e);if(u&&d)return u==e&&d==t;var p=!0;r.set(t,e),r.set(e,t);for(var f=o;++c<l;){var m=t[h=a[c]],g=e[h];if(n)var v=o?n(g,m,h,e,t,r):n(m,g,h,t,e,r);if(!(void 0===v?m===g||s(m,g,i,n,r):v)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var y=t.constructor,_=e.constructor;y==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(p=!1)}return r.delete(t),r.delete(e),p}(t,e,i,n,s,r))}function vu(t,e,i,n,s){return t===e||(null==t||null==e||!qa(t)&&!qa(e)?t!=t&&e!=e:gu(t,e,i,n,vu,s))}function yu(t){return t==t&&!Pa(t)}function _u(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}function bu(t){var e=function(t){for(var e=Ac(t),i=e.length;i--;){var n=e[i],s=t[n];e[i]=[n,s,yu(s)]}return e}(t);return 1==e.length&&e[0][2]?_u(e[0][0],e[0][1]):function(i){return i===t||function(t,e,i,n){var s=i.length,r=s;if(null==t)return!r;for(t=Object(t);s--;){var o=i[s];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++s<r;){var a=(o=i[s])[0],l=t[a],c=o[1];if(o[2]){if(void 0===l&&!(a in t))return!1}else if(!vu(c,l,3,n,new uh))return!1}return!0}(i,0,e)}}function wu(t,e){return null!=t&&e in Object(t)}function xu(t,e){return null!=t&&function(t,e,i){for(var n=-1,s=(e=Zc(e,t)).length,r=!1;++n<s;){var o=Qc(e[n]);if(!(r=null!=t&&i(t,o)))break;t=t[o]}return r||++n!=s?r:!!(s=null==t?0:t.length)&&ic(s)&&ql(o,s)&&(ml(t)||hc(t))}(t,e,wu)}function Su(t,e){return Lc(t)&&yu(e)?_u(Qc(t),e):function(i){var n=function(t,e,i){var n=null==t?void 0:Jc(t,e);return void 0===n?i:n}(i,t);return void 0===n&&n===e?xu(i,t):vu(e,n,3)}}function Tu(t){return Lc(t)?(e=Qc(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Jc(e,t)}}(t);var e}function Cu(t){return"function"==typeof t?t:null==t?wl:"object"==typeof t?ml(t)?Su(t[0],t[1]):bu(t):Tu(t)}function Mu(t,e,i,n){for(var s=-1,r=null==t?0:t.length;++s<r;){var o=t[s];e(n,o,i(o),t)}return n}var Iu=function(t,e,i){for(var n=-1,s=Object(t),r=i(t),o=r.length;o--;){var a=r[++n];if(!1===e(s[a],a,s))break}return t};var Eu,Au=(Eu=function(t,e){return t&&Iu(t,e,Ac)},function(t,e){if(null==t)return t;if(!nc(t))return Eu(t,e);for(var i=t.length,n=-1,s=Object(t);++n<i&&!1!==e(s[n],n,s););return t});function Du(t,e,i,n){return Au(t,(function(t,s,r){e(n,t,i(t),r)})),n}function ku(t,e,i){(void 0!==i&&!Xl(t[e],i)||void 0===i&&!(e in t))&&Yl(t,e,i)}function Pu(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Ou(t,e,i,n,s,r,o){var a=Pu(t,i),l=Pu(e,i),c=o.get(l);if(c)ku(t,i,c);else{var h,u=r?r(a,l,i+"",t,e,o):void 0,d=void 0===u;if(d){var p=ml(l),f=!p&&fc(l),m=!p&&!f&&xc(l);u=l,p||f||m?ml(a)?u=a:qa(h=a)&&nc(h)?u=zl(a):f?(d=!1,u=gh(l,!0)):m?(d=!1,u=jh(l,!0)):u=[]:hh(l)||hc(l)?(u=a,hc(a)?u=function(t){return Jl(t,Pc(t))}(a):Pa(a)&&!xl(a)||(u=Gh(l))):d=!1}d&&(o.set(l,u),s(u,l,n,r,o),o.delete(l)),ku(t,i,u)}}function Ru(t,e,i,n,s){t!==e&&Iu(e,(function(r,o){if(s||(s=new uh),Pa(r))Ou(t,e,o,i,Ru,n,s);else{var a=n?n(Pu(t,o),r,o+"",t,e,s):void 0;void 0===a&&(a=r),ku(t,o,a)}}),Pc)}function Lu(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Nu,Fu,Bu=Object.prototype.hasOwnProperty,zu=(Nu=function(t,e,i){Bu.call(t,i)?t[i].push(e):Yl(t,i,[e])},function(t,e){var i=ml(t)?Mu:Du,n=Fu?Fu():{};return i(t,Nu,Cu(e),n)});function Vu(t){return null==t?[]:function(t,e){return fl(e,(function(e){return t[e]}))}(t,Ac(t))}function $u(t,e){return e.length<2?t:Jc(t,function(t,e,i){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(i=i>s?s:i)<0&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var r=Array(s);++n<s;)r[n]=t[n+e];return r}(e,0,-1))}var Hu=Object.prototype.hasOwnProperty;function Ku(t){if(null==t)return!0;if(nc(t)&&(ml(t)||"string"==typeof t||"function"==typeof t.splice||fc(t)||xc(t)||hc(t)))return!t.length;var e=Bh(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(rc(t))return!Ec(t).length;for(var i in t)if(Hu.call(t,i))return!1;return!0}function Wu(t,e){return vu(t,e)}var ju=La.isFinite;function Uu(t){return"number"==typeof t&&t==bl(t)}function Gu(t){return null==t}var qu,Yu=(qu=function(t,e,i){Ru(t,e,i)},function(t,e){return Ul(ec(t,e,wl),t+"")}((function(t,e){var i=-1,n=e.length,s=n>1?e[n-1]:void 0,r=n>2?e[2]:void 0;for(s=qu.length>3&&"function"==typeof s?(n--,s):void 0,r&&function(t,e,i){if(!Pa(i))return!1;var n=typeof e;return!!("number"==n?nc(i)&&ql(e,i.length):"string"==n&&e in i)&&Xl(i[e],t)}(e[0],e[1],r)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=e[i];o&&qu(t,o,i,s)}return t})));function Xu(t,e){return null==(t=$u(t,e=Zc(e,t)))||delete t[Qc(Lu(e))]}function Zu(t){return hh(t)?void 0:t}var Qu=function(t){return Ul(ec(t,void 0,nh),t+"")}((function(t,e){var i={};if(null==t)return i;var n=!1;e=fl(e,(function(e){return e=Zc(e,t),n||(n=e.length>1),e})),Jl(t,Th(t),i),n&&(i=iu(i,7,Zu));for(var s=e.length;s--;)Xu(i,e[s]);return i}));function Ju(t,e,i,n){if(!Pa(t))return t;for(var s=-1,r=(e=Zc(e,t)).length,o=r-1,a=t;null!=a&&++s<r;){var l=Qc(e[s]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(s!=o){var h=a[l];void 0===(c=void 0)&&(c=Pa(h)?h:ql(e[s+1])?[]:{})}Ql(a,l,c),a=a[l]}return t}function td(t,e){if(null==t)return{};var i=fl(Th(t),(function(t){return[t]}));return e=Cu(e),function(t,e,i){for(var n=-1,s=e.length,r={};++n<s;){var o=e[n],a=Jc(t,o);i(a,o)&&Ju(r,Zc(o,t),a)}return r}(t,i,(function(t,i){return e(t,i[0])}))}function ed(t,e){return td(t,function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}(Cu(e)))}function id(t,e){return t&&t.length?function(t,e){for(var i=-1,n=t.length,s=0,r=[];++i<n;){var o=t[i],a=e?e(o):o;if(!i||!Xl(a,l)){var l=a;r[s++]=0===o?0:o}}return r}(t,Cu(e)):[]}var nd=Array.isArray,sd=Array.prototype.indexOf,rd=Array.from,od=Object.defineProperty,ad=Object.getOwnPropertyDescriptor,ld=Object.getOwnPropertyDescriptors,cd=Object.prototype,hd=Array.prototype,ud=Object.getPrototypeOf,dd=Object.isExtensible;function pd(t){return"function"==typeof t}const fd=()=>{};function md(t){return t()}function gd(t){for(var e=0;e<t.length;e++)t[e]()}const vd=32,yd=64,_d=256,bd=512,wd=1024,xd=2048,Sd=4096,Td=8192,Cd=16384,Md=32768,Id=65536,Ed=1<<17,Ad=1<<19,Dd=1<<20,kd=1<<21,Pd=1<<22,Od=1<<23,Rd=Symbol("$state"),Ld=Symbol("legacy props"),Nd=Symbol(""),Fd=new class extends Error{constructor(){super(...arguments),x(this,"name","StaleReactionError"),x(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Bd(t){return t===this.v}function zd(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function Vd(t,e){return t!==e}function $d(t){return!zd(t,this.v)}function Hd(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Kd=!1;const Wd=Symbol();let jd=null;function Ud(t){jd=t}function Gd(t){return Qd().get(t)}function qd(t,e){return Qd().set(t,e),e}function Yd(t,e=!1,i){jd={p:jd,c:null,e:null,s:t,x:null,l:Kd&&!e?{s:null,u:null,$:[]}:null}}function Xd(t){var e=jd,i=e.e;if(null!==i)for(var n of(e.e=null,i))Bf(n);return void 0!==t&&(e.x=t),jd=e.p,t??{}}function Zd(){return!Kd||null!==jd&&null===jd.l}function Qd(t){return null===jd&&Hd(),jd.c??(jd.c=new Map(function(t){let e=t.p;for(;null!==e;){const t=e.c;if(null!==t)return t;e=e.p}return null}(jd)||void 0))}function Jd(t){if("object"!=typeof t||null===t||Rd in t)return t;const e=ud(t);if(e!==cd&&e!==hd)return t;var i=new Map,n=nd(t),s=Gp(0),r=gf,o=t=>{if(gf===r)return t();var e=sf,i=gf;of(null),vf(r);var n=t();return of(e),vf(i),n};return n&&i.set("length",Gp(t.length)),new Proxy(t,{defineProperty(t,e,n){"value"in n&&!1!==n.configurable&&!1!==n.enumerable&&!1!==n.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var s=i.get(e);return void 0===s?s=o((()=>{var t=Gp(n.value);return i.set(e,t),t})):Yp(s,n.value,!0),!0},deleteProperty(t,e){var n=i.get(e);if(void 0===n){if(e in t){const t=o((()=>Gp(Wd)));i.set(e,t),Zp(s)}}else Yp(n,Wd),Zp(s);return!0},get(e,n,s){var r;if(n===Rd)return t;var a=i.get(n),l=n in e;if(void 0!==a||l&&!(null==(r=ad(e,n))?void 0:r.writable)||(a=o((()=>Gp(Jd(l?e[n]:Wd)))),i.set(n,a)),void 0!==a){var c=If(a);return c===Wd?void 0:c}return Reflect.get(e,n,s)},getOwnPropertyDescriptor(t,e){var n=Reflect.getOwnPropertyDescriptor(t,e);if(n&&"value"in n){var s=i.get(e);s&&(n.value=If(s))}else if(void 0===n){var r=i.get(e),o=null==r?void 0:r.v;if(void 0!==r&&o!==Wd)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return n},has(t,e){var n;if(e===Rd)return!0;var s=i.get(e),r=void 0!==s&&s.v!==Wd||Reflect.has(t,e);if((void 0!==s||null!==af&&(!r||(null==(n=ad(t,e))?void 0:n.writable)))&&(void 0===s&&(s=o((()=>Gp(r?Jd(t[e]):Wd))),i.set(e,s)),If(s)===Wd))return!1;return r},set(t,e,r,a){var l,c=i.get(e),h=e in t;if(n&&"length"===e)for(var u=r;u<c.v;u+=1){var d=i.get(u+"");void 0!==d?Yp(d,Wd):u in t&&(d=o((()=>Gp(Wd))),i.set(u+"",d))}void 0===c?h&&!(null==(l=ad(t,e))?void 0:l.writable)||(Yp(c=o((()=>Gp(void 0))),Jd(r)),i.set(e,c)):(h=c.v!==Wd,Yp(c,o((()=>Jd(r)))));var p=Reflect.getOwnPropertyDescriptor(t,e);if((null==p?void 0:p.set)&&p.set.call(a,r),!h){if(n&&"string"==typeof e){var f=i.get("length"),m=Number(e);Number.isInteger(m)&&m>=f.v&&Yp(f,m+1)}Zp(s)}return!0},ownKeys(t){If(s);var e=Reflect.ownKeys(t).filter((t=>{var e=i.get(t);return void 0===e||e.v!==Wd}));for(var[n,r]of i)r.v===Wd||n in t||e.push(n);return e},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function tp(t){try{if(null!==t&&"object"==typeof t&&Rd in t)return t[Rd]}catch{}return t}var ep,ip,np,sp;function rp(t=""){return document.createTextNode(t)}function op(t){return np.call(t)}function ap(t){return sp.call(t)}function lp(t,e){return op(t)}function cp(t,e){var i=op(t);return i instanceof Comment&&""===i.data?ap(i):i}function hp(t,e=1,i=!1){let n=t;for(;e--;)n=ap(n);return n}const up=new WeakMap;function dp(t,e){for(;null!==e;){if(128&e.f)try{return void e.b.error(t)}catch(oR){t=oR}e=e.parent}throw t instanceof Error&&pp(t),t}function pp(t){const e=up.get(t);e&&(od(t,"message",{value:e.message}),od(t,"stack",{value:e.stack}))}let fp=[],mp=[];function gp(){var t=fp;fp=[],gd(t)}function vp(t){0===fp.length&&queueMicrotask(gp),fp.push(t)}function yp(){var t;fp.length>0&&gp(),mp.length>0&&(t=mp,mp=[],gd(t))}function _p(){for(var t=af.b;null!==t&&!t.has_pending_snippet();)t=t.parent;return null===t&&function(){throw new Error("https://svelte.dev/e/await_outside_boundary")}(),t}function bp(t){var e=2050,i=null!==sf&&2&sf.f?sf:null;null===af||null!==i&&i.f&_d?e|=_d:af.f|=Ad;return{ctx:jd,deps:null,effects:null,equals:Bd,f:e,fn:t,reactions:null,rv:0,v:Wd,wv:0,parent:i??af,ac:null}}function wp(t,e){let i=af;null===i&&function(){throw new Error("https://svelte.dev/e/async_derived_orphan")}();var n=i.b,s=void 0,r=Up(Wd),o=null,a=!sf;return function(t){Lf(4718592,t,!0)}((()=>{try{var e=t()}catch(u){e=Promise.reject(u)}var i=()=>e;s=(null==o?void 0:o.then(i,i))??Promise.resolve(e),o=s;var l=Dp,c=n.pending;a&&(n.update_pending_count(1),c||l.increment());const h=(t,e=void 0)=>{o=null,c||l.activate(),e?e!==Fd&&(r.f|=Od,Xp(r,e)):(r.f&Od&&(r.f^=Od),Xp(r,t)),a&&(n.update_pending_count(-1),c||l.decrement()),Ep()};if(s.then(h,(t=>h(null,t||"unknown"))),l)return()=>{queueMicrotask((()=>l.neuter()))}})),new Promise((t=>{!function e(i){function n(){i===s?t(r):e(s)}i.then(n,n)}(s)}))}function xp(t){const e=bp(t);return hf(e),e}function Sp(t){const e=bp(t);return e.equals=$d,e}function Tp(t){var e=t.effects;if(null!==e){t.effects=null;for(var i=0;i<e.length;i+=1)Uf(e[i])}}function Cp(t){var e,i=af;lf(function(t){for(var e=t.parent;null!==e;){if(!(2&e.f))return e;e=e.parent}return null}(t));try{Tp(t),e=xf(t)}finally{lf(i)}return e}function Mp(t){var e=Cp(t);(t.equals(e)||(t.v=e,t.wv=_f()),ef)||(null!==kp?kp.set(t,t.v):kf(t,(yf||t.f&_d)&&null!==t.deps?Sd:wd))}function Ip(t,e,i){const n=Zd()?bp:Sp;if(0!==e.length){var s,r,o,a=Dp,l=af,c=(s=af,r=sf,o=jd,function(){lf(s),of(r),Ud(o)}),h=_p();Promise.all(e.map((t=>wp(t)))).then((e=>{null==a||a.activate(),c();try{i([...t.map(n),...e])}catch(s){l.f&Cd||dp(s,l)}null==a||a.deactivate(),Ep()})).catch((t=>{h.error(t)}))}else i(t.map(n))}function Ep(){lf(null),of(null),Ud(null)}const Ap=new Set;let Dp=null,kp=null,Pp=new Set,Op=[];function Rp(){const t=Op.shift();Op.length>0&&queueMicrotask(Rp),t()}let Lp=[],Np=null,Fp=!1,Bp=!1;i=new WeakMap,n=new WeakMap,s=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakSet,m=function(t){var e;t.f^=wd;for(var i=t.first;null!==i;){var n=i.f,s=!!(96&n);if(!(s&&!!(n&wd)||!!(n&Td)||this.skipped_effects.has(i))&&null!==i.fn){if(s)i.f^=wd;else if(!(n&wd))if(4&n)T(this,h).push(i);else if(n&Pd){((null==(e=i.b)?void 0:e.pending)?T(this,l):T(this,a)).push(i)}else bf(i)&&(16&i.f&&T(this,u).push(i),Cf(i));var r=i.first;if(null!==r){i=r;continue}}var o=i.parent;for(i=i.next;null===i&&null!==o;)i=o.next,o=o.parent}},g=function(t){for(const e of t){(e.f&xd?T(this,d):T(this,p)).push(e),kf(e,wd)}t.length=0},v=function(){if(!T(this,o))for(const t of T(this,n))t();T(this,n).clear()};let zp=class t{constructor(){C(this,f),x(this,"current",new Map),C(this,i,new Map),C(this,n,new Set),C(this,s,0),C(this,r,null),C(this,o,!1),C(this,a,[]),C(this,l,[]),C(this,c,[]),C(this,h,[]),C(this,u,[]),C(this,d,[]),C(this,p,[]),x(this,"skipped_effects",new Set)}process(t){var e;Lp=[];var n=null;if(Ap.size>1){n=new Map,kp=new Map;for(const[t,e]of this.current)n.set(t,{v:t.v,wv:t.wv}),t.v=e;for(const t of Ap)if(t!==this)for(const[e,s]of T(t,i))n.has(e)||(n.set(e,{v:e.v,wv:e.wv}),e.v=s)}for(const i of t)I(this,f,m).call(this,i);if(0===T(this,a).length&&0===T(this,s)){I(this,f,v).call(this);var o=T(this,c),d=T(this,h);M(this,c,[]),M(this,h,[]),M(this,u,[]),Dp=null,Kp(o),Kp(d),null===Dp?Dp=this:Ap.delete(this),null==(e=T(this,r))||e.resolve()}else I(this,f,g).call(this,T(this,c)),I(this,f,g).call(this,T(this,h)),I(this,f,g).call(this,T(this,u));if(n){for(const[t,{v:e,wv:i}]of n)t.wv<=i&&(t.v=e);kp=null}for(const i of T(this,a))Cf(i);for(const i of T(this,l))Cf(i);M(this,a,[]),M(this,l,[])}capture(t,e){T(this,i).has(t)||T(this,i).set(t,e),this.current.set(t,t.v)}activate(){Dp=this}deactivate(){Dp=null;for(const t of Pp)if(Pp.delete(t),t(),null!==Dp)break}neuter(){M(this,o,!0)}flush(){Lp.length>0?$p():I(this,f,v).call(this),Dp===this&&(0===T(this,s)&&Ap.delete(this),this.deactivate())}increment(){M(this,s,T(this,s)+1)}decrement(){if(M(this,s,T(this,s)-1),0===T(this,s)){for(const t of T(this,d))kf(t,xd),Wp(t);for(const t of T(this,p))kf(t,Sd),Wp(t);M(this,c,[]),M(this,h,[]),this.flush()}else this.deactivate()}add_callback(t){T(this,n).add(t)}settled(){return(T(this,r)??M(this,r,{promise:new Promise(((i,n)=>{t=i,e=n})),resolve:t,reject:e})).promise;var t,e}static ensure(){if(null===Dp){const e=Dp=new t;Ap.add(Dp),Bp||t.enqueue((()=>{Dp===e&&e.flush()}))}return Dp}static enqueue(t){0===Op.length&&queueMicrotask(Rp),Op.unshift(t)}};function Vp(t){var e=Bp;Bp=!0;try{for(;;){if(yp(),0===Lp.length&&(null==Dp||Dp.flush(),0===Lp.length))return void(Np=null);$p()}}finally{Bp=e}}function $p(){var t=Jp;Fp=!0;try{var e=0;for(tf(!0);Lp.length>0;){var i=zp.ensure();if(e++>1e3)pe,Hp();i.process(Lp),jp.clear()}}finally{Fp=!1,tf(t),Np=null}}function Hp(){try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(t){dp(t,Np)}}function Kp(t){var e=t.length;if(0!==e){for(var i=0;i<e;){var n=t[i++];if(!(24576&n.f)&&bf(n)){var s=Dp?Dp.current.size:0;if(Cf(n),null===n.deps&&null===n.first&&null===n.nodes_start&&(null===n.teardown&&null===n.ac?qf(n):n.fn=null),null!==Dp&&Dp.current.size>s&&n.f&Dd)break}}for(;i<e;)Wp(t[i++])}}function Wp(t){for(var e=Np=t;null!==e.parent;){var i=(e=e.parent).f;if(Fp&&e===af&&16&i)return;if(96&i){if(!(i&wd))return;e.f^=wd}}Lp.push(e)}const jp=new Map;function Up(t,e){return{f:0,v:t,reactions:null,equals:Bd,rv:0,wv:0}}function Gp(t,e){const i=Up(t);return hf(i),i}function qp(t,e=!1,i=!0){var n;const s=Up(t);return e||(s.equals=$d),Kd&&i&&null!==jd&&null!==jd.l&&((n=jd.l).s??(n.s=[])).push(s),s}function Yp(t,e,i=!1){return null!==sf&&(!rf||sf.f&Ed)&&Zd()&&4325394&sf.f&&!(null==cf?void 0:cf.includes(t))&&function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),Xp(t,i?Jd(e):e)}function Xp(t,e){if(!t.equals(e)){var i=t.v;ef?jp.set(t,e):jp.set(t,i),t.v=e,zp.ensure().capture(t,i),2&t.f&&(t.f&xd&&Cp(t),kf(t,t.f&_d?Sd:wd)),t.wv=_f(),Qp(t,xd),Zd()&&null!==af&&af.f&wd&&!(96&af.f)&&(null===pf?function(t){pf=t}([t]):pf.push(t))}return e}function Zp(t){Yp(t,t.v+1)}function Qp(t,e){var i=t.reactions;if(null!==i)for(var n=Zd(),s=i.length,r=0;r<s;r++){var o=i[r],a=o.f;if(n||o!==af){var l=!(a&xd);l&&kf(o,e),2&a?Qp(o,Sd):l&&Wp(o)}}}let Jp=!1;function tf(t){Jp=t}let ef=!1;function nf(t){ef=t}let sf=null,rf=!1;function of(t){sf=t}let af=null;function lf(t){af=t}let cf=null;function hf(t){null!==sf&&(null===cf?cf=[t]:cf.push(t))}let uf=null,df=0,pf=null;let ff=1,mf=0,gf=mf;function vf(t){gf=t}let yf=!1;function _f(){return++ff}function bf(t){var e,i=t.f;if(i&xd)return!0;if(i&Sd){var n=t.deps,s=!!(i&_d);if(null!==n){var r,o,a=!!(i&bd),l=s&&null!==af&&!yf,c=n.length;if((a||l)&&(null===af||!(af.f&Cd))){var h=t,u=h.parent;for(r=0;r<c;r++)o=n[r],!a&&(null==(e=null==o?void 0:o.reactions)?void 0:e.includes(h))||(o.reactions??(o.reactions=[])).push(h);a&&(h.f^=bd),!l||null===u||u.f&_d||(h.f^=_d)}for(r=0;r<c;r++)if(bf(o=n[r])&&Mp(o),o.wv>t.wv)return!0}s&&(null===af||yf)||kf(t,wd)}return!1}function wf(t,e,i=!0){var n=t.reactions;if(null!==n&&!(null==cf?void 0:cf.includes(t)))for(var s=0;s<n.length;s++){var r=n[s];2&r.f?wf(r,e,!1):e===r&&(i?kf(r,xd):r.f&wd&&kf(r,Sd),Wp(r))}}function xf(t){var e,i=uf,n=df,s=pf,r=sf,o=yf,a=cf,l=jd,c=rf,h=gf,u=t.f;uf=null,df=0,pf=null,yf=!!(u&_d)&&(rf||!Jp||null===sf),sf=96&u?null:t,cf=null,Ud(t.ctx),rf=!1,gf=++mf,null!==t.ac&&(t.ac.abort(Fd),t.ac=null);try{t.f|=kd;var d=(0,t.fn)(),p=t.deps;if(null!==uf){var f;if(Tf(t,df),null!==p&&df>0)for(p.length=df+uf.length,f=0;f<uf.length;f++)p[df+f]=uf[f];else t.deps=p=uf;if(!yf||2&u&&null!==t.reactions)for(f=df;f<p.length;f++)((e=p[f]).reactions??(e.reactions=[])).push(t)}else null!==p&&df<p.length&&(Tf(t,df),p.length=df);if(Zd()&&null!==pf&&!rf&&null!==p&&!(6146&t.f))for(f=0;f<pf.length;f++)wf(pf[f],t);return null!==r&&r!==t&&(mf++,null!==pf&&(null===s?s=pf:s.push(...pf))),t.f&Od&&(t.f^=Od),d}catch(m){return function(t){var e=af;if(null===e)return sf.f|=Od,t;if(e.f&Md)dp(t,e);else{if(!(128&e.f))throw!e.parent&&t instanceof Error&&pp(t),t;e.b.error(t)}}(m)}finally{t.f^=kd,uf=i,df=n,pf=s,sf=r,yf=o,cf=a,Ud(l),rf=c,gf=h}}function Sf(t,e){let i=e.reactions;if(null!==i){var n=sd.call(i,t);if(-1!==n){var s=i.length-1;0===s?i=e.reactions=null:(i[n]=i[s],i.pop())}}null===i&&2&e.f&&(null===uf||!uf.includes(e))&&(kf(e,Sd),768&e.f||(e.f^=bd),Tp(e),Tf(e,0))}function Tf(t,e){var i=t.deps;if(null!==i)for(var n=e;n<i.length;n++)Sf(t,i[n])}function Cf(t){var e=t.f;if(!(e&Cd)){kf(t,wd);var i=af,n=Jp;af=t,Jp=!0;try{16&e?function(t){var e=t.first;for(;null!==e;){var i=e.next;e.f&vd||Uf(e),e=i}}(t):jf(t),Wf(t);var s=xf(t);t.teardown="function"==typeof s?s:null,t.wv=ff}finally{Jp=n,af=i}}}async function Mf(){await Promise.resolve(),Vp()}function If(t){var e=!!(2&t.f);if(null===sf||rf){if(e&&null===t.deps&&null===t.effects){var i=t,n=i.parent;null===n||n.f&_d||(i.f^=_d)}}else if(!(null!==af&&!!(af.f&Cd))&&!(null==cf?void 0:cf.includes(t))){var s=sf.deps;if(sf.f&kd)t.rv<mf&&(t.rv=mf,null===uf&&null!==s&&s[df]===t?df++:null===uf?uf=[t]:yf&&uf.includes(t)||uf.push(t));else{(sf.deps??(sf.deps=[])).push(t);var r=t.reactions;null===r?t.reactions=[sf]:r.includes(sf)||r.push(sf)}}if(ef){if(jp.has(t))return jp.get(t);if(e){var o=(i=t).v;return(i.f&wd||null===i.reactions)&&!Ef(i)||(o=Cp(i)),jp.set(i,o),o}}else if(e){if(i=t,null==kp?void 0:kp.has(i))return kp.get(i);bf(i)&&Mp(i)}if(t.f&Od)throw t.v;return t.v}function Ef(t){if(t.v===Wd)return!0;if(null===t.deps)return!1;for(const e of t.deps){if(jp.has(e))return!0;if(2&e.f&&Ef(e))return!0}return!1}function Af(t){var e=rf;try{return rf=!0,t()}finally{rf=e}}const Df=-7169;function kf(t,e){t.f=t.f&Df|e}function Pf(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(Rd in t)Of(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];"object"==typeof i&&i&&Rd in i&&Of(i)}}function Of(t,e=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Of(t[n],e)}catch(oR){}const i=ud(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const e=ld(i);for(let i in e){const n=e[i].get;if(n)try{n.call(t)}catch(oR){}}}}}function Rf(t){null===af&&null===sf&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),null!==sf&&sf.f&_d&&null===af&&function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),ef&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function Lf(t,e,i,n=!0){var s=af;null!==s&&s.f&Td&&(t|=Td);var r={ctx:jd,deps:null,nodes_start:null,nodes_end:null,f:t|xd,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(i)try{Cf(r),r.f|=Md}catch(oR){throw Uf(r),oR}else null!==e&&Wp(r);if(!(i&&null===r.deps&&null===r.first&&null===r.nodes_start&&null===r.teardown&&!(r.f&Ad))&&n&&(null!==s&&function(t,e){var i=e.last;null===i?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}(r,s),null!==sf&&2&sf.f&&!(t&yd))){var o=sf;(o.effects??(o.effects=[])).push(r)}return r}function Nf(t){const e=Lf(8,null,!1);return kf(e,wd),e.teardown=t,e}function Ff(t){Rf();var e=af.f;if(!!(sf||!(e&vd)||e&Md))return Bf(t);var i=jd;(i.e??(i.e=[])).push(t)}function Bf(t){return Lf(1048580,t,!1)}function zf(t){return Lf(4,t,!1)}function Vf(t,e=0){return Lf(8|e,t,!0)}function $f(t,e=[],i=[]){Ip(e,i,(e=>{Lf(8,(()=>t(...e.map(If))),!0)}))}function Hf(t,e=0){return Lf(16|e,t,!0)}function Kf(t,e=!0){return Lf(vd,t,!0,e)}function Wf(t){var e=t.teardown;if(null!==e){const t=ef,i=sf;nf(!0),of(null);try{e.call(null)}finally{nf(t),of(i)}}}function jf(t,e=!1){var i,n=t.first;for(t.first=t.last=null;null!==n;){null==(i=n.ac)||i.abort(Fd);var s=n.next;n.f&yd?n.parent=null:Uf(n,e),n=s}}function Uf(t,e=!0){var i=!1;(e||262144&t.f)&&null!==t.nodes_start&&null!==t.nodes_end&&(Gf(t.nodes_start,t.nodes_end),i=!0),jf(t,e&&!i),Tf(t,0),kf(t,Cd);var n=t.transitions;if(null!==n)for(const r of n)r.stop();Wf(t);var s=t.parent;null!==s&&null!==s.first&&qf(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Gf(t,e){for(var i;null!==t;){var n=t===e?null:ap(t);null==(i=t.__cleanup)||i.forEach((t=>t())),t.__cleanup=void 0,t.__click=void 0,t.remove(),t=n}}function qf(t){var e=t.parent,i=t.prev,n=t.next;null!==i&&(i.next=n),null!==n&&(n.prev=i),null!==e&&(e.first===t&&(e.first=n),e.last===t&&(e.last=i))}function Yf(t,e){var i=[];Zf(t,i,!0),Xf(i,(()=>{Uf(t),e&&e()}))}function Xf(t,e){var i=t.length;if(i>0){var n=()=>--i||e();for(var s of t)s.out(n)}else e()}function Zf(t,e,i){if(!(t.f&Td)){if(t.f^=Td,null!==t.transitions)for(const n of t.transitions)(n.is_global||i)&&e.push(n);for(var n=t.first;null!==n;){var s=n.next;Zf(n,e,!!(!!(n.f&Id)||!!(n.f&vd))&&i),n=s}}}function Qf(t){Jf(t,!0)}function Jf(t,e){if(t.f&Td){t.f^=Td,t.f&wd||(kf(t,xd),Wp(t));for(var i=t.first;null!==i;){var n=i.next;Jf(i,!!(!!(i.f&Id)||!!(i.f&vd))&&e),i=n}if(null!==t.transitions)for(const i of t.transitions)(i.is_global||e)&&i.in()}}function tm(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const em=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function im(t){return em.includes(t)}const nm={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function sm(t){return t=t.toLowerCase(),nm[t]??t}const rm=["touchstart","touchmove"];function om(t){return rm.includes(t)}function am(t,e){if(e){const e=document.body;t.autofocus=!0,vp((()=>{document.activeElement===e&&t.focus()}))}}const lm=new Set,cm=new Set;function hm(t,e,i,n={}){function s(t){if(n.capture||mm.call(e,t),!t.cancelBubble)return function(t){var e=sf,i=af;of(null),lf(null);try{return t()}finally{of(e),lf(i)}}((()=>null==i?void 0:i.call(this,t)))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?vp((()=>{e.addEventListener(t,s,n)})):e.addEventListener(t,s,n),s}function um(t,e,i,n={}){var s=hm(e,t,i,n);return()=>{t.removeEventListener(e,s,n)}}function dm(t,e,i,n,s){var r={capture:n,passive:s},o=hm(t,e,i,r);Array.isArray(e.__cleanup)||(e.__cleanup=[]);const a=()=>{e.removeEventListener(t,o,r)};Nf(a),e.__cleanup.push(a)}function pm(t){for(var e=0;e<t.length;e++)lm.add(t[e]);for(var i of cm)i(t)}let fm=null;function mm(t){var e,i=this,n=i.ownerDocument,s=t.type,r=(null==(e=t.composedPath)?void 0:e.call(t))||[],o=r[0]||t.target;fm=t;var a=0,l=fm===t&&t.__root;if(l){var c=r.indexOf(l);if(-1!==c&&(i===document||i===window))return void(t.__root=i);var h=r.indexOf(i);if(-1===h)return;c<=h&&(a=c)}if((o=r[a]||t.target)!==i){od(t,"currentTarget",{configurable:!0,get:()=>o||n});var u=sf,d=af;of(null),lf(null);try{for(var p,f=[];null!==o;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+s];if(null!=g&&(!o.disabled||t.target===o))if(nd(g)){var[v,...y]=g;v.apply(o,[t,...y])}else g.call(o,t)}catch(_){p?f.push(_):p=_}if(t.cancelBubble||m===i||null===m)break;o=m}if(p){for(let t of f)queueMicrotask((()=>{throw t}));throw p}}finally{t.__root=i,fm=null,delete t.currentTarget,of(u),lf(d)}}}function gm(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","\x3c!----\x3e"),e.content}function vm(t,e){var i=af;null===i.nodes_start&&(i.nodes_start=t,i.nodes_end=e)}function ym(t,e){var i,n=!!(1&e),s=!!(2&e),r=!t.startsWith("<!>");return()=>{void 0===i&&(i=gm(r?t:"<!>"+t),n||(i=op(i)));var e=s||ip?document.importNode(i,!0):i.cloneNode(!0);n?vm(op(e),e.lastChild):vm(e,e);return e}}function _m(t,e,i="svg"){var n,s=`<${i}>${!t.startsWith("<!>")?t:"<!>"+t}</${i}>`;return()=>{if(!n){var t=gm(s);n=op(op(t))}var e=n.cloneNode(!0);return vm(e,e),e}}function bm(t,e){return _m(t,0,"svg")}function wm(t=""){var e=rp(t+"");return vm(e,e),e}function xm(){var t=document.createDocumentFragment(),e=document.createComment(""),i=rp();return t.append(e,i),vm(e,i),t}function Sm(t,e){null!==t&&t.before(e)}function Tm(t,e){var i=null==e?"":"object"==typeof e?e+"":e;i!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=i,t.nodeValue=i+"")}function Cm(t,e){return function(t,{target:e,anchor:i,props:n={},events:s,context:r,intro:o=!0}){!function(){if(void 0===ep){ep=window,ip=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;np=ad(e,"firstChild").get,sp=ad(e,"nextSibling").get,dd(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),dd(i)&&(i.__t=void 0)}}();var a=new Set,l=t=>{for(var i=0;i<t.length;i++){var n=t[i];if(!a.has(n)){a.add(n);var s=om(n);e.addEventListener(n,mm,{passive:s});var r=Mm.get(n);void 0===r?(document.addEventListener(n,mm,{passive:s}),Mm.set(n,1)):Mm.set(n,r+1)}}};l(rd(lm)),cm.add(l);var c=void 0,h=function(t){zp.ensure();const e=Lf(yd,t,!0);return(t={})=>new Promise((i=>{t.outro?Yf(e,(()=>{Uf(e),i(void 0)})):(Uf(e),i(void 0))}))}((()=>{var o=i??e.appendChild(rp());return Kf((()=>{r&&(Yd({}),jd.c=r);s&&(n.$$events=s),c=t(o,n)||{},r&&Xd()})),()=>{var t;for(var n of a){e.removeEventListener(n,mm);var s=Mm.get(n);0==--s?(document.removeEventListener(n,mm),Mm.delete(n)):Mm.set(n,s)}cm.delete(l),o!==i&&(null==(t=o.parentNode)||t.removeChild(o))}}));return Im.set(c,h),c}(t,e)}const Mm=new Map;let Im=new WeakMap;function Em(t,e,i,n,s){var r,o,a,l=t,c=Zd(),h=jd,u=Wd,d=c?Up(void 0):qp(void 0,!1,!1),p=c?Up(void 0):qp(void 0,!1,!1),f=!1;function m(t,e){f=!0,e&&(lf(g),of(g),Ud(h));try{0===t&&i&&(r?Qf(r):r=Kf((()=>i(l)))),1===t&&n&&(o?Qf(o):o=Kf((()=>n(l,d)))),0!==t&&r&&Yf(r,(()=>r=null)),1!==t&&o&&Yf(o,(()=>o=null)),2!==t&&a&&Yf(a,(()=>a=null))}finally{e&&(Ud(null),of(null),lf(null),Vp())}}var g=Hf((()=>{if(u!==(u=e())){if("function"==typeof(null==(i=u)?void 0:i.then)){var t=u;f=!1,t.then((e=>{t===u&&(Xp(d,e),m(1,!0))}),(e=>{if(t===u)throw Xp(p,e),m(2,!0),p.v})),vp((()=>{f||m(0,!0)}))}else Xp(d,u),m(1,!1);var i;return()=>u=Wd}}))}function Am(t,e,i=!1){var n=t,s=null,r=null,o=Wd,a=!1;const l=(t,e=!0)=>{a=!0,u(e,t)};var c=null;function h(){null!==c&&(c.lastChild.remove(),n.before(c),c=null);var t=o?s:r,e=o?r:s;t&&Qf(t),e&&Yf(e,(()=>{o?r=null:s=null}))}const u=(t,e)=>{if(o!==(o=t)){var i=!1,a=n;i,o?s??(s=e&&Kf((()=>e(a)))):r??(r=e&&Kf((()=>e(a)))),h()}};Hf((()=>{a=!1,e(l),a||u(null,null)}),i?Id:0)}function Dm(t,e){return e}function km(t,e,i,n,s,r=null){var o=t,a={flags:e,items:new Map,first:null};!(4&e)||(o=t.appendChild(rp()));var l,c,h=null,u=!1,d=new Map,p=Sp((()=>{var t=i();return nd(t)?t:null==t?[]:rd(t)}));function f(){!function(t,e,i,n,s,r,o,a,l){var c,h,u,d,p,f,m,g,v,y,_=!!(8&o),b=!!(3&o),w=e.length,x=i.items,S=i.first,T=S,C=null,M=[],I=[];if(_)for(y=0;y<w;y+=1)g=a(m=e[y],y),void 0!==(v=x.get(g))&&(null==(c=v.a)||c.measure(),(f??(f=new Set)).add(v));for(y=0;y<w;y+=1)if(g=a(m=e[y],y),void 0!==(v=x.get(g))){if(b&&Pm(v,m,y,o),v.e.f&Td&&(Qf(v.e),_&&(null==(h=v.a)||h.unfix(),(f??(f=new Set)).delete(v))),v!==T){if(void 0!==p&&p.has(v)){if(M.length<I.length){var E,A=I[0];C=A.prev;var D=M[0],k=M[M.length-1];for(E=0;E<M.length;E+=1)Rm(M[E],A,s);for(E=0;E<I.length;E+=1)p.delete(I[E]);Lm(i,D.prev,k.next),Lm(i,C,D),Lm(i,k,A),T=A,C=k,y-=1,M=[],I=[]}else p.delete(v),Rm(v,T,s),Lm(i,v.prev,v.next),Lm(i,v,null===C?i.first:C.next),Lm(i,C,v),C=v;continue}for(M=[],I=[];null!==T&&T.k!==g;)T.e.f&Td||(p??(p=new Set)).add(T),I.push(T),T=T.next;if(null===T)continue;v=T}M.push(v),C=v,T=v.next}else{var P=n.get(g);if(void 0!==P){n.delete(g),x.set(g,P);var O=C?C.next:T;Lm(i,C,P),Lm(i,P,O),Rm(P,O,s),C=P}else{C=Om(T?T.e.nodes_start:s,i,C,null===C?i.first:C.next,m,g,y,r,o,l)}x.set(g,C),M=[],I=[],T=C.next}if(null!==T||void 0!==p){for(var R=void 0===p?[]:rd(p);null!==T;)T.e.f&Td||R.push(T),T=T.next;var L=R.length;if(L>0){var N=4&o&&0===w?s:null;if(_){for(y=0;y<L;y+=1)null==(u=R[y].a)||u.measure();for(y=0;y<L;y+=1)null==(d=R[y].a)||d.fix()}!function(t,e,i){for(var n=t.items,s=[],r=e.length,o=0;o<r;o++)Zf(e[o].e,s,!0);var a=r>0&&0===s.length&&null!==i;if(a){var l=i.parentNode;l.textContent="",l.append(i),n.clear(),Lm(t,e[0].prev,e[r-1].next)}Xf(s,(()=>{for(var i=0;i<r;i++){var s=e[i];a||(n.delete(s.k),Lm(t,s.prev,s.next)),Uf(s.e,!a)}}))}(i,R,N)}}_&&vp((()=>{var t;if(void 0!==f)for(v of f)null==(t=v.a)||t.apply()}));for(var F of(t.first=i.first&&i.first.e,t.last=C&&C.e,n.values()))Uf(F.e);n.clear()}(c,l,a,d,o,s,e,n,i),null!==r&&(0===l.length?h?Qf(h):h=Kf((()=>r(o))):null!==h&&Yf(h,(()=>{h=null})))}Hf((()=>{c??(c=af);var t=(l=If(p)).length;u&&0===t||(u=0===t,f(),If(p))}))}function Pm(t,e,i,n){1&n&&Xp(t.v,e),2&n?Xp(t.i,i):t.i=i}function Om(t,e,i,n,s,r,o,a,l,c,h){var u=!!(1&l)?!(16&l)?qp(s,!1,!1):Up(s):s,d=2&l?Up(o):o,p={i:d,v:u,k:r,a:null,e:null,prev:i,next:n};try{if(null===t)document.createDocumentFragment().append(t=rp());return p.e=Kf((()=>a(t,u,d,c)),false),p.e.prev=i&&i.e,p.e.next=n&&n.e,null===i?h||(e.first=p):(i.next=p,i.e.next=p.e),null!==n&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Rm(t,e,i){for(var n=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,r=t.e.nodes_start;null!==r&&r!==n;){var o=ap(r);s.before(r),r=o}}function Lm(t,e,i){null===e?t.first=i:(e.next=i,e.e.next=i&&i.e),null!==i&&(i.prev=e,i.e.prev=e&&e.e)}function Nm(t,e,i=!1,n=!1,s=!1){var r=t,o="";$f((()=>{var t=af;if(o!==(o=e()??"")&&(null!==t.nodes_start&&(Gf(t.nodes_start,t.nodes_end),t.nodes_start=t.nodes_end=null),""!==o)){var s=o+"";i?s=`<svg>${s}</svg>`:n&&(s=`<math>${s}</math>`);var a=gm(s);if((i||n)&&(a=op(a)),vm(op(a),a.lastChild),i||n)for(;op(a);)r.before(op(a));else r.before(a)}}))}function Fm(t,e,...i){var n,s=t,r=fd;Hf((()=>{r!==(r=e())&&(n&&(Uf(n),n=null),n=Kf((()=>r(s,...i))))}),Id)}function Bm(t,e,i){var n,s,r=t,o=null,a=null;function l(){s&&(Yf(s),s=null),o&&(o.lastChild.remove(),r.before(o),o=null),s=a,a=null}Hf((()=>{if(n!==(n=e())){var t=!1;if(n){var s=r;t,a=Kf((()=>i(s,n)))}l()}}),Id)}function zm(t,e,i,n,s,r){var o,a,l,c=null,h=t;Hf((()=>{const t=e()||null;var i="svg"===t?"http://www.w3.org/2000/svg":null;t!==o&&(l&&(null===t?Yf(l,(()=>{l=null,a=null})):t===a?Qf(l):Uf(l)),t&&t!==a&&(l=Kf((()=>{if(vm(c=i?document.createElementNS(i,t):document.createElement(t),c),n){var e=c.appendChild(rp());n(c,e)}af.nodes_end=c,h.before(c)}))),(o=t)&&(a=o))}),Id)}function Vm(t,e){zf((()=>{var i=t.getRootNode(),n=i.host?i:i.head??i.ownerDocument.head;if(!n.querySelector("#"+e.hash)){const t=document.createElement("style");t.id=e.hash,t.textContent=e.code,n.appendChild(t)}}))}function $m(t,e,i){zf((()=>{var n=Af((()=>e(t,null==i?void 0:i())||{}));if(i&&(null==n?void 0:n.update)){var s=!1,r={};Vf((()=>{var t=i();Pf(t),s&&zd(r,t)&&(r=t,n.update(t))})),s=!0}if(null==n?void 0:n.destroy)return()=>n.destroy()}))}function Hm(t,e){var i,n=void 0;Hf((()=>{n!==(n=e())&&(i&&(Uf(i),i=null),n&&(i=Kf((()=>{zf((()=>n(t)))}))))}))}function Km(t){var e,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=Km(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}function Wm(){for(var t,e,i=0,n="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=Km(t))&&(n&&(n+=" "),n+=e);return n}function jm(t){return"object"==typeof t?Wm(t):t??""}const Um=[..." \t\n\r\f \v\ufeff"];function Gm(t,e=!1){var i=e?" !important;":";",n="";for(var s in t){var r=t[s];null!=r&&""!==r&&(n+=" "+s+": "+r+i)}return n}function qm(t){return"-"!==t[0]||"-"!==t[1]?t.toLowerCase():t}function Ym(t,e,i,n,s,r){var o=t.__className;if(o!==i||void 0===o){var a=function(t,e,i){var n=null==t?"":""+t;if(e&&(n=n?n+" "+e:e),i)for(var s in i)if(i[s])n=n?n+" "+s:s;else if(n.length)for(var r=s.length,o=0;(o=n.indexOf(s,o))>=0;){var a=o+r;0!==o&&!Um.includes(n[o-1])||a!==n.length&&!Um.includes(n[a])?o=a:n=(0===o?"":n.substring(0,o))+n.substring(a+1)}return""===n?null:n}(i,n,r);null==a?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a),t.__className=i}else if(r&&s!==r)for(var l in r){var c=!!r[l];null!=s&&c===!!s[l]||t.classList.toggle(l,c)}return r}function Xm(t,e={},i,n){for(var s in i){var r=i[s];e[s]!==r&&(null==i[s]?t.style.removeProperty(s):t.style.setProperty(s,r,n))}}function Zm(t,e,i,n){if(t.__style!==e){var s=function(t,e){if(e){var i,n,s="";if(Array.isArray(e)?(i=e[0],n=e[1]):i=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var r=!1,o=0,a=!1,l=[];i&&l.push(...Object.keys(i).map(qm)),n&&l.push(...Object.keys(n).map(qm));var c=0,h=-1;const e=t.length;for(var u=0;u<e;u++){var d=t[u];if(a?"/"===d&&"*"===t[u-1]&&(a=!1):r?r===d&&(r=!1):"/"===d&&"*"===t[u+1]?a=!0:'"'===d||"'"===d?r=d:"("===d?o++:")"===d&&o--,!a&&!1===r&&0===o)if(":"===d&&-1===h)h=u;else if(";"===d||u===e-1){if(-1!==h){var p=qm(t.substring(c,h).trim());l.includes(p)||(";"!==d&&u++,s+=" "+t.substring(c,u).trim()+";")}c=u+1,h=-1}}}return i&&(s+=Gm(i)),n&&(s+=Gm(n,!0)),""===(s=s.trim())?null:s}return null==t?null:String(t)}(e,n);null==s?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}else n&&(Array.isArray(n)?(Xm(t,null==i?void 0:i[0],n[0]),Xm(t,null==i?void 0:i[1],n[1],"important")):Xm(t,i,n));return n}function Qm(t,e,i=!1){if(t.multiple){if(null==e)return;if(!nd(e))return void console.warn("https://svelte.dev/e/select_multiple_invalid_value");for(var n of t.options)n.selected=e.includes(Jm(n))}else{for(n of t.options){var s=Jm(n);if(r=s,o=e,Object.is(tp(r),tp(o)))return void(n.selected=!0)}var r,o;i&&void 0===e||(t.selectedIndex=-1)}}function Jm(t){return"__value"in t?t.__value:t.value}const tg=Symbol("class"),eg=Symbol("style"),ig=Symbol("is custom element"),ng=Symbol("is html");function sg(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function rg(t,e,i,n){var s=ag(t);s[e]!==(s[e]=i)&&("loading"===e&&(t[Nd]=i),null==i?t.removeAttribute(e):"string"!=typeof i&&cg(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function og(t,e,i=[],n=[],s,r=!1){Ip(i,n,(i=>{var n=void 0,o={},a="SELECT"===t.nodeName,l=!1;if(Hf((()=>{var c=e(...i.map(If)),h=function(t,e,i,n){var s=ag(t),r=s[ig],o=!s[ng],a=e||{},l="OPTION"===t.tagName;for(var c in e)c in i||(i[c]=null);i.class?i.class=jm(i.class):(n||i[tg])&&(i.class=null),i[eg]&&(i.style??(i.style=null));var h=cg(t);for(const v in i){let c=i[v];if(l&&"value"===v&&null==c)t.value=t.__value="",a[v]=c;else if("class"!==v)if("style"!==v){var u=a[v];if(c!==u||void 0===c&&t.hasAttribute(v)){a[v]=c;var d=v[0]+v[1];if("$$"!==d)if("on"===d){const e={},i="$$"+v;let n=v.slice(2);var p=im(n);if(tm(n)&&(n=n.slice(0,-7),e.capture=!0),!p&&u){if(null!=c)continue;t.removeEventListener(n,a[i],e),a[i]=null}if(null!=c)if(Array.isArray(t.__cleanup)||(t.__cleanup=[]),p){t[`__${n}`]=c,pm([n]);const e=()=>{t[`__${n}`]=void 0,Reflect.deleteProperty(a,v)};t.__cleanup.push(e)}else{let s=function(t){a[v].call(this,t)};a[i]=hm(n,t,s,e);const r=()=>{t.removeEventListener(n,s,e),Reflect.deleteProperty(a,i),Reflect.deleteProperty(a,v)};t.__cleanup.push(r)}else p&&(t[`__${n}`]=void 0)}else if("style"===v)rg(t,v,c);else if("autofocus"===v)am(t,Boolean(c));else if(r||"__value"!==v&&("value"!==v||null==c))if("selected"===v&&l)sg(t,c);else{var f=v;o||(f=sm(f));var m="defaultValue"===f||"defaultChecked"===f;if(null!=c||r||m)m||h.includes(f)&&(r||"string"!=typeof c)?(t[f]=c,f in s&&(s[f]=Wd)):"function"!=typeof c&&rg(t,f,c);else if(s[v]=null,"value"===f||"checked"===f){let i=t;const n=void 0===e;if("value"===f){let t=i.defaultValue;i.removeAttribute(f),i.defaultValue=t,i.value=i.__value=n?t:null}else{let t=i.defaultChecked;i.removeAttribute(f),i.defaultChecked=t,i.checked=!!n&&t}}else t.removeAttribute(v)}else t.value=t.__value=c}}else Zm(t,c,null==e?void 0:e[eg],i[eg]),a[v]=c,a[eg]=i[eg];else{var g="http://www.w3.org/1999/xhtml"===t.namespaceURI;Ym(t,g,c,n,null==e?void 0:e[tg],i[tg]),a[v]=c,a[tg]=i[tg]}}return a}(t,n,c,s,r);l&&a&&"value"in c&&Qm(t,c.value);for(let t of Object.getOwnPropertySymbols(o))c[t]||Uf(o[t]);for(let e of Object.getOwnPropertySymbols(c)){var u=c[e];"@attach"!==e.description||n&&u===n[e]||(o[e]&&Uf(o[e]),o[e]=Kf((()=>Hm(t,(()=>u))))),h[e]=u}n=h})),a){var c=t;zf((()=>{Qm(c,n.value,!0),function(t){var e=new MutationObserver((()=>{Qm(t,t.__value)}));e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Nf((()=>{e.disconnect()}))}(c)}))}l=!0}))}function ag(t){return t.__attributes??(t.__attributes={[ig]:t.nodeName.includes("-"),[ng]:"http://www.w3.org/1999/xhtml"===t.namespaceURI})}var lg=new Map;function cg(t){var e,i=lg.get(t.nodeName);if(i)return i;lg.set(t.nodeName,i=[]);for(var n=t,s=Element.prototype;s!==n;){for(var r in e=ld(n))e[r].set&&i.push(r);n=ud(n)}return i}function hg(t,e){return t===e||(null==t?void 0:t[Rd])===e}function ug(t={},e,i,n){return zf((()=>{var n,s;return Vf((()=>{n=s,s=[],Af((()=>{t!==i(...s)&&(e(t,...s),n&&hg(i(...n),t)&&e(null,...n))}))})),()=>{vp((()=>{s&&hg(i(...s),t)&&e(null,...s)}))}})),t}function dg(t=!1){const e=jd,i=e.l.u;if(!i)return;let n=()=>Pf(e.s);if(t){let t=0,i={};const s=bp((()=>{let n=!1;const s=e.s;for(const t in s)s[t]!==i[t]&&(i[t]=s[t],n=!0);return n&&t++,t}));n=()=>If(s)}var s;i.b.length&&(s=()=>{pg(e,n),gd(i.b)},Rf(),Lf(1048584,s,!0)),Ff((()=>{const t=Af((()=>i.m.map(md)));return()=>{for(const e of t)"function"==typeof e&&e()}})),i.a.length&&Ff((()=>{pg(e,n),gd(i.a)}))}function pg(t,e){if(t.l.s)for(const i of t.l.s)If(i);e()}let fg=!1,mg=Symbol();function gg(t,e,i){const n=i[e]??(i[e]={store:null,source:qp(void 0),unsubscribe:fd});if(n.store!==t&&!(mg in i))if(n.unsubscribe(),n.store=t??null,null==t)n.source.v=void 0,n.unsubscribe=fd;else{var s=!0;n.unsubscribe=Mg(t,(t=>{s?n.source.v=t:Yp(n.source,t)})),s=!1}return t&&mg in i?Dg(t):If(n.source)}function vg(t,e){return t.set(e),e}function yg(){const t={};return[t,function(){Nf((()=>{for(var e in t){t[e].unsubscribe()}od(t,mg,{enumerable:!1,value:!0})}))}]}const _g={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set:(t,e)=>!1,getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function bg(t,e,i){return new Proxy({props:t,exclude:e},_g)}const wg={get(t,e){let i=t.props.length;for(;i--;){let n=t.props[i];if(pd(n)&&(n=n()),"object"==typeof n&&null!==n&&e in n)return n[e]}},set(t,e,i){let n=t.props.length;for(;n--;){let s=t.props[n];pd(s)&&(s=s());const r=ad(s,e);if(r&&r.set)return r.set(i),!0}return!1},getOwnPropertyDescriptor(t,e){let i=t.props.length;for(;i--;){let n=t.props[i];if(pd(n)&&(n=n()),"object"==typeof n&&null!==n&&e in n){const t=ad(n,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){if(e===Rd||e===Ld)return!1;for(let i of t.props)if(pd(i)&&(i=i()),null!=i&&e in i)return!0;return!1},ownKeys(t){const e=[];for(let i of t.props)if(pd(i)&&(i=i()),i){for(const t in i)e.includes(t)||e.push(t);for(const t of Object.getOwnPropertySymbols(i))e.includes(t)||e.push(t)}return e}};function xg(...t){return new Proxy({props:t},wg)}function Sg(t,e,i,n){var s,r,o,a=!Kd||!!(2&i),l=!!(8&i),c=!!(16&i),h=n,u=!0,d=()=>(u&&(u=!1,h=c?Af(n):n),h);if(l){var p=Rd in t||Ld in t;r=(null==(s=ad(t,e))?void 0:s.set)??(p&&e in t?i=>t[e]=i:void 0)}var f,m=!1;if(l?[o,m]=function(t){var e=fg;try{return fg=!1,[t(),fg]}finally{fg=e}}((()=>t[e])):o=t[e],void 0===o&&void 0!==n&&(o=d(),r&&(a&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),r(o))),f=a?()=>{var i=t[e];return void 0===i?d():(u=!0,i)}:()=>{var i=t[e];return void 0!==i&&(h=void 0),void 0===i?h:i},a&&!(4&i))return f;if(r){var g=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!g&&!m||r(e?f():t),t):f()}}var v=!1,y=(1&i?bp:Sp)((()=>(v=!1,f())));l&&If(y);var _=af;return function(t,e){if(arguments.length>0){const i=e?If(y):a&&l?Jd(t):t;return Yp(y,i),v=!0,void 0!==h&&(h=i),t}return ef&&v||_.f&Cd?y.v:If(y)}}function Tg(t){var e,i;null===jd&&Hd(),Kd&&null!==jd.l?(e=jd,i=e.l,i.u??(i.u={a:[],b:[],m:[]})).m.push(t):Ff((()=>{const e=Af(t);if("function"==typeof e)return e}))}function Cg(t){null===jd&&Hd(),Tg((()=>()=>Af(t)))}function Mg(t,e,i){if(null==t)return e(void 0),i&&i(void 0),fd;const n=Af((()=>t.subscribe(e,i)));return n.unsubscribe?()=>n.unsubscribe():n}const Ig=[];function Eg(t,e=fd){let i=null;const n=new Set;function s(e){if(zd(t,e)&&(t=e,i)){const e=!Ig.length;for(const i of n)i[1](),Ig.push(i,t);if(e){for(let t=0;t<Ig.length;t+=2)Ig[t][0](Ig[t+1]);Ig.length=0}}}function r(e){s(e(t))}return{set:s,update:r,subscribe:function(o,a=fd){const l=[o,a];return n.add(l),1===n.size&&(i=e(s,r)||fd),o(t),()=>{n.delete(l),0===n.size&&i&&(i(),i=null)}}}}function Ag(t,e,i){const n=!Array.isArray(t),s=n?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return o=(t,i)=>{let o=!1;const a=[];let l=0,c=fd;const h=()=>{if(l)return;c();const s=e(n?a[0]:a,t,i);r?t(s):c="function"==typeof s?s:fd},u=s.map(((t,e)=>Mg(t,(t=>{a[e]=t,l&=~(1<<e),o&&h()}),(()=>{l|=1<<e}))));return o=!0,h(),function(){gd(u),c(),o=!1}},{subscribe:Eg(i,o).subscribe};var o}function Dg(t){let e;return Mg(t,(t=>e=t))(),e}const kg=Wo("configurationService");var Pg=(t=>(t[t.Normal=0]="Normal",t[t.StrongMagnet=1]="StrongMagnet",t[t.WeakMagnet=2]="WeakMagnet",t))(Pg||{});var Og=(t=>(t[t.unset=0]="unset",t[t.cross=0]="cross",t[t.dot=1]="dot",t[t.pointer=2]="pointer",t[t.arrow=3]="arrow",t[t.grabbing=4]="grabbing",t[t.ew=5]="ew",t[t.ns=6]="ns",t[t.nesw=7]="nesw",t[t.nwse=8]="nwse",t[t.text=9]="text",t[t.zoomIn=10]="zoomIn",t[t.eraser=32]="eraser",t[t.demonstration=64]="demonstration",t))(Og||{});function Rg(t){return!!(64&t)}function Lg(t,e){if(e===Og.demonstration)return Rg(t);return(-65&t)===e}const Ng=Wo("datafeedService"),Fg=Object.freeze((function(t,e){const i=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(i)}}})),Bg=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ol}),zg=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Fg});class Vg{constructor(){x(this,"_isCancelled",!1),x(this,"_emitter",null)}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Fg:(this._emitter||(this._emitter=new dl),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class $g{constructor(t){x(this,"_token"),x(this,"_parentListener"),this._parentListener=t&&t.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Vg),this._token}cancel(){this._token?this._token instanceof Vg&&this._token.cancel():this._token=zg}dispose(t=!1){var e;t&&this.cancel(),null==(e=this._parentListener)||e.dispose(),this._token?this._token instanceof Vg&&this._token.dispose():this._token=Bg}}var Hg=function(t,e){return(Hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function Kg(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Hg(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Wg=function(){return Wg=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Wg.apply(this,arguments)};function jg(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ug(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return o}function Gg(t,e,i){if(i||2===arguments.length)for(var n,s=0,r=e.length;s<r;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function qg(t){return"function"==typeof t}"function"==typeof SuppressedError&&SuppressedError;var Yg,Xg=((Yg=function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}((function(t){Error.call(t),t.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),Yg.prototype.constructor=Yg,Yg);function Zg(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}var Qg=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,i,n,s;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var o=jg(r),a=o.next();!a.done;a=o.next()){a.value.remove(this)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else r.remove(this);var l=this.initialTeardown;if(qg(l))try{l()}catch(oR){s=oR instanceof Xg?oR.errors:[oR]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var h=jg(c),u=h.next();!u.done;u=h.next()){var d=u.value;try{tv(d)}catch(f){s=null!=s?s:[],f instanceof Xg?s=Gg(Gg([],Ug(s)),Ug(f.errors)):s.push(f)}}}catch(m){i={error:m}}finally{try{u&&!u.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}}if(s)throw new Xg(s)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)tv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Zg(e,t)},t.prototype.remove=function(e){var i=this._finalizers;i&&Zg(i,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function Jg(t){return t instanceof Qg||t&&"closed"in t&&qg(t.remove)&&qg(t.add)&&qg(t.unsubscribe)}function tv(t){qg(t)?t():t.unsubscribe()}Qg.EMPTY;var ev=void 0,iv=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return setTimeout.apply(void 0,Gg([t,e],Ug(i)))};function nv(){}var sv=function(t){function e(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,Jg(e)&&e.add(i)):i.destination=lv,i}return Kg(e,t),e.create=function(t,e,i){return new ov(t,e,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Qg),rv=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){av(i)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){av(i)}else av(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){av(e)}},t}(),ov=function(t){function e(e,i,n){var s,r=t.call(this)||this;return s=qg(e)||!e?{next:null!=e?e:void 0,error:null!=i?i:void 0,complete:null!=n?n:void 0}:e,r.destination=new rv(s),r}return Kg(e,t),e}(sv);function av(t){var e;e=t,iv((function(){throw e}))}var lv={closed:!0,next:nv,error:function(t){throw t},complete:nv},cv="function"==typeof Symbol&&Symbol.observable||"@@observable";function hv(t){return t}var uv=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n,s=this,r=(n=t)&&n instanceof sv||function(t){return t&&qg(t.next)&&qg(t.error)&&qg(t.complete)}(n)&&Jg(n)?t:new ov(t,e,i);return function(){var t=s,e=t.operator,i=t.source;r.add(e?e.call(r,i):i?s._subscribe(r):s._trySubscribe(r))}(),r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=dv(e))((function(e,n){var s=new ov({next:function(e){try{t(e)}catch(i){n(i),s.unsubscribe()}},error:n,complete:e});i.subscribe(s)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[cv]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(0===(t=e).length?hv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=dv(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function dv(t){var e;return null!==(e=null!=t?t:ev)&&void 0!==e?e:Promise}function pv(t){return function(e){if(function(t){return qg(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(i){this.error(i)}}));throw new TypeError("Unable to lift unknown Observable type")}}function fv(t,e,i,n,s){return new mv(t,e,i,n,s)}var mv=function(t){function e(e,i,n,s,r,o){var a=t.call(this,e)||this;return a.onFinalize=r,a.shouldUnsubscribe=o,a._next=i?function(t){try{i(t)}catch(n){e.error(n)}}:t.prototype._next,a._error=s?function(t){try{s(t)}catch(i){e.error(i)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=n?function(){try{n()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return Kg(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(sv),gv=function(){return Date.now()},vv=function(t){function e(e,i){return t.call(this)||this}return Kg(e,t),e.prototype.schedule=function(t,e){return this},e}(Qg),yv=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return setInterval.apply(void 0,Gg([t,e],Ug(i)))},_v=function(t){return clearInterval(t)},bv=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return Kg(e,t),e.prototype.schedule=function(t,e){var i;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),yv(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&_v(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i,n=!1;try{this.work(t)}catch(oR){n=!0,i=oR||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,i=this.scheduler,n=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Zg(n,this),null!=e&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(vv),wv=function(){function t(e,i){void 0===i&&(i=t.now),this.schedulerActionCtor=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},t.now=gv,t}(),xv=new(function(t){function e(e,i){void 0===i&&(i=wv.now);var n=t.call(this,e,i)||this;return n.actions=[],n._active=!1,n}return Kg(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(wv))(bv);function Sv(t){return(e=(i=t)[i.length-1])&&qg(e.schedule)?t.pop():void 0;var e,i}function Tv(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var r=e.schedule((function(){i(),s?t.add(this.schedule(null,n)):this.unsubscribe()}),n);if(t.add(r),!s)return r}const Cv={noData:Symbol.for("errors.noData")};var Mv=Object.defineProperty,Iv=Object.getOwnPropertyDescriptor;class Ev{constructor(t,e,i){x(this,"_symbolInfo",Object.create(null)),x(this,"subscription",null),x(this,"loadMores",new Set),x(this,"listenerGuid",de()),x(this,"_cancellationTokenSource",new $g),x(this,"cancellationToken",this._cancellationTokenSource.token),x(this,"_status",0),x(this,"_historyPromise",new xt),x(this,"historyPromise",this._historyPromise.p),this.symbol=t,this.resolution=e,i&&(this.symbolInfo=i)}get status(){return this._status}set status(t){Pv(t)&&this._historyPromise.complete(!0),-1===t&&this._historyPromise.complete(!1),this._status=t}get symbolInfo(){return this._symbolInfo}set symbolInfo(t){this._symbolInfo=t,this.status|=1}add(t){this.loadMores.add(t)}remove(t){this.loadMores.delete(t)}dispose(){var t;this._historyPromise.complete(!1),this._cancellationTokenSource.dispose(!0),null==(t=this.subscription)||t.unsubscribe(),this.loadMores.values().forEach((t=>t.dispose(!0)))}}class Av extends he{constructor(t,e){super(),x(this,"_session",null),this.datafeed=t,this.config=e,this._register(le((()=>this._cancelCurrentSession())))}get session(){return this._session}loadAll(t,e,i,n,s,r,o){this._cancelCurrentSession();const a=new Ev(t,i),{cancellationToken:l,historyPromise:c}=a;return this._session=a,this.datafeed.resolveSymbol(t,(t=>{l.isCancellationRequested||(n(t),ie(0===a.status),ee(this._session).symbolInfo=t,this.loadData(a,e,i,s,r,o))}),(t=>{l.isCancellationRequested||o(t)}),l),c}reloadData(t,e,i,n,s,r){const o=ee(this._session).symbolInfo;this._cancelCurrentSession();const a=new Ev(t,i);return a.symbolInfo=o,this._session=a,this.loadData(a,e,i,n,s,r),a.historyPromise}loadData(t,e,i,n,s,r){const{cancellationToken:o}=t;if(o.isCancellationRequested)return;const{listenerGuid:a,symbolInfo:l}=t;let c=!1,h=null;const u=e=>{o.isCancellationRequested||(t.status=-1,t.dispose(),r(e))};this.datafeed.getBars(l,i,{from:0,to:(new Date).getTime()/1e3,countBack:e,firstDataRequest:!0},((e,i)=>{if(!o.isCancellationRequested)if(ie(kv(t.status)),e.length){if(t.status|=2,c=!0,null==h?void 0:h.length){for(h.sort(((t,e)=>t.time-e.time));h.length;){const t=Lu(e),i=h.shift();t&&t.time===i.time?Object.assign(t,i):e.push(i)}h=null}n(id(e,(t=>t.time)),i)}else u(Cv.noData)}),u,o);const d=new uv((t=>(this.datafeed.subscribeBars(l,i,(e=>{if(!o.isCancellationRequested)return c?t.next(e):(h||(h=[]),h.push(e)),()=>{this.datafeed.unsubscribeBars(a)}}),a,(()=>{})),()=>{this.datafeed.unsubscribeBars(a)})));if(this.config.bufferTime>0){const e=d.pipe(function(t){for(var e,i,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=null!==(e=Sv(n))&&void 0!==e?e:xv,o=null!==(i=n[0])&&void 0!==i?i:null,a=n[1]||1/0;return pv((function(e,i){var n=[],s=!1,l=function(t){var e=t.buffer;t.subs.unsubscribe(),Zg(n,t),i.next(e),s&&c()},c=function(){if(n){var e=new Qg;i.add(e);var s={buffer:[],subs:e};n.push(s),Tv(e,r,(function(){return l(s)}),t)}};null!==o&&o>=0?Tv(i,r,c,o,!0):s=!0,c();var h=fv(i,(function(t){var e,i,s=n.slice();try{for(var r=jg(s),o=r.next();!o.done;o=r.next()){var c=o.value,h=c.buffer;h.push(t),a<=h.length&&l(c)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}),(function(){for(;null==n?void 0:n.length;)i.next(n.shift().buffer);null==h||h.unsubscribe(),i.complete(),i.unsubscribe()}),void 0,(function(){return n=null}));e.subscribe(h)}))}(this.config.bufferTime),(p=t=>t.length>0,pv((function(t,e){var i=0;t.subscribe(fv(e,(function(t){return p.call(f,t,i++)&&e.next(t)})))}))));t.subscription=e.subscribe((e=>{Vu(zu(e,(t=>t.time))).map((t=>t.reduce(((t,e)=>(t.high=Math.max(t.high,e.close),t.low=Math.min(t.low,e.close),t.close=e.close,t))))).sort(((t,e)=>t.time-e.time)).forEach((e=>{ie(Pv(t.status)||kv(t.status)||!!(4&t.status)),t.status|=4,s(e)}))}))}else t.subscription=d.subscribe((t=>{s(t)}));var p,f}loadMore(t,e,i,n,s){const r=this._session;if(!r)return;if(r.symbol!==t||r.resolution!==e)return;const o=new $g,a=o.token;r.add(o),this.datafeed.getBars(r.symbolInfo,r.resolution,{from:0,to:i.to-1,countBack:i.countBack,firstDataRequest:!0},((t,e)=>{a.isCancellationRequested||(n(t,e),r.remove(o))}),(t=>{a.isCancellationRequested||(null==s||s(t),r.remove(o))}),a)}_cancelCurrentSession(){this._session&&(this._session.dispose(),this._session=null)}}((t,e,i)=>{for(var n,s=Iv(e,i),r=t.length-1;r>=0;r--)(n=t[r])&&(s=n(e,i,s)||s);s&&Mv(e,i,s)})([sl(500,{maxWait:500,trailing:!0})],Av.prototype,"loadMore");var Dv=(t=>(t[t.error=-1]="error",t[t.idle=0]="idle",t[t.symbolInfoResolved=1]="symbolInfoResolved",t[t.historyResolved=2]="historyResolved",t[t.realtimeConnected=4]="realtimeConnected",t))(Dv||{});function kv(t){return!!(1&t)}function Pv(t){return!!(2&t)}var Ov=Object.getOwnPropertyDescriptor,Rv=(t=>(t[t.idle=0]="idle",t[t.startLoading=1]="startLoading",t[t.symbolInfoResolved=2]="symbolInfoResolved",t[t.dataLoaded=3]="dataLoaded",t[t.error=4]="error",t))(Rv||{});class Lv extends he{constructor(t,e,i){super(),x(this,"_dataLoader"),x(this,"_onDataChanged",new dl),x(this,"onDataChanged",this._onDataChanged.event),this._ctx=t,this._chart=e,this._register(this._dataLoader=new Av(i,{bufferTime:-1}))}status(){var t;return(null==(t=this._dataLoader.session)?void 0:t.status)??Dv.idle}loadAll(t,e){return this.symbol()?this._dataLoader.loadAll(this.symbol(),this._ctx.countBack(),this.resolution(),(e=>{null==t||t(e)}),(t=>{this.setBars(t)}),(t=>{this.setBar(t)}),(t=>{null==e||e(t)})):Promise.resolve(!1)}resetData(t,e){return this.symbol()?this._dataLoader.session?kv(this._dataLoader.session.status)?(this.clearBars(),this._dataLoader.reloadData(this.symbol(),this._ctx.countBack(),this.resolution(),(t=>{this.setBars(t)}),(t=>{this.setBar(t)}),(t=>{null==e||e(t)}))):this._dataLoader.session.historyPromise:this.loadAll(t,e):Promise.resolve(!1)}_registerListeners(){const t=t=>{if(t&&t.from<1){const e=this.data();if(!this.data().length)return;const i=e[0];this._dataLoader.loadMore(this.symbol(),this.resolution(),{to:i.time,countBack:Math.ceil(Math.abs(t.from)+100)},(t=>{const e=t.concat(this.data());e.sort(((t,e)=>t.time-e.time)),this.setBars(id(e,(t=>t.time)))}))}};this._chart.timeScale().subscribeVisibleLogicalRangeChange(t),this._register(le((()=>{this._chart.timeScale().unsubscribeVisibleLogicalRangeChange(t)})))}}let Nv=class extends Lv{constructor(t,e,i,n,s){super(i,n,s),x(this,"_data",[]),this._symbol=t,this._resolution=e}data(){return this._data}symbol(){return this._symbol}resolution(){return this._resolution}setResolution(t){return this._resolution=t,this.loadAll()}clearBars(){this._data.length=0,this._onDataChanged.fire("full")}setBars(t){this._data=Bv(t,"close"),this._onDataChanged.fire("full")}setBar(t){const e=function(t,e){const i=zv(t)?t.customValues:t;return{time:t.time,value:i[e],customValues:{open:i.open,high:i.high,low:i.low,close:i.close}}}(t,"close"),i=Lu(this._data);i&&i.time===e.time?this._data[this._data.length-1]=e:this._data.push(e),this._onDataChanged.fire("update")}loadData(t){return this.loadAll(t)}};function Fv(t,e,i){let n=-1/0;return t.map((t=>{const s=zv(t)?t.customValues:t,r=s.close>=n?e:i;return n=s.close,{open:s.open,high:s.high,low:s.low,close:s.close,volume:s.volume,time:t.time,color:r,customValues:{open:s.open,high:s.high,low:s.low,close:s.close,volume:s.volume}}}))}function Bv(t,e){return t.map((t=>{const i=zv(t)?t.customValues:t;return{time:t.time,value:i[e],customValues:{open:i.open,high:i.high,low:i.low,close:i.close}}}))}function zv(t){return"customValues"in t}function Vv(t){const e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function $v(t,e,i){const n=Eg(i),s=Ag(t,e,i).subscribe((t=>{Wu(t,Dg(n))||n.set(t)}));return Cg((()=>s())),n}function Hv(t,e,i){let n=!1;const s=Ag(t,e).subscribe((()=>{n&&i(),n=!0}));return le((()=>s()))}Nv=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?Ov(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([((t,e)=>(i,n)=>e(i,n,t))(4,Ng)],Nv);const Kv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Wv(t){return(e={})=>{const i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const jv={date:Wv({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Wv({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Wv({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Uv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Gv(t){return(e,i)=>{let n;if("formatting"===((null==i?void 0:i.context)?String(i.context):"standalone")&&t.formattingValues){const e=t.defaultFormattingWidth||t.defaultWidth,s=(null==i?void 0:i.width)?String(i.width):e;n=t.formattingValues[s]||t.formattingValues[e]}else{const e=t.defaultWidth,s=(null==i?void 0:i.width)?String(i.width):t.defaultWidth;n=t.values[s]||t.values[e]}return n[t.argumentCallback?t.argumentCallback(e):e]}}const qv={ordinalNumber:(t,e)=>{const i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:Gv({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Gv({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:Gv({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Gv({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Gv({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Yv(t){return(e,i={})=>{const n=i.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],r=e.match(s);if(!r)return null;const o=r[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i;return}(a,(t=>t.test(o))):function(t,e){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i;return}(a,(t=>t.test(o)));let c;c=t.valueCallback?t.valueCallback(l):l,c=i.valueCallback?i.valueCallback(c):c;return{value:c,rest:e.slice(o.length)}}}const Xv={ordinalNumber:(Zv={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)},(t,e={})=>{const i=t.match(Zv.matchPattern);if(!i)return null;const n=i[0],s=t.match(Zv.parsePattern);if(!s)return null;let r=Zv.valueCallback?Zv.valueCallback(s[0]):s[0];return r=e.valueCallback?e.valueCallback(r):r,{value:r,rest:t.slice(n.length)}}),era:Yv({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Yv({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yv({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Yv({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Yv({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Zv;const Qv={code:"en-US",formatDistance:(t,e,i)=>{let n;const s=Kv[t];return n="string"==typeof s?s:1===e?s.one:s.other.replace("{{count}}",e.toString()),(null==i?void 0:i.addSuffix)?i.comparison&&i.comparison>0?"in "+n:n+" ago":n},formatLong:jv,formatRelative:(t,e,i,n)=>Uv[t],localize:qv,match:Xv,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Jv={};function ty(){return Jv}const ey=6048e5,iy=Symbol.for("constructDateFrom");function ny(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&iy in t?t[iy](e):t instanceof Date?new t.constructor(e):new Date(e)}function sy(t,e){return ny(e||t,t)}function ry(t){const e=sy(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}function oy(t,e){const i=sy(t,null==e?void 0:e.in);return i.setHours(0,0,0,0),i}function ay(t,e,i){const[n,s]=function(t,...e){const i=ny.bind(null,e.find((t=>"object"==typeof t)));return e.map(i)}(null==i||i.in,t,e),r=oy(n),o=oy(s),a=+r-ry(r),l=+o-ry(o);return Math.round((a-l)/864e5)}function ly(t,e){const i=sy(t,null==e?void 0:e.in),n=ay(i,function(t,e){const i=sy(t,null==e?void 0:e.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}(i));return n+1}function cy(t,e){var i,n,s,r;const o=ty(),a=(null==e?void 0:e.weekStartsOn)??(null==(n=null==(i=null==e?void 0:e.locale)?void 0:i.options)?void 0:n.weekStartsOn)??o.weekStartsOn??(null==(r=null==(s=o.locale)?void 0:s.options)?void 0:r.weekStartsOn)??0,l=sy(t,null==e?void 0:e.in),c=l.getDay(),h=(c<a?7:0)+c-a;return l.setDate(l.getDate()-h),l.setHours(0,0,0,0),l}function hy(t,e){return cy(t,{...e,weekStartsOn:1})}function uy(t,e){const i=sy(t,null==e?void 0:e.in),n=i.getFullYear(),s=ny(i,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=hy(s),o=ny(i,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=hy(o);return i.getTime()>=r.getTime()?n+1:i.getTime()>=a.getTime()?n:n-1}function dy(t,e){const i=sy(t,null==e?void 0:e.in),n=+hy(i)-+function(t,e){const i=uy(t,e),n=ny(t,0);return n.setFullYear(i,0,4),n.setHours(0,0,0,0),hy(n)}(i);return Math.round(n/ey)+1}function py(t,e){var i,n,s,r;const o=sy(t,null==e?void 0:e.in),a=o.getFullYear(),l=ty(),c=(null==e?void 0:e.firstWeekContainsDate)??(null==(n=null==(i=null==e?void 0:e.locale)?void 0:i.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(r=null==(s=l.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??1,h=ny((null==e?void 0:e.in)||t,0);h.setFullYear(a+1,0,c),h.setHours(0,0,0,0);const u=cy(h,e),d=ny((null==e?void 0:e.in)||t,0);d.setFullYear(a,0,c),d.setHours(0,0,0,0);const p=cy(d,e);return+o>=+u?a+1:+o>=+p?a:a-1}function fy(t,e){const i=sy(t,null==e?void 0:e.in),n=+cy(i,e)-+function(t,e){var i,n,s,r;const o=ty(),a=(null==e?void 0:e.firstWeekContainsDate)??(null==(n=null==(i=null==e?void 0:e.locale)?void 0:i.options)?void 0:n.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(r=null==(s=o.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??1,l=py(t,e),c=ny((null==e?void 0:e.in)||t,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),cy(c,e)}(i,e);return Math.round(n/ey)+1}function my(t,e){return(t<0?"-":"")+Math.abs(t).toString().padStart(e,"0")}const gy={y(t,e){const i=t.getFullYear(),n=i>0?i:1-i;return my("yy"===e?n%100:n,e.length)},M(t,e){const i=t.getMonth();return"M"===e?String(i+1):my(i+1,2)},d:(t,e)=>my(t.getDate(),e.length),a(t,e){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(t,e)=>my(t.getHours()%12||12,e.length),H:(t,e)=>my(t.getHours(),e.length),m:(t,e)=>my(t.getMinutes(),e.length),s:(t,e)=>my(t.getSeconds(),e.length),S(t,e){const i=e.length,n=t.getMilliseconds();return my(Math.trunc(n*Math.pow(10,i-3)),e.length)}},vy="midnight",yy="noon",_y="morning",by="afternoon",wy="evening",xy="night",Sy={G:function(t,e,i){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(t,e,i){if("yo"===e){const e=t.getFullYear(),n=e>0?e:1-e;return i.ordinalNumber(n,{unit:"year"})}return gy.y(t,e)},Y:function(t,e,i,n){const s=py(t,n),r=s>0?s:1-s;if("YY"===e){return my(r%100,2)}return"Yo"===e?i.ordinalNumber(r,{unit:"year"}):my(r,e.length)},R:function(t,e){return my(uy(t),e.length)},u:function(t,e){return my(t.getFullYear(),e.length)},Q:function(t,e,i){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return my(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,i){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return my(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,i){const n=t.getMonth();switch(e){case"M":case"MM":return gy.M(t,e);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,i){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return my(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,i,n){const s=fy(t,n);return"wo"===e?i.ordinalNumber(s,{unit:"week"}):my(s,e.length)},I:function(t,e,i){const n=dy(t);return"Io"===e?i.ordinalNumber(n,{unit:"week"}):my(n,e.length)},d:function(t,e,i){return"do"===e?i.ordinalNumber(t.getDate(),{unit:"date"}):gy.d(t,e)},D:function(t,e,i){const n=ly(t);return"Do"===e?i.ordinalNumber(n,{unit:"dayOfYear"}):my(n,e.length)},E:function(t,e,i){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,i,n){const s=t.getDay(),r=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return my(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,i,n){const s=t.getDay(),r=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return my(r,e.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,i){const n=t.getDay(),s=0===n?7:n;switch(e){case"i":return String(s);case"ii":return my(s,e.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,i){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,i){const n=t.getHours();let s;switch(s=12===n?yy:0===n?vy:n/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,i){const n=t.getHours();let s;switch(s=n>=17?wy:n>=12?by:n>=4?_y:xy,e){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,i){if("ho"===e){let e=t.getHours()%12;return 0===e&&(e=12),i.ordinalNumber(e,{unit:"hour"})}return gy.h(t,e)},H:function(t,e,i){return"Ho"===e?i.ordinalNumber(t.getHours(),{unit:"hour"}):gy.H(t,e)},K:function(t,e,i){const n=t.getHours()%12;return"Ko"===e?i.ordinalNumber(n,{unit:"hour"}):my(n,e.length)},k:function(t,e,i){let n=t.getHours();return 0===n&&(n=24),"ko"===e?i.ordinalNumber(n,{unit:"hour"}):my(n,e.length)},m:function(t,e,i){return"mo"===e?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):gy.m(t,e)},s:function(t,e,i){return"so"===e?i.ordinalNumber(t.getSeconds(),{unit:"second"}):gy.s(t,e)},S:function(t,e){return gy.S(t,e)},X:function(t,e,i){const n=t.getTimezoneOffset();if(0===n)return"Z";switch(e){case"X":return Cy(n);case"XXXX":case"XX":return My(n);default:return My(n,":")}},x:function(t,e,i){const n=t.getTimezoneOffset();switch(e){case"x":return Cy(n);case"xxxx":case"xx":return My(n);default:return My(n,":")}},O:function(t,e,i){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ty(n,":");default:return"GMT"+My(n,":")}},z:function(t,e,i){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ty(n,":");default:return"GMT"+My(n,":")}},t:function(t,e,i){return my(Math.trunc(+t/1e3),e.length)},T:function(t,e,i){return my(+t,e.length)}};function Ty(t,e=""){const i=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),r=n%60;return 0===r?i+String(s):i+String(s)+e+my(r,2)}function Cy(t,e){if(t%60==0){return(t>0?"-":"+")+my(Math.abs(t)/60,2)}return My(t,e)}function My(t,e=""){const i=t>0?"-":"+",n=Math.abs(t);return i+my(Math.trunc(n/60),2)+e+my(n%60,2)}const Iy=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Ey=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Ay={p:Ey,P:(t,e)=>{const i=t.match(/(P+)(p+)?/)||[],n=i[1],s=i[2];if(!s)return Iy(t,e);let r;switch(n){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;default:r=e.dateTime({width:"full"})}return r.replace("{{date}}",Iy(n,e)).replace("{{time}}",Ey(s,e))}},Dy=/^D+$/,ky=/^Y+$/,Py=["D","DD","YY","YYYY"];function Oy(t){return!(!((e=t)instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))&&"number"!=typeof t||isNaN(+sy(t)));var e}const Ry=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ly=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ny=/^'([^]*?)'?$/,Fy=/''/g,By=/[a-zA-Z]/;function zy(t,e,i){var n,s,r,o,a,l,c,h;const u=ty(),d=(null==i?void 0:i.locale)??u.locale??Qv,p=(null==i?void 0:i.firstWeekContainsDate)??(null==(s=null==(n=null==i?void 0:i.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(o=null==(r=u.locale)?void 0:r.options)?void 0:o.firstWeekContainsDate)??1,f=(null==i?void 0:i.weekStartsOn)??(null==(l=null==(a=null==i?void 0:i.locale)?void 0:a.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(h=null==(c=u.locale)?void 0:c.options)?void 0:h.weekStartsOn)??0,m=sy(t,null==i?void 0:i.in);if(!Oy(m))throw new RangeError("Invalid time value");let g=e.match(Ly).map((t=>{const e=t[0];if("p"===e||"P"===e){return(0,Ay[e])(t,d.formatLong)}return t})).join("").match(Ry).map((t=>{if("''"===t)return{isToken:!1,value:"'"};const e=t[0];if("'"===e)return{isToken:!1,value:Vy(t)};if(Sy[e])return{isToken:!0,value:t};if(e.match(By))throw new RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return{isToken:!1,value:t}}));d.localize.preprocessor&&(g=d.localize.preprocessor(m,g));const v={firstWeekContainsDate:p,weekStartsOn:f,locale:d};return g.map((n=>{if(!n.isToken)return n.value;const s=n.value;(!(null==i?void 0:i.useAdditionalWeekYearTokens)&&function(t){return ky.test(t)}(s)||!(null==i?void 0:i.useAdditionalDayOfYearTokens)&&function(t){return Dy.test(t)}(s))&&function(t,e,i){const n=function(t,e,i){const n="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,e,i);if(console.warn(n),Py.includes(t))throw new RangeError(n)}(s,e,String(t));return(0,Sy[s[0]])(m,s,d.localize,v)})).join("")}function Vy(t){const e=t.match(Ny);return e?e[1].replace(Fy,"'"):t}function $y(t,e,i){const{years:n=0,months:s=0,weeks:r=0,days:o=0,hours:a=0,minutes:l=0,seconds:c=0}=e,h=sy(t,null==i?void 0:i.in),u=s||n?function(t,e,i){const n=sy(t,null==i?void 0:i.in);if(isNaN(e))return ny(t,NaN);if(!e)return n;const s=n.getDate(),r=ny(t,n.getTime());return r.setMonth(n.getMonth()+e+1,0),s>=r.getDate()?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}(h,s+12*n):h,d=o||r?function(t,e,i){const n=sy(t,null==i?void 0:i.in);return isNaN(e)?ny(t,NaN):e?(n.setDate(n.getDate()+e),n):n}(u,o+7*r):u;return ny(t,+d+1e3*(c+60*(l+60*a)))}function Hy(t,e,i){const n=Object.assign({},ty()),s=function(t,e,i){return new Intl.DateTimeFormat(i?[i.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}(t,i.timeZone,i.locale??n.locale);return"formatToParts"in s?function(t,e){const i=t.formatToParts(e);for(let n=i.length-1;n>=0;--n)if("timeZoneName"===i[n].type)return i[n].value;return}(s,e):function(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(i);return n?n[0].substr(1):""}(s,e)}function Ky(t,e){const i=function(t){jy[t]||(jy[t]=Gy?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return jy[t]}(e);return"formatToParts"in i?function(t,e){try{const i=t.formatToParts(e),n=[];for(let t=0;t<i.length;t++){const e=Wy[i[t].type];void 0!==e&&(n[e]=parseInt(i[t].value,10))}return n}catch(i){if(i instanceof RangeError)return[NaN];throw i}}(i,t):function(t,e){const i=t.format(e),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}(i,t)}const Wy={year:0,month:1,day:2,hour:3,minute:4,second:5};const jy={},Uy=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Gy="06/25/2014, 00:00:00"===Uy||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===Uy;function qy(t,e,i,n,s,r,o){const a=new Date(0);return a.setUTCFullYear(t,e,i),a.setUTCHours(n,s,r,o),a}const Yy=36e5,Xy={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Zy(t,e,i){if(!t)return 0;let n,s,r=Xy.timezoneZ.exec(t);if(r)return 0;if(r=Xy.timezoneHH.exec(t),r)return n=parseInt(r[1],10),Jy(n)?-n*Yy:NaN;if(r=Xy.timezoneHHMM.exec(t),r){n=parseInt(r[2],10);const t=parseInt(r[3],10);return Jy(n,t)?(s=Math.abs(n)*Yy+6e4*t,"+"===r[1]?-s:s):NaN}if(function(t){if(t_[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),t_[t]=!0,!0}catch(e){return!1}}(t)){e=new Date(e||Date.now());const n=i?e:function(t){return qy(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}(e),s=Qy(n,t),r=i?s:function(t,e,i){const n=t.getTime();let s=n-e;const r=Qy(new Date(s),i);if(e===r)return e;s-=r-e;const o=Qy(new Date(s),i);if(r===o)return r;return Math.max(r,o)}(e,s,t);return-r}return NaN}function Qy(t,e){const i=Ky(t,e),n=qy(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime();let s=t.getTime();const r=s%1e3;return s-=r>=0?r:1e3+r,n-s}function Jy(t,e){return-23<=t&&t<=23&&(null==e||0<=e&&e<=59)}const t_={};const e_={X:function(t,e,i){const n=i_(i.timeZone,t);if(0===n)return"Z";switch(e){case"X":return r_(n);case"XXXX":case"XX":return s_(n);default:return s_(n,":")}},x:function(t,e,i){const n=i_(i.timeZone,t);switch(e){case"x":return r_(n);case"xxxx":case"xx":return s_(n);default:return s_(n,":")}},O:function(t,e,i){const n=i_(i.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+function(t,e=""){const i=t>0?"-":"+",n=Math.abs(t),s=Math.floor(n/60),r=n%60;if(0===r)return i+String(s);return i+String(s)+e+n_(r,2)}(n,":");default:return"GMT"+s_(n,":")}},z:function(t,e,i){switch(e){case"z":case"zz":case"zzz":return Hy("short",t,i);default:return Hy("long",t,i)}}};function i_(t,e){const i=t?Zy(t,e,!0)/6e4:(null==e?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(i))throw new RangeError("Invalid time zone specified: "+t);return i}function n_(t,e){const i=t<0?"-":"";let n=Math.abs(t).toString();for(;n.length<e;)n="0"+n;return i+n}function s_(t,e=""){const i=t>0?"-":"+",n=Math.abs(t);return i+n_(Math.floor(n/60),2)+e+n_(Math.floor(n%60),2)}function r_(t,e){if(t%60==0){return(t>0?"-":"+")+n_(Math.abs(t)/60,2)}return s_(t,e)}function o_(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+t-+e}const a_=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,l_=36e5,c_=6e4,h_={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:a_};function u_(t,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===t)return new Date(NaN);const i=null==e.additionalDigits?2:Number(e.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))return new Date(t.getTime());if("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))return new Date(t);if("[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);const n=function(t){const e={};let i,n=h_.dateTimePattern.exec(t);n?(e.date=n[1],i=n[3]):(n=h_.datePattern.exec(t),n?(e.date=n[1],i=n[2]):(e.date=null,i=t));if(i){const t=h_.timeZone.exec(i);t?(e.time=i.replace(t[1],""),e.timeZone=t[1].trim()):e.time=i}return e}(t),{year:s,restDateString:r}=function(t,e){if(t){const i=h_.YYY[e],n=h_.YYYYY[e];let s=h_.YYYY.exec(t)||n.exec(t);if(s){const e=s[1];return{year:parseInt(e,10),restDateString:t.slice(e.length)}}if(s=h_.YY.exec(t)||i.exec(t),s){const e=s[1];return{year:100*parseInt(e,10),restDateString:t.slice(e.length)}}}return{year:null}}(n.date,i),o=function(t,e){if(null===e)return null;let i,n,s;if(!t||!t.length)return i=new Date(0),i.setUTCFullYear(e),i;let r=h_.MM.exec(t);if(r)return i=new Date(0),n=parseInt(r[1],10)-1,g_(e,n)?(i.setUTCFullYear(e,n),i):new Date(NaN);if(r=h_.DDD.exec(t),r){i=new Date(0);const t=parseInt(r[1],10);return function(t,e){if(e<1)return!1;const i=m_(t);if(i&&e>366)return!1;if(!i&&e>365)return!1;return!0}(e,t)?(i.setUTCFullYear(e,0,t),i):new Date(NaN)}if(r=h_.MMDD.exec(t),r){i=new Date(0),n=parseInt(r[1],10)-1;const t=parseInt(r[2],10);return g_(e,n,t)?(i.setUTCFullYear(e,n,t),i):new Date(NaN)}if(r=h_.Www.exec(t),r)return s=parseInt(r[1],10)-1,v_(s)?d_(e,s):new Date(NaN);if(r=h_.WwwD.exec(t),r){s=parseInt(r[1],10)-1;const t=parseInt(r[2],10)-1;return v_(s,t)?d_(e,s,t):new Date(NaN)}return null}(r,s);if(null===o||isNaN(o.getTime()))return new Date(NaN);if(o){const t=o.getTime();let i,s=0;if(n.time&&(s=function(t){let e,i,n=h_.HH.exec(t);if(n)return e=parseFloat(n[1].replace(",",".")),y_(e)?e%24*l_:NaN;if(n=h_.HHMM.exec(t),n)return e=parseInt(n[1],10),i=parseFloat(n[2].replace(",",".")),y_(e,i)?e%24*l_+i*c_:NaN;if(n=h_.HHMMSS.exec(t),n){e=parseInt(n[1],10),i=parseInt(n[2],10);const t=parseFloat(n[3].replace(",","."));return y_(e,i,t)?e%24*l_+i*c_+1e3*t:NaN}return null}(n.time),null===s||isNaN(s)))return new Date(NaN);if(n.timeZone||e.timeZone){if(i=Zy(n.timeZone||e.timeZone,new Date(t+s)),isNaN(i))return new Date(NaN)}else i=o_(new Date(t+s)),i=o_(new Date(t+s+i));return new Date(t+s+i)}return new Date(NaN)}function d_(t,e,i){e=e||0,i=i||0;const n=new Date(0);n.setUTCFullYear(t,0,4);const s=7*e+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+s),n}const p_=[31,28,31,30,31,30,31,31,30,31,30,31],f_=[31,29,31,30,31,30,31,31,30,31,30,31];function m_(t){return t%400==0||t%4==0&&t%100!=0}function g_(t,e,i){if(e<0||e>11)return!1;if(null!=i){if(i<1)return!1;const n=m_(t);if(n&&i>f_[e])return!1;if(!n&&i>p_[e])return!1}return!0}function v_(t,e){return!(t<0||t>52)&&(null==e||!(e<0||e>6))}function y_(t,e,i){return!(t<0||t>=25)&&((null==e||!(e<0||e>=60))&&(null==i||!(i<0||i>=60)))}const __=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function b_(t,e,i){const n=Zy(e,t=u_(t,i),!0),s=new Date(t.getTime()-n),r=new Date(0);return r.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),r.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),r}function w_(t,e,i,n){return function(t,e,i={}){const n=(e=String(e)).match(__);if(n){const s=u_(i.originalDate||t,i);e=n.reduce((function(t,e){if("'"===e[0])return t;const n=t.indexOf(e),r="'"===t[n-1],o=t.replace(e,"'"+e_[e[0]](s,e,i)+"'");return r?o.substring(0,n-1)+o.substring(n+1):o}),e)}return zy(t,e,i)}(b_(t,e,{timeZone:(n={...n,timeZone:e,originalDate:t}).timeZone}),i,n)}function x_(t,e,i){if("string"==typeof t&&!t.match(a_))return u_(t,{...i,timeZone:e});const n=qy((t=u_(t,i)).getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()).getTime(),s=Zy(e,new Date(n));return new Date(n+s)}function S_(t){return t&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function T_(t){return t}function C_(t,e){const i=(e=e||{}).delimiter||".",n=e.maxDepth,s=e.transformKey||T_,r={};return function t(o,a,l){l=l||1,Object.keys(o).forEach((function(c){const h=o[c],u=e.safe&&Array.isArray(h),d=Object.prototype.toString.call(h),p=S_(h),f="[object Object]"===d||"[object Array]"===d,m=a?a+i+s(c):s(c);if(!u&&!p&&f&&Object.keys(h).length&&(!e.maxDepth||l<n))return t(h,m,l+1);r[m]=h}))}(t),r}function M_(t,e){const i=(e=e||{}).delimiter||".",n=e.overwrite||!1,s=e.transformKey||T_,r={};if(S_(t)||"[object Object]"!==Object.prototype.toString.call(t))return t;function o(t){const i=Number(t);return isNaN(i)||-1!==t.indexOf(".")||e.object?t:i}return t=Object.keys(t).reduce((function(n,s){const r=Object.prototype.toString.call(t[s]);return!("[object Object]"===r||"[object Array]"===r)||function(t){const e=Object.prototype.toString.call(t),i="[object Object]"===e;return!t||("[object Array]"===e?!t.length:i?!Object.keys(t).length:void 0)}(t[s])?(n[s]=t[s],n):(o=s,a=n,l=C_(t[s],e),Object.keys(l).reduce((function(t,e){return t[o+i+e]=l[e],t}),a));var o,a,l}),{}),Object.keys(t).forEach((function(a){const l=a.split(i).map(s);let c=o(l.shift()),h=o(l[0]),u=r;for(;void 0!==h;){if("__proto__"===c)return;const t=Object.prototype.toString.call(u[c]),i="[object Object]"===t||"[object Array]"===t;if(!n&&!i&&void 0!==u[c])return;(n&&!i||!n&&null==u[c])&&(u[c]="number"!=typeof h||e.object?{}:[]),u=u[c],l.length>0&&(c=o(l.shift()),h=o(l[0]))}u[c]=M_(t[a],e)})),r}const I_=Wo("contextKeyService");const E_={ticks:1e3,seconds:1e3,minutes:6e4,days:864e5,weeks:6048e5,months:NaN,range:NaN,invalid:NaN},A_={T:"ticks",S:"seconds",D:"days",W:"weeks",M:"months",R:"range"},D_=new Set(["ticks","seconds","minutes"]),k_=/^(\d*)([TSHDWMR])$/,P_=/^(\d+)$/;let O_=class t{constructor(t,e){x(this,"_kind"),x(this,"_multiplier"),this._kind="invalid",this._multiplier=0,"invalid"!==t&&e>0&&(this._kind=t,this._multiplier=e)}kind(){return this._kind}guiKind(){return this.isMinuteHours()?"hours":this._kind}multiplier(){return this._multiplier}isValid(){return"invalid"!==this._kind&&this._multiplier>0}isIntraday(){return this.isValid()&&D_.has(this._kind)}isTicks(){return"ticks"===this._kind}is1Tick(){return this.isTicks()&&1===this._multiplier}isSeconds(){return"seconds"===this._kind}isMinutes(){return"minutes"===this._kind}isMinuteHours(){return this.isMinutes()&&((t=this._multiplier)>=60&&t%60==0);var t}isDays(){return"days"===this._kind}isWeeks(){return"weeks"===this._kind}isMonths(){return"months"===this._kind}isRange(){return"range"===this._kind}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isTimeBased(){return!this.isRange()}letter(){return!this.isValid()||this.isMinutes()?"":this._kind[0].toUpperCase()}value(){return this.isValid()?this.isMinutes()?`${this._multiplier}`:`${this._multiplier}${this.letter()}`:""}isEqualTo(e){if(!(e instanceof t))throw new Error("Argument is not an Interval");return this.isValid()&&e.isValid()&&this._kind===e.kind()&&this._multiplier===e.multiplier()}inMilliseconds(t=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const e=new Date(t);return e.setUTCMonth(e.getUTCMonth()+this._multiplier),e.valueOf()-t}return(E_[this._kind]??NaN)*this._multiplier}static parse(e){return t.parseExt(e).interval}static kind(e){return t.parse(e).kind()}static isEqual(e,i){return t.parse(e).isEqualTo(t.parse(i))}static isValid(e){return t.parse(e).isValid()}static isTicks(e){return t.parse(e).isTicks()}static isRange(e){return t.parse(e).isRange()}static isMinutes(e){return t.parse(e).isMinutes()}static isMinuteHours(e){return t.parse(e).isMinuteHours()}static isIntraday(e){return t.parse(e).isIntraday()}static isDWM(e){return t.parse(e).isDWM()}static isTimeBased(e){return t.parse(e).isTimeBased()}static normalize(e){const i=t.parse(e);return i.isValid()?i.value():null}static parseExt(e){const i=String(e).toUpperCase().split(",")[0];let n=k_.exec(i);if(n){const e=0===(s=n[1]).length?1:parseInt(s,10),i=n[2];if("H"===i)return{interval:new t("minutes",60*e),guiResolutionKind:"hours"};{const n=A_[i];return{interval:new t(n,e),guiResolutionKind:n}}}var s;return n=P_.exec(i),n?{interval:new t("minutes",parseInt(n[1],10)),guiResolutionKind:"minutes"}:{interval:new t("invalid",0),guiResolutionKind:"invalid"}}};const R_=qt;class L_{constructor(t,e){x(this,"accepted",!1),this.type=t,this.source=e}accept(){this.accepted=!0}ignore(){this.accepted=!1}isAccepted(){return this.accepted}asMouseInputEvent(){}isMouseInputEvent(){return!1}asChartInputEvent(){}isChartInputEvent(){return!1}asKeyboardInputEvent(){}isKeyboardInputEvent(){return!1}}class N_ extends L_{constructor(t,e,i){super(t,i),x(this,"localX"),x(this,"localY"),x(this,"shiftKey"),x(this,"originEvent"),this.localX=e.localX,this.localY=e.localY,this.shiftKey=e.shiftKey,this.originEvent=e.browserEvent}asMouseInputEvent(){return this}isMouseInputEvent(){return!0}}class F_ extends N_{constructor(t,e,i){var n,s,r;super(t,{browserEvent:e.sourceEvent,localX:(null==(n=e.point)?void 0:n.x)??NaN,localY:(null==(s=e.point)?void 0:s.y)??NaN,shiftKey:!!(null==(r=e.sourceEvent)?void 0:r.shiftKey)},i),this.params=e}get hoveredObjectId(){return this.params.hoveredObjectId}get hoveredSeries(){return this.params.hoveredSeries}get logical(){return this.params.logical}get paneIndex(){return this.params.paneIndex}get point(){return this.params.point}get seriesData(){return this.params.seriesData}get sourceEvent(){return this.params.sourceEvent}get time(){return this.params.time}asChartInputEvent(){return this}isChartInputEvent(){return!0}}class B_ extends L_{constructor(t,e,i){super(t,i),x(this,"ctrlKey"),x(this,"shiftKey"),x(this,"altKey"),x(this,"metaKey"),x(this,"keyCode"),x(this,"code"),x(this,"init"),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.keyCode=e.keyCode,this.code=e.code,this.init=e}asKeyboardInputEvent(){return this}isKeyboardInputEvent(){return!0}}class z_{constructor(...t){x(this,"_entries",new Map);for(const[e,i]of t)this.set(e,i)}set(t,e){const i=this._entries.get(t);return this._entries.set(t,e),i}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}}const V_=Wo("intlService"),$_=Wo("studyService"),H_=new class extends J{};var K_=(t=>(t.DARK="dark",t.LIGHT="light",t))(K_||{});const W_=Wo("themeService"),j_={timezone:"exchange","mainSeriesProperties.style":tt.Candle,"mainSeriesProperties.statusViewStyle.showExchange":!1,"mainSeriesProperties.statusViewStyle.showInterval":!0,"mainSeriesProperties.statusViewStyle.symbolTextSource":"description","mainSeriesProperties.candleStyle.upColor":"#089981","mainSeriesProperties.candleStyle.downColor":"#F23645","mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!1,"mainSeriesProperties.candleStyle.borderColor":"#378658","mainSeriesProperties.candleStyle.borderUpColor":"#089981","mainSeriesProperties.candleStyle.borderDownColor":"#F23645","mainSeriesProperties.candleStyle.wickColor":"#737375","mainSeriesProperties.candleStyle.wickUpColor":"#089981","mainSeriesProperties.candleStyle.wickDownColor":"#F23645","mainSeriesProperties.candleStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.candleStyle.drawBody":!0,"mainSeriesProperties.hollowCandleStyle.upColor":"#089981","mainSeriesProperties.hollowCandleStyle.downColor":"#F23645","mainSeriesProperties.hollowCandleStyle.drawWick":!0,"mainSeriesProperties.hollowCandleStyle.drawBorder":!0,"mainSeriesProperties.hollowCandleStyle.borderColor":"#378658","mainSeriesProperties.hollowCandleStyle.borderUpColor":"#089981","mainSeriesProperties.hollowCandleStyle.borderDownColor":"#F23645","mainSeriesProperties.hollowCandleStyle.wickColor":"#737375","mainSeriesProperties.hollowCandleStyle.wickUpColor":"#089981","mainSeriesProperties.hollowCandleStyle.wickDownColor":"#F23645","mainSeriesProperties.hollowCandleStyle.drawBody":!0,"mainSeriesProperties.barStyle.upColor":"#089981","mainSeriesProperties.barStyle.downColor":"#F23645","mainSeriesProperties.barStyle.barColorsOnPrevClose":!1,"mainSeriesProperties.barStyle.dontDrawOpen":!1,"mainSeriesProperties.barStyle.thinBars":!0,"mainSeriesProperties.lineStyle.color":"#2962FF","mainSeriesProperties.lineStyle.linestyle":0,"mainSeriesProperties.lineStyle.linewidth":2,"mainSeriesProperties.lineStyle.priceSource":"close","mainSeriesProperties.areaStyle.color1":"rgba(41, 98, 255, 0)","mainSeriesProperties.areaStyle.color2":"rgba(41, 98, 255, 0.28)","mainSeriesProperties.areaStyle.linecolor":"#2962FF","mainSeriesProperties.areaStyle.linestyle":0,"mainSeriesProperties.areaStyle.linewidth":2,"mainSeriesProperties.areaStyle.priceSource":"close","mainSeriesProperties.areaStyle.transparency":100,"layout.background.color":"","layout.background.type":"","layout.background.topColor":"","layout.background.bottomColor":"","grid.vertLines.color":"","grid.vertLines.style":0,"grid.vertLines.visible":!0,"grid.horzLines.color":"","grid.horzLines.style":0,"grid.horzLines.visible":!0,"legend.showSeriesTitle":!0,"legend.showBarChange":!0,"scales.showStudyLastValue":!0,"tool.tradeLine.buyColor":"#2A62FF","tool.tradeLine.sellColor":"#F23644","tool.tradeLine.tpColor":"#089981","tool.tradeLine.slColor":"#FF9800"};class U_ extends he{constructor(){super(),x(this,"_instantiationService",null),x(this,"_instances",this._register(new ue)),x(this,"_pending",new Map),x(this,"_finishedInstantiation",[]),this._finishedInstantiation[Da.Eager]=!1,this._finishedInstantiation[Da.AfterFirstRender]=!1,this._finishedInstantiation[Da.Eventually]=!1}initialize(t,e){this._instantiationService=e;for(const i of t)this._pending.has(i.id)?$(new Error(`Cannot have two contributions with the same id ${i.id}`)):this._pending.set(i.id,i);this._instantiateSome(Da.Eager),this._register(te((()=>{this._instantiateSome(Da.AfterFirstRender)}))),this._register(te((()=>{this._instantiateSome(Da.Eventually)}),5e3))}async get(t){return await this._instantiateById(t),this._instances.get(t)||null}getNotInit(t){return this._instances.get(t)||null}_instantiateSome(t){if(this._finishedInstantiation[t])return;this._finishedInstantiation[t]=!0;const e=this._findPendingContributionsByInstantiation(t);for(const i of e)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(t){const e=[];for(const[,i]of this._pending)i.instantiation===t&&e.push(i);return e}async _instantiateById(t){const e=this._pending.get(t);if(e){if(this._pending.delete(t),!this._instantiationService)throw new Error("Cannot instantiate contributions before being initialized!");try{const t=await e.ctor(),i=this._instantiationService.createInstance(t);this._instances.set(e.id,i)}catch(i){$(i)}}}}function G_(t){const e={callback:t};return gt((()=>{var t;null==(t=e.callback)||t.call(e)})),()=>{e.callback=null}}function q_(t,e){const i=setTimeout(t,e);return()=>{clearTimeout(i)}}function Y_(t){const e={callback:t};return te((()=>{var t;null==(t=e.callback)||t.call(e)})),()=>{e.callback=null}}function X_(t,e,i=.001){return Math.abs(t-e)<i}function Z_(t,e,i){const n=Math.min(e,i),s=Math.max(e,i);return Math.min(Math.max(t,n),s)}function Q_(t){const e=Math.ceil(t);return e%2!=0?e-1:e}function J_(t){return t<0?-1:t>0?1:0}function tb(t){return t%2==0}function eb(t,e){return X_(t.x,e.x)&&X_(t.y,e.y)}function ib(t,e,i,n){const s=i-t,r=n-e;return Math.sqrt(s*s+r*r)}function nb(t,e){return ib(t.x,t.y,e.x,e.y)}function sb(t,e){return new rb({x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2})}class rb{constructor(t,e){x(this,"x"),x(this,"y"),F(t)?(this.x=t,this.y=ee(e)):(this.x=t.x,this.y=t.y)}add(t){return new rb(this.x+t.x,this.y+t.y)}addScaled(t,e){return new rb(this.x+e*t.x,this.y+e*t.y)}subtract(t){return new rb(this.x-t.x,this.y-t.y)}dotProduct(t){return this.x*t.x+this.y*t.y}crossProduct(t){return this.x*t.y-this.y*t.x}signedAngle(t){return Math.atan2(this.crossProduct(t),this.dotProduct(t))}angle(t){return Math.acos(this.dotProduct(t)/(this.length()*t.length()))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}scaled(t){return new rb(this.x*t,this.y*t)}normalized(){const t=this.length();return 0===t?this:this.scaled(1/t)}transposed(){return new rb(-this.y,this.x)}clone(){return new rb(this.x,this.y)}}const ob=5,ab=10,lb=15;function cb(t,e){return!!(t&e)}function hb(t){return function(t){return cb(t,1)}(t)||function(t){return cb(t,4)}(t)}function ub(t){return function(t){return cb(t,8)}(t)||function(t){return cb(t,2)}(t)}var db=(t=>(t[t.None=0]="None",t[t.Regular=1]="Regular",t[t.MovePoint=2]="MovePoint",t[t.ChangePoint=3]="ChangePoint",t[t.Custom=4]="Custom",t))(db||{}),pb=(t=>(t[t.Text=0]="Text",t[t.AnchorPoint=1]="AnchorPoint",t[t.Btn=2]="Btn",t))(pb||{});function fb(t){return!!t&&("areaName"in t&&t.areaName===pb.AnchorPoint)}class mb{constructor(t,e){this.target=t,this.details=e}mergeData(t){this.details?Object.assign(this.details,t):this.details=t}}const gb={common:3,line:3,minDistanceBetweenPoints:5,series:2,curve:3,anchor:2,esd:0};function vb(){return gb}function yb(t,e,i){if(null==i?void 0:i.clamp){e=Z_(e,0,t.chartApi.timeScale().width())}if(null==i?void 0:i.useExtended)return t.chartApi.timeScale().coordinateToTimeEx(e);let n=t.chartApi.timeScale().coordinateToTime(e);if(!n){const i=t.mainSeriesApi.getSeries().data(),s=i[i.length-1];ie(e>=ee(t.chartApi.timeScale().timeToCoordinate(s.time))),n=s.time}return n}function _b(t){return isFinite(t.x)&&isFinite(t.y)&&N(t.paneIndex)&&isFinite(t.paneIndex)}function bb(t,e=.28){ie(t.startsWith("#"));const i=function(t){const e=Math.min(1,Math.max(0,t));return Math.round(255*e).toString(16).padStart(2,"0").toUpperCase()}(e);return 7===t.length?t+i:t.substring(0,7)+i}const wb=bb("#f67782"),xb=2*Math.PI;class Sb{constructor(t){x(this,"_chart"),x(this,"_requestUpdate"),t&&(this._chart=t)}requestUpdate(){this._requestUpdate&&this._requestUpdate()}attached({chart:t,requestUpdate:e}){this._chart=t,this._requestUpdate=e,this.requestUpdate()}detached(){this._chart=void 0,this._requestUpdate=void 0}get chart(){return ee(this._chart)}}class Tb{constructor(t){this._data=t}draw(t){t.useBitmapCoordinateSpace((t=>{const{x:e,y:i,background:n,radius:s}=this._data;if(e<0||i<0)return;const r=t.context;r.fillStyle=n,r.beginPath(),r.arc(e*t.horizontalPixelRatio,i*t.verticalPixelRatio,s*t.horizontalPixelRatio,0,xb,!1),r.fill()}))}}class Cb{constructor(t){this._data=t}renderer(){return new Tb(this._data)}zOrder(){return"top"}update(t){this._data=t}}class Mb extends Sb{constructor(t,e){super(),x(this,"_paneView"),this._data=t,this.detach=e,this._paneView=[new Cb(t)]}updateData(t){Object.assign(this._data,t),this.updateAllViews(),this.requestUpdate()}paneViews(){return this._paneView}updateAllViews(){this._paneView.forEach((t=>t.update(this._data)))}}const Ib=Wo("clipboardService"),Eb=Wo("guiService"),Ab=Wo("IToolService"),Db=Wo("toolRegistry");var kb=(t=>(t[t.manual=0]="manual",t[t.program=1]="program",t))(kb||{}),Pb=(t=>(t[t.idle=0]="idle",t[t.activated=1]="activated",t))(Pb||{}),Ob=(t=>(t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.DoubleQuote=34]="DoubleQuote",t[t.Hash=35]="Hash",t[t.DollarSign=36]="DollarSign",t[t.PercentSign=37]="PercentSign",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Dash=45]="Dash",t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.Digit0=48]="Digit0",t[t.Digit1=49]="Digit1",t[t.Digit2=50]="Digit2",t[t.Digit3=51]="Digit3",t[t.Digit4=52]="Digit4",t[t.Digit5=53]="Digit5",t[t.Digit6=54]="Digit6",t[t.Digit7=55]="Digit7",t[t.Digit8=56]="Digit8",t[t.Digit9=57]="Digit9",t[t.Colon=58]="Colon",t[t.Semicolon=59]="Semicolon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.QuestionMark=63]="QuestionMark",t[t.AtSign=64]="AtSign",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.OpenSquareBracket=91]="OpenSquareBracket",t[t.Backslash=92]="Backslash",t[t.CloseSquareBracket=93]="CloseSquareBracket",t[t.Caret=94]="Caret",t[t.Underline=95]="Underline",t[t.BackTick=96]="BackTick",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.OpenCurlyBrace=123]="OpenCurlyBrace",t[t.Pipe=124]="Pipe",t[t.CloseCurlyBrace=125]="CloseCurlyBrace",t[t.Tilde=126]="Tilde",t[t.NoBreakSpace=160]="NoBreakSpace",t))(Ob||{});function Rb(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}class Lb{constructor(t,e,i,n=1){x(this,"_rgbaBrand"),x(this,"r"),x(this,"g"),x(this,"b"),x(this,"a"),this.r=0|Math.min(255,Math.max(0,t)),this.g=0|Math.min(255,Math.max(0,e)),this.b=0|Math.min(255,Math.max(0,i)),this.a=Rb(Math.max(Math.min(1,n),0),3)}static equals(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a}}class Nb{constructor(t,e,i,n){x(this,"_hslaBrand"),x(this,"h"),x(this,"s"),x(this,"l"),x(this,"a"),this.h=0|Math.max(Math.min(360,t),0),this.s=Rb(Math.max(Math.min(1,e),0),3),this.l=Rb(Math.max(Math.min(1,i),0),3),this.a=Rb(Math.max(Math.min(1,n),0),3)}static equals(t,e){return t.h===e.h&&t.s===e.s&&t.l===e.l&&t.a===e.a}static fromRGBA(t){const e=t.r/255,i=t.g/255,n=t.b/255,s=t.a,r=Math.max(e,i,n),o=Math.min(e,i,n);let a=0,l=0;const c=(o+r)/2,h=r-o;if(h>0){switch(l=Math.min(c<=.5?h/(2*c):h/(2-2*c),1),r){case e:a=(i-n)/h+(i<n?6:0);break;case i:a=(n-e)/h+2;break;case n:a=(e-i)/h+4}a*=60,a=Math.round(a)}return new Nb(a,l,c,s)}static _hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}static toRGBA(t){const e=t.h/360,{s:i,l:n,a:s}=t;let r,o,a;if(0===i)r=o=a=n;else{const t=n<.5?n*(1+i):n+i-n*i,s=2*n-t;r=Nb._hue2rgb(s,t,e+1/3),o=Nb._hue2rgb(s,t,e),a=Nb._hue2rgb(s,t,e-1/3)}return new Lb(Math.round(255*r),Math.round(255*o),Math.round(255*a),s)}}class Fb{constructor(t,e,i,n){x(this,"_hsvaBrand"),x(this,"h"),x(this,"s"),x(this,"v"),x(this,"a"),this.h=0|Math.max(Math.min(360,t),0),this.s=Rb(Math.max(Math.min(1,e),0),3),this.v=Rb(Math.max(Math.min(1,i),0),3),this.a=Rb(Math.max(Math.min(1,n),0),3)}static equals(t,e){return t.h===e.h&&t.s===e.s&&t.v===e.v&&t.a===e.a}static fromRGBA(t){const e=t.r/255,i=t.g/255,n=t.b/255,s=Math.max(e,i,n),r=s-Math.min(e,i,n),o=0===s?0:r/s;let a;return a=0===r?0:s===e?((i-n)/r%6+6)%6:s===i?(n-e)/r+2:(e-i)/r+4,new Fb(Math.round(60*a),o,s,t.a)}static toRGBA(t){const{h:e,s:i,v:n,a:s}=t,r=n*i,o=r*(1-Math.abs(e/60%2-1)),a=n-r;let[l,c,h]=[0,0,0];return e<60?(l=r,c=o):e<120?(l=o,c=r):e<180?(c=r,h=o):e<240?(c=o,h=r):e<300?(l=o,h=r):e<=360&&(l=r,h=o),l=Math.round(255*(l+a)),c=Math.round(255*(c+a)),h=Math.round(255*(h+a)),new Lb(l,c,h,s)}}const Bb=class t{constructor(t){if(x(this,"rgba"),x(this,"_hsla"),x(this,"_hsva"),x(this,"_toString"),!t)throw new Error("Color needs a value");if(t instanceof Lb)this.rgba=t;else if(t instanceof Nb)this._hsla=t,this.rgba=Nb.toRGBA(t);else{if(!(t instanceof Fb))throw new Error("Invalid color ctor argument");this._hsva=t,this.rgba=Fb.toRGBA(t)}}static fromHex(e){return t.Format.CSS.parseHex(e)||t.white}static equals(t,e){return!t&&!e||!(!t||!e)&&t.equals(e)}get hsla(){return this._hsla?this._hsla:Nb.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Fb.fromRGBA(this.rgba)}equals(t){return!!t&&Lb.equals(this.rgba,t.rgba)&&Nb.equals(this.hsla,t.hsla)&&Fb.equals(this.hsva,t.hsva)}isOpaque(){return 1===this.rgba.a}toString(){return this._toString||(this._toString=t.Format.CSS.format(this)),this._toString}};x(Bb,"white",new Bb(new Lb(255,255,255,1))),x(Bb,"transparent",new Bb(new Lb(0,0,0,0)));let zb=Bb;function Vb(t){const e=t.toString(16);return 2!==e.length?"0"+e:e}function $b(t){switch(t){case Ob.Digit0:return 0;case Ob.Digit1:return 1;case Ob.Digit2:return 2;case Ob.Digit3:return 3;case Ob.Digit4:return 4;case Ob.Digit5:return 5;case Ob.Digit6:return 6;case Ob.Digit7:return 7;case Ob.Digit8:return 8;case Ob.Digit9:return 9;case Ob.a:case Ob.A:return 10;case Ob.b:case Ob.B:return 11;case Ob.c:case Ob.C:return 12;case Ob.d:case Ob.D:return 13;case Ob.e:case Ob.E:return 14;case Ob.f:case Ob.F:return 15}return 0}var Hb,Kb;function Wb(t){if("transparent"===t)return t;if(jb(t))return t.slice(0,7);return nw(iw(ew(t),qb(1)))}function jb(t){return 0===t.indexOf("#")}Hb=zb||(zb={}),(t=>{function e(t){const e=t.length;if(0===e)return null;if(t.charCodeAt(0)!==Ob.Hash)return null;if(7===e){const e=16*$b(t.charCodeAt(1))+$b(t.charCodeAt(2)),i=16*$b(t.charCodeAt(3))+$b(t.charCodeAt(4)),n=16*$b(t.charCodeAt(5))+$b(t.charCodeAt(6));return new Hb(new Lb(e,i,n,1))}if(9===e){const e=16*$b(t.charCodeAt(1))+$b(t.charCodeAt(2)),i=16*$b(t.charCodeAt(3))+$b(t.charCodeAt(4)),n=16*$b(t.charCodeAt(5))+$b(t.charCodeAt(6)),s=16*$b(t.charCodeAt(7))+$b(t.charCodeAt(8));return new Hb(new Lb(e,i,n,s/255))}if(4===e){const e=$b(t.charCodeAt(1)),i=$b(t.charCodeAt(2)),n=$b(t.charCodeAt(3));return new Hb(new Lb(16*e+e,16*i+i,16*n+n))}if(5===e){const e=$b(t.charCodeAt(1)),i=$b(t.charCodeAt(2)),n=$b(t.charCodeAt(3)),s=$b(t.charCodeAt(4));return new Hb(new Lb(16*e+e,16*i+i,16*n+n,(16*s+s)/255))}return null}t.formatRGB=function(t){return 1===t.rgba.a?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:Hb.Format.CSS.formatRGBA(t)},t.formatRGBA=function(t){return`rgba(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b}, ${+t.rgba.a.toFixed(2)})`},t.formatHSL=function(t){return 1===t.hsla.a?`hsl(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%)`:Hb.Format.CSS.formatHSLA(t)},t.formatHSLA=function(t){return`hsla(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%, ${t.hsla.a.toFixed(2)})`},t.formatHex=function(t){return`#${Vb(t.rgba.r)}${Vb(t.rgba.g)}${Vb(t.rgba.b)}`},t.formatHexA=function(t,e=!1){return e&&1===t.rgba.a?Hb.Format.CSS.formatHex(t):`#${Vb(t.rgba.r)}${Vb(t.rgba.g)}${Vb(t.rgba.b)}${Vb(Math.round(255*t.rgba.a))}`},t.format=function(t){return t.isOpaque()?Hb.Format.CSS.formatHex(t):Hb.Format.CSS.formatRGBA(t)},t.parse=function(t){var i,n,s,r,o,a,l;if("transparent"===t)return Hb.transparent;if(t.startsWith("#"))return e(t);if(t.startsWith("rgba(")){const e=t.match(/rgba\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+), *(?<a>(?:\+|-)?\d+(\.\d+)?)\)/);if(!e)throw new Error("Invalid color format "+t);const o=parseInt((null==(i=e.groups)?void 0:i.r)??"0"),a=parseInt((null==(n=e.groups)?void 0:n.g)??"0"),l=parseInt((null==(s=e.groups)?void 0:s.b)??"0"),c=parseFloat((null==(r=e.groups)?void 0:r.a)??"0");return new Hb(new Lb(o,a,l,c))}if(t.startsWith("rgb(")){const e=t.match(/rgb\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+)\)/);if(!e)throw new Error("Invalid color format "+t);const i=parseInt((null==(o=e.groups)?void 0:o.r)??"0"),n=parseInt((null==(a=e.groups)?void 0:a.g)??"0"),s=parseInt((null==(l=e.groups)?void 0:l.b)??"0");return new Hb(new Lb(i,n,s))}return q("named key is not supported")},t.parseHex=e})((Kb=Hb.Format||(Hb.Format={})).CSS||(Kb.CSS={}));const Ub={red:"#ff0000",green:"#008000",blue:"#0000ff",white:"#ffffff",black:"#000000",yellow:"#ffff00",cyan:"#00ffff"};function Gb(t){return function(t,e,i){return isNaN(e)||e<t?t:e>i?i:Math.round(e)}(0,t,255)}function qb(t){return function(t,e,i){return isNaN(e)||e<t?t:e>i?i:Math.round(1e4*e)/1e4}(0,t,1)}const Yb={re:/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,parse:t=>[Gb(parseInt(t[1],10)),Gb(parseInt(t[2],10)),Gb(parseInt(t[3],10))]},Xb={re:/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,parse:t=>[Gb(parseInt(t[1],10)),Gb(parseInt(t[2],10)),Gb(parseInt(t[3],10)),qb(parseFloat(t[4]))]},Zb={re:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,parse:t=>[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},Qb={re:/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,parse:t=>[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]};function Jb(t,e){for(const i of t){const t=i.re.exec(e);if(t)return i.parse(t)}return null}function tw(t){const e=function(t){var e,i;if((t=t.toLowerCase().trim())in Ub){const e=Ub[t],i=Jb([Zb],e);return i?[...i,1]:null}return(null==(e=Jb([Yb],t))?void 0:e.concat(1))||(null==(i=Jb([Zb,Qb],t))?void 0:i.concat(1))||Jb([Xb],t)||null}(t);if(!e)throw new Error("Invalid color format: "+t);return e}function ew(t){const e=tw(t);return[e[0],e[1],e[2]]}function iw(...t){if(Array.isArray(t[0])){const[e,i,n]=t[0];return[e,i,n,qb(t[1])]}{const[e,i,n,s=1]=t;return[Gb(e),Gb(i),Gb(n),qb(s)]}}function nw(t){const[e,i,n,s]=t;return`rgba(${e}, ${i}, ${n}, ${s})`}function sw(t,e,i){const n="number"==typeof e?e:0;if(!jb(t)){const e=ew(t),s=qb(rw(n));return i?nw(iw(e,s)):t}const[s,r,o]=ew(t);return nw([s,r,o,qb(rw(n))])}function rw(t){if(t<0||t>100)throw new Error("invalid transparency");return 1-t/100}function ow(t){const e=(t=Math.round(t))%256,i=(t=(t-e)/256)%256,n=(t=(t-i)/256)%256;return`rgba(${e},${i},${n},${(t=(t-n)/256)/255})`}class aw{constructor(){x(this,"_color1",""),x(this,"_color2",""),x(this,"_colors",new Map)}gradientColor(t,e,i){if(t===e)return e;const n=Math.max(0,Math.min(100,Math.round(100*i)));this._color1===t&&this._color2===e||(this._colors.clear(),this._color1=t,this._color2=e);let s=this._colors.get(n);return void 0===s&&(s=function(t,e,i){const[n,s,r,o]=tw(t),[a,l,c,h]=tw(e);return nw(iw(Math.round(n+i*(a-n)),Math.round(s+i*(l-s)),Math.round(r+i*(c-r)),o+i*(h-o)))}(t,e,n/100),this._colors.set(n,s)),s}}var lw=(t=>(t[t.select=0]="select",t[t.drag=1]="drag",t))(lw||{});class cw{constructor(t,e){x(this,"_currentPoint",null),x(this,"_currentCreating",null),x(this,"_currentActive",null),x(this,"_hoveredSource",null),x(this,"_currentEditing",null),x(this,"_pointEditing",null),x(this,"_pointCreating",null),x(this,"_lastHoverDetails",null),x(this,"_onFocus",new dl),x(this,"onFocus",this._onFocus.event),x(this,"_onBlur",new dl),x(this,"onBlur",this._onBlur.event),x(this,"_backgroundColorAtYPercentFromTop",new aw),this.chartService=t,this.themeService=e}isDarkTheme(){return this.themeService.isDark()}backgroundColorAtYPercentFromTop(t){const e=this.chartService.chartApi.options().layout.background;if(e.type===os.Solid)return e.color;{const i=e.topColor,n=e.bottomColor;return this._backgroundColorAtYPercentFromTop.gradientColor(i,n,t)}}get currentCreating(){return this._currentCreating}get currentActive(){return this._currentActive}get currentHovered(){return this._hoveredSource}get pointEditing(){return this._pointEditing}get pointCreating(){return this._pointCreating}get currentEditing(){return this._currentEditing}get currentPoint(){return this._currentPoint}setCurrentPoint(t){this._currentPoint=t}lastHittestData(){return this._lastHoverDetails}markPointEditingStarted(t,e){this._currentEditing=t,this._pointEditing=e}markPointEditingFinishedOrAborted(){this._currentEditing=null,this._pointEditing=-1}markCreatingStarted(t){this._currentCreating=t}markCreatingPoint(t){this._pointCreating=t}markCreatingFinishedOrAborted(t){this._currentCreating===t&&(this._currentCreating=null,this._pointCreating=null)}setHoveredSource(t,e){var i,n,s,r,o;this._hoveredSource!==t&&(null==(i=this._hoveredSource)||i.updateHover(),null==(s=null==(n=this._lastHoverDetails)?void 0:n.onHover)||s.call(n)),this._lastHoverDetails=e.details??null,this._lastHoverDetails&&(null==(o=(r=this._lastHoverDetails).onHover)||o.call(r,{target:t,details:this._lastHoverDetails,x:NaN,y:NaN})),t.updateHover(this._lastHoverDetails),this._hoveredSource=t}unhover(t){var e,i;null==t||t.updateHover(),t===this._hoveredSource&&(this._hoveredSource=null),null==(i=null==(e=this._lastHoverDetails)?void 0:e.onHover)||i.call(e),this._lastHoverDetails=null}focus(t,e){var i;t.disableUserSelection||(t!==this._currentActive&&(null==(i=this._currentActive)||i.updateActive(!1)),t.updateActive(!0),this._currentActive=t,this._onFocus.fire({target:t,source:e}))}blur(t){null==t||t.updateActive(!1),t===this._currentActive&&(this._currentActive&&this._onBlur.fire(this._currentActive),this._currentActive=null)}reset(){const t=this._currentActive;this._currentPoint=null,this._currentCreating=null,this._currentActive=null,this._hoveredSource=null,this._currentEditing=null,this._pointEditing=null,this._pointCreating=null,t&&this._onBlur.fire(t)}isSelected(t){return t===this._currentActive}isHovered(t){return t===this._hoveredSource}}const hw="drawing.remove",uw="drawing.copy",dw="drawing.clone",pw="data-chartles-drawing",fw="_imgFileName_";const mw="_tool.image.parse",gw="tool.content.image",vw="tool.arrow.arrowMarkDown",yw="tool.arrow.arrowMarkUp",_w="tool.emoji",bw="tool.icon",ww="tool.line.horizontalLine",xw="tool.line.verticalLine",Sw="tool.measure",Tw="tool.projection.longPosition",Cw="tool.projection.shortPosition",Mw="tool.text.flagMark",Iw="tool.text.pin",Ew="tool.text.pinFixed",Aw="tool.text.text",Dw="tool.text.anchoredText",kw="tool.trade.preOrder";"undefined"!=typeof window&&((y=window.__svelte??(window.__svelte={})).v??(y.v=new Set)).add("5");var Pw={dragStart:!0},Ow={delay:0,distance:3},Rw=(t,e,i)=>Math.min(Math.max(t,e),i),Lw=t=>"string"==typeof t,Nw=(t,e)=>t.some((t=>e.some((e=>t.contains(e)))));function Fw(t,e){if(void 0===t)return;if(zw(t))return t.getBoundingClientRect();if("object"==typeof t){const{top:e=0,left:i=0,right:n=0,bottom:s=0}=t;return{top:e,right:window.innerWidth-n,bottom:window.innerHeight-s,left:i}}if("parent"===t)return e.parentNode.getBoundingClientRect();const i=document.querySelector(t);if(null===i)throw new Error("The selector provided for bound doesn't exists in the document.");return i.getBoundingClientRect()}var Bw=(t,e,i)=>t.style.setProperty(e,i),zw=t=>t instanceof HTMLElement,Vw=function(t,e={}){let i,n,{bounds:s,axis:r="both",gpuAcceleration:o=!0,legacyTranslate:a=!1,transform:l,applyUserSelectHack:c=!0,disabled:h=!1,ignoreMultitouch:u=!1,recomputeBounds:d=Pw,grid:p,threshold:f=Ow,position:m,cancel:g,handle:v,defaultClass:y="neodrag",defaultClassDragging:_="neodrag-dragging",defaultClassDragged:b="neodrag-dragged",defaultPosition:w={x:0,y:0},onDragStart:x,onDrag:S,onDragEnd:T}=e,C=!1,M=!1,I=0,E=!1,A=!1,D=0,k=0,P=0,O=0,R=0,L=0,{x:N,y:F}=m?{x:(null==m?void 0:m.x)??0,y:(null==m?void 0:m.y)??0}:w;Y(N,F);let B,z,V,$,H,K="",W=!!m;d={...Pw,...d},f={...Ow,...f??{}};let j=new Set;function U(t){C&&!M&&A&&E&&H&&(M=!0,X("neodrag:start",x,t),q.add(_),c&&(K=G.userSelect,G.userSelect="none"))}const G=document.body.style,q=t.classList;function Y(e=D,i=k){if(!l){if(a){let n=`${+e}px, ${+i}px`;return Bw(t,"transform",o?`translate3d(${n}, 0)`:`translate(${n})`)}return Bw(t,"translate",`${+e}px ${+i}px`)}const n=l({offsetX:e,offsetY:i,rootNode:t});Lw(n)&&Bw(t,"transform",n)}function X(e,i,n){const s=function(e){return{offsetX:D,offsetY:k,rootNode:t,currentNode:H,event:e}}(n);t.dispatchEvent(new CustomEvent(e,{detail:s})),null==i||i(s)}const Z=addEventListener,Q=new AbortController,J={signal:Q.signal,capture:!1};function tt(){let e=t.offsetWidth/z.width;return isNaN(e)&&(e=1),e}return Bw(t,"touch-action","none"),Z("pointerdown",(e=>{if(h)return;if(2===e.button)return;if(j.add(e.pointerId),u&&j.size>1)return e.preventDefault();if(d.dragStart&&(B=Fw(s,t)),Lw(v)&&Lw(g)&&v===g)throw new Error("`handle` selector can't be same as `cancel` selector");if(q.add(y),V=function(t,e){if(!t)return[e];if(zw(t))return[t];if(Array.isArray(t))return t;const i=e.querySelectorAll(t);if(null===i)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(i.values())}(v,t),$=function(t,e){if(!t)return[];if(zw(t))return[t];if(Array.isArray(t))return t;const i=e.querySelectorAll(t);if(null===i)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(i.values())}(g,t),i=/(both|x)/.test(r),n=/(both|y)/.test(r),Nw($,V))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const o=e.composedPath()[0];if(!V.some((t=>{var e;return t.contains(o)||(null==(e=t.shadowRoot)?void 0:e.contains(o))}))||Nw($,[o]))return;H=1===V.length?t:V.find((t=>t.contains(o))),C=!0,I=Date.now(),f.delay||(E=!0),z=t.getBoundingClientRect();const{clientX:a,clientY:l}=e,c=tt();i&&(P=a-N/c),n&&(O=l-F/c),B&&(R=a-z.left,L=l-z.top)}),J),Z("pointermove",(e=>{if(!C||u&&j.size>1)return;if(!M){if(E||Date.now()-I>=f.delay&&(E=!0,U(e)),!A){const t=e.clientX-P,i=e.clientY-O;Math.sqrt(t**2+i**2)>=f.distance&&(A=!0,U(e))}if(!M)return}d.drag&&(B=Fw(s,t)),e.preventDefault(),z=t.getBoundingClientRect();let r=e.clientX,o=e.clientY;const a=tt();if(B){const t={left:B.left+R,top:B.top+L,right:B.right+R-z.width,bottom:B.bottom+L-z.height};r=Rw(r,t.left,t.right),o=Rw(o,t.top,t.bottom)}if(Array.isArray(p)){let[t,e]=p;if(isNaN(+t)||t<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+e)||e<0)throw new Error("2nd argument of `grid` must be a valid positive number");let i=r-P,n=o-O;[i,n]=(([t,e],i,n)=>{const s=(t,e)=>0===e?0:Math.ceil(t/e)*e;return[s(i,t),s(n,e)]})([t/a,e/a],i,n),r=P+i,o=O+n}i&&(D=Math.round((r-P)*a)),n&&(k=Math.round((o-O)*a)),N=D,F=k,X("neodrag",S,e),Y()}),J),Z("pointerup",(e=>{j.delete(e.pointerId),C&&(M&&(Z("click",(t=>t.stopPropagation()),{once:!0,signal:Q.signal,capture:!0}),d.dragEnd&&(B=Fw(s,t)),q.remove(_),q.add(b),c&&(G.userSelect=K),X("neodrag:end",T,e),i&&(P=D),n&&(O=k)),C=!1,M=!1,E=!1,A=!1)}),J),{destroy:()=>Q.abort(),update:t=>{var e,i;r=t.axis||"both",h=t.disabled??!1,u=t.ignoreMultitouch??!1,v=t.handle,s=t.bounds,d=t.recomputeBounds??Pw,g=t.cancel,c=t.applyUserSelectHack??!0,p=t.grid,o=t.gpuAcceleration??!0,a=t.legacyTranslate??!1,l=t.transform,f={...Ow,...t.threshold??{}};const n=q.contains(b);q.remove(y,b),y=t.defaultClass??"neodrag",_=t.defaultClassDragging??"neodrag-dragging",b=t.defaultClassDragged??"neodrag-dragged",q.add(y),n&&q.add(b),W&&(N=D=(null==(e=t.position)?void 0:e.x)??D,F=k=(null==(i=t.position)?void 0:i.y)??k,Y())}}};function $w(t){const e=Gd(jo),i=e=>e.get(t);return e?e.invokeWithinContext(i):Gd(Ko).invokeFunction(i)}var Hw=ym('<div class="toolbar svelte-1t62qsn"><div class="handle svelte-1t62qsn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 12" width="8" height="12" fill="currentColor"><rect width="2" height="2" rx="1"></rect><rect width="2" height="2" rx="1" y="5"></rect><rect width="2" height="2" rx="1" y="10"></rect><rect width="2" height="2" rx="1" x="6"></rect><rect width="2" height="2" rx="1" x="6" y="5"></rect><rect width="2" height="2" rx="1" x="6" y="10"></rect></svg></div>     <button class="button svelte-1t62qsn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M18 7h5v1h-2.01l-1.33 14.64a1.5 1.5 0 0 1-1.5 1.36H9.84a1.5 1.5 0 0 1-1.49-1.36L7.01 8H5V7h5V6c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v1Zm-6-2a1 1 0 0 0-1 1v1h6V6a1 1 0 0 0-1-1h-4ZM8.02 8l1.32 14.54a.5.5 0 0 0 .5.46h8.33a.5.5 0 0 0 .5-.46L19.99 8H8.02Z"></path></svg></button></div>');const Kw={hash:"svelte-1t62qsn",code:'.toolbar.svelte-1t62qsn {height:38px;position:absolute;display:flex;flex-direction:row;background-color:var(--cl-background);border-radius:6px;box-shadow:0 2px 4px 0 var(--cl-dialog-shadow);z-index:4;}.handle.svelte-1t62qsn {width:24px;display:flex;justify-content:center;align-items:center;color:var(--cl-handle-foreground);cursor:grab;}.button.svelte-1t62qsn {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;height:100%;width:38px;}\n@media (hover: hover) and (pointer: fine) {.button.svelte-1t62qsn:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n} .toolbar .row {height:32px;font-size:14px;padding:0 10px 0 8px;white-space:nowrap;display:flex;align-items:center;color:var(--cl-listItem-foreground);background:var(--cl-listItem-background);} .toolbar .row:hover {background-color:var(--cl-listItem-hoverBackground);} .toolbar .row.selected {background-color:var(--cl-listItem-selectedBackground);color:var(--cl-listItem-selectedForeground);}'};function Ww(t,e){Yd(e,!0),Vm(t,Kw);const i=ee($w(Go).getDomElement()).getBoundingClientRect();let n=Jd({x:i.x+i.width/2,y:i.y+15});const s={bounds:"body",applyUserSelectHack:!0,handle:".handle",position:n,onDrag:({offsetX:t,offsetY:e})=>{Object.assign(n,{x:t,y:e})}};var r=xm(),o=cp(r),a=t=>{var i=Hw();hp(lp(i),2).__click=function(...t){var i;null==(i=e.onRemove)||i.apply(this,t)},$m(i,((t,e)=>null==Vw?void 0:Vw(t,e)),(()=>s)),Sm(t,i)};Am(o,(t=>{e.visible&&t(a)})),Sm(t,r),Xd()}pm(["click"]);var jw=Object.getOwnPropertyDescriptor,Uw=(t,e)=>(i,n)=>e(i,n,t);let Gw=class extends he{constructor(t,e,i,n,s,r){super(),x(this,"_userShapesOptions",new Map),x(this,"_toolPrimitives",new Map),x(this,"_hiddenToolPrimitives",new Map),x(this,"_toolHitTestObjects",new Map),x(this,"_pendingToolHitTestObjects",new Map),x(this,"_series",new Map),x(this,"_seriesHitTestObjects",new Map),x(this,"_pendingSeriesHitTestObjects",new Map),x(this,"_currentDrag"),x(this,"_demoHighlight"),x(this,"_toolbar",null),x(this,"_visible",!0),this.chartService=t,this.chartManagementService=e,this.toolService=i,this.guiService=n,this.commandService=s;let o=null;const a=t.getModel();this._register(a.onFocus((({target:t,source:e})=>{var i;null==o||o(),(null==(i=t.isTool)?void 0:i.call(t))&&(o=q_((()=>{a.currentActive!==t||t.disableUserSelection||t.disableToolbar||e!==lw.select||this.lazyToolbar().update({visible:!0}),o=null}),16))}))),this._register(a.onBlur((()=>{var t;null==o||o(),o=null,null==(t=this._toolbar)||t.update({visible:!1})}))),this._register(t.onChartBlur((()=>{a.currentActive&&a.blur(a.currentActive)}))),this._register(t.onCrosshairMove((t=>{var i;a.setCurrentPoint(t.point?new rb(t.localX,t.localY):null);const n=e.getDefaultPaneCursor();if(Rg(n)&&!this._demoHighlight&&t.point){const e=ee(t.paneIndex),i=ee(this.chartService.getPane(e));this._demoHighlight=new Mb({x:t.point.x,y:t.point.y,radius:18,background:wb},(()=>{this._demoHighlight&&(null==i||i.detachPrimitive(this._demoHighlight))})),i.attachPrimitive(this._demoHighlight)}if(!this._demoHighlight||Rg(n)&&t.point||(this._demoHighlight.detach(),this._demoHighlight=void 0),this._currentDrag)return;if(!t.point)return void a.unhover(a.currentHovered);const{x:s,y:r}=t.point;null==(i=this._demoHighlight)||i.updateData({x:s,y:r});const o=this._hitTest(s,r,t);if(!o)return void a.unhover(a.currentHovered);if(a.currentCreating||a.currentEditing)return;const{primitiveId:l,hitTestResult:c}=o,h=this._toolPrimitives.get(l);h&&a.setHoveredSource(h,c),Lg(n,Og.eraser)||this._updateCursor(c,!1)}))),this._register(t.onClick((t=>{var i,n,s;if(null==(i=t.sourceEvent)?void 0:i.shiftKey){const e=ee(t.paneIndex),i=ee(yb(this.chartService,t.localX,{useExtended:!0})),n=ee(ee(this.chartService.getPaneSeries(e)).coordinateToPrice(t.localY));return void this.commandService.executeCommand(Sw,{preset:{chartService:this.chartService,paneIndex:0,props:{points:[{time:i,price:n}]}}})}const r=this._hitTest(t.localX,t.localY,t);if(!r)return void(a.currentActive&&a.blur(a.currentActive));const o=this._toolPrimitives.get(r.primitiveId);var l;o&&(Lg(e.getDefaultPaneCursor(),Og.eraser)?this.detachToolPrimitive(o):(a.currentActive===o&&((l=r.hitTestResult.details)&&"areaName"in l&&l.areaName===pb.Text)&&ee(o.asTextToolPrimitive()).startTextEditing(),a.focus(o,lw.select),r.hitTestResult.details&&(null==(s=(n=r.hitTestResult.details).onClick)||s.call(n,{target:o,details:r.hitTestResult.details,x:t.localX,y:t.localY}))));const c=this._series.get(r.primitiveId);c&&a.focus(c,lw.select)}))),this._register(t.onMouseDragStart((()=>{var t;(null==(t=this.toolService.activeTool)?void 0:t.type)!==Sw&&this._clearMeasure();const e=this.chartService.chartApi.getCrosshairPosition();if(!_b(e))return;const n=this._hitTest(e.x,e.y);if(!n)return;const{primitiveId:s,hitTestResult:r}=n,o=this._toolPrimitives.get(s);if(!o)return;const l=ee(this.chartService.chartApi.timeScale().coordinateToTimeEx(e.x)),c=ee(e.paneIndex),h=ee(this.chartService.getPaneSeries(c)),u=ee(h.coordinateToPrice(e.y));this._currentDrag={primitive:o,hitTestResult:r,points:nu(o.controlPoints),startX:e.x,startTime:l,startY:e.y,startPrice:u,takeEffect:!1,series:h,editScope:i.acquireToolScope({useMagnet:r.target===db.ChangePoint,isDrawing:!0})},a.setHoveredSource(o,r),this._disableDefaultDrag(),this._updateCursor(r,!0)}))),this._register(t.onMouseDrag((t=>{var e,i,n,s,r;if(!this._currentDrag)return;this._updateCursor(this._currentDrag.hitTestResult,!0);const o=this.chartService.chartApi.getCrosshairPosition();if(!this._currentDrag.takeEffect){if(ib(o.x,o.y,this._currentDrag.startX,this._currentDrag.startY)<5)return;this._currentDrag.takeEffect=!0,null==(i=(e=this._currentDrag.primitive).onDragStart)||i.call(e,this._currentDrag.hitTestResult),null==(s=null==(n=this._currentDrag.hitTestResult.details)?void 0:n.onDragStart)||s.call(n,{target:this._currentDrag.primitive,details:this._currentDrag.hitTestResult.details,x:t.localX,y:t.localY}),a.focus(this._currentDrag.primitive,lw.drag),null==(r=this._toolbar)||r.update({visible:!1})}const l=new rb(o),c=this._currentDrag.hitTestResult.details;let h,u;if(fb(c)&&(a.markPointEditingStarted(this._currentDrag.primitive,c.componentIndex),hb(c.resizeDirections)||(h=this._currentDrag.startTime),ub(c.resizeDirections)||(u=this._currentDrag.startPrice)),void 0===h&&(h=yb(this.chartService,o.x,{clamp:!0,useExtended:!this._currentDrag.primitive.disableExtendTime})),void 0===u){const t=Z_(o.y,0,this._currentDrag.series.getPane().getHeight());u=ee(this._currentDrag.series.coordinateToPrice(t))}this._currentDrag.primitive.updateDrag(this._currentDrag.hitTestResult.target,this._currentDrag.points,this._currentDrag.startTime,h,this._currentDrag.startPrice,u,l,this._currentDrag.hitTestResult.details,{shiftkey:t.shiftKey})}))),this._register(t.onMouseDrop((t=>{var e,i,n;if((null==(e=this._currentDrag)?void 0:e.takeEffect)&&this._currentDrag.primitive){const e=this.chartService.chartApi.getCrosshairPosition(),{_currentDrag:s}=this,r=new rb(e),o=this._currentDrag.hitTestResult.details;let l,c;if(fb(o)&&(a.markPointEditingStarted(this._currentDrag.primitive,o.componentIndex),hb(o.resizeDirections)||(l=this._currentDrag.startTime),ub(o.resizeDirections)||(c=this._currentDrag.startPrice)),void 0===l&&(l=yb(this.chartService,e.x,{clamp:!0,useExtended:!this._currentDrag.primitive.disableExtendTime})),void 0===c){const t=Z_(e.y,0,this._currentDrag.series.getPane().getHeight());c=ee(this._currentDrag.series.coordinateToPrice(t))}this._currentDrag.primitive.updateDrag(this._currentDrag.hitTestResult.target,this._currentDrag.points,this._currentDrag.startTime,l,this._currentDrag.startPrice,c,r,this._currentDrag.hitTestResult.details,{shiftkey:t.shiftKey}),null==(n=null==(i=null==s?void 0:s.hitTestResult.details)?void 0:i.onDrop)||n.call(i,{target:s.primitive,details:s.hitTestResult.details,x:e.x,y:e.y,price:c,time:l}),s.primitive.disableUserSelection||s.primitive.disableToolbar||this.lazyToolbar().update({visible:!0})}this._resetDragStatus()}))),this._register(t.onMouseDropCanceled((()=>{this._resetDragStatus()}))),this._register(t.onDrawingsVisibility((t=>{this._visible!==t&&(this._visible=t,a.reset(),t?(ie(!this._toolPrimitives.size),this._toolPrimitives=this._hiddenToolPrimitives,this._hiddenToolPrimitives=new Map,this._toolPrimitives.values().forEach((t=>{t.reAttach()}))):(ie(!this._hiddenToolPrimitives.size),this._hiddenToolPrimitives=this._toolPrimitives,this._toolPrimitives=new Map,this._toolHitTestObjects.clear(),this._pendingToolHitTestObjects.clear(),this._hiddenToolPrimitives.values().forEach((t=>{t.detach()}))))}))),this._register(r.onPaste((t=>{this.handlePaste(t)}))),this._register(t.onMouseUp((t=>{var e,i;if(2!==t.originEvent.button)return;const n=this._hitTest(t.localX,t.localY);if(!n)return;const s=this._toolPrimitives.get(n.primitiveId);s&&(null==(i=null==(e=n.hitTestResult.details)?void 0:e.onContextMenu)||i.call(e,{target:s,details:n.hitTestResult.details,x:t.localX,y:t.localY}))})))}lazyToolbar(){return this._toolbar||this._register(this._toolbar=this.guiService.showComponent({Component:Ww,props:{visible:!1,...this.getToolbarHandlers()}})),this._toolbar}dispose(){super.dispose(),this._toolPrimitives.values().forEach((t=>t.detach())),this._toolPrimitives.clear(),this._hiddenToolPrimitives.values().forEach((t=>t.detach())),this._hiddenToolPrimitives.clear(),this._toolHitTestObjects.clear(),this._pendingToolHitTestObjects.clear()}handlePaste(t){var e;const i=function(t){if(!t)return;if(-1===t.slice(0,1024).indexOf(pw))return;const e=(new DOMParser).parseFromString(t,"text/html").querySelector(`[${pw}]`);if(e)try{return JSON.parse(e.getAttribute(pw)??"")}catch{}}(t.html),n=null==(e=t.files)?void 0:e.filter((t=>t.type.startsWith("image")));if(n&&n.length)for(const s of n){const t=Reflect.get(i??{},fw);this._pasteImage(s,t===s.name?i??void 0:void 0)}i&&i.type!==gw&&this._pasteFragment(i)}getToolbarHandlers(){return{onRemove:()=>{this.commandService.executeCommand(hw)},onLock:()=>{},onCopy:()=>{this.commandService.executeCommand(uw)},onClone:()=>{this.commandService.executeCommand(dw)}}}_updateCursor(t,e){const i=t.details;if(fb(i)){const{resizeDirections:t}=i;if(ub(n=t)&&hb(n)&&!i.cursorType)return void this.chartService.showPaneCursor(Og.arrow);if(hb(t)&&!i.cursorType)return void this.chartService.showPaneCursor(Og.ew);if(ub(t)&&!i.cursorType)return void this.chartService.showPaneCursor(Og.ns)}var n;(null==i?void 0:i.cursorType)?this.chartService.showPaneCursor(i.cursorType):e?this.chartService.showPaneCursor(Og.grabbing):t.target!==db.ChangePoint?t.target!==db.MovePoint&&t.target!==db.Regular||this.chartService.showPaneCursor(Og.pointer):this.chartService.showPaneCursor(Og.arrow)}_resetDragStatus(){var t,e,i;this._currentDrag&&(this._enableDefaultDrag(),null==(t=this._currentDrag.editScope)||t.dispose(),this._currentDrag.takeEffect&&(null==(i=(e=this._currentDrag.primitive).onDragEnd)||i.call(e,this._currentDrag.hitTestResult),this.chartService.showPaneCursor(Og.pointer),fb(this._currentDrag.hitTestResult.details)&&this.chartService.getModel().markPointEditingFinishedOrAborted()),this._currentDrag=void 0)}_disableDefaultDrag(){this.chartService.chartApi.applyOptions({handleScale:!1,handleScroll:!1,crosshair:{horzLine:{visible:!1,labelVisible:!1},vertLine:{visible:!1,labelVisible:!1}}})}_enableDefaultDrag(){this.chartService.chartApi.applyOptions({handleScale:!0,handleScroll:!0,crosshair:{horzLine:{visible:!0,labelVisible:!0},vertLine:{visible:!0,labelVisible:!0}}})}_hitTest(t,e,i){const{paneIndex:n}=this.chartService.chartApi.getCrosshairPosition();if(z(n))return null;const s=new rb(t,e),r={mediaSize:{width:this.chartService.chartApi.timeScale().width(),height:this.chartService.mainSeriesApi.getSeries().getPane().getHeight()}},{currentActive:o}=this.chartService.getModel();if(o&&o.paneIndex()===n){const t=this._toolHitTestObjects.get(o.id)??[];for(let e=t.length-1;e>=0;e--){const i=t[e].hitTest(s,r);if(i)return{hitTestResult:i,primitiveId:o.id}}}for(const[a,l]of this._toolHitTestObjects.entries()){if(ee(this._toolPrimitives.get(a)).paneIndex()===n)for(let t=l.length-1;t>=0;t--){const e=l[t].hitTest(s,r);if(e)return{hitTestResult:e,primitiveId:a}}}for(const[a,l]of this._seriesHitTestObjects.entries()){if(ee(this._series.get(a)).paneIndex()===n)for(let t=l.length-1;t>=0;t--){const e=l[t].hitTest(s,r);if(e)return{hitTestResult:e,primitiveId:a}}}return(null==i?void 0:i.hoveredSeries)?{hitTestResult:new mb(db.Regular),primitiveId:this.chartService.mainSeriesApi.id}:null}_pasteFragment(t){const e=this.chartService.chartApi.timeScale().width(),i=this.chartService.mainSeriesApi.getSeries().getPane().getHeight(),n=this.chartService.chartApi.timeScale().coordinateToTimeEx(e/2);if(null===n)return;const s=this.chartService.mainSeriesApi.getSeries().coordinateToPrice(i/2);if(null===s)return;const{props:r}=t,o=n-r.points[0].time,a=s-r.points[0].price;r.points.forEach((t=>{t.time=t.time+o,t.price=t.price+a})),Reflect.deleteProperty(r,"id"),this.commandService.executeCommand(t.type,{source:kb.program,preset:{chartService:this.chartService,paneIndex:0,props:r}})}async _pasteImage(t,e){await this.toolService.switchTool(mw,kb.manual);const i=this.toolService.activeTool;if(e){const n=this.chartService.chartApi.timeScale().width(),s=this.chartService.mainSeriesApi.getSeries().getPane().getHeight(),r=this.chartService.chartApi.timeScale().coordinateToTimeEx(n/2);if(null===r)return;const o=this.chartService.mainSeriesApi.getSeries().coordinateToPrice(s/2);if(null===o)return;const a=e.props,l=r-a.points[0].time,c=o-a.points[0].price;a.points.forEach((t=>{t.time=t.time+l,t.price=t.price+c})),Reflect.deleteProperty(a,"id"),a.image=t,i.receivePresetProps({paneIndex:0,props:a})}else i.onImage(t)}_clearMeasure(){const t=Array.from(this._toolPrimitives.values().filter((t=>t.type===Sw)));for(;t.length;){const e=ee(t.pop());this.detachToolPrimitive(e)}}detachToolPrimitive(t){var e;ie(t);const i=t.id,n=this.chartService.getModel();n.currentHovered===t&&n.unhover(n.currentHovered),n.currentActive===t&&n.blur(n.currentActive),n.currentCreating===t&&n.markCreatingFinishedOrAborted(t),t===(null==(e=this._currentDrag)?void 0:e.primitive)&&this._resetDragStatus(),t.detach(),this._toolPrimitives.delete(i),this._toolHitTestObjects.delete(i),this._pendingToolHitTestObjects.delete(i),this.chartService.getStoreHandler().removeDrawingInfo(t.id)}attachToolPrimitive(t,e){ie(!this._toolPrimitives.has(t.id)),ie(t.isAttached),t.type===Sw&&this._clearMeasure(),this._visible||this.chartManagementService.setHideBits(0),this._toolPrimitives.set(t.id,t),this.chartService.getStoreHandler().addDrawingInfo({id:t.id}),e&&!t.disableUserSelection&&this.chartService.getModel().focus(t,lw.select)}detachToolPrimitiveById(t){const e=this._toolPrimitives.get(t);e&&this.detachToolPrimitive(e)}getToolPrimitiveById(t){return this._toolPrimitives.get(t)??null}collectToolHitTestObjects(t,e){var i;if(!e)return;const n=ee(this._toolPrimitives.get(t));if(this.chartService.getModel().currentCreating===n)return;if(null==(i=this._userShapesOptions.get(t))?void 0:i.disableSelection)return;this._pendingToolHitTestObjects.has(t)||this._pendingToolHitTestObjects.set(t,[]);const s=ee(this._pendingToolHitTestObjects.get(t));Array.isArray(e)?s.push(...e):s.push(e),Mt((()=>{if(!this._toolPrimitives.has(t))return;const e=ee(this._pendingToolHitTestObjects.get(t));e.length&&(this._toolHitTestObjects.set(t,e),this._pendingToolHitTestObjects.set(t,[]))}))}onSeriesCreated(t,e){this._series.set(t,e)}onSeriesRemoved(t){this._series.delete(t),this._seriesHitTestObjects.delete(t),this._pendingSeriesHitTestObjects.delete(t)}collectSeriesHitTestObjects(t,e){if(!e)return;this._pendingSeriesHitTestObjects.has(t)||this._pendingSeriesHitTestObjects.set(t,[]);const i=ee(this._pendingSeriesHitTestObjects.get(t));Array.isArray(e)?i.push(...e):i.push(e),Mt((()=>{if(!this._series.has(t))return;const e=ee(this._pendingSeriesHitTestObjects.get(t));e.length&&(this._seriesHitTestObjects.set(t,e),this._pendingSeriesHitTestObjects.set(t,[]))}))}removeAll(){this._toolPrimitives.values().forEach((t=>{t.detach()})),this.chartService.getStoreHandler().removeAllDrawingInfos(),this._toolPrimitives.clear(),this._hiddenToolPrimitives.clear(),this._toolHitTestObjects.clear(),this._pendingToolHitTestObjects.clear(),this.chartService.getModel().reset()}async createShape(t,e){var i;const n={arrow_up:yw,arrow_down:vw,flag:Mw,vertical_line:xw,horizontal_line:ww,long_position:Tw,short_position:Cw,icon:bw,emoji:_w,text:Aw,anchored_text:Dw,note:Iw,anchored_note:Ew},s=await this.commandService.executeCommand(n[e.shape],{source:kb.program,preset:{chartService:this.chartService,paneIndex:0,props:t?{points:[t],...e.overrides}:{...e.overrides}}});(null==(i=this.chartService.getModel().currentActive)?void 0:i.id)===s&&this.chartService.getModel().reset();const r=ee(s);return this._userShapesOptions.set(r,{disableSelection:e.disableSelection}),r}removeEntity(t){this._userShapesOptions.delete(t);const e=this._toolPrimitives.get(t);e&&this.detachToolPrimitive(e)}};Gw=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?jw(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([Uw(0,jo),Uw(1,Go),Uw(2,Ab),Uw(3,Eb),Uw(4,Jo),Uw(5,Ib)],Gw);class qw{constructor(){x(this,"completeCallback"),x(this,"errorCallback"),x(this,"outcome"),x(this,"p"),this.p=new Promise(((t,e)=>{this.completeCallback=t,this.errorCallback=e}))}get isRejected(){var t;return 1===(null==(t=this.outcome)?void 0:t.outcome)}get isResolved(){var t;return 0===(null==(t=this.outcome)?void 0:t.outcome)}get isSettled(){return!!this.outcome}get value(){var t,e;return 0===(null==(t=this.outcome)?void 0:t.outcome)?null==(e=this.outcome)?void 0:e.value:void 0}complete(t){return new Promise((e=>{this.completeCallback(t),this.outcome={outcome:0,value:t},e()}))}error(t){return new Promise((e=>{this.errorCallback(t),this.outcome={outcome:1,value:t},e()}))}}class Yw extends he{constructor(){super(),x(this,"_onPaneTooltipRequested",this._register(new dl)),x(this,"onPaneTooltipRequested",this._onPaneTooltipRequested.event),x(this,"_onPaneTooltipCancelled",this._register(new dl)),x(this,"onPaneTooltipCancelled",this._onPaneTooltipCancelled.event),x(this,"store"),x(this,"instanceMap",new Map),x(this,"apiMap",new Map),this.store=Eg({components:[]}),this._register(le((()=>{this.instanceMap.clear(),this.apiMap.clear()})))}showPaneTooltip(t){this._onPaneTooltipRequested.fire(t)}hidePaneTooltip(){this._onPaneTooltipCancelled.fire()}showComponent(t){const e=de();this.store.update((i=>(i.components.push({id:e,Component:t.Component,props:t.props}),i)));const i=new qw,n={dispose:()=>{this.store.update((t=>{const i=t.components.findIndex((t=>t.id===e));return-1!==i&&t.components.splice(i,1),{...t}})),this.apiMap.delete(e)},update:t=>{this.store.update((i=>{const n=i.components.find((t=>t.id===e));if(!n)return i;return Object.keys(t).every((e=>n.props[e]===t[e]))?i:(Object.assign(n.props,t),{...i})}))},getInstance:()=>this.instanceMap.get(e),promise:i,get mounted(){return i.p}};return this.apiMap.set(e,n),n}onComponentMounted(t,e){ee(this.apiMap.get(t)).promise.complete(void 0),this.instanceMap.set(t,e)}}const Xw=1440,Zw=[1,2,3,4,5,6,7];function Qw(t){return t.getUTCFullYear()}function Jw(t){return t.getUTCMonth()}function tx(t){return t.getUTCDate()}function ex(t){return t.getUTCDay()+1}function ix(t){return t.getDay()+1}function nx(t){const e=Zw.indexOf(t);return Zw[e+1]??Zw[0]}function sx(t){return 60*t.getHours()+t.getMinutes()}function rx(t,e,i,n,s){t.setHours(e),t.setMinutes(i),t.setSeconds(n),t.setMilliseconds(s)}function ox(t,e){t.setTime(t.getTime()+6e4*e)}function ax(t){return lx(t,2)}function lx(t,e=2){const i=t.toString(),n=Math.max(0,e-i.length);return"0".repeat(n)+i}class cx{constructor(t,e,i){x(this,"year"),x(this,"month"),x(this,"day"),this.year=t,this.month=e,this.day=i}toString(){return`${lx(this.year,4)}-${ax(this.month)}-${ax(this.day)}`}toyyyymmdd(){return`${lx(this.year,4)}${ax(this.month)}${ax(this.day)}`}compareTo(t){return this.year>t.year||this.year===t.year&&this.month>t.month||this.year===t.year&&this.month===t.month&&this.day>t.day?1:this.year===t.year&&this.month===t.month&&this.day===t.day?0:-1}before(t){return-1===this.compareTo(t)}toCalendar(){return function(t,e,i,n=0,s=0,r=0){return new Date(Date.UTC(t,e,i,n,s,r))}(this.year,this.month-1,this.day)}firstDayOfYear(){return new cx(this.year,1,1)}static fromCalendar(t){return new cx(Qw(t),Jw(t)+1,tx(t))}}const hx=[2,3,4,5,6],ux=[0,31,28,31,30,31,30,31,31,30,31,30,31];function dx(t){for(;t>1440;)t-=1440;const e=t%60;return Math.floor((t-e)/60)+":"+e}let px=null;function fx(){return px||(px=Zw.reduce(((t,e)=>{const i=e<7?e+1:1,n=new Date(2018,0,e).toLocaleString(window.navigator.language,{weekday:"short"});return t[i]=n,t}),{}),px)}class mx{constructor(t,e,i){x(this,"_dayOfWeek"),x(this,"_start"),x(this,"_length"),ie(Number.isFinite(t)&&Number.isFinite(e)&&Number.isFinite(i),"Invalid arguments"),this._dayOfWeek=t,this._start=e,this._length=i}start(){return this._start+Xw*this.sessionStartDaysOffset()}end(){const t=this.start()+this.length();return t>Xw?t%Xw:t}startOffset(){return this._start}sessionStartDaysOffset(){return this._start>=0?0:this._start%Xw==0?-Math.ceil(this._start/Xw):-Math.floor(this._start/Xw)}isOvernight(){return this._start<0}dayOfWeek(){return this._dayOfWeek}sessionStartDayOfWeek(){let t=this._dayOfWeek-this.sessionStartDaysOffset();return t<1&&(t+=7),t}length(){return this._length}compareTo(t){const e=this._weight(),i=e+this._length,n=t._weight(),s=n+t._length;return e<=n&&n<i||n<=e&&e<s?0:e>n?1:-1}containsUTC(t){const e=function(t){return function(t){return 60*function(t){return t.getUTCHours()}(t)+function(t){return t.getUTCMinutes()}(t)}(t)}(t),i=ex(t);return this._contains(e,i)}containsZoned(t){const e=sx(t);const i=ix(t);return this._contains(e,i)}_weight(){return this._dayOfWeek*Xw+this._start}_contains(t,e){let i=e-this._dayOfWeek;i>0&&(i-=7);const n=i*Xw+t;return n>=this._start&&n<this._start+this._length}toString(){const t=this.sessionStartDayOfWeek(),e=this.sessionStartDaysOffset();let i=t+(e===this.sessionStartDaysOffset()+this.length()?0:e);for(;i>7;)i-=7;const n=t!==this.dayOfWeek()||i!==this.dayOfWeek(),s=n?fx()[t]:"",r=n?fx()[i]:"";return`${dx(this.start())}/${s}-${dx(this.start()+this.length())}/${r}`}}function gx(t,e){return t.compareTo(e)}class vx{constructor(t,e,i,n){x(this,"_entriesList"),x(this,"_entriesByDay"),x(this,"_firstDayOfWeek"),x(this,"_weekEndsCount"),this._entriesList=t,this._entriesByDay=e,this._firstDayOfWeek=i,this._weekEndsCount=n}firstDayOfWeek(){return this._firstDayOfWeek}entriesByDay(){return this._entriesByDay}entryOfDay(t){return this._entriesByDay.get(t)??null}list(){return this._entriesList}isWeekEnd(t){return!this._entriesByDay.has(t)}weekEndsCount(){return this._weekEndsCount}}class yx{constructor(t,e,i){x(this,"_startDay"),x(this,"_specEndDay"),x(this,"_entries"),this._startDay=t,this._specEndDay=e,this._entries=i}getEntries(){return this._entries}getStartDay(){return this._startDay}getSpecEndDay(){return this._specEndDay}isOpenEnded(){return null==this._specEndDay}}class _x{constructor(){x(this,"historyEntries",[]),x(this,"timezone",""),x(this,"hasHistoryCorrections",!1),x(this,"adjustSessionsIndexes",null),x(this,"_firstDayOfWeek",null)}parseSessions(t,e){this._parseHistoryEntries(t,e,!1)}parseSessionsAndValidateDateTime(t,e){this._parseHistoryEntries(t,e,!0)}static parseHolidaysAndCorrections(t,e,i,n){return this._parseHolidaysAndCorrectionsImpl(t,e,i,n)}static parseHolidaysAndCorrectionsAndValidateDateTime(t,e,i){return this._parseHolidaysAndCorrectionsImpl(t,e,i,!0)}_clearAll(){this.timezone="",this.historyEntries=[],this.adjustSessionsIndexes=[]}_parseHistoryEntries(t,e,i){this._clearAll();const n=e.split("/");let s=null;this.hasHistoryCorrections=n.length>1;for(let r=0;r<n.length;r++){const e=n[r].split("#");let o;if(r!==n.length-1){if(2!==e.length)throw new Error(`bad session history entry definition: ${n[r]}`);o=_x._parseDay(e[1],"session history entry end",i).toCalendar()}else{if(1!==e.length)throw new Error(`bad session history entry definition: ${n[r]}`);o=null}if(null!==s&&null!==o&&o.getTime()<s.getTime())throw new Error(`history sessions are not listed in ascending order (${s} -> ${o})`);const a=this._parseSessionsImpl(t,e[0],i),l=this._adjustStartToPreviousSession(a.firstDayOfWeek()),c=new yx(l,o,a);this.historyEntries.push(c),s=o}}_parseSessionsImpl(t,e,i){this.timezone=t,e=this._parseFirstDayOfWeek(e);const n=new Map,s=[];if("24x7"===e.toLowerCase())for(const a of Zw){const t=_x._createSessionEntry(a,0,0,0,0);s.push(t),n.set(a,[t])}else{let t=!1;const r=new Map;for(const i of e.split("|")){const e=i.split(":").filter(Boolean);if(1!==e.length&&2!==e.length)throw new Error(`bad session section: ${i}`);const n=1===e.length;if(n){if(t)throw new Error(`duplicated default section: ${i}`);t=!0}const s=n?hx:_x._parseWorkingDays(e[1]);for(const t of s)n&&r.has(t)||r.set(t,e[0])}for(const e of Zw){const t=r.get(e);if(void 0!==t)for(const r of t.split(",").filter(Boolean)){const t=_x._parseSessionEntry(e,r,i),o=n.get(e)??[];o.push(t),s.push(t),n.set(e,o)}}}s.sort(gx);const r=new Set;for(const a of s)r.add(a.dayOfWeek());const o=7-r.size;return new vx(s,n,ee(this._firstDayOfWeek),o)}_parseFirstDayOfWeek(t){const e=t.split(";");if(this._firstDayOfWeek=2,e.length>2)throw new Error(`bad sessions spec: ${t}`);if(1===e.length)return t;let i=1,n=e[0].includes("-")?NaN:parseInt(e[0]);if(isNaN(n)&&(i=0,n=parseInt(e[1])),n<1||n>7)throw new Error(`bad sessions spec: ${t}`);return this._firstDayOfWeek=n,e[i]}_adjustStartToPreviousSession(t){if(0===this.historyEntries.length)return null;const e=ee(this.historyEntries[this.historyEntries.length-1].getSpecEndDay()),i=t-ex(e);if(0===i)return e;let n=$y(new Date(e.getTime()),{days:i});return n.getTime()<=e.getTime()&&(n=$y(n,{days:7})),n}static _parseSessionEntry(t,e,i){const n=e.split("-");if(2!==n.length)throw new Error(`bad session entry: ${e}`);let s=0,r=n[0];if(r.includes("F")){const t=r.split("F");r=t[0],s=""!==t[1]?parseInt(t[1]):1}let o=0,a=n[1];if(a.includes("F")){const t=a.split("F");a=t[0],o=""!==t[1]?parseInt(t[1]):1}const l=this._minutesFromHHMM(r,e,i),c=this._minutesFromHHMM(a,e,i);return this._createSessionEntry(t,l,c,s,o)}static _minutesFromHHMM(t,e,i){if(4===t.length&&/^[0-9]+$/.test(t)){const e=parseInt(t),n=Math.trunc(e/100),s=e%100;if(!i||n<24&&s<60)return 60*n+s}throw new Error(`incorrect entry syntax: ${e}`)}static _parseDay(t,e,i){if(8===t.length&&/^[0-9]+$/.test(t)){const e=parseInt(t.substring(0,4)),n=parseInt(t.substring(4,6)),s=parseInt(t.substring(6,8));if(!i||this._isValidDayOfMonth(s,n,e))return new cx(e,n,s)}throw new Error(`bad ${e} date: ${t}`)}static _isValidDayOfMonth(t,e,i){return!(e<1||e>12||t<1||t>ux[e])||!(2!==e||29!==t||!function(t){return t%4==0&&(t%100!=0||t%400==0)}(i))}static _parseWorkingDays(t){const e=[];for(let i=0;i<t.length;i++){const n=t.charCodeAt(i)-48;if(n<1||n>7)throw new Error(`Invalid days specification: ${t}`);e.includes(n)||e.push(n)}return e}static _createSessionEntry(t,e,i,n,s){ie(n>=0&&n<7),ie(s>=0&&s<7),0===i&&(i=Xw),n===s&&i<=e&&n++,ie(n>=s),n>0&&(e-=n*Xw),s>0&&(i-=s*Xw);const r=i-e;return ie(t>=1&&t<=7),ie(e<Xw),ie(r>0),new mx(t,e,r)}static _parseHolidaysAndCorrectionsImpl(t,e,i,n){const s=new Map;if(""!==e){const t=[];for(const i of e.split(",")){const e=this._parseDay(i,"holiday",n);s.set(e,t)}}if(""===i)return s;for(const r of i.split(";")){const t=r.split(":");if(2!==t.length)throw new Error(`bad correction section: ${r}`);const e=t[0],i=t[1],o=[];if("dayoff"!==e)for(const s of e.split(",")){const t=this._parseSessionEntry(1,s,n);o.push(t)}for(const r of i.split(",")){const t=this._parseDay(r,"correction",n),e=ex(t.toCalendar()),i=o.map((t=>new mx(e,t.startOffset(),t.length())));s.set(t,i)}}return s}}class bx{constructor(t){x(this,"_value"),this._value=t}get(){return this._value}set(t){this._value=t}}class wx{constructor(t="Etc/UTC",e="0000-0000",i="",n="",s=!1){x(this,"_entries"),x(this,"_presentHistoryEntry"),x(this,"_holidayAndCorrectionMap"),x(this,"_entriesHash"),x(this,"_borderWeeksIndicesHash"),x(this,"_yearToWeeksIndicesHash"),x(this,"_weekIndicesOfLastHistoryWeek"),x(this,"_presentStartWeekIndex"),x(this,"_isThereCorrections");const r=new _x;s?r.parseSessionsAndValidateDateTime(t,e):r.parseSessions(t,e),this._entries=r.historyEntries,this._presentHistoryEntry=r.historyEntries[r.historyEntries.length-1],this._holidayAndCorrectionMap=s?_x.parseHolidaysAndCorrectionsAndValidateDateTime(t,i,n):_x.parseHolidaysAndCorrections(t,i,n,s),this._entriesHash=new Map;const o=this._prepareSessionsBorderParams();this._borderWeeksIndicesHash=o.borderWeeksIndicesHash,this._yearToWeeksIndicesHash=o.yearToWeeksIndicesHash,this._weekIndicesOfLastHistoryWeek=o.weekIndicesOfLastHistoryWeek,this._presentStartWeekIndex=o.startPresentSessionWeekIndex,this._isThereCorrections=!(""===i&&""===n&&null===this._weekIndicesOfLastHistoryWeek);for(const[a]of this._holidayAndCorrectionMap)q(a)}dump(){}_prepareSessionsBorderParams(){const t=new Map,e=new Map;let i=null;this._entries.length>1&&(i=Array.from({length:this._entries.length-1},(()=>0)));let n=0;for(let s=0;s<this._entries.length-1;s++){const r=ee(this._entries[s+1].getStartDay()),o=wx._getWeekIndexImpl(r);t.set(o,s+1),this._addToYearHash(e,r,o),this._entriesHash.set(o,new bx(null)),i&&(i[s]=o),n=o}return{borderWeeksIndicesHash:t,yearToWeeksIndicesHash:e,startPresentSessionWeekIndex:n,weekIndicesOfLastHistoryWeek:i}}_addToYearHash(t,e,i){const n=Qw(e);let s=t.get(n);void 0===s&&(s=[],t.set(n,s)),s.push(i)}getWeekIndex(t){return this._isThereCorrections?wx._getWeekIndexImpl(t):0}getEntriesForWeek(t){var e;if(!this._isThereCorrections)return this._presentHistoryEntry.getEntries();ie(t>=0);const i=this._entriesHash.get(t);if(void 0!==i){const t=i.get();if(null!==t)return t}let n;const s=this._borderWeeksIndicesHash.get(t);n=void 0===s?this._getHistoryAndIndexForWeek(t).getEntries():this._prepareBorderWeekHistory(s);const r=new Map(n.entriesByDay()),o=[...n.list()],a=this._weekIndexToLocalDateTime(t),l=this._weekIndexToLocalDateTime(t+1),c=cx.fromCalendar(a),h=cx.fromCalendar(l);for(const[p,f]of this._selectHolidays(c,h)){const t=ex(p.toCalendar()),e=f;o.filter((e=>e.dayOfWeek()!==t)).push(...e),0===e.length?r.delete(t):r.set(t,e)}o.sort(gx);const u=Zw.length-r.size,d=new vx(o,r,n.firstDayOfWeek(),u);return null==(e=this._entriesHash.get(t))||e.set(d),d}_selectHolidays(t,e){const i=new Set;for(const[n,s]of this._holidayAndCorrectionMap)n.compareTo(t)>=0&&n.compareTo(e)<0&&i.add([n,s]);return i}_prepareBorderWeekHistory(t){const e=this._entries[t-1],i=this._entries[t],n=new Map,s=[],r=ex(ee(i.getStartDay()));for(let a=0;a<Zw.length;a++){const t=Zw[a];if(t<r){const i=e.getEntries().entriesByDay().get(t);void 0!==i&&(s.push(...i),n.set(t,i))}else{const e=i.getEntries().entriesByDay().get(t);void 0!==e&&(s.push(...e),n.set(t,e))}}const o=i.getEntries().firstDayOfWeek();return new vx(s,n,o,0)}_weekIndexToLocalDateTime(t){const e=Math.floor(86400*t*7+86400-62167219200),i=new Date(1e3*e);var n,s,r,o,a;return s=0,r=0,o=0,a=0,(n=i).setUTCHours(s),n.setUTCMinutes(r),n.setUTCSeconds(o),n.setUTCMilliseconds(a),i}_getHistoryAndIndexForWeek(t){if(this._presentStartWeekIndex<=t)return this._presentHistoryEntry;const e=this._getIndexOfHistoryEntry(t);return this._entries[e]}_getIndexOfHistoryEntry(t){let e=0,i=this._entries.length-1,n=Math.floor((e+i)/2);for(ie(null!==this._weekIndicesOfLastHistoryWeek);;){if(this._weekIndicesOfLastHistoryWeek[n]>=t){if(i=n-1,i<e)return n}else if(e=n+1,i<e)return n+1;n=Math.floor((e+i)/2)}}static _getWeekIndexImpl(t){let e=function(t,e,i,n=0,s=0,r=0){return new Date(Date.UTC(t,e,i,n,s,r))}(Qw(t),Jw(t),1);e=$y(e,{days:tx(t)-ex(t)});const i=e.getTime()/1e3;ie((i+62167219200)%86400==0);const n=(i+62167219200)/86400;return Math.floor(n/7)}}var xx=(t=>(t[t.Main=0]="Main",t[t.Study=1]="Study",t[t.Compare=2]="Compare",t))(xx||{}),Sx=Object.defineProperty,Tx=Object.getOwnPropertyDescriptor,Cx=(t,e,i,n)=>{for(var s,r=n>1?void 0:n?Tx(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n?s(e,i,r):s(r))||r);return n&&r&&Sx(e,i,r),r},Mx=(t,e)=>(i,n)=>e(i,n,t);let Ix=class extends Lv{constructor(t,e,i,n,s){super(t,i.chartApi,n),x(this,"id",`main@${de()}`),x(this,"_series"),x(this,"_priceLineLastVisible",null),x(this,"_priceFormatter"),x(this,"_sessionsSpec",null),x(this,"_onDataLoaded",this._register(new dl)),x(this,"onDataLoaded",this._onDataLoaded.event),x(this,"_seriesDisposables",null),this.chartService=i,this.intlService=s,this.setChartType((null==e?void 0:e.state.style)??this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.style"),void 0,!0),this._registerListeners(),this.loadAll()}_registerListeners(){super._registerListeners(),this._register(le((()=>{var t;null==(t=this._seriesDisposables)||t.dispose()})))}isSeries(){return!0}updateActive(t){this.chartService.getStoreHandler().set("mainLegend",{...this.chartService.getStoreHandler().get("mainLegend"),selected:!!t}),this._chart.setSelectedSource(t?this._series:null),this._series.requestUpdate()}updateHover(){}_registerSeriesListeners(){this._seriesDisposables=new ce;const t=t=>{this._updatePriceLines(),this._onDataChanged.fire(t)},e=()=>{this._updatePriceLines()};this._series.subscribeDataChanged(t),this.chartService.getTimeScale().subscribeVisibleLogicalRangeChange(e),this._seriesDisposables.add(le((()=>{this._series.unsubscribeDataChanged(t),this.chartService.getTimeScale().unsubscribeVisibleLogicalRangeChange(e)})))}getSessionsSpec(){return this._sessionsSpec}getSeries(){return this._series}paneIndex(){return this._series.getPane().paneIndex()}getLastPrice(){return ee(Lu(this.data())).customValues.close}data(){return this._series.data()}symbol(){return this.chartService.getStoreHandler().get("symbol")}setSymbol(t){return this.chartService.getStoreHandler().set("symbol",t),this._series.setData([]),this.loadAll()}chartType(){return this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.style")}resolution(){return this.chartService.getStoreHandler().get("resolution")}setResolution(t){return this.chartService.getStoreHandler().set("resolution",t),this.loadAll()}setChartType(t,e,i=!1){var n;const s=this.chartService.getStoreHandler().get("chartProperties");if(s["mainSeriesProperties.style"]!==t)this.chartService.getStoreHandler().setChartProperty("mainSeriesProperties.style",t);else if(!i)return;this._priceLineLastVisible=null,null==(n=this._seriesDisposables)||n.dispose();const r=this._series,o=null==r?void 0:r.data().slice();let a=[];switch(r&&(a=r.primitives(),this._chart.removeSeries(r)),t){case tt.Bar:this._series=this._chart.addSeries(Oo,{priceScaleId:"right",upColor:s["mainSeriesProperties.barStyle.upColor"],downColor:s["mainSeriesProperties.barStyle.downColor"],openVisible:!s["mainSeriesProperties.barStyle.dontDrawOpen"],thinBars:s["mainSeriesProperties.barStyle.thinBars"]});break;case tt.Candle:this._series=this._chart.addSeries(No,{priceScaleId:"right",upColor:s["mainSeriesProperties.candleStyle.upColor"],downColor:s["mainSeriesProperties.candleStyle.downColor"],borderVisible:s["mainSeriesProperties.candleStyle.drawBorder"],borderColor:s["mainSeriesProperties.candleStyle.borderColor"],borderUpColor:s["mainSeriesProperties.candleStyle.borderUpColor"],borderDownColor:s["mainSeriesProperties.candleStyle.borderDownColor"],wickVisible:s["mainSeriesProperties.candleStyle.drawWick"],wickColor:s["mainSeriesProperties.candleStyle.wickColor"],wickUpColor:s["mainSeriesProperties.candleStyle.wickUpColor"],wickDownColor:s["mainSeriesProperties.candleStyle.wickDownColor"]});break;case tt.HollowCandle:this._series=this._chart.addSeries(zo,{priceScaleId:"right",upColor:s["mainSeriesProperties.hollowCandleStyle.upColor"],downColor:s["mainSeriesProperties.hollowCandleStyle.downColor"],borderVisible:s["mainSeriesProperties.hollowCandleStyle.drawBorder"],borderColor:s["mainSeriesProperties.hollowCandleStyle.borderColor"],borderUpColor:s["mainSeriesProperties.hollowCandleStyle.borderUpColor"],borderDownColor:s["mainSeriesProperties.hollowCandleStyle.borderDownColor"],wickVisible:s["mainSeriesProperties.hollowCandleStyle.drawWick"],wickColor:s["mainSeriesProperties.hollowCandleStyle.wickColor"],wickUpColor:s["mainSeriesProperties.hollowCandleStyle.wickUpColor"],wickDownColor:s["mainSeriesProperties.hollowCandleStyle.wickDownColor"]});break;case tt.Line:this._series=this._chart.addSeries(_o,{priceScaleId:"right",color:s["mainSeriesProperties.lineStyle.color"],lineStyle:s["mainSeriesProperties.lineStyle.linestyle"],lineWidth:s["mainSeriesProperties.lineStyle.linewidth"],lineType:Ie.Simple});break;case tt.Area:this._series=this._chart.addSeries(Co,{priceScaleId:"right",topColor:s["mainSeriesProperties.areaStyle.color2"],bottomColor:s["mainSeriesProperties.areaStyle.color1"],lineColor:s["mainSeriesProperties.areaStyle.linecolor"],lineStyle:s["mainSeriesProperties.areaStyle.linestyle"],lineType:Ie.Simple,lineWidth:s["mainSeriesProperties.areaStyle.linewidth"]});break;default:q()}a.forEach((t=>this._series.attachPrimitive(t))),o&&this._series.setData(this._mapBars(o)),this._updatePriceLines(),this._registerSeriesListeners(),null==e||e()}async loadAll(){this.chartService.getStoreHandler().set("dataStatus",Rv.startLoading);const t=await super.loadAll((t=>{this.chartService.getStoreHandler().set("dataStatus",Rv.symbolInfoResolved),this.chartService.getStoreHandler().set("symbolInfo",t),this._priceFormatter=new Si(t.pricescale??100,t.minmov??1),this._sessionsSpec=new wx(t.timezone,t.session)}),(t=>{const e=this.chartService.getStoreHandler();let i;if(e.set("dataStatus",Rv.error),L(t))i=t;else{const e=Symbol.keyFor(t)||"unknown error";i=this.intlService.isI18nKey(e)?this.intlService.t(e):e}e.set("error",{message:i})}));return t&&this._onDataLoaded.fire(),t}clearBars(){this._series.setData([])}setBars(t){this.chartService.getStoreHandler().set("dataStatus",Rv.dataLoaded),this._series.setData(this._mapBars(t))}setBar(t){const e=this._mapBar(t);this._series.update(e)}resetData(){return this._series.setData([]),this.chartService.getStoreHandler().set("dataStatus",Rv.startLoading),this.loadAll()}updateLegend(t){let e;if(e=t&&t.time?t.seriesData.get(this._series):Lu(this._series.data()),!e)return;const i=it(this.chartType()),n=this.priceFormatter(),s=this._series.data().findIndex((t=>t.time==e.time)),r=this._series.dataByIndex(s-1);if(i){const t=e,i=r?r.close:t.open,s=t.close-i,o=s/i*100,a=s>=0?"+":"";this.chartService.getStoreHandler().set("mainLegend",{open:n.format(t.open),high:n.format(t.high),low:n.format(t.low),close:n.format(t.close),value:"",change:`${a}${n.format(s)}(${a}${n.format(o)}%)`,color:t.color??"",selected:this.chartService.getStoreHandler().get("mainLegend").selected})}else{const t=e,i=r?r.value:t.value,s=t.value-i,o=s/i*100,a=s>=0?"+":"";let l="";switch(this.chartType()){case tt.Line:l=this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.lineStyle.color");break;case tt.Area:l=this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.areaStyle.linecolor");break;default:G()}this.chartService.getStoreHandler().set("mainLegend",{open:"",high:"",low:"",close:"",value:n.format(t.value),change:`${a}${n.format(s)}(${a}${n.format(o)}%)`,color:l??"",selected:this.chartService.getStoreHandler().get("mainLegend").selected})}}_updatePriceLines(){const t=this._chart.timeScale().getVisibleLogicalRange();if(!t)return;if(!isFinite(t.to))return;const e=this._series.barsProvider().lastIndex();if(z(e))return;const i=Math.min(Math.round(t.to),e),n=i===e,s=this._series.dataByIndex(i,Xi.NearestLeft);if(!s)return;if(!this._series.dataByIndex(e,Xi.NearestLeft))return;let r,o="";if(it(this.chartType())){const t=s;o=t.color,r=t.close}else{switch(r=s.value,this.chartType()){case tt.Line:o=this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.lineStyle.color");break;case tt.Area:o=this.chartService.getStoreHandler().getChartProperty("mainSeriesProperties.areaStyle.linecolor");break;default:G()}}const a=this._series.getPane().getHeight();{const t=ee(this._series.priceToCoordinate(r)),e=o,i={price:r,color:e,lineVisible:!1,axisLabelVisible:!n,axisLabelColor:this.chartService.getModel().backgroundColorAtYPercentFromTop(t/a),axisLabelTextColor:e,axisLabelBorderColor:e};if(this._priceLineLastVisible){const t=this._priceLineLastVisible.options();if(t.price===i.price&&t.color===i.color&&t.axisLabelVisible===i.axisLabelVisible)return;this._priceLineLastVisible.applyOptions(i)}else n||(this._priceLineLastVisible=this._series.createPriceLine({...i,price:r}))}}_mapBars(t){const e=this.chartService.getStoreHandler().get("chartProperties");switch(this.chartType()){case tt.Bar:return Fv(t,e["mainSeriesProperties.barStyle.upColor"],e["mainSeriesProperties.barStyle.downColor"]);case tt.Candle:return Fv(t,e["mainSeriesProperties.candleStyle.upColor"],e["mainSeriesProperties.candleStyle.downColor"]);case tt.HollowCandle:return Fv(t,e["mainSeriesProperties.hollowCandleStyle.upColor"],e["mainSeriesProperties.hollowCandleStyle.downColor"]);case tt.Line:return Bv(t,e["mainSeriesProperties.lineStyle.priceSource"]);case tt.Area:return Bv(t,e["mainSeriesProperties.areaStyle.priceSource"]);default:q()}}_mapBar(t){const e=Object.create(null);let i=t.open,n=Math.max(t.open,t.high,t.low,t.close),s=Math.max(t.open,t.high,t.low,t.close);const r=t.close,o=t.volume;e.time=t.time,e.customValues={open:i,high:n,low:s,close:r,volume:o};const a=this.chartService.getStoreHandler().get("chartProperties");let l="",c="",h="";switch(this.chartType()){case tt.Bar:l=a["mainSeriesProperties.barStyle.upColor"],c=a["mainSeriesProperties.barStyle.downColor"];break;case tt.Candle:l=a["mainSeriesProperties.candleStyle.upColor"],c=a["mainSeriesProperties.candleStyle.downColor"],h=a["mainSeriesProperties.candleStyle.wickColor"];break;case tt.HollowCandle:l=a["mainSeriesProperties.hollowCandleStyle.upColor"],c=a["mainSeriesProperties.hollowCandleStyle.downColor"],h=a["mainSeriesProperties.hollowCandleStyle.wickColor"];break;case tt.Area:e.value=t[a["mainSeriesProperties.areaStyle.priceSource"]];break;case tt.Line:e.value=t[a["mainSeriesProperties.lineStyle.priceSource"]]}if(it(this.chartType())){const r=this._chart.timeScale().timeToIndex(t.time,!1);let o,a,u=h;r&&(o=this._series.dataByIndex(r),a=this._series.dataByIndex(r-1)),o&&(ie(o.time===t.time),ie(N(o.time)),i=o.open,n=Math.max(o.high,t.high),s=Math.min(o.low,t.low),Object.assign(e.customValues,{open:i,high:n,low:s})),a&&(u=t.close>=a.close?l:c),Object.assign(e,{open:i,high:n,low:s,close:t.close,volume:t.volume,color:u,wickColor:u,borderColor:u})}else e.value=t.close;return e}priceFormatter(){return ee(this._priceFormatter)}save(){return{type:xx.Main,state:{style:this.chartType()}}}};Cx([rl],Ix.prototype,"paneIndex",1),Ix=Cx([Mx(2,jo),Mx(3,Ng),Mx(4,V_)],Ix);var Ex=(t=>(t.T="T",t.s="S",t.m="m",t.H="H",t.D="D",t.W="W",t.M="M",t.Y="Y",t))(Ex||{});const Ax={T:1,S:1,m:60,H:3600,D:86400,W:604800,get M(){return q()},get Y(){return q()}};function Dx(t){return ee(Ax[t])}const kx={T:"resolutionGroup.ticks",S:"resolutionGroup.seconds",m:"resolutionGroup.minutes",H:"resolutionGroup.minutes",D:"resolutionGroup.days",W:"resolutionGroup.days",M:"resolutionGroup.days",Y:"resolutionGroup.days"},Px={T:"resolution.tick",S:"resolution.second",m:"resolution.minute",H:"resolution.hour",D:"resolution.day",W:"resolution.weak",M:"resolution.month",Y:"resolution.year"};const Ox=Wo("chartResolutionRegistry ");class Rx extends he{constructor(){super(),x(this,"_serviceBrand"),x(this,"store",Eg({groups:[],items:Object.create(null)})),this._register(le((()=>Reflect.set(this,"store",null))))}value(t){return Dg(this.store).items[t]}registerResolution(t){/^\d/.test(t)||(t="1"+t);const{value:e,unit:i,groupi18nkey:n,groupUnit:s,equivalent:r}=function(t){const e=/^(\d*)([TSHDWMY]?)$/i,i=t.match(e);i||G("Invalid resolution format",t);let n=parseInt(i[1],10),s=i[2]||"m",r=n,o=s;switch(s){case"m":n%60==0&&(s="H",n/=60);break;case"W":r=7*n,o="D";break;case"M":r=30*n,o="D",n%12==0&&(s="M",n/=12)}return{value:n,unit:s,equivalent:r,groupi18nkey:kx[s],groupUnit:o}}(t),o={resolutionString:t,label:Px[i],labelShort:`${e}${a=i,["D","W","M","Y"].includes(a)?a:a.toLowerCase()}`,equivalent:r,value:e,unit:i};var a;this.store.update((e=>{e.items[t]=o;let i=e.groups.find((t=>t.unit===s));return i||(i={i18nKey:n,unit:s,items:[]},e.groups.push(i)),i.items.push(o),i.items.sort(((t,e)=>t.equivalent-e.equivalent)),e}))}}function Lx(t){return!Nx(t)}function Nx(t){return"color"in t&&Array.isArray(t.color)}const Fx={"compare.plot.display":15,"compare.plot.lineStyle":0,"compare.plot.lineWidth":2,"compare.plot.plotType":"line","compare.plot.transparency":0,"compare.plot.color":"#9C27B0","compare.source":"close","compare.symbol":""};var Bx=(t=>(t[t.solid=0]="solid",t[t.dotted=1]="dotted",t[t.dashed=2]="dashed",t[t.largeDashed=3]="largeDashed",t[t.sparseDotted=4]="sparseDotted",t[t.smallDashed=5]="smallDashed",t))(Bx||{});function zx(t,e){let i=[];0!==e&&(i=function(t,e){return[[t,2*t],[5*t,6*t],[6*t,6*t],[t,4*t],[2*t,t]][e-1]}(t.lineWidth,e)),t.setLineDash(i)}var Vx=(t=>(t[t.Normal=0]="Normal",t[t.Arrow=1]="Arrow",t))(Vx||{});class $x{constructor(t=null,e,i,n){x(this,"_hitTest",null),x(this,"_backgroundHitTest",null),this._data=t,this._hitTestCollector=e,i&&(this._hitTest=i),n&&(this._backgroundHitTest=n)}setData(t){this._data=t}data(){return ee(this._data)}setHitTest(t){this._hitTest=t}setBackgroundHitTest(t){this._backgroundHitTest=t}}class Hx extends $x{draw(t){t.useBitmapCoordinateSpace((t=>{this.drawImpl(t)}))}}class Kx extends $x{draw(t){return t.useMediaCoordinateSpace((t=>this.drawImpl(t)))}}class Wx extends Hx{constructor(){super(...arguments),x(this,"_precalculatedCache",[])}setData(t){this._data=t,this._precalculatedCache=[]}hitTest(t){var e,i;if(null===this._data)return null;const n=(null==(e=this._data.visibleItemsRange)?void 0:e.startItemIndex)??0,s=((null==(i=this._data.visibleItemsRange)?void 0:i.endItemIndex)??this._data.items.length)-1;for(let r=n;r<=s;r++){const e=this._data.items[r];if(t.x>=e.left&&t.x<=e.right){const i=e.y,n=this._data.histogramBase;if(t.y>=Math.min(i,n)&&t.y<=Math.max(i,n))return new mb(db.Regular)}}return null}drawImpl(t){var e,i,n;if(!this._data||0===this._data.items.length)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=t;0===this._precalculatedCache.length&&this._fillPrecalculatedCache(r);const a=Math.max(1,Math.floor(r)),l=Math.max(1,Math.floor(o)),c=Math.round(this._data.histogramBase*o)-Math.floor(a/2),h=c+a,u=this._data.lineColor,d=(null==(e=this._data.visibleItemsRange)?void 0:e.startItemIndex)??0,p=((null==(i=this._data.visibleItemsRange)?void 0:i.endItemIndex)??this._data.items.length)-1;for(let f=d;f<=p;f++){const t=this._data.items[f],e=this._precalculatedCache[f-d],i=Math.round(t.y*o);let r,a;const p=(null==(n=t.style)?void 0:n.color)??u;s.fillStyle=p,i<=c?(r=i,a=h):(r=c,a=i-Math.floor(l/2)+l),s.fillRect(e.left,r,e.right-e.left+1,a-r)}}_fillPrecalculatedCache(t){if(!this._data||0===this._data.items.length)return void(this._precalculatedCache=[]);const{barSpacing:e,visibleItemsRange:i,items:n}=this._data,s=Math.ceil(e*t)<=1?0:Math.max(1,Math.floor(t)),r=(null==i?void 0:i.startItemIndex)??0,o=((null==i?void 0:i.endItemIndex)??n.length)-1,a=o-r+1;if(a<=0)return void(this._precalculatedCache=[]);this._precalculatedCache=new Array(a);for(let c=r;c<=o;c++){const e=n[c],i=Math.round(e.center*t),o=Math.round((e.right-e.left)*t)-s;let a,l;if(o%2){const t=(o-1)/2;a=i-t,l=i+t}else{const t=o/2;a=i-t,l=i+t-1}this._precalculatedCache[c-r]={left:a,right:l,roundedCenter:i,center:e.center*t,time:e.timePointIndex}}for(let c=r+1;c<=o;c++){const t=this._precalculatedCache[c-r],e=this._precalculatedCache[c-r-1];t.time===e.time+1&&t.left-e.right!==s+1&&(e.roundedCenter>e.center?e.right=t.left-s-1:t.left=e.right+s+1)}let l=Math.ceil(e*t);for(let c=r+1;c<=o;c++){const t=this._precalculatedCache[c-r];t.right<t.left&&(t.right=t.left);const e=t.right-t.left+1;l=Math.min(e,l)}if(s>0&&l<4)for(let c=r+1;c<=o;c++){const t=this._precalculatedCache[c-r];t.right-t.left+1>l&&(t.roundedCenter>t.center?t.right-=1:t.left+=1)}}}function jx(t,e,i){const n=new rb(t),s=new rb(e),r=new rb(i),o=s.subtract(n),a=r.subtract(n),l=o.x*o.x+o.y*o.y,c=o.x*a.x+o.y*a.y,h=l>0?c/l:0,u=Math.max(0,Math.min(1,h));return{coeff:h,distance:new rb(n.x+o.x*u,n.y+o.y*u).subtract(r).length()}}function Ux(t,e,i){const n=e.subtract(t),s=i.subtract(t).dotProduct(n)/n.dotProduct(n);return{coeff:s,distance:t.addScaled(n,s).subtract(i).length()}}class Gx extends Hx{hitTest(t){if(!this._data)return null;const e=vb().series+this._data.lineWidth/2;let i,n,s,r;for(let o=1;o<this._data.items.length;++o){i=this._data.items[o-1],n=this._data.items[o],s=i.center,r=n.center;if(jx(new rb(s,i.y),new rb(r,n.y),new rb(t.x,t.y)).distance<=e)return new mb(db.Regular)}return null}drawImpl(t){var e,i,n,s;if(!this._data)return;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=t;let l="",c=!1;const h=(null==(e=this._data.visibleItemsRange)?void 0:e.startItemIndex)??0,u=((null==(i=this._data.visibleItemsRange)?void 0:i.endItemIndex)??this._data.items.length)-1;for(let d=h;d<=u;d++){const t=this._data.items[d];if(isNaN(t.center)||isNaN(t.y))continue;const e=(null==(n=t.style)?void 0:n.color)??this._data.lineColor,i=(null==(s=t.style)?void 0:s.width)??this._data.lineWidth,h=Math.max(1,Math.floor(i*o)),u=Math.max(1,Math.floor(i*a));(e!==l||zt)&&(l=e,c&&r.fill(),r.beginPath(),r.fillStyle=e);let p=3*h;p%2!=h%2&&(p+=1);let f=3*u;f%2!=u%2&&(f+=1);const m=Math.round(t.center*o),g=Math.round(t.y*a),v=Math.round(m-p/2),y=Math.round(g-f/2),_=v+Math.floor(p/2-h/2),b=y+Math.floor(f/2-u/2);r.rect(v,b,p,u),r.rect(_,y,h,f),c=!0}c&&r.fill()}}function qx(t){const{prevItem:e,nextItem:i}=t;null!==e&&(e.nextItem=i),null!==i&&(i.prevItem=e)}class Yx{constructor(t=0,e=1.3){x(this,"_cache",new Map),x(this,"_firstItem",null),x(this,"_lastItem",null),x(this,"_size"),x(this,"_sizeLimited"),x(this,"_capacityFactor"),this._size=t,this._sizeLimited=t>0,this._capacityFactor=e}set(t,e){const i={key:t,value:e,prevItem:this._lastItem,nextItem:null};null!==this._lastItem&&(this._lastItem.nextItem=i);const n=this._cache.get(t);return void 0!==n&&(qx(n),n===this._firstItem&&(this._firstItem=n.nextItem)),this._cache.set(t,i),this._lastItem=i,null===this._firstItem&&(this._firstItem=i),this._sizeLimited&&this._cache.size>this._size*this._capacityFactor&&this._removeExtraItems(),this}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);if(void 0!==e){if(e===this._firstItem&&(this._firstItem=e.nextItem??e),e!==this._lastItem){qx(e);const t=ee(this._lastItem);t.nextItem=e,e.prevItem=t,e.nextItem=null,this._lastItem=e}return e.value}}clear(){this._cache.clear(),this._firstItem=null,this._lastItem=null}delete(t){const e=this._cache.get(t);return void 0!==e&&(qx(e),e===this._lastItem&&(this._lastItem=e.prevItem),e===this._firstItem&&(this._firstItem=e.nextItem)),this._cache.delete(t)}*entries(){let t=this._firstItem;for(;null!==t;)yield[t.key,t.value],t=t.nextItem}state(){const t=[];for(const[e,i]of this.entries())t.push([e,i]);return t}restoreState(t){for(const[e,i]of t)this.set(e,i)}_removeExtraItems(){const t=this._cache.size-this._size;let e=ee(this._firstItem);for(let i=0;i<t;i++)this._cache.delete(e.key),e=ee(e.nextItem);e.prevItem=null,this._firstItem=e}}var Xx=(t=>(t.Solid="solid",t.Gradient="gradient",t))(Xx||{});const Zx=new WeakMap;function Qx(t,e,i=0,n=3){const{context:s,bitmapSize:r,mediaSize:o}=t;let a;if(L(e))a=e;else if(e.type===Xx.Solid)a=e.color;else{let t=Zx.get(s);void 0===t&&(t=new Yx(1e3),Zx.set(s,t));const n=0===i?o.height:r.height,l=`${e.startColor}_${e.endColor}_${n}`;let c=t.get(l);void 0===c&&(c=s.createLinearGradient(0,0,0,n),c.addColorStop(0,e.startColor),c.addColorStop(1,e.endColor),t.set(l,c)),a=c}1&n&&(s.strokeStyle=a),2&n&&(s.fillStyle=a)}const Jx={y:NaN};function tS(t){return!!t&&!isNaN(t.y)}class eS{constructor(t,e,i,n){x(this,"_items"),x(this,"_firstIndexWithRange"),x(this,"_lastIndexWithRange"),x(this,"_skipHoles"),x(this,"_calculatedPrev",{index:null,currentBreakProcessed:!1,value:null}),x(this,"_calculatedCurrent",{index:null,currentBreakProcessed:!1,value:null}),x(this,"_calculatedNext",{index:null,currentBreakProcessed:!1,value:null}),x(this,"_preallocated",{index:null,currentBreakProcessed:!1,value:null}),t.length>0&&(ie(e<=i,"First index must be less or equal to last index"),ie(e<t.length,"First index must be less than array length"),ie(i<=t.length,"Last index must be less or equal to array length")),this._items=t,this._firstIndexWithRange=e,this._lastIndexWithRange=i,this._skipHoles=!!n}next(){if(0===this._items.length)return!1;if(null!==this._calculatedNext.index)return null!==this._calculatedNext.value&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._calculatedNext,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},!0);let t=!1;this._preallocated={...this._calculatedCurrent};do{null===this._preallocated.index?(this._preallocated.index=this._firstIndexWithRange,this._preallocated.currentBreakProcessed=!1,t=this._preallocated.index<this._lastIndexWithRange):(this._incrementPointer(this._preallocated),t=this._isValidPointer(this._preallocated)),t&&this._calculateValue(this._preallocated)}while(t&&this._skipHoles&&!tS(this._preallocated.value));return t&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._preallocated,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null}),t}prevValue(){return this._calculatedPrev.value}currentValue(){return ee(this._calculatedCurrent.value)}currentValueIsLast(){return ee(this._calculatedCurrent.index)===this._items.length-1}currentValueIsFirst(){return 0===ee(this._calculatedCurrent.index)}nextValue(){if(null!==this._calculatedNext.index)return this._calculatedNext.value;let t=!1;this._calculatedNext={...this._calculatedCurrent,value:null};do{this._incrementPointer(this._calculatedNext),t=this._isValidPointer(this._calculatedNext),t?this._calculateValue(this._calculatedNext):this._calculatedNext.value=null}while(t&&this._skipHoles&&!tS(this._calculatedNext.value));return this._calculatedNext.value}atStart(){return this._calculatedCurrent.index===this._firstIndexWithRange&&!this._calculatedCurrent.currentBreakProcessed}atEnd(){const t=ee(this._calculatedCurrent.index);return t<this._lastIndexWithRange&&(this._calculatedCurrent.currentBreakProcessed||!this._needsBreakBefore(t))}_needsBreakBefore(t){return!!this._items[t].breakBefore&&!this._skipHoles}_calculateValue(t){const e=ee(t.index);this._needsBreakBefore(e)&&!t.currentBreakProcessed?t.value=Jx:t.value=this._items[e]}_incrementPointer(t){const e=ee(t.index);this._needsBreakBefore(e)&&!this._calculatedCurrent.currentBreakProcessed?t.currentBreakProcessed=!0:(t.index=e+1,t.currentBreakProcessed=!1)}_isValidPointer(t){const e=ee(t.index);return e<this._lastIndexWithRange||e===this._lastIndexWithRange-1&&this._needsBreakBefore(e)&&t.currentBreakProcessed}}class iS extends Hx{hitTest(t){var e,i;if(!this._data)return null;const n=vb().series+this._data.lineWidth/2;let s=(null==(e=this._data.visibleItemsRange)?void 0:e.startItemIndex)??0,r=((null==(i=this._data.visibleItemsRange)?void 0:i.endItemIndex)??this._data.items.length)-1;for(;r-s>2;){const e=Math.round((s+r)/2);this._data.items[e].center<=t.x?s=e:r=e}s=Math.max(1,s-1),r=Math.min(this._data.items.length-1,r+1);for(let o=s;o<=r;++o){const e=this._data.items[o-1],i=this._data.items[o],s=e.center,r=i.center;if(jx(new rb(s,e.y),new rb(r,i.y),new rb(t.x,t.y)).distance<=n)return this._data.hittest??new mb(db.Regular)}return null}drawImpl(t){if(!this._data)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t;e.scale(i,n),e.lineCap="round",e.lineJoin="round",Qx(t,this._data.lineColor,0,3),e.lineWidth=this._data.lineWidth,this._data.lineStyle&&zx(e,this._data.lineStyle),this._data.simpleMode?this._drawSimpleMode(t):this._drawLines(e)}_drawSimpleMode(t){var e,i;ie(this._data);const{context:n,horizontalPixelRatio:s,verticalPixelRatio:r}=t;n.beginPath(),this._walkLine(n,this._data.items,!1,NaN),n.stroke();const o=this._data.lineWidth+2;if(this._data.withMarkers&&2*o<this._data.barSpacing){n.scale(1/s,1/r),Qx(t,this._data.lineColor,1,2);const a=Math.max(1,Math.floor(s))%2/2,l=o*r+a,c=2*Math.PI;n.beginPath();const h=(null==(e=this._data.visibleItemsRange)?void 0:e.startItemIndex)??0;for(let t=((null==(i=this._data.visibleItemsRange)?void 0:i.endItemIndex)??this._data.items.length)-1;t>=h;--t){const e=this._data.items[t];if(e){const t=Math.round(e.center*s)+a,i=e.y*r;n.moveTo(t,i),n.arc(t,i,l,0,c)}}n.fill()}}_walkLine(t,e,i,n,s=!1){var r,o;if(!e)return;ie(this._data);const a=.25*this._data.barSpacing;let l,c,h=null;const u=s?0:(null==(r=this._data.visibleItemsRange)?void 0:r.startItemIndex)??0,d=s?e.length:Math.min((null==(o=this._data.visibleItemsRange)?void 0:o.endItemIndex)??e.length,e.length);if(u>d||u>=e.length)return;const p=new eS(e,u,d,this._data.skipHoles);for(;p.next();){if(l=p.currentValue(),c=p.nextValue(),tS(l)){const e=Math.round(l.center);h&&tS(h)?(t.lineTo(e,l.y),i&&!tS(c)&&t.lineTo(e,n)):c&&tS(c)?i?(p.atStart()||t.lineTo(e,n),t.lineTo(e,l.y)):t.moveTo(e,l.y):i?(p.atStart()||t.lineTo(e-a,n),t.lineTo(e-a,l.y),t.lineTo(e+a,l.y),t.lineTo(e+a,n)):(t.moveTo(e-a,l.y),t.lineTo(e+a,l.y))}h=l}}_drawLines(t){var e,i,n;if(!(null==(e=this._data)?void 0:e.items.length))return;const s=.25*this._data.barSpacing;t.beginPath();const r=(null==(i=this._data.visibleItemsRange)?void 0:i.startItemIndex)??0,o=(null==(n=this._data.visibleItemsRange)?void 0:n.endItemIndex)??this._data.items.length;if(r>o||r>=this._data.items.length)return;const a=this._data.items[r];a&&t.moveTo(a.center,a.y);let l,c=t.strokeStyle,h=t.lineWidth;const u=new eS(this._data.items,r,o,this._data.skipHoles);for(;u.next();){const e=u.prevValue(),i=u.currentValue(),n=u.nextValue();if(!tS(i))continue;let r=this._data.lineColor,o=this._data.lineWidth,a=this._data.lineStyle;i.style&&!this._data.forceLineColor&&(r=i.style.color,o=i.style.width,a=i.style.style),this._data.ignorePaletteLineWidth&&(o=this._data.lineWidth);(r!==c||o!==h||a!==l)&&(t.stroke(),t.beginPath(),t.strokeStyle=r,t.lineWidth=o,a&&zx(t,a),tS(e)?t.moveTo(e.center,e.y):t.moveTo(i.center,i.y),c=r,h=o,l=a),tS(e)?t.lineTo(i.center,i.y):tS(n)?t.moveTo(i.center,i.y):(t.moveTo(i.center-s,i.y),t.lineTo(i.center+s,i.y))}t.stroke()}}function nS(t,e,i,n){const s=e.subtract(t),r=n.subtract(i),o=s.x*r.y-s.y*r.x;if(Math.abs(o)<1e-6)return null;const a=t.subtract(i),l=(a.y*r.x-a.x*r.y)/o,c=jx(i,n,s.scaled(l).add(t));return Math.abs(c.distance)<1e-6?l:null}function sS(t,e){const i=e.edge;return i.A*t.x+i.B*t.y+i.C>0===e.isPositive}function rS(t,e){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y}function oS(t,e){let i=!1;const n=t.x,s=t.y;let r=e.length-1;for(let o=0;o<e.length;o++){const t=e[o],a=e[r];(t.y<s&&a.y>=s||a.y<s&&t.y>=s)&&t.x+(s-t.y)/(a.y-t.y)*(a.x-t.x)<n&&(i=!i),r=o}return i}function aS(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*n+s*s<=i*i}function lS(t,e){return{min:new rb(Math.min(t.x,e.x),Math.min(t.y,e.y)),max:new rb(Math.max(t.x,e.x),Math.max(t.y,e.y))}}function cS(t,e){if(eb(t,e))throw new Error("Points should be distinct");return hS(t.y-e.y,e.x-t.x,t.x*e.y-e.x*t.y)}function hS(t,e,i){if(0===t&&0===e)throw new Error("A and B cannot both be zero: not a valid line.");return{A:t,B:e,C:i}}function uS(t,e,i){const n=-(t.C+t.A*e)/t.B;return n>=i.min.y&&n<=i.max.y?{x:e,y:n}:null}function dS(t,e,i){const n=-(t.C+t.B*e)/t.A;return n>=i.min.x&&n<=i.max.x?{x:n,y:e}:null}function pS(t,e){const{min:i,max:n}=e,s=[];if(0===t.A){const e=-t.C/t.B;return e>=i.y&&e<=n.y?[{x:i.x,y:e},{x:n.x,y:e}]:null}if(0===t.B){const e=-t.C/t.A;return e>=i.x&&e<=n.x?[{x:e,y:i.y},{x:e,y:n.y}]:null}const r=[uS(t,i.x,e),dS(t,i.y,e),uS(t,n.x,e),dS(t,n.y,e)];for(const o of r)o&&!s.some((t=>eb(t,o)))&&s.push(o);switch(s.length){case 0:return null;case 1:return s[0];case 2:return s;default:throw new Error("Unexpected: Line intersects box at more than 2 points.")}}function fS(t,e,i,n){const s=e.subtract(t),r=n.subtract(i),o=s.x*r.y-s.y*r.x,a=i.subtract(t),l=a.x*s.y-a.y*s.x;if(0===o)return null;const c=(a.x*r.y-a.y*r.x)/o,h=l/o;return h>=0&&h<=1&&c>=0?c:null}function mS(t,e,i){const n=i.min,s=new rb(i.max.x,i.min.y),r=i.max,o=new rb(i.min.x,i.max.y),a=e.subtract(t),l=[],c=fS(t,e,n,s),h=fS(t,e,s,r),u=fS(t,e,r,o),d=fS(t,e,o,n);if(null!==c&&c>=0&&l.push(c),null!==h&&h>=0&&l.push(h),null!==u&&u>=0&&l.push(u),null!==d&&d>=0&&l.push(d),0===l.length)return null;l.sort(((t,e)=>t-e));const p=function(t,e){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y}(t,i)?l[0]:l[l.length-1];return t.addScaled(a,p)}function gS(t,e){if(eb(t,e))throw new Error("Points of a segment should be distinct");return[t,e]}function vS(t,e,i){let n=0;return t<i.min.x?n|=1:t>i.max.x&&(n|=2),e<i.min.y?n|=4:e>i.max.y&&(n|=8),n}function yS(t,e){let[i,n]=[t[0].x,t[0].y],[s,r]=[t[1].x,t[1].y],o=vS(i,n,e),a=vS(s,r,e),l=!1,c=0;for(;;){if(++c>1e3)throw new Error("Cohen-Sutherland: infinite loop detected");if(!(o|a)){l=!0;break}if(o&a)break;{const t=o||a;let l=0,c=0;8&t?(l=i+(s-i)*(e.max.y-n)/(r-n),c=e.max.y):4&t?(l=i+(s-i)*(e.min.y-n)/(r-n),c=e.min.y):2&t?(c=n+(r-n)*(e.max.x-i)/(s-i),l=e.max.x):1&t&&(c=n+(r-n)*(e.min.x-i)/(s-i),l=e.min.x),t===o?(i=l,n=c,o=vS(i,n,e)):(s=l,r=c,a=vS(s,r,e))}}if(l){const t=new rb(i,n),e=new rb(s,r);return eb(t,e)?t:gS(t,e)}return null}function _S(t,e){return function(t,e){return{edge:t,isPositive:e}}(t,t.A*e.x+t.B*e.y+t.C>0)}function bS(t,e){const i=[];for(let n=0;n<t.length;++n){const s=t[n],r=t[(n+1)%t.length],o=cS(s,r),a=sS(s,e),l=sS(r,e);if(a){if(i.push(s),!l){const t=wS(o,e.edge);null!==t&&i.push(t)}}else if(l){const t=wS(o,e.edge);null!==t&&i.push(t)}}return i.length>=3?i:null}function wS(t,e){const i=t.A,n=t.B,s=t.C,r=e.A,o=e.B,a=e.C,l=i*o-r*n;if(Math.abs(l)<1e-6)return null;return new rb((n*a-o*s)/l,(r*s-i*a)/l)}const xS={horizontalPixelRatio:1,verticalPixelRatio:1};function SS(t,e,i,n,s,r){const{horizontalPixelRatio:o,verticalPixelRatio:a}=r;let l;if(i===s){const s=Math.round(i*a);l=[e*o,s,n*o,s],CS(t,l[1],l[0],l[2])}else if(e===n){const n=Math.round(e*o);l=[n,i*a,n,s*a],TS(t,l[0],l[1],l[3])}else l=[e*o,i*a,n*o,s*a],MS(t,l[0],l[1],l[2],l[3]);return l}function TS(t,e,i,n){const s=e+(t.lineWidth%2==1?.5:0);t.moveTo(s,i),t.lineTo(s,n)}function CS(t,e,i,n){const s=e+(t.lineWidth%2==1?.5:0);t.moveTo(i,s),t.lineTo(n,s)}function MS(t,e,i,n,s){t.moveTo(e,i),t.lineTo(n,s)}function IS(t,e,i,n){t.beginPath(),CS(t,e,i,n),t.stroke()}function ES(t,e){return[[t,2*t],[5*t,6*t],[6*t,6*t],[t,4*t],[2*t,t]][e-1]}function AS(t,e,i,n,s,r,o,a,l){const c=t.context,h=r%2/2,u=e+h,d=i+h;let p,f;if(a){const{color:t,borderWidth:o,borderMode:l,lineStyle:h,dashPattern:m}=a;switch(l){case"outer":{const t=-(r/2)-o/2,e=-o/2;f={left:u+t,right:d-t,top:n+e,bottom:s-e};break}case"center":{const t=o%2/2;f={left:e+t,right:i+t,top:n+t,bottom:s+t};break}case"inner":{const t=o/2-r/2,e=o/2;f={left:u+t,right:d-t,top:n+e,bottom:s-e};break}}if(c.strokeStyle=t,c.lineWidth=o,m)c.setLineDash(function(t,e){return e=Math.max(1,e),t.map((t=>t*e))}(m,o));else if(void 0!==h){zx(c,h);const t=h===Bx.solid?1:-1;p={left:f.left+t*a.borderWidth/2,top:f.top+t*a.borderWidth/2,right:f.right-t*a.borderWidth/2,bottom:f.bottom-t*a.borderWidth/2}}}if(o){if(c.fillStyle=o.color,!p){const t=r/2;p={left:u-t,right:d+t,top:n,bottom:s}}c.fillRect(p.left,p.top,p.right-p.left,p.bottom-p.top)}if(l){const{lineWidth:r,lineColor:o,lineStyle:a,excludeBoundaries:h}=l;c.save(),c.lineCap="butt",c.lineWidth=r,c.strokeStyle=o,zx(c,a);const u=Math.floor((n+s)/2),d=()=>{IS(c,u,e,i)};h?function(t,e,i){t.context.save(),DS(t,e),i(),t.context.restore()}(t,h,d):d(),c.restore()}f&&c.strokeRect(f.left,f.top,f.right-f.left,f.bottom-f.top)}function DS(t,e){const{context:i,horizontalPixelRatio:n,verticalPixelRatio:s,bitmapSize:r}=t;i.beginPath(),i.rect(0,0,r.width,r.height);for(let o=0;o<e.length;o++){const t=e[o],r=t.x*n,a=t.y*s;0===o?i.moveTo(r,a):i.lineTo(r,a)}i.closePath(),i.clip("evenodd")}function kS(t,e,i,n,s,r,o=!1){let a,l,c,h;if(Array.isArray(r))if(2===r.length){a=l=Math.max(0,r[0]),c=h=Math.max(0,r[1])}else{if(4!==r.length)throw new Error("Invalid corner radius array. Must be either [tl/tr] or [tl, tr, br, bl].");a=Math.max(0,r[0]),l=Math.max(0,r[1]),c=Math.max(0,r[2]),h=Math.max(0,r[3])}else{a=l=c=h=Math.max(0,r)}o||t.beginPath(),t.roundRect?t.roundRect(e,i,n,s,[a,l,c,h]):(t.moveTo(e+a,i),t.lineTo(e+n-l,i),0!==l&&t.arcTo(e+n,i,e+n,i+l,l),t.lineTo(e+n,i+s-c),0!==c&&t.arcTo(e+n,i+s,e+n-c,i+s,c),t.lineTo(e+h,i+s),0!==h&&t.arcTo(e,i+s,e,i+s-h,h),t.lineTo(e,i+a),0!==a&&t.arcTo(e,i,e+a,i,a))}function PS(t,e,i,n){t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!1),t.closePath()}function OS(t,e,i,n,s){isFinite(e)&&isFinite(i)&&isFinite(n)&&isFinite(s)&&(t.beginPath(),MS(t,e,i,n,s),t.stroke())}function RS(t,e,i,n,s,r,o=0,a=[0,0,0,0],l="",c=[],h=null){if(t.save(),t.setLineDash(c),h&&(t.shadowColor=h.shadowColor,t.shadowBlur=h.shadowBlur,t.shadowOffsetX=h.shadowOffsetX??0,t.shadowOffsetY=h.shadowOffsetY??0),!o||!l||l===r)return kS(t,e,i,n,s,a),t.fillStyle=r,t.fill(),void t.restore();const u=o/2;var d;kS(t,e+u,i+u,n-o,s-o,(d=-u,a.map((t=>0===t?t:t+d)))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==l&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function LS(t,e,i,n){const[s,r]=n,o=eb(i,s)?eb(i,r)?null:r:s;if(null!==t&&null!==o){return bS(t,_S(cS(e,i),o))}return null}function NS(t,e,i,n){t.beginPath(),TS(t,e,i,n),t.stroke()}function FS(t,e,i,n,s,r=xS){t.beginPath(),SS(t,e,i,n,s,r),t.stroke()}var BS=(t=>(t[t.circle=1]="circle",t[t.square=2]="square",t))(BS||{});class zS extends rb{constructor(t,e=Object.create(null)){super(t),x(this,"pointIndex",0),x(this,"cursorType"),x(this,"style",1),x(this,"hitTarget",db.ChangePoint),x(this,"resizeDirections",15),Object.assign(this,e)}get point(){return this}}class VS extends Hx{drawImpl(t){if(!this._data||!this._data.visible)return;const e=[],i=[],n=[],s=[];for(let r=0;r<this._data.points.length;++r){const t=this._data.points[r],o=this._data.backgroundColors[r];2===t.style||10===t.resizeDirections||5===t.resizeDirections?(e.push(t),i.push(o)):(n.push(t),s.push(o))}e.length>0&&this._drawPoints(t,e,i,HS,KS),n.length>0&&this._drawPoints(t,n,s,WS,jS)}hitTest(t){if(!this._data)return null;const{radius:e,points:i}=this._data,n=vb().anchor;for(let s=0;s<i.length;++s){const r=i[s];if(new rb(r).subtract(t).length()<=e+n)return new mb(r.hitTarget,{areaName:pb.AnchorPoint,componentIndex:r.pointIndex,cursorType:r.cursorType??Og.unset,resizeDirections:r.resizeDirections})}return null}_drawPoints(t,e,i,n,s){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=t,l=ee(this._data),c=l.radius;let h=Math.max(1,Math.floor((l.strokeWidth||2)*o));l.selected&&(h+=Math.max(1,Math.floor(o/2)));const u=Math.max(1,Math.floor(o));let d=Math.round(c*o*2);d%2!=u%2&&(d+=1);const p=u%2/2,f=vb().anchor;r.strokeStyle=l.color,zx(r,Bx.solid);for(let m=0;m<e.length;++m){const t=e[m];if(r.fillStyle=i[m],!Uu(t.pointIndex)||l.linePointBeingEdited!==t.pointIndex){const e=Math.round(t.x*o)+p,i=Math.round(t.y*a)+p;n(r,{x:e,y:i},d/2,h);let m=Number.MAX_SAFE_INTEGER;if(l.currentPoint&&(m=nb(t,l.currentPoint)),m<=c+f){const t=Math.max(1,Math.floor(l.selectedStrokeWidth*o));let n=Math.round(c*o*2);n%2!=u%2&&(n+=1),s(r,{x:e,y:i},n/2,t)}}}}}function $S(t,e,i,n){const s=i+n/2;kS(t,e.x-s,e.y-s,2*s,2*s,(i+n)/2),t.closePath(),t.lineWidth=n}function HS(t,e,i,n){$S(t,e,i-n,n),t.fill(),t.stroke()}function KS(t,e,i,n){t.globalAlpha=.2,$S(t,e,i,n),t.stroke(),t.globalAlpha=1}function WS(t,e,i,n){t.beginPath(),t.arc(e.x,e.y,i-n/2,0,2*Math.PI,!0),t.closePath(),t.lineWidth=n,t.fill(),t.stroke()}function jS(t,e,i,n){t.globalAlpha=.2,t.beginPath(),t.arc(e.x,e.y,i+n/2,0,2*Math.PI,!0),t.closePath(),t.lineWidth=n,t.stroke(),t.globalAlpha=1}class US extends Hx{hitTest(t){if(!this._data||!this._data.visible)return null;for(let e=0;e<this._data.points.length;e++){const i=this._data.points[e];if(new rb(i).subtract(t).length()<=5.5)return new mb(this._data.hitTarget,{areaName:pb.AnchorPoint,componentIndex:i.pointIndex,cursorType:i.cursorType??Og.unset,resizeDirections:0})}return null}doesIntersectWithBox(t){return!!this._data&&this._data.points.some((e=>rS(e,t)))}drawImpl(t){if(!this._data||!this._data.visible)return;const{context:e,horizontalPixelRatio:i}=t;e.strokeStyle=this._data.color??"#2A62FF",e.lineCap="butt";const n=Math.max(1,Math.floor(i));e.lineWidth=n;const s=this._data.vertOffset??0;for(let r=0;r<this._data.points.length;++r){const i=this._data.points[r];Number.isFinite(i.x)&&Number.isFinite(i.y)&&(e.fillStyle=this._data.bgColors[r],this._drawMarker(t,{x:i.x,y:i.y},s,n))}}_drawMarker(t,e,i,n){const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let a=Math.round(3.5*r*2);a%2!=n%2&&(a+=1);let l=Math.round(a+2*(.5*n+.75*r));l%2!=n%2&&(l+=1);const c=Math.round(e.x*r),h=Math.round((e.y+i)*o),u=n%2/2;s.beginPath(),s.arc(c+u,h+u,l/2,0,2*Math.PI,!0),s.closePath(),s.fill(),s.beginPath(),s.arc(c+u,h+u,a/2,0,2*Math.PI,!0),s.closePath(),s.stroke()}}class GS{constructor(t){x(this,"_baseIndex",null),x(this,"_offsetInBar",null),x(this,"_barsBetweenPoints",null),x(this,"_timescale"),this._timescale=t}indexes(){const t=this._timescale.getVisibleLogicalRange();if(null===t)return[];const e=Math.round(t.from),i=Math.round(t.to),n=this._timescale.baseIndex();if(null===this._offsetInBar||null===this._barsBetweenPoints||this._baseIndex!==n){const t=this._timescale.barSpacing();this._barsBetweenPoints=Math.floor(120/t),this._offsetInBar=i%this._barsBetweenPoints,this._baseIndex=n}const s=ee(this._offsetInBar),r=[];let o=Math.floor((e-s)/this._barsBetweenPoints);const a=Math.floor((i-s)/this._barsBetweenPoints);for(;o<=a;o++)r.push(s+o*this._barsBetweenPoints);return r}clear(){this._offsetInBar=null,this._baseIndex=null,this._barsBetweenPoints=null}}class qS extends Hx{hitTest(t){if(!this._data||!this._hitTest)return null;const e=vb().line,i=Math.abs(t.y-this._data.y)<=e+this._data.lineWidth/2,n=void 0===this._data.left||this._data.left-t.x<=e,s=void 0===this._data.right||t.x-this._data.right<=e;return i&&n&&s?this._hitTest:null}drawImpl(t){if(!this._data)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n,mediaSize:s}=t;if(this._data.y<-this._data.lineWidth/2||this._data.y>s.height+this._data.lineWidth/2)return;e.lineCap="butt",e.strokeStyle=this._data.lineColor,e.lineWidth=Math.max(1,Math.floor(this._data.lineWidth*i)),void 0!==this._data.lineStyle&&zx(e,this._data.lineStyle);const r=void 0!==this._data.left?Math.max(this._data.left,0):0,o=void 0!==this._data.right?Math.min(this._data.right,s.width):s.width,a=Math.round(this._data.y*n),l=Math.round(r*i),c=Math.round(o*i),h=this._data.excludeBoundaries;void 0!==h&&DS(t,h),IS(e,a,l,c)}}class YS{constructor(t,e){x(this,"_invalidated",!0),x(this,"_lineRenderer"),x(this,"_source"),x(this,"_properties"),x(this,"_points",[new rb(-1,-1)]),this._source=t,this._properties=e,this._lineRenderer=new qS}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._lineRenderer.setData({y:this._points[0].y,lineColor:this._properties.color,lineWidth:this._properties.lineWidth,lineStyle:this._properties.lineStyle}),this._lineRenderer}_updateImpl(){const t=this._source.priceScale();if(!t)return void(this._points[0]=new rb(-1,-1));const e=this._properties.value,i=F(e)?ee(t.priceToCoordinate(e)):NaN;this._points[0]=new rb(-1,i)}}let XS=class extends Kx{drawImpl(t){if(!this._data||!this._data.points.length)return;const e=t.context,i=t.mediaSize.width;if(this._data.gradient){const t=e.createLinearGradient(0,this._data.coordinate1,0,this._data.coordinate2);t.addColorStop(0,this._data.backColor1??"transparent"),t.addColorStop(1,this._data.backColor2??"transparent"),e.fillStyle=t}else e.fillStyle=this._data.backcolor;const n=Math.min(this._data.points[0],this._data.points[1]),s=Math.max(this._data.points[0],this._data.points[1]);e.fillRect(0,n,i,s-n)}};class ZS{constructor(t,e){x(this,"_areaRenderer",new XS),x(this,"_source"),x(this,"_invalidated",!0),x(this,"_fillProps"),this._source=t,ie("hline_hline"===e.type,"Wrong filledArea type: "+e.type),this._fillProps=e}_plotAId(){return this._fillProps.objAId}_plotBId(){return this._fillProps.objBId}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._areaRenderer}_updateImpl(){this._areaRenderer.setData(null);const t=ee(this._source.getStyleValues().bands),e=t[this._plotAId()],i=t[this._plotBId()];ie(e&&i);const n=this._source.priceScale();if(!n)return;const s=[ee(n.priceToCoordinate(e.value)),ee(n.priceToCoordinate(i.value))],r=Z_(this._fillProps.transparency??0,0,100),o=this._fillProps;if("gradient"===o.fillType){const t=o.topValue,e=o.bottomValue;if(void 0===t||void 0===e)return;const i=o.topColor,a=o.bottomColor;if(void 0===i&&void 0===a)return;this._areaRenderer.setData({gradient:!0,points:s,backColor1:i?sw(i,r):void 0,backColor2:a?sw(a,r):void 0,coordinate1:ee(n.priceToCoordinate(t)),coordinate2:ee(n.priceToCoordinate(e))})}else{const t=sw(o.color,r);this._areaRenderer.setData({gradient:!1,points:s,backcolor:t})}}}function QS(t){return Object.keys(t)}const JS=3e3;class tT{constructor(t,e,i,n){x(this,"_items"),x(this,"_actualLength"),x(this,"_step"),x(this,"_currentIndex"),this._items=t,this._actualLength=e,this._step=n?-1:1,this._currentIndex=i-this._step}[Symbol.iterator](){return this}next(){return this._currentIndex+=this._step,this._currentIndex>=this._actualLength||this._currentIndex<0?{done:!0,value:void 0}:{done:!1,value:this._items[this._currentIndex]}}}class eT{constructor(){x(this,"_items",[]),x(this,"_actualLength",0),x(this,"_invalidations",0)}push(t){this._items.length===this._actualLength?this._items.push(t):this._items[this._actualLength]!==t&&(this._items[this._actualLength]=t),this._actualLength+=1}newItem(){const t=this._items.length>this._actualLength?this._items[this._actualLength]:null;return null!==t&&"function"==typeof t.invalidateCache&&t.invalidateCache(),t}invalidateCache(){this._invalidations+=1,this._invalidations===JS&&(this._items.splice(this._actualLength),this._invalidations=0),this._actualLength=0}at(t){return this._items[t]}data(){return this._items}length(){return this._actualLength}isEmpty(){return 0===this._actualLength}iterator(t,e){return new tT(this._items,this._actualLength,t,e)}}class iT extends eT{constructor(t){super(),x(this,"color"),this.color=t}}class nT{constructor(){x(this,"_map",new Map),x(this,"_usedKeys",new Set),x(this,"_invalidations",0)}invalidateCache(){this._invalidations+=1,50===this._invalidations&&(this._deleteUnused(),this._invalidations=0),this._usedKeys.clear(),this._map.forEach((t=>{t.invalidateCache()}))}get(t){const e=this._map.get(t);return void 0!==e&&this._usedKeys.add(t),e}set(t,e){this._usedKeys.add(t),this._map.set(t,e)}[Symbol.iterator](){const t=Array.from(this._usedKeys)[Symbol.iterator](),e=this._map;return{[Symbol.iterator](){return this},next(){const i=t.next();if(!i.done){const t=i.value;return{value:[t,ee(e.get(t))],done:!1}}return{value:void 0,done:!0}}}}forEach(t){this._map.forEach(((e,i)=>{this._usedKeys.has(i)&&t(e,i)}))}delete(t){const e=this._map.get(t);void 0!==e&&e.invalidateCache(),this._usedKeys.delete(t)}_deleteUnused(){const t=[];this._map.forEach(((e,i)=>{this._usedKeys.has(i)||t.push(i)}));for(const e of t)this._map.delete(e)}}class sT extends eT{constructor(){super(),x(this,"points1"),x(this,"points2"),this.points1=new eT,this.points2=new eT,this.push(this.points1),this.push(this.points2)}addPoints1Point(t,e){let i=this.points1.newItem();null!==i?(i.x=t,i.y=e):i={x:t,y:e},this.points1.push(i)}addPoints2Point(t,e){let i=this.points2.newItem();null!==i?(i.x=t,i.y=e):i={x:t,y:e},this.points2.push(i)}invalidateCache(){this.points1.invalidateCache(),this.points2.invalidateCache()}}class rT extends Hx{drawImpl(t){if(null===this._data)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t,s=.25*this._data.barSpacing;for(const[,r]of this._data.colorAreas){e.beginPath();for(let t=0;t<r.length();t++){const o=r.at(t);if(o.points1.isEmpty()||o.points2.isEmpty())continue;const a=o.points1.at(0);if(e.moveTo(Math.round(a.x*i),a.y*n),1!==o.points1.length()&&1!==o.points2.length()){for(const t of o.points1.iterator(1))e.lineTo(Math.round(t.x*i),t.y*n);for(const t of o.points2.iterator(o.points2.length()-1,!0))e.lineTo(Math.round(t.x*i),t.y*n)}else{const t=o.points2.at(0);e.lineTo(Math.round((a.x+s)*i),a.y*n),e.lineTo(Math.round((t.x+s)*i),t.y*n),e.lineTo(Math.round((t.x-s)*i),t.y*n),e.lineTo(Math.round((a.x-s)*i),a.y*n)}}if(e.closePath(),0===r.color.type)e.fillStyle=r.color.color;else{const t=e.createLinearGradient(0,r.color.coordinate1*n,0,r.color.coordinate2*n);t.addColorStop(0,r.color.color1??"transparent"),t.addColorStop(1,r.color.color2??"transparent"),e.fillStyle=t}e.fill()}}}function oT(t,e){return Array.from({length:t},((t,i)=>({timePointIndex:i+e,xCoordinate:NaN})))}function aT(t,e,i){let n,s;const r=t.length;for(let o=e;o>=0&&o<r;o+=i){const e=t[o];if(void 0===n&&void 0!==e.plot1Value&&(n=o),void 0===s&&void 0!==e.plot2Value&&(s=o),void 0!==n&&void 0!==s)return o}return null}function lT(t){return 0===t.type?`${t.color}`:`${t.color1}:${t.color2}:${t.coordinate1}:${t.coordinate2}`}class cT{constructor(t,e,i){x(this,"_source"),x(this,"_model"),x(this,"_fillGaps"),x(this,"_fillToIntersection"),x(this,"_isHlineFill",!1),x(this,"_colorPlotIndex",null),x(this,"_areaRenderer",new rT),x(this,"_dataInvalidated",null),x(this,"_viewportInvalidated",!1),x(this,"_plIndex1",null),x(this,"_plIndex2",null),x(this,"_items",[]),x(this,"_colorAreas",new nT),x(this,"_generateColor",function(t=1e3){const e=Uc.Cache;Uc.Cache=Yx.bind(Yx,t);const i=Uc(sw,((t,e,i)=>`${t}_${e}_${i}`));return Uc.Cache=e,i}()),this._source=t,this._model=e,this._fillGaps=!!(null==i?void 0:i.fillgaps),this._fillToIntersection=!!(null==i?void 0:i.fillToIntersection)}update(){this._dataInvalidated=!0}renderer(){return this._dataInvalidated?(this._updateImplFull(this._dataInvalidated),this._dataInvalidated=null,this._viewportInvalidated=!1):this._viewportInvalidated&&(this._updateImplLight(),this._viewportInvalidated=!1),this._areaRenderer}_minFirstBarIndex(){return-1/0}_priceScale(){return this._source.priceScale()}_plotNames(){return QS(this._source.getStyleValues().plots)}_plotIndex1(){return null===this._plIndex1&&(this._plIndex1=this._plotNames().indexOf(this._plotAId())+1),this._plIndex1}_plotIndex2(){return null===this._plIndex2&&(this._plIndex2=this._plotNames().indexOf(this._plotBId())+1),this._plIndex2}_updateImplFull(t){if(this._areaRenderer.setData(null),(null==t?void 0:t.clearData)&&(this._items=[]),!this._visible())return!1;if(!this._priceScale())return!1;const e=this._source.plots(),i=e.size();if(0===i)return!1;let n=t.firstIndex;const s=i+0+1,r=this._plotIndex1(),o=this._plotIndex2();s!==this._items.length&&(void 0===n||0===this._items.length||n<this._items[0].timePointIndex+0?(n=void 0,this._items=oT(s,1e10)):this._items=this._items.concat(oT(s-this._items.length,1e10+this._items.length)));const a=this._colorPlotIndex,l=this._transparency(),c=void 0===n?e.fullRangeIterator():e.rangeIterator(n,ee(e.lastIndex()));let h=void 0!==n?O(this._items,n+0,((t,e)=>t.timePointIndex<e))-0:-0;for(const u of c){const t=u.index,e=u.index,i=this._items[h],n=this._items[h];if(i.timePointIndex=t,n.timePointIndex=e,this._isHlineFill||(i.plot1Value=u.value[r]??void 0,n.plot2Value=u.value[o]??void 0),null!==a){const t=h+0-1;if(t>=0&&t<this._items.length){const e=this._items[t],i=0===a.type?{type:0,colorIndexOrRgba:u.value[a.colorIndexOrRgba+1]}:{type:1,colorIndexOrRgba1:void 0!==a.colorIndexOrRgba1?u.value[a.colorIndexOrRgba1+1]:void 0,colorIndexOrRgba2:void 0!==a.colorIndexOrRgba2?u.value[a.colorIndexOrRgba2+1]:void 0,value1:void 0!==a.valueIndex1?u.value[a.valueIndex1+1]:void 0,value2:void 0!==a.valueIndex2?u.value[a.valueIndex2+1]:void 0},n=e.color=this._getColorByPlotValue(i)??void 0;void 0!==n&&(1===n.type?(n.color1=n.color1&&this._generateColor(n.color1,l),n.color2=n.color2&&this._generateColor(n.color2,l)):n.color=this._generateColor(n.color,l))}}h+=1}return this._updateImplLight(),!0}_updateImplLight(){if(!this._visible())return;const t=this._priceScale();if(null===t)return;if(0===this._items.length)return;let e;if(this._isHlineFill){const i=ee(this._source.getStyleValues().bands),n=i[this._plotAId()],s=i[this._plotBId()];e={level1:t.priceToCoordinate(n.value),level2:t.priceToCoordinate(s.value)}}const i=this._model.timeScale(),n=i.getVisibleLogicalRange();if(null===n)return;const s=this._transparency(),r=this._minFirstBarIndex(),o=Math.max(r,n.from),a=O(this._items,o,((t,e)=>t.timePointIndex<e));if(a>=this._items.length)return;const l=Math.min(this._items.length-1,O(this._items,n.to,((t,e)=>t.timePointIndex<e))),c=this._isHlineFill?r===o?a:Math.max(0,a-1):r===o?a:aT(this._items,a-1,-1)??a,h=this._isHlineFill?Math.min(this._items.length-1,l+1):aT(this._items,l+1,1)??l,u=this._colorAreas;let d;u.invalidateCache();let p=null,f=null,m=null;const g=(t,e,n)=>{if(i.barSpacing()<1||!this._fillToIntersection||void 0===d||void 0===d.xCoordinate||void 0===d.plot1Coordinate||void 0===d.plot2Coordinate||null===p||null===f||0===p.points1.length()||void 0===t||void 0===e)return;const s=new rb(d.xCoordinate,d.plot1Coordinate),r=new rb(d.xCoordinate,d.plot2Coordinate),o=new rb(n,t),a=nS(s,o,r,new rb(n,e));if(null!==a){const t=s.add(s.subtract(o).scaled(-a));f.addPoints1Point(p.points1.at(p.points1.length()-1).x,p.points1.at(p.points1.length()-1).y),f.addPoints2Point(p.points2.at(p.points1.length()-1).x,p.points2.at(p.points1.length()-1).y),f.addPoints1Point(t.x,t.y),f.addPoints1Point(t.x,t.y),p.points1.at(p.points1.length()-1).x=t.x,p.points1.at(p.points1.length()-1).y=t.y,p.points2.at(p.points2.length()-1).x=t.x,p.points2.at(p.points2.length()-1).y=t.y}},v={type:0,color:""},y=this._commonColor();let _;1===y.type?(y.coordinate1=ee(t.priceToCoordinate(y.value1)),y.coordinate2=ee(t.priceToCoordinate(y.value2)),y.color1=y.color1&&this._generateColor(y.color1,s),y.color2=y.color2&&this._generateColor(y.color2,s)):y.color=this._generateColor(y.color,s);for(let x=c;x<=h;x++){const n=this._items[x],s=n.timePointIndex;let r,o;!this._fillGaps&&void 0!==_&&s-_>1&&(p=null),void 0!==e?(r=e.level1,o=e.level2):(r=n.plot1Coordinate=void 0!==n.plot1Value?ee(t.priceToCoordinate(n.plot1Value)):void 0,o=n.plot2Coordinate=void 0!==n.plot2Value?ee(t.priceToCoordinate(n.plot2Value)):void 0),n.xCoordinate=ee(i.logicalToCoordinate(n.timePointIndex));const a=n.xCoordinate;if(n.color&&1===n.color.type&&(n.color.coordinate1=ee(t.priceToCoordinate(n.color.value1)),n.color.coordinate2=ee(t.priceToCoordinate(n.color.value2))),this._fillGaps?r||o:r&&o){const t=null!==this._colorPlotIndex?n.color||v:y;if(g(ee(r),ee(o),a),null===m||(w=t,null===(b=m)||null===w||b.type!==w.type||!(0===b.type&&0===w.type?b.color===w.color:1===b.type&&1===w.type?b.color1===w.color1&&b.color2===w.color2&&b.coordinate1===w.coordinate1&&b.coordinate2===w.coordinate2:void G()))||null===p){if(null!==p&&(r&&p.addPoints1Point(a,r),o&&p.addPoints2Point(a,o),x===h))continue;m=t;const e=lT(t);let i=u.get(e);i||(i=new iT(t),u.set(e,i)),f=p,p=i.newItem()??new sT,i.push(p)}r&&p.addPoints1Point(a,r),o&&p.addPoints2Point(a,o)}else this._fillGaps||(p=null,f=null,m=null);_=s,d=n}var b,w;u.delete(lT(v)),this._areaRenderer.setData({barSpacing:i.barSpacing(),colorAreas:u})}}class hT extends cT{constructor(t,e,i){super(t,e),x(this,"_fillProps"),x(this,"_rgbaFromInteger"),this._rgbaFromInteger=function(t=1e3){const e=Uc.Cache;Uc.Cache=Yx.bind(Yx,t);const i=Uc(ow);return Uc.Cache=e,i}(),this._isHlineFill="hline_hline"===i.type,ie(this._isHlineFill||"plot_plot"===i.type,"Wrong filledArea type: "+i.type),this._fillProps=i}_plotAId(){return this._fillProps.objAId}_plotBId(){return this._fillProps.objBId}_commonColor(){const t=this._fillProps;return"gradient"===t.fillType?{type:1,color1:ee(t.topColor),color2:ee(t.bottomColor),value1:ee(t.topValue),value2:ee(t.bottomValue),coordinate1:NaN,coordinate2:NaN}:{type:0,color:t.color}}_transparency(){return this._fillProps.transparency??0}_visible(){return!0}_getColorByPlotValue(t){if(0===t.type){if(null==t.colorIndexOrRgba)return null;return{type:0,color:this._rgbaFromInteger(t.colorIndexOrRgba)}}const e=this._commonColor();let i,n;ie(1===e.type),null!=t.colorIndexOrRgba1&&(i=this._rgbaFromInteger(t.colorIndexOrRgba1)),null!=t.colorIndexOrRgba2&&(n=this._rgbaFromInteger(t.colorIndexOrRgba2));const s=t.value1??e.value1,r=t.value2??e.value2;return i=i??e.color1,n=n??e.color2,void 0===s||void 0===r||void 0===i&&void 0===n?null:{type:1,color1:i,color2:n,value1:s,value2:r,coordinate1:NaN,coordinate2:NaN}}}class uT{constructor(t){x(this,"componentId",0),this.cb=t}hitTest(t,e){return this.cb(t,e)}}class dT{constructor(t){x(this,"_renderers",[]),this._hitTestCollector=t}append(t){this._renderers.push(t)}clean(){this._renderers.length=0}draw(t){t.useBitmapCoordinateSpace((e=>{const i=e.context;i.save(),this._renderers.map((e=>{var i;e.draw(t),e.hitTest&&(null==(i=this._hitTestCollector)||i.call(this,new uT(((t,i)=>{var n;return(null==(n=e.hitTest)?void 0:n.call(e,t,i))??null}))))})),i.restore()}))}update(t,e){}}class pT{constructor(t,e,i,n,s,r){x(this,"_renderer"),x(this,"_selectionIndexer"),x(this,"seriesApi",(()=>Object.create(null))),x(this,"fillAreaPaneViews",[]),x(this,"bandPaneViews",[]),this.outputs=t,this.study=e,this.model=i,this.timeScale=r,this._renderer=new dT(s),this._selectionIndexer=new GS(r);const o=e.getStyleValues();Vu(o.filledAreas||{}).forEach((t=>{switch(t.type){case"plot_plot":this.fillAreaPaneViews.push(new hT(e,n,t));break;case"hline_hline":this.fillAreaPaneViews.push(new ZS(e,t));break;default:q()}})),Vu(o.bands).forEach((t=>{this.bandPaneViews.push(new YS(e,t))}))}priceValueBuilder(t){return this.outputs.map((e=>t.study[e]))}isWhitespace(t){return void 0===t.study}renderer(){return this._renderer}update(t){this._renderer.clean();const{visibleRange:e,barSpacing:i,bars:n}=t;if(!e)return;if(!n.length)return;this.fillAreaPaneViews.forEach((t=>{t.update(),this._renderer.append(t.renderer())})),this.bandPaneViews.forEach((t=>{t.update(),this._renderer.append(t.renderer())}));const s=this.model.isSelected(this.seriesApi());let r=[];s?r=this._selectionIndexer.indexes():this._selectionIndexer.clear();const o=s?1:0,a=this.study.getStyleValues();this.outputs.forEach((t=>{const l=ee(a.plots[t]);switch(l.plotType){case"line":{ie(Lx(l));const s=[];for(let i=e.from;i<e.to;i++){const e=n[i];s.push({center:e.x,y:ee(this.seriesApi().priceToCoordinate(e.originalData.study[t]))})}const r={items:s,lineWidth:l.lineWidth+o,lineStyle:Bx.solid,lineColor:l.color,barSpacing:i};this._renderer.append(new iS(r));break}case"cross":{ie(Lx(l));const i=[];for(let r=e.from;r<e.to;r++){const e=n[r];i.push({center:e.x,y:ee(this.seriesApi().priceToCoordinate(e.originalData.study[t]))})}const s={items:i,lineWidth:l.lineWidth+o,lineColor:l.color};this._renderer.append(new Gx(s));break}case"columns":{ie(Nx(l));const s=[];for(let a=e.from;a<e.to;a++){const e=n[a],r=e.x;s.push({center:e.x,left:r-i/2,right:r+i/2,y:ee(this.seriesApi().priceToCoordinate(e.originalData.study[t])),timePointIndex:a,style:{color:e.barColor}})}const r=ee(this.seriesApi().priceToCoordinate(0)),o={items:s,barSpacing:i,lineColor:l.color[0],histogramBase:r};this._renderer.append(new Wx(o));break}default:q()}s&&r.length&&this._renderer.append(new US(this._createSelection(t,r)))}))}_createSelection(t,e){const i=this.seriesApi().series.getPane().getHeight(),n={points:[],bgColors:[],visible:!0,hitTarget:db.Regular};for(const s of e){const e=this.seriesApi().series.dataByIndex(s);if(!e)continue;if(!e.study)continue;const r=this.timeScale.logicalToCoordinate(Math.floor(s));if(Gu(r))continue;const o=e.study[t],a=this.seriesApi().series.priceToCoordinate(o);if(Gu(a))continue;const l=new zS({x:r,y:a});n.points.push(l);const c=l.point.y/i,h=this.model.backgroundColorAtYPercentFromTop(c);n.bgColors.push(h)}return n}defaultOptions(){return{...Vo}}}var fT=Object.getOwnPropertyDescriptor,mT=(t,e,i,n)=>{for(var s,r=n>1?void 0:n?fT(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r},gT=(t,e)=>(i,n)=>e(i,n,t);let vT=class extends he{constructor(t,e,i,n,s){super(),x(this,"series"),x(this,"id"),x(this,"_priceLines",new Map),x(this,"_usedStyleValues"),x(this,"_priceLineEnabled"),x(this,"_handleRangeChange",(()=>{this._updatePriceLines()})),x(this,"_handleDataChange",(async t=>{var e,i;const n=this._dataSource.data(),s=await this._studyService.exec(this._studyInfo.cal,n,this.getInputs());null==(i=(e=this._studyInfo).coloring)||i.call(e,s,this.getStyleValues());const r=Lu(s);if("update"===t){if(!r)return;this.series.update(r)}else this.series.setData(s);this._updatePriceLines(),this._handleRangeChange()})),this._studyInfo=t,this._dataSource=e,this._chartService=i,this._configurationService=n,this._studyService=s,this.id=`${t.abbr}@${de()}`,this._priceLineEnabled=n.getValue("chartProperties").scales.showStudyLastValue,this.series=this._createSeries(),this._register(le((()=>{if(this._chartService.getModel().currentActive===this&&this._chartService.getModel().blur(),this._chartService.getController().onSeriesRemoved(this.id),this._studyInfo.overlap)this._chartService.chartApi.removeSeries(this.series);else{const t=this.paneIndex();this._chartService.chartApi.removePane(t)}}))),this._registerListeners()}get studyInfo(){return this._studyInfo}getPriceScaleOptions(){return null}_computeUsedStyleValues(){const t=this._configurationService.getValue("studyProperties")[this._studyInfo.abbr.toLowerCase()],e=this._studyInfo.styleValues;return Yu({},t,e)}_createSeries(){const t=new pT(this._studyInfo.outputs,this,this._chartService.getModel(),this._chartService.chartApi,(t=>{this._chartService.getController().collectSeriesHitTestObjects(this.id,t)}),this._chartService.getTimeScale()),e=this._studyInfo.format,i=this.getPriceScaleOptions(),n=this._chartService.chartApi.addCustomSeries(t,{lastValueVisible:!1,priceLineVisible:!1,priceScaleId:i?"":void 0,priceFormat:"inherit"===e.type?{type:"custom",formatter:t=>this._chartService.mainSeriesApi.priceFormatter().format(t),tickmarksFormatter:t=>this._chartService.mainSeriesApi.priceFormatter().formatTickmarks(t),minMove:this._chartService.symbolInfo().minmov}:e},this._studyInfo.overlap?0:this._chartService.chartApi.panes().length+1);return i&&n.priceScale().applyOptions(i),this._chartService.mainSeriesApi.getSeries().setSeriesOrder(999),t.seriesApi=()=>this,this._chartService.getController().onSeriesCreated(this.id,this),n}_onStyleChange(){this._usedStyleValues=void 0,this._handleDataChange("full")}priceToCoordinate(t){return this.series.priceToCoordinate(t)}requestUpdate(){this.series.requestUpdate()}updateActive(t){this.series.setSeriesOrder(t?1e3:0),this._chartService.getStoreHandler().updateStudyLegend(this.id,(e=>{e.selected=t})),this.series.updateAllViews(),this.requestUpdate()}updateHover(){}isSeries(){return!0}plots(){return this.series.plots()}_registerListeners(){const t=this._handleRangeChange.bind(this);this._chartService.getTimeScale().subscribeVisibleLogicalRangeChange(t),this._register(le((()=>{this._chartService.getTimeScale().unsubscribeVisibleLogicalRangeChange(t)}))),this._register(this._dataSource.onDataChanged(this._handleDataChange.bind(this))),this._register(Hv(this._configurationService.store,(t=>t.studyProperties[this._studyInfo.abbr.toLowerCase()]),(()=>this._onStyleChange())))}async loadData(){const t=this._dataSource.status();t!==Dv.error&&Pv(t)&&this._handleDataChange("full")}async resetData(){return this.series.setData([]),!0}getStyleValues(){return this._usedStyleValues||(this._usedStyleValues=this._computeUsedStyleValues()),this._usedStyleValues}getInputs(){return this._studyInfo.inputs}paneHTMLElement(){return ee(this.series.getPane().getHTMLElement())}paneIndex(){try{return this.series.getPane().paneIndex()}catch{return-1}}async paneReady(){return t=16,new Promise((e=>{setTimeout((()=>e()),t)}));var t}_updatePriceLines(){if(!this._priceLineEnabled)return;const t=this._chartService.getTimeScale().getVisibleLogicalRange();if(!t)return;if("number"!=typeof(e=t.to)||!ju(e))return;var e;const i=this.series.barsProvider().lastIndex();if(z(i))return;const n=Math.min(Math.round(t.to),i),s=n===i,r=this.series.dataByIndex(n,Xi.NearestLeft);r&&this._studyInfo.outputs.forEach((t=>{var e;const i=ee(this.getStyleValues().plots[t]),n=ee((null==(e=r.study)?void 0:e[t])??r.value);let o=this._priceLines.get(t);const a=ee(this.series.priceToCoordinate(n)),l=this.series.getPane().getHeight();let c;c=Lx(i)?i.color:ee(r.color);const h=this._chartService.getModel().backgroundColorAtYPercentFromTop(a/l),u={price:n,color:c,lineVisible:!1,axisLabelVisible:!0,axisLabelColor:s?c:h,axisLabelTextColor:s?h:c,axisLabelBorderColor:c,title:this.isChartCompare()?this.symbolInfo().name:""};if(o){if(o.options().price===u.price)return;o.applyOptions(u)}else o=this.series.createPriceLine({...u,price:n}),this._priceLines.set(t,o)}))}updateLegend(t){let e;const i=this.series;if(e=t&&t.time?t.seriesData.get(i):Lu(i.data()),!e)return;const n=i.priceFormatter(),s=this.getStyleValues();this._chartService.getStoreHandler().updateStudyLegend(this.id,(t=>{this._studyInfo.outputs.forEach(((i,r)=>{var o;const a=ee(s.plots[i]);t.values[r]={key:i,title:a.title??"",value:n.format((null==(o=e.study)?void 0:o[i])??(null==e?void 0:e.value)),color:Lx(a)?a.color:ee(e.color)}}))}))}isChartCompare(){return!1}toggleVisible(t){this.series.applyOptions({visible:t})}save(){const{plots:t}=this.getStyleValues();return{type:xx.Study,name:this.studyInfo.name,state:{inputs:this.studyInfo.inputs,styles:C_(t)}}}priceScale(){return this.series}};async function yT(t,e){return e.map((t=>({...t,study:{plot:t.customValues.close}})))}vT=mT([gT(2,jo),gT(3,kg),gT(4,$_)],vT);let _T=class extends vT{constructor(t,e,i,n,s){super({id:de(),name:t.name,overlap:!0,optionInfos:[],cal:yT,abbr:t.name,outputs:["plot"],styleValues:{plots:{plot:{color:"#FF0000",lineWidth:1,plotType:"line"}},bands:{},filledAreas:{}},format:{type:"price",precision:t.pricescale}},e,i,n,s),this._symbolInfo=t}async loadData(){}async resetData(){return this._dataSource.resetData()}symbolInfo(){return this._symbolInfo}isChartCompare(){return!0}};async function bT(t,e){return e.map((t=>{const e=ee(t.customValues.volume),i=t.color;return{time:t.time,customValues:t.customValues,color:bb(i,.5),study:{plot:e},value:e}}))}_T=mT([gT(2,jo),gT(3,kg),gT(4,$_)],_T);let wT=class extends vT{constructor(t,e,i,n){super({id:"Volume",name:"Volume",overlap:!0,optionInfos:[],cal:bT,abbr:"Volume",outputs:["plot"],styleValues:{plots:{plot:{plotType:"columns",color:[]}},bands:{},filledAreas:{}},format:{type:"volume",precision:4}},t,e,i,n)}getPriceScaleOptions(){return{scaleMargins:{top:.75,bottom:0}}}};wT=mT([gT(1,jo),gT(2,kg),gT(3,$_)],wT);const xT={layout:{background:{type:os.Solid,color:"#ffffff"},textColor:"#1A1A1A",panes:{separatorColor:"#EBEBEB"}},rightPriceScale:{background:{type:os.Solid,color:"#ffffff"},textColor:"#1A1A1A"},timeScale:{},grid:{vertLines:{color:"rgba(48, 48, 48, 0.06)"},horzLines:{color:"rgba(48, 48, 48, 0.06)"}},crosshair:{vertLine:{color:"#9C9C9C",labelBackgroundColor:"#191919"},horzLine:{color:"#9C9C9C",labelBackgroundColor:"#191919"}}},ST={layout:{background:{type:os.VerticalGradient,topColor:"#1C1C1C",bottomColor:"#1A1A1A"},textColor:"#B8B8B8",panes:{separatorColor:"#303030"}},rightPriceScale:{background:{type:os.VerticalGradient,topColor:"#1C1C1C",bottomColor:"#1A1A1A"},textColor:"#B8B8B8"},timeScale:{},grid:{vertLines:{color:"rgba(242, 242, 242, 0.06)"},horzLines:{color:"rgba(242, 242, 242, 0.06)"}},crosshair:{vertLine:{color:"#9C9C9C",labelBackgroundColor:"#353535"},horzLine:{color:"#9C9C9C",labelBackgroundColor:"#353535"}}};var TT=Object.getOwnPropertyDescriptor;const CT=[{id:"Etc/UTC",offset:0,offsetStr:"",titleI18nKey:"tz.Etc/UTC"},{id:"Pacific/Honolulu",offset:-36e6,offsetStr:"UTC-10",titleI18nKey:"tz.Pacific/Honolulu"},{id:"America/Anchorage",offset:-288e5,offsetStr:"UTC-8",titleI18nKey:"tz.America/Anchorage"},{id:"America/Juneau",offset:-288e5,offsetStr:"UTC-8",titleI18nKey:"tz.America/Juneau"},{id:"America/Los_Angeles",offset:-252e5,offsetStr:"UTC-7",titleI18nKey:"tz.America/Los_Angeles"},{id:"America/Phoenix",offset:-252e5,offsetStr:"UTC-7",titleI18nKey:"tz.America/Phoenix"},{id:"America/Vancouver",offset:-252e5,offsetStr:"UTC-7",titleI18nKey:"tz.America/Vancouver"},{id:"America/El_Salvador",offset:-216e5,offsetStr:"UTC-6",titleI18nKey:"tz.America/El_Salvador"},{id:"America/Mexico_City",offset:-216e5,offsetStr:"UTC-6",titleI18nKey:"tz.America/Mexico_City"},{id:"US/Mountain",offset:-216e5,offsetStr:"UTC-6",titleI18nKey:"tz.US/Mountain"},{id:"America/Bogota",offset:-18e6,offsetStr:"UTC-5",titleI18nKey:"tz.America/Bogota"},{id:"America/Chicago",offset:-18e6,offsetStr:"UTC-5",titleI18nKey:"tz.America/Chicago"},{id:"America/Lima",offset:-18e6,offsetStr:"UTC-5",titleI18nKey:"tz.America/Lima"},{id:"America/Caracas",offset:-144e5,offsetStr:"UTC-4",titleI18nKey:"tz.America/Caracas"},{id:"America/New_York",offset:-144e5,offsetStr:"UTC-4",titleI18nKey:"tz.America/New_York"},{id:"America/Santiago",offset:-144e5,offsetStr:"UTC-4",titleI18nKey:"tz.America/Santiago"},{id:"America/Toronto",offset:-144e5,offsetStr:"UTC-4",titleI18nKey:"tz.America/Toronto"},{id:"America/Argentina/Buenos_Aires",offset:-108e5,offsetStr:"UTC-3",titleI18nKey:"tz.America/Argentina/Buenos_Aires"},{id:"America/Sao_Paulo",offset:-108e5,offsetStr:"UTC-3",titleI18nKey:"tz.America/Sao_Paulo"},{id:"Atlantic/Azores",offset:0,offsetStr:"UTC+0",titleI18nKey:"tz.Atlantic/Azores"},{id:"Atlantic/Reykjavik",offset:0,offsetStr:"UTC+0",titleI18nKey:"tz.Atlantic/Reykjavik"},{id:"Africa/Casablanca",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Africa/Casablanca"},{id:"Africa/Lagos",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Africa/Lagos"},{id:"Africa/Tunis",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Africa/Tunis"},{id:"Europe/Dublin",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Europe/Dublin"},{id:"Europe/Lisbon",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Europe/Lisbon"},{id:"Europe/London",offset:36e5,offsetStr:"UTC+1",titleI18nKey:"tz.Europe/London"},{id:"Africa/Johannesburg",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Africa/Johannesburg"},{id:"Europe/Amsterdam",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Amsterdam"},{id:"Europe/Belgrade",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Belgrade"},{id:"Europe/Berlin",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Berlin"},{id:"Europe/Bratislava",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Bratislava"},{id:"Europe/Brussels",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Brussels"},{id:"Europe/Budapest",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Budapest"},{id:"Europe/Copenhagen",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Copenhagen"},{id:"Europe/Luxembourg",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Luxembourg"},{id:"Europe/Madrid",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Madrid"},{id:"Europe/Malta",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Malta"},{id:"Europe/Oslo",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Oslo"},{id:"Europe/Paris",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Paris"},{id:"Europe/Prague",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Prague"},{id:"Europe/Rome",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Rome"},{id:"Europe/Stockholm",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Stockholm"},{id:"Europe/Vienna",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Vienna"},{id:"Europe/Warsaw",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Warsaw"},{id:"Europe/Zurich",offset:72e5,offsetStr:"UTC+2",titleI18nKey:"tz.Europe/Zurich"},{id:"Africa/Cairo",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Africa/Cairo"},{id:"Africa/Nairobi",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Africa/Nairobi"},{id:"Asia/Bahrain",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Bahrain"},{id:"Asia/Jerusalem",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Jerusalem"},{id:"Asia/Kuwait",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Kuwait"},{id:"Asia/Nicosia",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Nicosia"},{id:"Asia/Qatar",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Qatar"},{id:"Asia/Riyadh",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Asia/Riyadh"},{id:"Europe/Athens",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Athens"},{id:"Europe/Bucharest",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Bucharest"},{id:"Europe/Helsinki",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Helsinki"},{id:"Europe/Istanbul",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Istanbul"},{id:"Europe/Moscow",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Moscow"},{id:"Europe/Riga",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Riga"},{id:"Europe/Tallinn",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Tallinn"},{id:"Europe/Vilnius",offset:108e5,offsetStr:"UTC+3",titleI18nKey:"tz.Europe/Vilnius"},{id:"Asia/Tehran",offset:126e5,offsetStr:"UTC+3:30",titleI18nKey:"tz.Asia/Tehran"},{id:"Asia/Dubai",offset:144e5,offsetStr:"UTC+4",titleI18nKey:"tz.Asia/Dubai"},{id:"Asia/Muscat",offset:144e5,offsetStr:"UTC+4",titleI18nKey:"tz.Asia/Muscat"},{id:"Asia/Almaty",offset:18e6,offsetStr:"UTC+5",titleI18nKey:"tz.Asia/Almaty"},{id:"Asia/Ashkhabad",offset:18e6,offsetStr:"UTC+5",titleI18nKey:"tz.Asia/Ashkhabad"},{id:"Asia/Karachi",offset:18e6,offsetStr:"UTC+5",titleI18nKey:"tz.Asia/Karachi"},{id:"Asia/Colombo",offset:198e5,offsetStr:"UTC+5:30",titleI18nKey:"tz.Asia/Colombo"},{id:"Asia/Kolkata",offset:198e5,offsetStr:"UTC+5:30",titleI18nKey:"tz.Asia/Kolkata"},{id:"Asia/Kathmandu",offset:207e5,offsetStr:"UTC+5:45",titleI18nKey:"tz.Asia/Kathmandu"},{id:"Asia/Dhaka",offset:216e5,offsetStr:"UTC+6",titleI18nKey:"tz.Asia/Dhaka"},{id:"Asia/Yangon",offset:234e5,offsetStr:"UTC+6:30",titleI18nKey:"tz.Asia/Yangon"},{id:"Asia/Bangkok",offset:252e5,offsetStr:"UTC+7",titleI18nKey:"tz.Asia/Bangkok"},{id:"Asia/Ho_Chi_Minh",offset:252e5,offsetStr:"UTC+7",titleI18nKey:"tz.Asia/Ho_Chi_Minh"},{id:"Asia/Jakarta",offset:252e5,offsetStr:"UTC+7",titleI18nKey:"tz.Asia/Jakarta"},{id:"Asia/Chongqing",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Chongqing"},{id:"Asia/Hong_Kong",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Hong_Kong"},{id:"Asia/Kuala_Lumpur",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Kuala_Lumpur"},{id:"Asia/Manila",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Manila"},{id:"Asia/Shanghai",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Shanghai"},{id:"Asia/Singapore",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Singapore"},{id:"Asia/Taipei",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Asia/Taipei"},{id:"Australia/Perth",offset:288e5,offsetStr:"UTC+8",titleI18nKey:"tz.Australia/Perth"},{id:"Asia/Seoul",offset:324e5,offsetStr:"UTC+9",titleI18nKey:"tz.Asia/Seoul"},{id:"Asia/Tokyo",offset:324e5,offsetStr:"UTC+9",titleI18nKey:"tz.Asia/Tokyo"},{id:"Australia/Adelaide",offset:342e5,offsetStr:"UTC+9:30",titleI18nKey:"tz.Australia/Adelaide"},{id:"Australia/Brisbane",offset:36e6,offsetStr:"UTC+10",titleI18nKey:"tz.Australia/Brisbane"},{id:"Australia/Sydney",offset:36e6,offsetStr:"UTC+10",titleI18nKey:"tz.Australia/Sydney"},{id:"Pacific/Norfolk",offset:396e5,offsetStr:"UTC+11",titleI18nKey:"tz.Pacific/Norfolk"},{id:"Pacific/Auckland",offset:432e5,offsetStr:"UTC+12",titleI18nKey:"tz.Pacific/Auckland"},{id:"Pacific/Chatham",offset:459e5,offsetStr:"UTC+12:45",titleI18nKey:"tz.Pacific/Chatham"},{id:"Pacific/Fakaofo",offset:468e5,offsetStr:"UTC+13",titleI18nKey:"tz.Pacific/Fakaofo"}];let MT=class extends he{constructor(t,e){super(),x(this,"_onTimezoneChanged",new dl),x(this,"onTimezoneChanged",this._onTimezoneChanged.event),x(this,"_tzId"),this.chartStore=t,this.chartService=e,this._tzId=this.getTimezone().id,this._register(this.onTimezoneChanged((()=>{this._tzId=this.getTimezone().id})))}getTimezoneId(){return this._tzId}availableTimezones(){return CT}getTimezone(){const t=Dg(this.chartService.getStore()).chartProperties.timezone;if("exchange"===t){const{timezone:t}=this.chartService.symbolInfo();if(t)return ee(this.availableTimezones().find((e=>e.id===t)));{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,e=this.availableTimezones().find((e=>e.id===t));return e||ee(this.availableTimezones().find((t=>"Etc/UTC"===t.id)))}}return ee(this.availableTimezones().find((e=>e.id===t)))}setTimezone(t){const e=this.availableTimezones().find((e=>e.id===t));e&&(this.chartStore.setChartProperty("timezone",t),this._onTimezoneChanged.fire(t))}};MT=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?TT(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([((t,e)=>(i,n)=>e(i,n,t))(1,jo)],MT);class IT{constructor(t){x(this,"resource"),x(this,"type",Ta.Resource),this.chartService=t,this.resource=t.id}}class ET extends IT{constructor(t,e){super(t),x(this,"_leftOffset",null),x(this,"_rightOffset",null),x(this,"_barSpacing",null),x(this,"_priceAutoScale",null),this.viewport=e}undo(){const t=this.chartService.getTimeScale(),e=ee(t.getVisibleRange());t.applyOptions({barSpacing:ee(this._barSpacing)}),t.setVisibleRange({from:e.from+ee(this._leftOffset),to:e.to+ee(this._rightOffset)});const i=this.chartService.getPriceScale(),n=this._priceAutoScale;n?i.setAutoScale(!!n):i.setVisibleRange({from:this.viewport.fromPrice,to:this.viewport.toPrice})}redo(){const t=this.chartService.getTimeScale(),e=ee(t.getVisibleRange());this._leftOffset=e.from-this.viewport.fromTime,this._rightOffset=e.to-this.viewport.toTime,this._barSpacing=t.barSpacing(),t.setVisibleRange({from:this.viewport.fromTime,to:this.viewport.toTime});const i=this.chartService.getPriceScale();this._priceAutoScale=i.options().autoScale,i.setAutoScale(!1),i.setVisibleRange({from:this.viewport.fromPrice,to:this.viewport.toPrice})}}var AT=(t=>(t[t.in=0]="in",t[t.out=1]="out",t))(AT||{});class DT extends IT{constructor(t,e,i,n){super(t),this._cmd=e,this._zoomStack=i,this._dir=n}undo(){if(0===this._dir){if(this._cmd!==this._zoomStack.head())return void console.warn("zoom stack inconsistency");this._cmd.undo(),this._zoomStack.pop()}else this._cmd.redo(),this._zoomStack.push(this._cmd)}redo(){if(0===this._dir)this._cmd.redo(),this._zoomStack.push(this._cmd);else{if(this._cmd!==this._zoomStack.head())return void console.warn("zoom stack inconsistency");this._cmd.undo(),this._zoomStack.pop()}}}class kT{constructor(t,e){x(this,"_commands",[]),this._onPush=t,this._onPop=e}push(t){this._commands.push(t),this._onPush(t.viewport)}pop(){this._commands.pop(),this._onPop()}head(){return this._commands[this._commands.length-1]}}function PT(t,e,i){return new N_(t,e,i)}function OT(t,e,i){return new F_(t,e,i)}const RT=window.PointerEvent&&("ontouchstart"in window||navigator.maxTouchPoints>0);var LT,NT,FT=Object.defineProperty,BT=Object.getOwnPropertyDescriptor;(NT=LT||(LT={})).Tap="-chartles-gesturetap",NT.Change="-chartles-gesturechange",NT.Start="-chartles-gesturestart",NT.End="-chartles-gesturesend",NT.Contextmenu="-chartles-gesturecontextmenu";const zT=(_=class extends he{constructor(){super(),x(this,"dispatched",!1),x(this,"targets",new Qo),x(this,"ignoreTargets",new Qo),x(this,"handle"),x(this,"activeTouches"),x(this,"_lastSetTapCountTime"),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Xt(document,"touchstart",(t=>this.onTouchStart(t)),{passive:!1})),this._register(Xt(document,"touchend",(t=>this.onTouchEnd(t)))),this._register(Xt(document,"touchmove",(t=>this.onTouchMove(t)),{passive:!1}))}static addTarget(t){if(!_.isTouchDevice())return he.None;_.INSTANCE||(_.INSTANCE=new _);return le(_.INSTANCE.targets.push(t))}static ignoreTarget(t){if(!_.isTouchDevice())return he.None;_.INSTANCE||(_.INSTANCE=new _);return le(_.INSTANCE.ignoreTargets.push(t))}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){const e=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=t.targetTouches.length;i<n;i++){const n=t.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:e,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[e],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};const s=this.newGestureEvent(LT.Start,n.target);s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t){const e=Date.now(),i=Object.keys(this.activeTouches).length;for(let n=0,s=t.changedTouches.length;n<s;n++){const s=t.changedTouches.item(n);if(!Object.prototype.hasOwnProperty.call(this.activeTouches,String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],o=Date.now()-r.initialTimeStamp;if(o<_.HOLD_DELAY&&Math.abs(r.initialPageX-r.rollingPageX.at(-1))<30&&Math.abs(r.initialPageY-r.rollingPageY.at(-1))<30){const t=this.newGestureEvent(LT.Tap,r.initialTarget);t.pageX=r.rollingPageX.at(-1),t.pageY=r.rollingPageY.at(-1),this.dispatchEvent(t)}else if(o>=_.HOLD_DELAY&&Math.abs(r.initialPageX-r.rollingPageX.at(-1))<30&&Math.abs(r.initialPageY-r.rollingPageY.at(-1))<30){const t=this.newGestureEvent(LT.Contextmenu,r.initialTarget);t.pageX=r.rollingPageX.at(-1),t.pageY=r.rollingPageY.at(-1),this.dispatchEvent(t)}else if(1===i){const t=r.rollingPageX.at(-1),i=r.rollingPageY.at(-1),n=r.rollingTimestamps.at(-1)-r.rollingTimestamps[0],s=t-r.rollingPageX[0],o=i-r.rollingPageY[0],a=[...this.targets].filter((t=>r.initialTarget instanceof Node&&t.contains(r.initialTarget)));this.inertia(a,e,Math.abs(s)/n,s>0?1:-1,t,Math.abs(o)/n,o>0?1:-1,i)}this.dispatchEvent(this.newGestureEvent(LT.End,r.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,e){const i=document.createEvent("CustomEvent");return i.initEvent(t,!1,!0),i.initialTarget=e,i.tapCount=0,i}dispatchEvent(t){if(t.type===LT.Tap){const e=(new Date).getTime();let i=0;i=e-this._lastSetTapCountTime>_.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=e,t.tapCount=i}else t.type!==LT.Change&&t.type!==LT.Contextmenu||(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(t.initialTarget))return;const e=[];for(const i of this.targets)if(i.contains(t.initialTarget)){let n=0,s=t.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;e.push([n,i])}e.sort(((t,e)=>t[0]-e[0]));for(const[i,n]of e)n.dispatchEvent(t),this.dispatched=!0}}inertia(t,e,i,n,s,r,o,a){this.handle=Qt((()=>{const l=Date.now(),c=l-e;let h=0,u=0,d=!0;i+=_.SCROLL_FRICTION*c,r+=_.SCROLL_FRICTION*c,i>0&&(d=!1,h=n*i*c),r>0&&(d=!1,u=o*r*c);const p=this.newGestureEvent(LT.Change);p.translationX=h,p.translationY=u,t.forEach((t=>t.dispatchEvent(p))),d||this.inertia(t,l,i,n,s+h,r,o,a+u)}))}onTouchMove(t){const e=Date.now();for(let i=0,n=t.changedTouches.length;i<n;i++){const n=t.changedTouches.item(i);if(!Object.prototype.hasOwnProperty.call(this.activeTouches,String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}const s=this.activeTouches[n.identifier],r=this.newGestureEvent(LT.Change,s.initialTarget);r.translationX=n.pageX-s.rollingPageX.at(-1),r.translationY=n.pageY-s.rollingPageY.at(-1),r.pageX=n.pageX,r.pageY=n.pageY,this.dispatchEvent(r),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(n.pageX),s.rollingPageY.push(n.pageY),s.rollingTimestamps.push(e)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}},x(_,"SCROLL_FRICTION",-.005),x(_,"INSTANCE"),x(_,"HOLD_DELAY",700),x(_,"CLEAR_TAP_COUNT_TIME",400),_);((t,e,i)=>{for(var n,s=BT(e,i),r=t.length-1;r>=0;r--)(n=t[r])&&(s=n(e,i,s)||s);s&&FT(e,i,s)})([rl],zT,"isTouchDevice");let VT=zT;class $T{constructor(){x(this,"_hooks",new ce),x(this,"_pointerMoveCallback",null),x(this,"_onStopCallback",null)}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,t&&i&&i(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let r=t;try{t.setPointerCapture(e),this._hooks.add(le((()=>{try{t.releasePointerCapture(e)}catch{}})))}catch{r=Gt(t)}this._hooks.add(Xt(r,qt.POINTER_MOVE,(t=>{t.buttons===i?(t.preventDefault(),this._pointerMoveCallback(t)):this.stopMonitoring(!0)}))),this._hooks.add(Xt(r,qt.POINTER_UP,(()=>this.stopMonitoring(!0))))}}class HT extends jt{constructor(t,e){super(t),x(this,"localX"),x(this,"localY");const i=function(t){const e=t.getBoundingClientRect(),i=Gt(t);return{left:e.left+i.scrollX,top:e.top+i.scrollY,width:e.width,height:e.height}}(e),n=i.width/e.offsetWidth,s=i.height/e.offsetHeight;this.localX=(t.clientX-i.left)/n,this.localY=(t.clientY-i.top)/s}}class KT{constructor(t){x(this,"_chartViewDomNode"),this._chartViewDomNode=t}_create(t){return new HT(t,this._chartViewDomNode)}onContextMenu(t,e){return Xt(t,qt.CONTEXT_MENU,(t=>{e(this._create(t))}))}onMouseUp(t,e){return Xt(t,qt.MOUSE_UP,(t=>{e(this._create(t))}))}onMouseDown(t,e){return Xt(t,qt.MOUSE_DOWN,(t=>{e(this._create(t))}))}onPointerDown(t,e){return Xt(t,qt.POINTER_DOWN,(t=>{e(this._create(t),t.pointerId)}))}onMouseLeave(t,e){return Xt(t,qt.MOUSE_LEAVE,(t=>{e(this._create(t))}))}onMouseMove(t,e){return Xt(t,qt.MOUSE_MOVE,(t=>e(this._create(t))))}}class WT{constructor(t){x(this,"_chartViewDomNode"),this._chartViewDomNode=t}_create(t){return new HT(t,this._chartViewDomNode)}onPointerUp(t,e){return Xt(t,"pointerup",(t=>{e(this._create(t))}))}onPointerDown(t,e){return Xt(t,qt.POINTER_DOWN,(t=>{e(this._create(t),t.pointerId)}))}onPointerLeave(t,e){return Xt(t,qt.POINTER_LEAVE,(t=>{e(this._create(t))}))}onPointerMove(t,e){return Xt(t,"pointermove",(t=>e(this._create(t))))}}class jT extends he{constructor(t){super(),x(this,"_chartViewDomNode"),x(this,"_globalPointerMoveMonitor"),x(this,"_keydownListener"),this._chartViewDomNode=t,this._globalPointerMoveMonitor=this._register(new $T),this._keydownListener=null}startMonitoring(t,e,i,n,s){this._keydownListener=Zt(t.ownerDocument,"keydown",(t=>{t.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,t.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(t,e,i,(t=>{n(new HT(t,this._chartViewDomNode))}),(t=>{this._keydownListener.dispose(),s(t)}))}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}var UT=(t=>(t[t.None=0]="None",t[t.Chart=1]="Chart",t[t.Legend=2]="Legend",t[t.AxisSetting=3]="AxisSetting",t[t.Textarea=4]="Textarea",t[t.TimeScaleControl=5]="TimeScaleControl",t))(UT||{});class GT{static write(t,e){t.setAttribute("data-mprt",String(e))}static read(t){const e=t.getAttribute("data-mprt");return null===e?0:parseInt(e,10)}static collect(t,e){const i=[];let n=0;for(;t&&t!==t.ownerDocument.body&&t!==e;){if(t.nodeType===t.ELEMENT_NODE){const e=this.read(t);e&&(i[n++]=e)}t=t.parentElement}const s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=i[n-r-1];return s}}class qT{constructor(t){x(this,"_viewHelper"),this._viewHelper=t}mouseTargetIsWidget(t){const e=t.target,i=GT.collect(e,this._viewHelper.viewDomNode);return!!(YT(i,UT.Legend)||YT(i,UT.AxisSetting)||YT(i,UT.Textarea))}}function YT(t,e){return t.length&&t[0]===e}class XT extends he{constructor(t,e){super(),x(this,"viewController"),x(this,"viewHelper"),x(this,"mouseTargetFactory"),x(this,"_mouseDownOperation"),x(this,"lastMouseLeaveTime"),x(this,"_mouseLeaveMonitor",null),this.viewController=t,this.viewHelper=e,this.mouseTargetFactory=new qT(e),this._mouseDownOperation=this._register(new ZT(this.viewController,this.viewHelper)),this.lastMouseLeaveTime=-1;const i=new KT(e.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,(t=>this._onContextMenu(t)))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,(t=>{this._onMouseMove(t),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Xt(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(t=>{this.viewHelper.viewDomNode.contains(t.target)||this._onMouseLeave(new HT(t,this.viewHelper.viewDomNode))})))}))),this._register(i.onMouseUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t))));let n=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,((t,e)=>{n=e}))),this._register(Xt(this.viewHelper.viewDomNode,qt.POINTER_UP,(()=>{this._mouseDownOperation.onPointerUp()}))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,(t=>this._onMouseDown(t,n)))),this._register(Zt(this.viewHelper.viewDomNode,qt.KEY_DOWN,this._onKeyDown.bind(this))),this._register(Zt(this.viewHelper.viewDomNode,qt.KEY_UP,this._onKeyUp.bind(this)))}isMouseDownOperating(){return this._mouseDownOperation.isActive()}_onContextMenu(t){t.preventDefault(),this.viewController.emitContextMenu(PT(qt.CONTEXT_MENU,t,this.viewHelper.chartService))}_onMouseMove(t){if(this._mouseDownOperation.isActive())return;t.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove(PT(qt.MOUSE_MOVE,t,this.viewHelper.chartService))}_onMouseLeave(t){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=t.timestamp,this.viewController.emitMouseLeave(PT(qt.MOUSE_LEAVE,t,this.viewHelper.chartService))}_onMouseUp(t){this.viewController.emitMouseUp(PT(qt.MOUSE_UP,t,this.viewHelper.chartService))}_onMouseDown(t,e){this.mouseTargetFactory.mouseTargetIsWidget(t)||(this.viewController.emitMouseDown(PT(qt.MOUSE_DOWN,t,this.viewHelper.chartService)),this._mouseDownOperation.start(t,e))}_createKeyboardEvent(t,e){return new B_(t,e,this.viewHelper.chartService)}_onKeyDown(t){this.viewController.emitKeyDown(this._createKeyboardEvent(qt.KEY_DOWN,t))}_onKeyUp(t){this.viewController.emitKeyUp(this._createKeyboardEvent(qt.KEY_UP,t))}}class ZT extends he{constructor(t,e){super(),x(this,"_viewController"),x(this,"_viewHelper"),x(this,"_mouseMoveMonitor"),x(this,"_mouseState"),x(this,"_isActive"),x(this,"_lastMouseEvent"),this._viewController=t,this._viewHelper=e,this._mouseMoveMonitor=this._register(new jT(e.viewDomNode)),this._mouseState=new JT,this._isActive=!1,this._lastMouseEvent=null}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t),this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag(PT(qt.DRAG,t,this._viewHelper.chartService)):G()}start(t,e){this._lastMouseEvent=t,this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t),this._mouseState.trySetCount(t.detail,{x:t.posx,y:t.posy}),t.detail=this._mouseState.count,!this._mouseState.altKey&&t.detail<2&&!this._isActive&&(this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._viewController.emitMouseDragStart(PT(qt.DRAG_START,t,this._viewHelper.chartService)),this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewDomNode,e,t.buttons,(t=>this._onMouseDownThenMove(t)),(t=>{!function(t){return t instanceof KeyboardEvent||t instanceof Gt(t).KeyboardEvent}(t)?this._viewController.emitMouseDrop(PT(qt.DROP,ee(this._lastMouseEvent),this._viewHelper.chartService)):this._viewController.emitMouseDropCanceled(PT(qt.DRAG_END,ee(this._lastMouseEvent),this._viewHelper.chartService)),this._stop()})))}_stop(){this._isActive=!1}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}}const QT=class t{constructor(){x(this,"_altKey"),x(this,"_ctrlKey"),x(this,"_metaKey"),x(this,"_shiftKey"),x(this,"_leftButton"),x(this,"_middleButton"),x(this,"_lastMouseDownPosition"),x(this,"_lastMouseDownPositionEqualCount"),x(this,"_lastMouseDownCount"),x(this,"_lastSetMouseDownCountTime"),x(this,"isDragAndDrop"),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get count(){return this._lastMouseDownCount}setModifiers(t){this._altKey=t.altKey,this._ctrlKey=t.ctrlKey,this._metaKey=t.metaKey,this._shiftKey=t.shiftKey}setStartButtons(t){this._leftButton=t.leftButton,this._middleButton=t.middleButton}trySetCount(e,i){const n=(new Date).getTime();n-this._lastSetMouseDownCountTime>t.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&Wu(this._lastMouseDownPosition.x,i)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=i,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};x(QT,"CLEAR_MOUSE_DOWN_COUNT_TIME",400);let JT=QT;class tC extends XT{constructor(t,e){super(t,e),x(this,"_lastPointerType"),this._register(VT.addTarget(this.viewHelper.viewDomNode)),this._register(Xt(this.viewHelper.viewDomNode,LT.Tap,(t=>this.onTap(t)))),this._register(Xt(this.viewHelper.viewDomNode,LT.Change,(t=>this.onChange(t)))),this._register(Xt(this.viewHelper.viewDomNode,LT.Contextmenu,(t=>this._onContextMenu(new HT(t,e.viewDomNode))))),this._lastPointerType="mouse",this._register(Xt(this.viewHelper.viewDomNode,"pointerdown",(t=>{const e=t.pointerType;this._lastPointerType="mouse"!==e?"touch"===e?"touch":"pen":"mouse"})));const i=new WT(e.viewDomNode);this._register(i.onPointerUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t)))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,((t,e)=>this._onMouseDown(t,e))))}onTap(t){t.initialTarget&&this.viewHelper.viewDomNode.contains(t.initialTarget)&&(t.preventDefault(),this._dispatchGesture(t,!1))}onChange(t){"pen"===this._lastPointerType&&this._dispatchGesture(t,!0)}_dispatchGesture(t,e){console.warn("gesture evnt",t,e)}_onMouseDown(t,e){"touch"!==t.browserEvent.pointerType&&super._onMouseDown(t,e)}}class eC extends XT{constructor(t,e){super(t,e),this._register(VT.addTarget(this.viewHelper.viewDomNode)),this._register(Xt(this.viewHelper.viewDomNode,LT.Tap,(t=>this.onTap(t)))),this._register(Xt(this.viewHelper.viewDomNode,LT.Change,(t=>this.onChange(t)))),this._register(Xt(this.viewHelper.viewDomNode,LT.Contextmenu,(t=>this._onContextMenu(new HT(t,this.viewHelper.viewDomNode)))))}onTap(t){t.preventDefault(),console.warn("tag",t)}onChange(t){console.warn("change",t)}}class iC extends he{constructor(t,e){super(),x(this,"_mouseHandler");(ht||ut&&ct)&&RT?this._register(new tC(t,e)):window.TouchEvent?this._register(this._mouseHandler=new eC(t,e)):this._register(this._mouseHandler=new XT(t,e))}isMouseDownOperating(){var t;return!!(null==(t=this._mouseHandler)?void 0:t.isMouseDownOperating())}}class nC{constructor(t){x(this,"userInputEvents"),this.userInputEvents=t}emitKeyDown(t){this.userInputEvents.emitKeyDown(t)}emitKeyUp(t){this.userInputEvents.emitKeyUp(t)}emitContextMenu(t){this.userInputEvents.emitContextMenu(t)}emitMouseMove(t){this.userInputEvents.emitMouseMove(t)}emitMouseLeave(t){this.userInputEvents.emitMouseLeave(t)}emitMouseUp(t){this.userInputEvents.emitMouseUp(t)}emitMouseDown(t){this.userInputEvents.emitMouseDown(t)}emitMouseDrag(t){this.userInputEvents.emitMouseDrag(t)}emitMouseDragStart(t){this.userInputEvents.emitMouseDragStart(t)}emitMouseDrop(t){this.userInputEvents.emitMouseDrop(t)}emitMouseDropCanceled(t){this.userInputEvents.emitMouseDropCanceled(t)}}class sC{constructor(){x(this,"onKeyDown",null),x(this,"onKeyUp",null),x(this,"onContextMenu",null),x(this,"onMouseMove",null),x(this,"onMouseLeave",null),x(this,"onMouseDown",null),x(this,"onMouseUp",null),x(this,"onMouseDrag",null),x(this,"onMouseDragStart",null),x(this,"onMouseDrop",null),x(this,"onMouseDropCanceled",null)}emitKeyDown(t){var e;null==(e=this.onKeyDown)||e.call(this,t)}emitKeyUp(t){var e;null==(e=this.onKeyUp)||e.call(this,t)}emitContextMenu(t){var e;null==(e=this.onContextMenu)||e.call(this,t)}emitMouseMove(t){var e;null==(e=this.onMouseMove)||e.call(this,t)}emitMouseLeave(t){var e;null==(e=this.onMouseLeave)||e.call(this,t)}emitMouseDown(t){var e;null==(e=this.onMouseDown)||e.call(this,t)}emitMouseUp(t){var e;null==(e=this.onMouseUp)||e.call(this,t)}emitMouseDrag(t){var e;null==(e=this.onMouseDrag)||e.call(this,t)}emitMouseDragStart(t){var e;null==(e=this.onMouseDragStart)||e.call(this,t)}emitMouseDrop(t){var e;null==(e=this.onMouseDrop)||e.call(this,t)}emitMouseDropCanceled(t){var e;null==(e=this.onMouseDropCanceled)||e.call(this,t)}}var rC=Object.defineProperty,oC=Object.getOwnPropertyDescriptor,aC=(t,e,i,n)=>{for(var s,r=n>1?void 0:n?oC(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n?s(e,i,r):s(r))||r);return n&&r&&rC(e,i,r),r},lC=(t,e)=>(i,n)=>e(i,n,t);class cC extends dl{constructor(t){super({deliveryQueue:t})}fire(t){super.fire(t)}}let hC=class extends he{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f){var m;let g;if(super(),x(this,"_serviceBrand"),x(this,"id",de()),x(this,"_chartStore"),x(this,"_size"),x(this,"chartApi"),x(this,"_timezoneApi"),x(this,"_chartModel"),x(this,"_chartController"),x(this,"_pointerHandler"),x(this,"_paneCursorScope"),x(this,"_paneDragCursorScope"),x(this,"mainSeriesApi"),x(this,"_dataSources",new Map),x(this,"_study",new Map),x(this,"_zoomStack",new kT((t=>{this._chartStore.zoomToViewport(t)}),(()=>this._chartStore.zoomFromViewport()))),x(this,"_instantiationService"),x(this,"_deliveryQueue",new ul),x(this,"_contributions",this._register(new U_)),x(this,"eventFilter"),x(this,"_onMouseUp",this._register(new cC(this._deliveryQueue))),x(this,"onMouseUp",this._onMouseUp.event),x(this,"_onMouseDown",this._register(new cC(this._deliveryQueue))),x(this,"onMouseDown",this._onMouseDown.event),x(this,"_onMouseDragStart",this._register(new cC(this._deliveryQueue))),x(this,"onMouseDragStart",this._onMouseDragStart.event),x(this,"_onMouseDrag",this._register(new cC(this._deliveryQueue))),x(this,"onMouseDrag",this._onMouseDrag.event),x(this,"_onMouseDrop",this._register(new cC(this._deliveryQueue))),x(this,"onMouseDrop",this._onMouseDrop.event),x(this,"_onMouseDropCanceled",this._register(new cC(this._deliveryQueue))),x(this,"onMouseDropCanceled",this._onMouseDropCanceled.event),x(this,"_onContextMenu",this._register(new cC(this._deliveryQueue))),x(this,"onContextMenu",this._onContextMenu.event),x(this,"_onMouseMove",this._register(new cC(this._deliveryQueue))),x(this,"onMouseMove",this._onMouseMove.event),x(this,"_onMouseLeave",this._register(new cC(this._deliveryQueue))),x(this,"onMouseLeave",this._onMouseLeave.event),x(this,"_onKeyUp",this._register(new cC(this._deliveryQueue))),x(this,"onKeyUp",this._onKeyUp.event),x(this,"_onKeyDown",this._register(new cC(this._deliveryQueue))),x(this,"onKeyDown",this._onKeyDown.event),x(this,"_onClick",this._register(new cC(this._deliveryQueue))),x(this,"onClick",this._onClick.event),x(this,"_onCrosshairMove",this._register(new cC(this._deliveryQueue))),x(this,"onCrosshairMove",this._onCrosshairMove.event),x(this,"_onDataLoaded",this._register(new dl)),x(this,"onDataLoaded",this._onDataLoaded.event),x(this,"_onSymbolChanged",this._register(new dl)),x(this,"onSymbolChanged",this._onSymbolChanged.event),x(this,"_onChartFocus",this._register(new dl)),x(this,"onChartFocus",this._onChartFocus.event),x(this,"_onChartBlur",this._register(new dl)),x(this,"onChartBlur",this._onChartBlur.event),x(this,"_onDrawingsVisibility",this._register(new dl)),x(this,"onDrawingsVisibility",this._onDrawingsVisibility.event),x(this,"_onPositionsAndOrdersVisibility",this._register(new dl)),x(this,"onPositionsAndOrdersVisibility",this._onPositionsAndOrdersVisibility.event),x(this,"formatTickMark",((t,e,i)=>{const n={};switch(e){case as.Year:n.year="numeric";break;case as.Month:n.month="short";break;case as.DayOfMonth:n.day="numeric";break;case as.Time:n.hour12=!1,n.hour="2-digit",n.minute="2-digit";break;case as.TimeWithSeconds:n.hour12=!1,n.hour="2-digit",n.minute="2-digit",n.second="2-digit";break;default:G()}return b_(cs(t)?new Date(t.year,t.month,t.day):L(t)?new Date(t):new Date(1e3*t),this.getTimezoneApi().getTimezoneId()).toLocaleString(i,n)})),x(this,"mouseInsideChart",!1),x(this,"_cachedVolumeId",null),this.index=t,this._container=e,this._cursorHandler=n,this.configurationService=r,this.chartManagementService=o,this.i18nService=c,this.undoRedoService=h,this.themeService=u,this.studyService=f,this._instantiationService=a.createChild(new z_([I_,this._register(l.createScoped(this._container))],[jo,this],[Uo,this._register(new Yw)])),this._chartStore={getStore:(m=i).getStore,get:m.get,set(t,e){m.update((i=>{i[t]=e}))},getChartProperty:t=>m.get("chartProperties")[t],setChartProperty(t,e){m.update((i=>{i.chartProperties[t]=e}))},addStudy(t){m.update((e=>{e.studyList.push(t)}))},removeStudy(t){m.update((e=>{const i=e.studyList,n=i.findIndex((e=>e.id===t));i.splice(n,1),delete e.studyLegend[t]}))},addDrawingInfo(t){m.update((e=>{e.drawingInfos.push(t)}))},removeDrawingInfo(t){m.update((e=>{const i=e.drawingInfos,n=i.findIndex((e=>e.id===t));i.splice(n,1)}))},removeAllDrawingInfos(){m.update((t=>{t.drawingInfos.length=0}))},updateStudyLegend(t,e){m.update((i=>{let n=i.studyLegend[t];n||(n={selected:!1,values:[]},i.studyLegend[t]=n),e(n)}))},zoomToViewport(t){m.update((e=>{e.viewports.push(t)}))},zoomFromViewport(){m.update((t=>{t.viewports.pop()}))}},this._chartModel=new cw(this,u),this._chartController=this._instantiationService.createInstance(Gw),this._size={width:e.clientWidth,height:e.clientHeight},this.chartApi=function(t,e){return no(t,new Ts,Ts.gd(e))}(this._container,{width:this._size.width,height:this._size.height,autoSize:!1,layout:{attributionLogo:!1,panes:{enableResize:!0}},crosshair:{mode:vi.Normal},timeScale:{timeVisible:!0,secondsVisible:!1,borderVisible:!1,barSpacing:(null==s?void 0:s.timeScale.barSpacing)??6,rightOffset:10,extendedScale:{getExtendedTime:(t,e)=>{const i=ee(p.value(this.resolution()));return function(t,e,i,n,s){const r=e.getEntriesForWeek(0),o=Dx(s.unit);if(s.unit===Ex.Y||s.unit===Ex.M||s.unit===Ex.W)return i+o*n*s.value;if(s.unit===Ex.D){ie(1===s.value);let e=ix(b_(new Date(1e3*i),t)),a=0;for(;n>0;){a++,e=nx(e);const t=nx(e),i=r.entryOfDay(e);if(i)i[0].isOvernight()&&r.isWeekEnd(t)||n--;else{const e=r.entryOfDay(t);e&&e.length&&e[0].isOvernight()&&n--}}return i+o*a}let a,l=i,c=n;const h=o*s.value;for(;c>0;){const e=b_(new Date(1e3*l),t);a=ix(e);const s=[];s.push(...r.entryOfDay(a)??[]);const o=nx(a),p=r.entryOfDay(o);p&&p.length&&p[0].isOvernight()&&s.push(...p);const f=l+c*h;if(!s.length)return console.warn(`timestamp ${i} offset ${n} is not within the trading session`),f;const m=s.findIndex((t=>t.containsZoned(e)));if(-1===m)return console.warn(`cannot handle timestamp ${l} in sessions ${s.map((t=>t.toString())).join(",")}`),f;const g=new Date(1e3*f),v=s[m];if(v.containsZoned(b_(g,t)))return f;const y=sx(e);if(c-=60*(v.end()-y)/h,c<=0)return console.warn(`session.contains(maybeTime)判断有误：${g} ${v.toString()}`),f;const _=s[m+1];if(_)rx(e,0,0,0,0),ox(e,_.start()),l=x_(e,t).getTime()/1e3;else for(;;){a=nx(a),d=1,(u=e).setTime(u.getTime()+864e5*d);let i=null;if(i=r.entryOfDay(a),!i&&r.isWeekEnd(a)){const t=nx(a),e=r.entryOfDay(t);e&&e.length&&e[0].isOvernight()&&(i=e)}if(i){rx(e,0,0,0,0),ox(e,i[0].start()),l=x_(e,t).getTime()/1e3;break}}}var u,d;G()}(this.getTimezoneApi().getTimezoneId(),ee(this.mainSeriesApi.getSessionsSpec()),t,e,i)},getAdvanceUnit:(t,e)=>{const i=e-t,n=ee(p.value(this.resolution()));return i/(n.value*Dx(n.unit))}},tickMarkFormatter:this.formatTickMark},rightPriceScale:{visible:!0,borderVisible:!1,mode:(null==s?void 0:s.rightPriceScale.mode)??Bn.Normal,scaleMargins:{top:.1,bottom:.08}},localization:{locale:c.locale,priceFormatter:t=>this.mainSeriesApi.priceFormatter().format(t),timeFormatter:t=>this.formatDateTime(t)},preventLeave:()=>this._pointerHandler.isMouseDownOperating()}),this._spyChartOptionsSetter(),this._onChartStyleChanged(null==s?void 0:s.overrides),this._register(this.getTimezoneApi().onTimezoneChanged((()=>{const{localization:t}=this.chartApi.options();this.chartApi.applyOptions({localization:t})}))),s)for(const _ of s.panes)for(const t of _.sources)t.type===xx.Main&&(g=t);this._register(this.mainSeriesApi=this._instantiationService.createInstance(Ix,this._createDataSourceContext(),g)),this._chartController.onSeriesCreated(this.mainSeriesApi.id,this.mainSeriesApi),this._dataSources.set(this.symbol(),this.mainSeriesApi),this._registerListeners();const v=new sC;v.onKeyDown=t=>{this._passToEventFilter(t)||this._onKeyDown.fire(t)},v.onKeyUp=t=>{this._passToEventFilter(t)||this._onKeyUp.fire(t)},v.onContextMenu=t=>{this._passToEventFilter(t)||this._onContextMenu.fire(t)},v.onMouseMove=t=>{this._passToEventFilter(t)||this._onMouseMove.fire(t)},v.onMouseLeave=t=>{this._passToEventFilter(t)||this._onMouseLeave.fire(t)},v.onMouseDown=t=>{this._passToEventFilter(t)||this._onMouseDown.fire(t)},v.onMouseUp=t=>{this._passToEventFilter(t)||this._onMouseUp.fire(t)},v.onMouseDragStart=t=>{this._paneDragCursorScope=new uC(this._cursorHandler.getPaneCursor()),this._passToEventFilter(t)||this._onMouseDragStart.fire(t)},v.onMouseDrag=t=>{this._passToEventFilter(t)||this._onMouseDrag.fire(t)},v.onMouseDrop=t=>{this._passToEventFilter(t)||this._onMouseDrop.fire(t),this._paneDragCursorScope=void 0},v.onMouseDropCanceled=t=>{this._passToEventFilter(t)||this._onMouseDropCanceled.fire(),this._paneDragCursorScope=void 0};const y=new nC(v);this._register(this._pointerHandler=new iC(y,{viewDomNode:this._container,chartService:this})),this._contributions.initialize(d.getContributions(),this._instantiationService),this._register(this.mainSeriesApi.onDataLoaded((()=>{this._onDataLoaded.fire(),s?this._loadStudies(s):this._createVolumeIfNeeded()})))}startup(){}getModel(){return this._chartModel}getController(){return this._chartController}_onChartStyleChanged(t){const e=this.configurationService.getValue("chartProperties"),i={layout:e.layout??Object.create(null),grid:e.grid??Object.create(null)},n=this.themeService.isDark()?ST:xT,s=Yu(nu(n),nu(i),t?M_(t):{});this.chartApi.applyOptions(s)}installEventFilter(t){this.eventFilter=t}getTimezoneApi(){return this._timezoneApi||this._register(this._timezoneApi=this._instantiationService.createInstance(MT,this._chartStore)),this._timezoneApi}getContainerDomElement(){return this._container}getChartSize(){return this._size}getTimeScale(){return this.chartApi.timeScale()}getPriceScale(){return this.mainSeriesApi.getSeries().priceScale()}getStore(){return this._chartStore.getStore()}getPane(t){return this.chartApi.panes().find((e=>e.paneIndex()===t))??null}getPaneSeries(t,e=0){if(0===t)return this.mainSeriesApi.getSeries();const i=this.getPane(t);return i?i.getSeries()[e]??null:null}getStoreHandler(){return this._chartStore}symbolInfo(){return this._chartStore.get("symbolInfo")}interval(){return O_.parse(this._chartStore.get("resolution"))}focus(){this._container.focus(),this._onChartFocus.fire()}blur(){this._container.blur(),this._onChartBlur.fire()}formatDateTime(t){if("string"==typeof t)return t;return w_(cs(t)?new Date(t.year,t.month,t.day):new Date(1e3*t),this.getTimezoneApi().getTimezoneId(),this._dateTimeFormat())}formatDate(t){if("string"==typeof t)return t;return w_(t instanceof Date?t:cs(t)?new Date(t.year,t.month,t.day):new Date(1e3*t),this.getTimezoneApi().getTimezoneId(),this._dateFormat())}_dateTimeFormat(){return this.i18nService.dateTimeFormat(!1)}_dateFormat(){return this.i18nService.dateFormat()}_passToEventFilter(t){return!!this.eventFilter&&(this.eventFilter.eventFilter(t),t.isAccepted())}_registerListeners(){const t=t=>{const e=OT(R_.MOUSE_MOVE,t,this);this._withCursorScope((()=>{this._passToEventFilter(e)||this._onCrosshairMove.fire(e)})),this._updateLegend(t)},e=t=>{const e=OT(R_.CLICK,t,this);this._withCursorScope((()=>{this._passToEventFilter(e)||this._onClick.fire(e)}))};this.chartApi.subscribeCrosshairMove(t),this.chartApi.subscribeClick(e),this._register(le((()=>{this.chartApi.unsubscribeCrosshairMove(t),this.chartApi.unsubscribeClick(e),this.chartApi.remove()}))),this._register(this.onMouseDown((()=>{this.chartManagementService.activeChart()!==this&&this.chartManagementService.setActiveChart(this)}))),this._register(this.themeService.onDidColorThemeChange((()=>{this._onChartStyleChanged()}))),this._register(Hv(this.configurationService.store,(t=>t.chartProperties),(()=>{this._onChartStyleChanged()}))),this.mainSeriesApi.onDataChanged((()=>{this._updateLegend()}))}_withCursorScope(t){this._paneCursorScope=new uC(this._cursorHandler.getPaneCursor(),this._paneDragCursorScope),t(),this._paneCursorScope.touched()||this._cursorHandler.setPaneCursor(this._paneCursorScope.initValue)}_updateLegend(t){if(t)this.mouseInsideChart=!!t.point;else if(this.mouseInsideChart)return;this.mainSeriesApi.updateLegend(t),this._study.values().forEach((e=>e.updateLegend(t)))}_createDataSourceContext(){return{countBack:()=>Math.ceil(this._size.width/6)+100}}_getOrCreateDataSource(t){if(t===this.symbol())return this.mainSeriesApi;let e=this._dataSources.get(t);return e||(e=this._instantiationService.createInstance(Nv,t,this.resolution(),this._createDataSourceContext(),this.chartApi),this._dataSources.set(t,e)),e}_removeDataSource(t){if(t===this.symbol())return;const e=this._dataSources.get(t);e&&e.dispose(),this._dataSources.delete(t)}_spyChartOptionsSetter(){const t=this.chartApi.applyOptions;this.chartApi.applyOptions=e=>{t.call(this.chartApi,e),this._chartStore.set("chartOptions",this.chartApi.options())}}autoResize(){const t={width:this._container.clientWidth,height:this._container.clientHeight};var e,i;(e=t,i=this._size,e.width!=i.width||e.height!==i.height)&&(this._size.width=t.width,this._size.height=t.height,this.chartApi.resize(t.width,t.height,!0))}addCompareSymbol(t){const e=this.chartApi.priceScale("right");e.options().mode!==Bn.Percentage&&e.applyOptions({mode:Bn.Percentage});const i=this._getOrCreateDataSource(t);i.loadAll((async t=>{const e=this._instantiationService.createInstance(_T,t,i);this._study.set(e.id,e),await e.paneReady(),this._chartStore.addStudy({id:e.id,title:t.name,overlap:!0,compare:!0,styleValues:e.getStyleValues()})}))}chartType(){return this.mainSeriesApi.chartType()}showPaneCursor(t){var e,i;null==(e=this._paneDragCursorScope)||e.touch(t),null==(i=this._paneCursorScope)||i.touch(t),this._cursorHandler.setPaneCursor(t)}setChartType(t,e,i){return this.mainSeriesApi.setChartType(t,e,i)}resolution(){return this.mainSeriesApi.resolution()}setResolution(t){return this.mainSeriesApi.setResolution(t)}symbol(){return this.mainSeriesApi.symbol()}setSymbol(t){return this._onSymbolChanged.fire(),this.mainSeriesApi.setSymbol(t)}async createShape(t,e){return this._chartController.createShape({price:t.price,time:t.time/1e3},e)}async createStudy(t,e,i){let n,s;if("volume"===t){const t=this._instantiationService.createInstance(wT,this.mainSeriesApi);n=t,s=t.studyInfo}else{if(s=H_.value(t),!s)return console.warn(`Study ${t} not found`),null;s=Yu(nu(s),{styleValues:{styles:M_(i)},inputs:s.optionInfos.reduce(((t,e)=>(t[e.name]=e.defaultValue,t)),{})}),n=this._instantiationService.createInstance(vT,s,this.mainSeriesApi)}return ie(s),this._study.set(n.id,n),await n.paneReady(),this._chartStore.addStudy({id:n.id,title:s.abbr,overlap:s.overlap,compare:!1,inputs:s.inputs,styleValues:s.styleValues}),n.loadData(),n.id}_loadStudies(t){t.panes.forEach((t=>{t.sources.forEach((t=>{t.type===xx.Study&&this.createStudy(t.name,t.state.inputs,t.state.styles)}))}))}async _createVolumeIfNeeded(){if(!this.configurationService.featureEnabled("create_volume_indicator_by_default"))return;if(this._cachedVolumeId)return;if("ohlcv"!==this.symbolInfo().visible_plots_set)return;B(this.mainSeriesApi.data()[0].customValues.volume)||(this._cachedVolumeId=await this.createStudy("volume"))}toggleIndicatorsVisible(t){this._study.values().forEach((e=>e.toggleVisible(t)))}toggleDrawingsVisibility(t){this._onDrawingsVisibility.fire(t)}togglePositionsAndOrdersVisibility(t){this._onPositionsAndOrdersVisibility.fire(t)}getStudyById(t){return ee(this._study.get(t))}async removeEntity(t){const e=this._study.get(t);e?this._removeStudy(e,t):this._chartController.removeEntity(t)}_removeStudy(t,e){if(t.dispose(),this._study.delete(e),this._chartStore.removeStudy(e),t.isChartCompare()){const e=t.symbolInfo(),i=Array.from(this._study.values().filter((t=>t.isChartCompare())));if(!i.filter((t=>t.symbolInfo().name===e.name)).length){const t=e.name;this._removeDataSource(t)}i.length||this.chartApi.priceScale("right").applyOptions({mode:Bn.Normal})}}removeAllStudy(){this._study.keys().forEach((t=>{this.removeEntity(t)}))}resetData(){const t=[this.mainSeriesApi.resetData(),...this._chartStore.get("studyList").map((t=>this.getStudyById(t.id).resetData()))];return Promise.all(t)}zoomToViewport(t,e,i,n){const s={fromTime:Math.min(t,e),toTime:Math.max(t,e),fromPrice:Math.min(i,n),toPrice:Math.max(i,n)},r=new ET(this,s),o=new DT(this,r,this._zoomStack,AT.in);o.redo(),this.undoRedoService.pushElement(o)}zoomFromViewport(){const t=this._zoomStack.head(),e=new DT(this,t,this._zoomStack,AT.out);e.redo(),this.undoRedoService.pushElement(e)}invokeWithinContext(t){return this._instantiationService.invokeFunction(t)}save(){const t=this.getTimeScale(),e=this.chartApi.options(),i=new Map;i.set(this.mainSeriesApi.getSeries().getPane(),[this.mainSeriesApi.save()]),this._study.forEach((t=>{const e=t.series.getPane();i.has(e)?ee(i.get(e)).push(t.save()):i.set(e,[t.save()])}));const n=this.chartApi.options(),s=ed(C_({layout:{background:n.layout.background},grid:n.grid}),((t,e)=>Reflect.get(j_,e)===t));return{version:1,timezone:this.getTimezoneApi().getTimezoneId(),symbol:this.symbol(),resolution:this.resolution(),timeScale:{barSpacing:t.barSpacing(),rightOffset:t.rightOffset()},rightPriceScale:{mode:e.rightPriceScale.mode},panes:i.entries().reduce(((t,[,e])=>(t.push({sources:e}),t)),[]),overrides:s}}};aC([rl],hC.prototype,"_dateTimeFormat",1),aC([rl],hC.prototype,"_dateFormat",1),hC=aC([lC(5,kg),lC(6,Go),lC(7,Ko),lC(8,I_),lC(9,V_),lC(10,Sa),lC(11,W_),lC(12,Aa),lC(13,Ox),lC(14,$_)],hC);class uC{constructor(t,e=void 0){x(this,"_value"),x(this,"_touched",!1),this.initValue=t,this.parent=e,this._value=t}value(){var t;return this._touched?this._value:null==(t=this.parent)?void 0:t.value()}touch(t){this._value=t,this._touched=!0}touched(){return!!this._touched||!!this.parent&&this.parent.touched()}}var dC=Object.defineProperty,pC=Object.getOwnPropertyDescriptor,fC=(t,e,i,n)=>{for(var s,r=n>1?void 0:n?pC(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=(n?s(e,i,r):s(r))||r);return n&&r&&dC(e,i,r),r},mC=(t,e)=>(i,n)=>e(i,n,t);let gC=class extends he{constructor(t,e,i,n){super(),x(this,"_serviceBrand"),x(this,"whenRestoredPromise",new xt),x(this,"whenRestored",this.whenRestoredPromise.p),x(this,"_charts",new Map),x(this,"store"),x(this,"_domElement"),x(this,"_defaultPaneCursor",Og.unset),x(this,"_restoreTask"),x(this,"_onChartAdd",this._register(new dl)),x(this,"_onChartRemove",this._register(new dl)),this.configurationService=i,this.instantiationService=n,this.store=Eg({hideBits:0,tempMagnetMode:void 0,magnetMode:Pg.Normal,cursor:Og.unset,activeIndex:NaN,layout:t,instances:Object.create(null)}),this._restoreTask=this._createRestoreTask(t,null==e?void 0:e.charts)}get onChartAdd(){return this._onChartAdd.event}get onChartRemove(){return this._onChartRemove.event}_getValue(t){return Dg(this.store)[t]}_setValue(t,e){this.store.update((i=>(i[t]=e,i)))}getDomElement(){return this._domElement}getCharts(){return Array.from(this._charts.values())}async setLayout(t){this._getValue("layout")!==t&&(this._setValue("layout",t),this._restoreTask=this._createRestoreTask(t,void 0))}layout(){return Dg(this.store).layout}_createRestoreTask(t,e){var i;const n=ee(st.value(t));e&&ie(e.length===n.slotCount);const s=(null==e?void 0:e.map((t=>({symbol:t.chart.symbol,resolution:t.chart.resolution}))))??new Array(n.slotCount).fill({symbol:this.configurationService.getValue("symbol"),resolution:this.configurationService.getValue("interval")}),r=new yC(s);return this._charts.entries().forEach((([t,e])=>{if(t>=s.length)return;const i=s[t];let n=!1;e.symbol()!==i.symbol&&(e.setSymbol(i.symbol),n=!0),e.resolution()!==i.resolution&&(e.setResolution(i.resolution),n=!0),vC(i)&&q(),n||r.handleChartRestored(t)})),r.onResult((t=>{2!==t&&(this.afterLayoutChange(),gt((()=>{this.whenRestoredPromise.complete()})))})),null==(i=this._restoreTask)||i.dispose(),this._restoreTask=r,this._restoreTask}_layoutDetails(){return st.value(this.layout())}async afterLayoutChange(){if(!this._charts.size)return;this._charts.values().forEach((t=>t.autoResize()));const t=ee(this._layoutDetails()),e=this._getValue("activeIndex");(!isFinite(e)||t.slotCount>=e)&&this.setActiveChart(t.slotCount-1)}handleGridMount(t){this._domElement=t;const e=new ResizeObserver((()=>this.autoResize()));e.observe(t),this._register(le((()=>e.disconnect())))}autoResizeNow(){this._charts.values().forEach((t=>t.autoResize()))}autoResize(){this.autoResizeNow()}handleCellMount(t,e){const i=this._createChart(t,this._restoreTask.getChartInit(e));return this._restoreTask.handleChartRestored(e),this._onChartAdd.fire(i),ie(i.getContainerDomElement()===t),ie(i.index===e),i}handleCellDestory(t,e){const i=ee(this._charts.get(e));ie(i.getContainerDomElement()===t),i.dispose(),this._onChartRemove.fire(i),this._charts.delete(e);const n=ee(this._layoutDetails()),s=this._getValue("activeIndex"),r=n.slotCount;r<=s&&this.setActiveChart(r-1),this.store.update((t=>(delete t.instances[e],t)))}_createChart(t,e){const i=this.chartsCount()?Math.max(...this._charts.keys()):-1;ie(i===this.chartsCount()-1);const n=i+1,s={dataStatus:Rv.idle,symbol:e.symbol,resolution:e.resolution,chartOptions:Object.create(null),chartProperties:nu(this.configurationService.getValue("chartProperties")),symbolInfo:Object.create(null),mainLegend:Object.create(null),studyList:[],studyLegend:Object.create(null),drawingInfos:[],viewports:[]};this.store.update((t=>(t.instances[n]=s,t)));const r=this.instantiationService.createInstance(hC,n,t,{getStore:()=>Ag(this.store,(t=>t.instances[n])),get:t=>Dg(this.store).instances[n][t],update:t=>{this.store.update((e=>{const i=e.instances[n];return t(i),e}))}},{setPaneCursor:this.setPaneCursor.bind(this),getPaneCursor:()=>this._defaultPaneCursor},vC(e)?e:void 0);return this._charts.set(n,r),r}activeChart(){const t=this._getValue("activeIndex");return ee(this._charts.get(t))}activeChartIndex(){return this._getValue("activeIndex")}chart(t){return z(t)?this.activeChart():ee(this._charts.get(t))}chartsCount(){return this._charts.size}setActiveChart(t){const e=this._getValue("activeIndex"),i=isFinite(e)&&e<this.chartsCount()?this.activeChart():null;if(N(t)){const e=ee(this._charts.get(t));if(e===i)return;this._setValue("activeIndex",t),null==i||i.blur(),e.focus()}else{if(t===i)return;const e=ee(this._charts.values().find((e=>e===t)));this._setValue("activeIndex",t.index),null==i||i.blur(),e.focus()}}setSymbol(t,e,i){this.activeChart().setSymbol(t),this.activeChart().setResolution(e),null==i||i()}setPaneCursor(t,e){e&&(this._defaultPaneCursor===Og.demonstration&&t===Og.eraser?this._defaultPaneCursor=Og.demonstration|Og.eraser:this._defaultPaneCursor=t),t!==this._getValue("cursor")&&this._setValue("cursor",t)}getDefaultPaneCursor(){return this._defaultPaneCursor}setHideBits(t){const e=Dg(this.store);if(e.hideBits===t)return;const i=1&e.hideBits,n=1&t,s=2&e.hideBits,r=2&t,o=4&e.hideBits,a=4&t;this._setValue("hideBits",t),this.getCharts().forEach((t=>{s!==r&&t.toggleIndicatorsVisible(!n),i!==n&&t.toggleDrawingsVisibility(!n),o!==a&&t.togglePositionsAndOrdersVisibility(!a)}))}save(){const t=Dg(this.store);return{version:1,layout:t.layout,activeIndex:t.activeIndex,hideBits:t.hideBits,charts:Object.keys(t.instances).reduce(((t,e)=>(t.push({chart:this.chart(parseInt(e)).save()}),t)),[])}}async restore(t){this._getValue("layout")!==t.layout&&this._setValue("layout",t.layout),this._restoreTask=this._createRestoreTask(t.layout,t.charts)}};function vC(t){return"version"in t}fC([sl(8)],gC.prototype,"autoResize",1),gC=fC([mC(2,kg),mC(3,Ko)],gC);class yC{constructor(t){x(this,"chartPromises",[]),x(this,"_onResult",new dl),x(this,"onResult",this._onResult.event),this.chartInits=t,t.forEach((()=>{this.chartPromises.push(new xt)})),Promise.all(this.chartPromises.map((t=>t.p))).then((t=>{const e=t.every((t=>0===t)),i=t.every((t=>2===t));this._onResult.fire(e?0:i?2:1)}))}handleChartRestored(t){this.chartPromises[t].complete(0)}getChartInit(t){return ee(this.chartInits[t])}dispose(){this.chartPromises.forEach((t=>t.complete(2))),this._onResult.dispose()}}const _C="text/html",bC="text/plain";class wC extends he{constructor(t,e){super(),x(this,"_onPaste",new dl),x(this,"onPaste",this._onPaste.event),x(this,"_inMemoryData",null),this._register(Xt(document,"copy",(()=>this.clearInMemoryData()))),this._register(Xt(document,"paste",(i=>{if((i.target||document.activeElement)!==t)return;const n=GT.collect(e.activeElement,t);if(!n.length)return;if(n[0]===UT.Textarea)return;if(!i.clipboardData)return;if(!i.clipboardData.items)return;const s=Object.create(null),r=[];i.clipboardData.getData("text");for(const t of i.clipboardData.items)t.type===_C&&(s.html=i.clipboardData.getData(_C)),t.type===bC&&(s.text=i.clipboardData.getData(bC)),t.type.startsWith("image")&&r.push(t.getAsFile());r.length&&(s.files=r),Ku(s)||(this._onPaste.fire(s),this._inMemoryData=null)})))}async writeClipboard(t,e){const i=t.files&&t.files.length>0;if(!i&&e&&e.eventPhase>0)return xC(e,t),Promise.resolve();if(!i){let e=!1;const i=i=>{i.stopImmediatePropagation(),xC(i,t),e=!0};try{document.addEventListener("copy",i,!0),document.execCommand("copy")}finally{document.removeEventListener("copy",i,!0)}if(e)return Promise.resolve()}try{await async function(t){const e=navigator.clipboard;if(!e||!e.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");const i=Object.create(null);for(const n of t.files||[])i[n.type]=n;t.text&&(i[bC]=new Blob([t.text],{type:bC}));t.html&&(i[_C]=new Blob([t.html],{type:_C}));return e.write([new ClipboardItem(i)])}(t)}catch(oR){console.warn(oR)}this._inMemoryData=Ku(t)?null:t}clearInMemoryData(){this._inMemoryData=null}}function xC(t,e){t.preventDefault();const i=ee(t.clipboardData);e.text&&i.setData("text/plain",e.text),e.html&&i.setData("text/html",e.html)}var SC=Object.getOwnPropertyDescriptor,TC=(t,e)=>(i,n)=>e(i,n,t);let CC=class{constructor(t,e){x(this,"_instantiationService"),this.commandRegistry=e,this._instantiationService=t}executeCommand(t,...e){const i=this.commandRegistry.getCommand(t);if(!i)return Promise.reject(new Error(`command '${t}' not found`));try{const t=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...e]);return Promise.resolve(t)}catch(n){return Promise.reject(n)}}};CC=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?SC(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([TC(0,Ko),TC(1,ta)],CC);const MC={create_volume_indicator_by_default:!0,header_resolutions:!0,header_chart_type:!0,header_indicators:!0,header_layouttoggle:!0,header_settings:!1,header_fullscreen_button:!0,header_screenshot:!0,left_toolbar:!0,left_strong_magnet:!0,timezone_menu:!0};class IC extends he{constructor(t){var e,i,n,s,r,o,a;super(),x(this,"store");const l=t.timezone??"exchange";this.store=Eg({locale:t.locale??(null==(i=null==(e=t.savedData)?void 0:e.configs)?void 0:i.locale)??"en-US",symbol:t.symbol,interval:t.interval,theme:t.theme??(null==(s=null==(n=t.savedData)?void 0:n.configs)?void 0:s.theme)??"light",drawingsAccessType:null==(r=t.drawingsAccess)?void 0:r.type,drawingsAccess:EC(t.drawingsAccess),studiesAccessType:null==(o=t.studiesAccess)?void 0:o.type,studiesAccess:EC(t.studiesAccess),layoutAccessType:null==(a=t.layoutAccess)?void 0:a.type,layoutAccess:EC(t.layoutAccess),chartProperties:kC(Object.assign({},j_,t.overrides,{timezone:l})),studyProperties:PC(Object.assign({},Fx,t.studiesOverrides)),chartFeatures:AC(t.enabledFeatures,t.disabledFeatures)})}getValue(t){return Dg(this.store)[t]}setValue(t,e){this.store.update((i=>(i[t]=e,{...i})))}featureEnabled(t){return this.getValue("chartFeatures")[t]}save(){const t=Dg(this.store);return{version:1,locale:t.locale,theme:t.theme}}applyOverrides(t){const e=this.getValue("chartProperties");this.setValue("chartProperties",Yu(e,kC(t)))}applyStudiesOverrides(t){const e=this.getValue("studyProperties");this.setValue("studyProperties",Yu(e,PC(t)))}}function EC(t){const e=Object.create(null);if(!t)return e;const i=t.type;return t.items.reduce(((t,e)=>(t[e.name]=e.grayed?"gray":i,t)),e)}function AC(t,e){const i={...MC};return QS(MC).forEach((n=>{i[n]=MC[n],(null==t?void 0:t.includes(n))&&(i[n]=!0),(null==e?void 0:e.includes(n))&&(i[n]=!1)})),i}const DC=["mainSeriesProperties","tool"];function kC(t){const e=Object.create(null);return QS(t).forEach((i=>{const n=t[i];if(z(n))return;if(L(n)&&!n.length)return;const s=i.split(".");if(1===s.length||DC.includes(s[0]))return void Reflect.set(e,i,n);let r=e;for(;s.length;){const t=ee(s.shift());s.length?(Reflect.has(r,t)||Reflect.set(r,t,Object.create(null)),r=Reflect.get(r,t)):Reflect.set(r,t,n)}})),e}function PC(t){const e=Object.create(null);return QS(t).forEach((i=>{const n=t[i],[s,r,o,a]=i.split(".");e[s]||(e[s]={plots:Object.create(null)});const l=e[s];l.plots[r]||(l.plots[r]=Object.create(null));const c=l.plots[r];if(a){ie("color"===o);const t=parseInt(a);ie(isFinite(t)),c.color||(c.color=[]),ie(L(n)),ie(Array.isArray(c.color)),c.color[t]=n}else c[o]=n})),e}const OC="data-keybinding-context";class RC{constructor(t,e){x(this,"_parent"),x(this,"_value"),x(this,"_id"),this._id=t,this._parent=e,this._value=Object.create(null),this._value._contextId=t}get value(){return{...this._value}}}class LC extends he{constructor(t){super(),x(this,"_isDisposed"),x(this,"_myContextId"),this._isDisposed=!1,this._myContextId=t}get contextId(){return this._myContextId}createScoped(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new FC(this,t)}getContext(t){return this._isDisposed?zC.INSTANCE:this.getContextValuesContainer(function(t){for(;t;){if(t.hasAttribute(OC)){const e=t.getAttribute(OC);return e?parseInt(e,10):NaN}t=t.parentElement}return 0}(t))}dispose(){super.dispose(),this._isDisposed=!0}}class NC extends LC{constructor(){super(0),x(this,"_lastContextId"),x(this,"_contexts",new Map),this._lastContextId=0;const t=new VC(this._myContextId);this._contexts.set(this._myContextId,t)}getContextValuesContainer(t){return this._isDisposed?zC.INSTANCE:this._contexts.get(t)||zC.INSTANCE}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const e=++this._lastContextId;return this._contexts.set(e,new RC(e,this.getContextValuesContainer(t))),e}disposeContext(t){this._isDisposed||this._contexts.delete(t)}}class FC extends LC{constructor(t,e){if(super(t.createChildContext()),x(this,"_parent"),x(this,"_domNode"),this._parent=t,this._domNode=e,this._domNode.hasAttribute(OC)){let t="";this._domNode.classList&&(t=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(t?": "+t:""))}this._domNode.setAttribute(OC,String(this._myContextId))}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(OC),super.dispose())}getContextValuesContainer(t){return this._isDisposed?zC.INSTANCE:this._parent.getContextValuesContainer(t)}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)}disposeContext(t){this._isDisposed||this._parent.disposeContext(t)}}const BC=class extends RC{constructor(){super(-1,null)}};x(BC,"INSTANCE",new BC);let zC=BC;class VC extends RC{constructor(t){super(t,null)}}class $C extends he{constructor(t){super(),x(this,"_serviceBrand"),x(this,"_onReady",this._register(new dl)),x(this,"onReady",this._onReady.event),x(this,"onTicks",new Map),x(this,"onResetCaches",new Map),this.datafeed=t;let e=t=>{this._disposed||this._onReady.fire(t)};t.onReady((t=>e(t))),this._register(le((()=>{e=()=>{}})))}getBars(t,e,i,n,s,r){if(r.isCancellationRequested)return;const o=r.onCancellationRequested((()=>{n=()=>{},s=()=>{},o.dispose()}));this.datafeed.getBars(t,e,i,((t,e)=>{n(t.map((t=>({...t,time:t.time/1e3}))),e),o.dispose()}),((...t)=>{s(...t),o.dispose()}))}resolveSymbol(t,e,i,n,s){if(n.isCancellationRequested)return;const r=n.onCancellationRequested((()=>{e=()=>{},i=()=>{},r.dispose()}));this.datafeed.resolveSymbol(t,((...t)=>{e(...t),r.dispose()}),((...t)=>{i(...t),r.dispose()}),s)}subscribeBars(t,e,i,n,s){this.onTicks.set(n,i),this.onResetCaches.set(n,s);const r=this.onTicks,o=this.onResetCaches;this.datafeed.subscribeBars(t,e,(t=>{var e;null==(e=r.get(n))||e({...t,time:t.time/1e3})}),n,(()=>{var t;null==(t=o.get(n))||t()}))}unsubscribeBars(t){this.datafeed.unsubscribeBars(t),this.onTicks.delete(t),this.onResetCaches.delete(t)}dispose(){super.dispose(),this.onTicks.clear(),this.onResetCaches.clear()}}class HC extends he{constructor(t){super(),x(this,"_serviceBrand"),x(this,"_headerReady",new xt),x(this,"_buttonReady",this._register(new dl)),x(this,"buttonReady",this._buttonReady.event),x(this,"store"),this.root=t,this.store=Eg({leftButtons:[],rightButtons:[],components:[]})}headerReady(){return this._headerReady.p}dispose(){super.dispose(),this._headerReady.isSettled||this._headerReady.complete(),this.store=null,this._headerReady=null,this.buttonReady=null}setHeaderReady(){this._disposed||this._headerReady.complete()}async createButton(t){const e=Object.create(null);e.id=de();const i=(null==t?void 0:t.align)??"left";(null==t?void 0:t.useTradingViewStyle)&&(e.text=t.text,e.title=t.title,e.onClick=t.onClick);const n=new xt,s=this.buttonReady((i=>{i.id===e.id&&(s.dispose(),n.complete((null==t?void 0:t.useTradingViewStyle)?void 0:i.el))}));switch(i){case"left":this.store.update((t=>(t.leftButtons.push(e),t)));break;case"right":this.store.update((t=>(t.rightButtons.push(e),t)));break;default:G()}return n.p}setButtonReady(t,e){this._buttonReady.fire({id:t,el:e})}showComponent(t){const e=de();return this.store.update((i=>(i.components.push({id:e,Component:t.Component,props:t.props}),i))),{dispose:()=>{this.store.update((t=>{const i=t.components.findIndex((t=>t.id===e));return-1!==i&&t.components.splice(i,1),{...t}}))},update:t=>{this.store.update((i=>{const n=i.components.find((t=>t.id===e));return n&&Object.assign(n.props,t),{...i}}))}}}}const KC=Wo("IInputManager"),WC=Wo("keybindingService");var jC=Object.getOwnPropertyDescriptor,UC=(t,e)=>(i,n)=>e(i,n,t);let GC=class extends he{constructor(t,e,i){super(),this.toolService=t,this.keybindingService=e,this.chartManagementService=i,this._register(i.onChartAdd((t=>{t.installEventFilter(this)})))}eventFilter(t){switch(t.type){case R_.KEY_DOWN:{const e=ee(t.asKeyboardInputEvent()).init;this.keybindingService.dispatchEvent(e,this.chartManagementService.activeChart().getContainerDomElement())&&(e.preventDefault(),e.stopPropagation(),t.accept());break}}return t.isAccepted()||this.toolService.processEvent(t),t.isAccepted()}};GC=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?jC(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([UC(0,Ab),UC(1,WC),UC(2,Go)],GC);class qC{constructor(t,e=[],i=!1){x(this,"ctor"),x(this,"staticArguments"),x(this,"supportsDelayedInstantiation"),this.ctor=t,this.staticArguments=e,this.supportsDelayedInstantiation=i}}let YC=class{constructor(t,e){x(this,"incoming",new Map),x(this,"outgoing",new Map),this.key=t,this.data=e}};class XC{constructor(t){x(this,"_nodes",new Map),this._hashFn=t}roots(){const t=[];for(const e of this._nodes.values())0===e.outgoing.size&&t.push(e);return t}insertEdge(t,e){const i=this.lookupOrInsertNode(t),n=this.lookupOrInsertNode(e);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(t){const e=this._hashFn(t);this._nodes.delete(e);for(const i of this._nodes.values())i.outgoing.delete(e),i.incoming.delete(e)}lookupOrInsertNode(t){const e=this._hashFn(t);let i=this._nodes.get(e);return i||(i=new YC(e,t),this._nodes.set(e,i)),i}lookup(t){return this._nodes.get(this._hashFn(t))}isEmpty(){return 0===this._nodes.size}toString(){const t=[];for(const[e,i]of this._nodes)t.push(`${e}\n\t(-> incoming)[${[...i.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...i.outgoing.keys()].join(",")}]\n`);return t.join("\n")}findCycleSlow(){for(const[t,e]of this._nodes){const i=new Set([t]),n=this._findCycle(e,i);if(n)return n}}_findCycle(t,e){for(const[i,n]of t.outgoing){if(e.has(i))return[...e,i].join(" -> ");e.add(i);const t=this._findCycle(n,e);if(t)return t;e.delete(i)}}}class ZC extends Error{constructor(t){super("cyclic dependency between services"),this.message=t.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${t.toString()}`}}class QC{constructor(t=new z_,e=!1,i,n=false){x(this,"_globalGraph"),x(this,"_globalGraphImplicitDependency"),x(this,"_isDisposed",!1),x(this,"_servicesToMaybeDispose",new Set),x(this,"_children",new Set),x(this,"_activeInstantiations",new Set),this._services=t,this._strict=e,this._parent=i,this._enableTracing=n,this._services.set(Ko,this),this._globalGraph=n?(null==i?void 0:i._globalGraph)??new XC((t=>t)):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,ae(this._children),this._children.clear();for(const t of this._servicesToMaybeDispose)oe(t)&&t.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(t,e){this._throwIfDisposed();const i=this,n=new class extends QC{dispose(){i._children.delete(n),super.dispose()}}(t,this._strict,this,this._enableTracing);return this._children.add(n),null==e||e.add(n),n}invokeFunction(t,...e){this._throwIfDisposed();const i=tM.traceInvocation(this._enableTracing,t);let n=!1;try{return t({get:t=>{if(n)throw new Error(`Illegal state: ${"service accessor is only valid during the invocation of its target method"}`);const e=this._getOrCreateServiceInstance(t,i);if(!e)throw new Error(`[invokeFunction] unknown service '${t}'`);return e}},...e)}finally{n=!0,i.stop()}}createInstance(t,...e){let i,n;return this._throwIfDisposed(),t instanceof qC?(i=tM.traceCreation(this._enableTracing,t.ctor),n=this._createInstance(t.ctor,t.staticArguments.concat(e),i)):(i=tM.traceCreation(this._enableTracing,t),n=this._createInstance(t,e,i)),i.stop(),n}_createInstance(t,e=[],i){const n=$o.getServiceDependencies(t).sort(((t,e)=>t.index-e.index)),s=[];for(const o of n){const e=this._getOrCreateServiceInstance(o.id,i);e||this._throwIfStrict(`[createInstance] ${t.name} depends on UNKNOWN service ${o.id}.`,!1),s.push(e)}const r=n.length>0?n[0].index:e.length;if(e.length!==r){console.trace(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);const i=r-e.length;e=i>0?e.concat(new Array(i)):e.slice(0,r)}return Reflect.construct(t,e.concat(s))}_setCreatedServiceInstance(t,e){if(this._services.get(t)instanceof qC)this._services.set(t,e);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(t,e)}}_getServiceInstanceOrDescriptor(t){const e=this._services.get(t);return!e&&this._parent?this._parent._getServiceInstanceOrDescriptor(t):e}_getOrCreateServiceInstance(t,e){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(t));const i=this._getServiceInstanceOrDescriptor(t);return i instanceof qC?this._safeCreateAndCacheServiceInstance(t,i,e.branch(t,!0)):(e.branch(t,!1),i)}_safeCreateAndCacheServiceInstance(t,e,i){if(this._activeInstantiations.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this._activeInstantiations.add(t);try{return this._createAndCacheServiceInstance(t,e,i)}finally{this._activeInstantiations.delete(t)}}_createAndCacheServiceInstance(t,e,i){var n;const s=new XC((t=>t.id.toString()));let r=0;const o=[{id:t,desc:e,_trace:i}],a=new Set;for(;o.length;){const e=o.pop();if(!a.has(String(e.id))){if(a.add(String(e.id)),s.lookupOrInsertNode(e),r++>1e3)throw new ZC(s);for(const i of $o.getServiceDependencies(e.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(i.id);if(r||this._throwIfStrict(`[createInstance] ${t} depends on ${i.id} which is NOT registered.`,!0),null==(n=this._globalGraph)||n.insertEdge(String(e.id),String(i.id)),r instanceof qC){const t={id:i.id,desc:r,_trace:e._trace.branch(i.id,!0)};s.insertEdge(e,t),o.push(t)}}}}for(;;){const t=s.roots();if(0===t.length){if(!s.isEmpty())throw new ZC(s);break}for(const{data:e}of t){if(this._getServiceInstanceOrDescriptor(e.id)instanceof qC){const t=this._createServiceInstanceWithOwner(e.id,e.desc.ctor,e.desc.staticArguments,e.desc.supportsDelayedInstantiation,e._trace);this._setCreatedServiceInstance(e.id,t)}s.removeNode(e)}}return this._getServiceInstanceOrDescriptor(t)}_createServiceInstanceWithOwner(t,e,i=[],n,s){if(this._services.get(t)instanceof qC)return this._createServiceInstance(t,e,i,n,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(t,e,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${e.name}`)}_createServiceInstance(t,e,i=[],n,s,r){if(n){const n=new QC(void 0,this._strict,this,this._enableTracing);n._globalGraphImplicitDependency=String(t);const o=new Map,a=new wt((()=>{const t=n._createInstance(e,i,s);for(const[e,i]of o){const n=t[e];if("function"==typeof n)for(const e of i)e.disposable=n.apply(t,e.listener)}return o.clear(),r.add(t),t}));return new Proxy(Object.create(null),{get(t,e){if(!a.isInitialized&&"string"==typeof e&&(e.startsWith("onDid")||e.startsWith("onWill"))){let t=o.get(e);t||(t=new Qo,o.set(e,t));return(i,n,s)=>{if(a.isInitialized)return a.value[e](i,n,s);{const e={listener:[i,n,s],disposable:void 0},r=t.push(e);return le((()=>{var t;r(),null==(t=e.disposable)||t.dispose()}))}}}if(e in t)return t[e];const i=a.value;let n=i[e];return"function"!=typeof n||(n=n.bind(i),t[e]=n),n},set:(t,e,i)=>(a.value[e]=i,!0),getPrototypeOf:t=>e.prototype})}{const t=this._createInstance(e,i,s);return r.add(t),t}}_throwIfStrict(t,e){if(e&&console.warn(t),this._strict)throw new Error(t)}}const JC=class t{constructor(t,e){x(this,"_start",Date.now()),x(this,"_dep",[]),this.type=t,this.name=e}static traceInvocation(e,i){return e?new t(2,i.name||(new Error).stack.split("\n").slice(3,4).join("\n")):t._None}static traceCreation(e,i){return e?new t(1,i.name):t._None}branch(e,i){const n=new t(3,e.toString());return this._dep.push([e,i,n]),n}stop(){const e=Date.now()-this._start;t._totals+=e;let i=!1;const n=[`${1===this.type?"CREATE":"CALL"} ${this.name}`,`${function t(e,n){const s=[],r=new Array(e+1).join("\t");for(const[o,a,l]of n._dep)if(a&&l){i=!0,s.push(`${r}CREATES -> ${o}`);const n=t(e+1,l);n&&s.push(n)}else s.push(`${r}uses -> ${o}`);return s.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||i)&&t.all.add(n.join("\n"))}};x(JC,"all",new Set),x(JC,"_None",new class extends JC{constructor(){super(0,null)}stop(){}branch(){return this}}),x(JC,"_totals",0);let tM=JC;const eM={"zh-CN":"yyyy-MM-dd","en-US":"dd MMM ''yy","fr-FR":"dd/MM/yyyy","de-DE":"dd.MM.yyyy","id-ID":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy. M. d.","pl-PL":"dd.MM.yyyy","pt-BR":"dd/MM/yyyy","es-ES":"dd/MM/yyyy","th-TH":"d/M/yyyy","vi-VN":"dd/MM/yyyy","ms-MY":"dd/MM/yyyy","zh-TW":"yyyy-MM-dd"},iM=[null,void 0,""];const nM={en:{"tool.cursor.cross":"Cross","tool.cursor.dot":"Dot","tool.cursor.arrow":"Arrow","tool.cursor.demo":"Demonstration","tool.cursor.magic":"Magic","tool.cursor.eraser":"Eraser","toolGroup.line":"LINES","tool.line.trendLine":"Trend Line","tool.line.ray":"Ray","tool.line.infoLine":"Info Line","tool.line.extendedLine":"Extended Line","tool.line.trendAngle":"Trend Angle","tool.line.horizontalLine":"Horizontal Line","tool.line.horizontalRay":"Horizontal Ray","tool.line.verticalLine":"Vertical Line","tool.line.crossLine":"Cross Line","toolGroup.channel":"CHANNELS","tool.channel.parallelChannel":"Parallel Channel","tool.channel.regressionTrend":"Regression Trend","tool.channel.flatTopBottom":"Flat Top/Bottom","tool.channel.disjointChannel":"Disjoint Channel","toolGroup.pitchfork":"PITCHFORKS","tool.pitchfork.pitchfork":"Pitchfork","tool.pitchfork.schiffPitchfork":"Schiff Pitchfork","tool.pitchfork.modifiedSchiffPitchfork":"Modified Schiff Pitchfork","tool.pitchfork.insidePitchfork":"Inside Pitchfork","toolGroup.fib":"FIBONACCI","tool.fib.fibRetracement":"Fib Retracement","tool.fib.trendBasedFibExtension":"Trend-Based Fib Extension","tool.fib.fibChannel":"Fib Channel","tool.fib.fibTimeZone":"Fib Time Zone","tool.fib.fibSpeedResistanceFan":"Fib Speed Resistance Fan","tool.fib.trendBasedFibTime":"Trend-Based Fib Time","tool.fib.fibCircles":"Fib Circles","tool.fib.fibSpiral":"Fib Spiral","tool.fib.fibSpeedResistanceArcs":"Fib Speed Resistance Arcs","tool.fib.fibWedge":"Fib Wedge","tool.fib.pitchfan":"Pitchfan","toolGroup.gann":"GANN","tool.gann.gannBox":"Gann Box","tool.gann.gannSquareFixed":"Gann Square Fixed","tool.gann.gannSquare":"Gann Square","tool.gann.gannFan":"Gann Fan","toolGroup.pattern":"PATTERNs","tool.pattern.xabcd":"XABCD Pattern","tool.pattern.cypher":"Cypher Pattern","tool.pattern.headAndShoulders":"Head and Shoulders","tool.pattern.abcd":"ABCD Pattern","tool.pattern.triangle":"Triangle Pattern","tool.pattern.threeDrives":"Three Drives Pattern","toolGroup.wave":"ELLIOTT WAVE","tool.wave.12345":"Elliott Impulse Wave (12345)","tool.wave.abc":"Elliott Correction Wave (ABC)","tool.wave.abcde":"Elliott Triangle Wave (ABCDE)","tool.wave.wxy":"Elliott Double Combo Wave (WXY)","tool.wave.wxyxz":"Elliott Triple Combo Wave (WXYXZ)","toolGroup.cycle":"CYCLICS","tool.cycle.cyclicLines":"Cyclic Lines","tool.cycle.timeCycles":"Time Cycles","tool.cycle.sineLine":"Sine Line","toolGroup.proj":"PROJECTION","tool.projection.longPosition":"Long Position","tool.projection.shortPosition":"Short Position","tool.projection.forecast":"Forecast","tool.projection.barsPattern":"Bars Pattern","tool.projection.ghostFeed":"Ghost Feed","tool.projection.projection":"Projection","toolGroup.volumn":"VOLUMN-BASED","tool.volumnBased.anchoredVwap":"Anchored VWAP","tool.volumnBased.fixedRangeVolumnProfile":"Fixed Range Volumn Profile","tool.volumnBased.anchoredVolumnProfile":"Anchored Volumn Profile","toolGroup.measurer":"MEASURER","tool.measurer.priceRange":"Price Range","tool.measurer.dateRange":"Date Range","tool.measurer.dataAndPriceRange":"Date and Price Range","toolGroup.brush":"BRUSHES","tool.brush.brush":"Brush","tool.brush.highlighter":"Highlighter","toolGroup.arrow":"ARROWS","tool.arrow.arrowMarker":"Arrow Marker","tool.arrow.arrow":"Arrow","tool.arrow.arrowMarkUp":"Arrow Mark Up","tool.arrow.arrowMarkDown":"Arrow Mark Down","tool.arrow.arrowMarkLeft":"Arrow Mark Left","tool.arrow.arrowMarkRight":"Arrow Mark Right","toolGroup.shape":"SHAPES","tool.shape.rect":"Rectangle","tool.shape.rotatedRect":"Rotated Rectangle","tool.shape.path":"Path","tool.shape.circle":"Circle","tool.shape.ellipse":"Ellipse","tool.shape.polyline":"Polyline","tool.shape.triangle":"Triangle","tool.shape.arc":"Arc","tool.shape.curve":"Curve","tool.shape.doubleCurve":"Double Curve","toolGroup.text":"TEXT & NOTES","tool.text.text":"Text","tool.text.anchoredText":"Anchored Text","tool.text.note":"Note","tool.text.priceNote":"Price Note","tool.text.pin":"Pin","tool.text.pinFixed":"Anchored Pin","tool.text.table":"Table","tool.text.callout":"Callout","tool.text.comment":"Comment","tool.text.priceLabel":"Price Label","tool.text.signpost":"Signpost","tool.text.flagMark":"Flag Mark","toolGroup.content":"CONTENT","tool.content.image":"Image","tool.emoji":"Emoji","tool.sticker":"Sticker","tool.icon":"Icons","tool.emoji.group.smiles&people":"smiles & people","tool.emoji.group.animals&nature":"animals & nature","tool.emoji.group.food&drink":"food & drink","tool.emoji.group.activity":"activity","tool.emoji.group.travel&places":"travel & places","tool.emoji.group.objects":"objects","tool.emoji.group.symbols":"symbols","tool.emoji.group.flags":"flags","tool.icon.group.gestures&smileys":"GESTURES & SMILEYS","tool.icon.group.symbols&flags":"SYMBOLS & FLAGS","tool.icon.group.nature":"NATURE","tool.icon.group.currency":"CURRENCY","tool.icon.group.objects":"OBJECTS","tool.icon.group.arrows":"ARROWS","tool.measure":"Measure","tool.measure.after":" + click on the chart","tool.zoomIn":"Zoom In","tool.zoomOut":"Zoom Out","tool.magnet":"Magnet Mode snaps drawings placed near price bars to the closest OHLC value","tool.keepDraw":"Keep drawing","tool.lockDraw":"Lock All drawings","tool.hide.hideAll":"Hide all drawings, indicators, positions & orders","tool.hide.showAll":"Show all drawings, indicators, positions & orders","tool.hide.hideDrawing":"Hide all drawings","tool.hide.showDrawing":"Show all drawings","tool.hide.hideIndicator":"Hide all indicators","tool.hide.showIndicator":"Show all indicators","tool.hide.hidePosition":"Hide all positions & orders","tool.hide.showPosition":"Show all positions & orders","tool.removeObjects":"Remove objects","tool.more.cursor":"Cursor","tool.more.trendLine":"Trend line tools","tool.more.channel":"Channel tools","tool.more.gannAndFib":"Gann and Fibonacci tools","tool.more.pattern":"Patterns","tool.more.forecastAndMeasure":"Forecasting and measurement tools","tool.more.shapes":"Geometric shapes","tool.more.annotation":"Annotation tools","tool.more.icons":"Icons","tool.more.magnet":"Magnets","tool.more.hide":"Hide Options","tool.more.remove":"Remove options","tool.magnet.weak":"Weak Magnet","tool.magnet.strong":"Strong Magnet","tool.remove.drawing":"Remove {draw} drawings","tool.remove.indicator":"Remove {ind} indicators","tool.remove.drawingAndIndicator":"Remove {draw} indicators & {ind} indicators","resolutionGroup.ticks":"TICKS","resolutionGroup.seconds":"SECONDS","resolutionGroup.minutes":"MINUTES","resolutionGroup.hours":"HOURS","resolutionGroup.days":"DAYS","resolution.tick":"1 tick","resolution.tick_plural":"{count} ticks","resolution.second":"1 second","resolution.second_plural":"{count} seconds","resolution.minute":"1 minute","resolution.minute_plural":"{count} minutes","resolution.hour":"1 hour","resolution.hour_plural":"{count} hours","resolution.day":"1 day","resolution.day_plural":"{count} days","resolution.weak":"1 weak","resolution.weak_plural":"{count} weaks","resolution.month":"1 month","resolution.month_plural":"{count} months","resolution.year":"1 year","resolution.year_plural":"{count} years","resolution.timeSpan.day":"d","resolution.timeSpan.hour":"h","resolution.timeSpan.minute":"m","resolution.timeSpan.second":"s","chartStyle.bar":"Bars","chartStyle.candle":"Candles","chartStyle.hollowCandle":"Hollow Candles","chartStyle.line":"Line","chartStyle.area":"Area","topToolbar.symbolSearch":"Symbol Search","topToolbar.compare":"Compare or Add Symbol","topToolbar.indicator":"Indicators","topToolbar.indicator.tip":"Indicators","topToolbar.layout":"Layout setup","topToolbar.setting":"Chart settings","topToolbar.fullscreen":"Fullscreen mode","topToolbar.snapshot":"Take a snapshot","topToolbar.snapshot.menu.title":"CHART SNAPSHOT","topToolbar.snapshot.downloadImage":"Download image","topToolbar.snapshot.copyImage":"Copy image","topToolbar.snapshot.copyImage.success":"Chart image copied to clipboard","legend.changeSymbol":"Change Symbol","legend.changeInterval":"Change interval","legend.more":"More","legend.remove":"Remove","legend.main.open":"O","legend.main.high":"H","legend.main.low":"L","legend.main.close":"C","legend.main.showLess":"Hide indicator legend","legend.main.showMore":"Show indicator legend","legend.error.symbol":"Symbol Error","legend.error.runtime":"Runtime Error","indicator.dialog.title":"Indicators","indicator.dialog.script":"SCRIPT NAME","setting.title":"Chart settings","setting.timezone":"Timezone","crosshairMenu.buyLimit":"Buy 1 {symbol} @ {ask} limit","crosshairMenu.sellStop":"Sell 1 {symbol} @ {bid} stop","crosshairMenu.newOrder":"Create new order…","crosshairMenu.settings":"Trading settings...","crosshairMenu.draw":"Draw Horizontal Line at {price}","common.search":"Search","common.cancel":"Cancel","common.ok":"Ok","trade.buy":"Buy","trade.sell":"Buy","tool.tradeLine.buy":"Buy","tool.tradeLine.sell":"Sell","tool.tradeLine.tp":"TP","tool.tradeLine.sl":"SL","tool.tradeLine.qty":"{qty}Lots","tradePrimitive.execution.tip":"{side} {qty} @ {price}","tool.line.common.bars":"{count} bars","tool.line.common.distance":"distance: {distance}","tool.headAndShoulders.left":"Left Shoulder","tool.headAndShoulders.head":"Head","tool.headAndShoulders.right":"Right Shoulder","tool.position.target":"Target: {profitChange}({profitChangePercent}) {profitChangePip}, Amount: {amount}","tool.position.open":"Open","tool.position.close":"Close","tool.position.pnl":"{status} P&L: {pnl}","tool.position.qty":"Qty: {qty}","tool.position.ratio":"Risk/Reward Ratio: {riskRewardRatio}","tool.position.stop":"Stop: {stopChange}({stopChangePercent}) {stopChangePip}, Amount: {amount}","tool.forecast.success":"SUCCESS","tool.forecast.failure":"FAILURE","tool.forecast.in":"in {timeSpan}","tool.text.common.addText":"Add text","tool.image.dialog.title":"Image","tool.image.dialog.choose":"Choose Image","tool.image.dialog.imageTypes":"JPG, PNG or WEBP","tool.image.dialog.sizeLimit":"Max size 2MB","contextMenu.clone":"Clone","contextMenu.clone.kb.drag":"Drag","contextMenu.copy":"Copy","priceAxis.mode.regular":"Regular","priceAxis.mode.log":"Logarithmic","priceAxis.mode.percent":"Percent","drawingBar.show":"Show Drawings Toolbar","drawingBar.hide":"Hide Drawings Toolbar","tz.Etc/UTC":"UTC","tz.exchange":"Exchange","tz.Africa/Cairo":"Cairo","tz.Africa/Casablanca":"Casablanca","tz.Africa/Johannesburg":"Johannesburg","tz.Africa/Lagos":"Lagos","tz.Africa/Nairobi":"Nairobi","tz.Africa/Tunis":"Tunis","tz.America/Anchorage":"Anchorage","tz.America/Argentina/Buenos_Aires":"Buenos_Aires","tz.America/Bogota":"Bogota","tz.America/Caracas":"Caracas","tz.America/Chicago":"Chicago","tz.America/El_Salvador":"El_Salvador","tz.America/Juneau":"Juneau","tz.America/Lima":"Lima","tz.America/Los_Angeles":"Los_Angeles","tz.America/Mexico_City":"Mexico_City","tz.America/New_York":"New_York","tz.America/Phoenix":"Phoenix","tz.America/Santiago":"Santiago","tz.America/Sao_Paulo":"Sao_Paulo","tz.America/Toronto":"Toronto","tz.America/Vancouver":"Vancouver","tz.US/Mountain":"Mountain","tz.Asia/Almaty":"Almaty","tz.Asia/Ashkhabad":"Ashkhabad","tz.Asia/Bahrain":"Bahrain","tz.Asia/Bangkok":"Bangkok","tz.Asia/Chongqing":"Chongqing","tz.Asia/Colombo":"Colombo","tz.Asia/Dhaka":"Dhaka","tz.Asia/Dubai":"Dubai","tz.Asia/Ho_Chi_Minh":"Ho_Chi_Minh","tz.Asia/Hong_Kong":"Hong_Kong","tz.Asia/Jakarta":"Jakarta","tz.Asia/Jerusalem":"Jerusalem","tz.Asia/Karachi":"Karachi","tz.Asia/Kathmandu":"Kathmandu","tz.Asia/Kolkata":"Kolkata","tz.Asia/Kuala_Lumpur":"Kuala_Lumpur","tz.Asia/Kuwait":"Kuwait","tz.Asia/Manila":"Manila","tz.Asia/Muscat":"Muscat","tz.Asia/Nicosia":"Nicosia","tz.Asia/Qatar":"Qatar","tz.Asia/Riyadh":"Riyadh","tz.Asia/Seoul":"Seoul","tz.Asia/Shanghai":"Shanghai","tz.Asia/Singapore":"Singapore","tz.Asia/Taipei":"Taipei","tz.Asia/Tehran":"Tehran","tz.Asia/Tokyo":"Tokyo","tz.Asia/Yangon":"Yangon","tz.Atlantic/Azores":"Azores","tz.Atlantic/Reykjavik":"Reykjavik","tz.Australia/Adelaide":"Adelaide","tz.Australia/Brisbane":"Brisbane","tz.Australia/Perth":"Perth","tz.Australia/Sydney":"Sydney","tz.Europe/Amsterdam":"Amsterdam","tz.Europe/Athens":"Athens","tz.Europe/Belgrade":"Belgrade","tz.Europe/Berlin":"Berlin","tz.Europe/Bratislava":"Bratislava","tz.Europe/Brussels":"Brussels","tz.Europe/Bucharest":"Bucharest","tz.Europe/Budapest":"Budapest","tz.Europe/Copenhagen":"Copenhagen","tz.Europe/Dublin":"Dublin","tz.Europe/Helsinki":"Helsinki","tz.Europe/Istanbul":"Istanbul","tz.Europe/Lisbon":"Lisbon","tz.Europe/London":"London","tz.Europe/Luxembourg":"Luxembourg","tz.Europe/Madrid":"Madrid","tz.Europe/Malta":"Malta","tz.Europe/Moscow":"Moscow","tz.Europe/Oslo":"Oslo","tz.Europe/Paris":"Paris","tz.Europe/Prague":"Prague","tz.Europe/Riga":"Riga","tz.Europe/Rome":"Rome","tz.Europe/Stockholm":"Stockholm","tz.Europe/Tallinn":"Tallinn","tz.Europe/Vienna":"Vienna","tz.Europe/Vilnius":"Vilnius","tz.Europe/Warsaw":"Warsaw","tz.Europe/Zurich":"Zurich","tz.Pacific/Auckland":"Auckland","tz.Pacific/Chatham":"Chatham","tz.Pacific/Fakaofo":"Fakaofo","tz.Pacific/Honolulu":"Honolulu","tz.Pacific/Norfolk":"Norfolk","nav.scrollToRealtime":"Scroll to the most recent bar","errors.noData":"No data here","tradeLineMenu.modifyOrder":"Modify order","tradeLineMenu.cancelOrder":"Cancel order","tradeLineMenu.modifyPosition":"Modify position","tradeLineMenu.closePosition":"Close position"}};class sM{constructor(t){x(this,"_serviceBrand"),this.locale=t}dateFormat(){return ee(eM[this.locale])}dateTimeFormat(t){return`${this.dateFormat()} HH:mm${t?":ss":""}`}t(t,e){return t?function(t,e,i,n){try{let s=t[e][i];if(iM.includes(s))return"";if(n&&"count"in n&&Number(n.count)>1){const n=t[e][i+"_plural"];n&&(s=n)}return n&&Reflect.ownKeys(n).forEach((t=>{s=s.replace(new RegExp(`{${t}}`,"g"),`${n[t]}`)})),s}catch{return console.warn(`can not found [${e}] translation file`),i}}(nM,"en",t,e):""}isI18nKey(t){return Reflect.has(nM.en,t)}formatNumber(t){return t.toFixed(0)}}const rM=Wo("logService");class oM extends he{constructor(){super(...arguments),x(this,"level",3),x(this,"_onDidChangeLogLevel",this._register(new dl)),x(this,"onDidChangeLogLevel",this._onDidChangeLogLevel.event)}setLevel(t){this.level!==t&&(this.level=t,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(t){return 0!==this.level&&this.level<=t}canLog(t){return!this._store.isDisposed&&this.checkLogLevel(t)}}class aM extends oM{constructor(t=3,e=!0){super(),this.useColors=e,this.setLevel(t)}trace(t,...e){this.canLog(1)&&(this.useColors?console.log("%cTRACE","color: #888",t,...e):console.log(t,...e))}debug(t,...e){this.canLog(2)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",t,...e):console.log(t,...e))}info(t,...e){this.canLog(3)&&(this.useColors?console.log("%c INFO","color: #33f",t,...e):console.log(t,...e))}warn(t,...e){this.canLog(4)&&(this.useColors?console.warn("%c WARN","color: #993",t,...e):console.log(t,...e))}error(t,...e){this.canLog(5)&&(this.useColors?console.error("%c  ERR","color: #f33",t,...e):console.error(t,...e))}flush(){}}var lM=(t=>(t[t.NoMatchingKb=0]="NoMatchingKb",t[t.MoreChordsNeeded=1]="MoreChordsNeeded",t[t.KbFound=2]="KbFound",t))(lM||{});const cM={kind:0},hM={kind:1};class uM{constructor(t,e,i,n){x(this,"_log"),x(this,"_defaultKeybindings"),x(this,"_keybindings"),x(this,"_defaultBoundCommands"),x(this,"_map"),x(this,"_lookupMap"),this._instantiationService=n,this._log=i,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(const s of t){const t=s.command;t&&"-"!==t.charAt(0)&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=uM.handleRemovals([].concat(t).concat(e));for(let s=0,r=this._keybindings.length;s<r;s++){const t=this._keybindings[s];0!==t.chords.length&&this._addKeyPress(t.chords[0],t)}}static _isTargetedForRemoval(t,e){if(e)for(let i=0;i<e.length;i++)if(e[i]!==t.chords[i])return!1;return!0}static handleRemovals(t){const e=new Map;for(let n=0,s=t.length;n<s;n++){const i=t[n];if(i.command&&"-"===i.command.charAt(0)){const t=i.command.substring(1);e.has(t)?e.get(t).push(i):e.set(t,[i])}}if(0===e.size)return t;const i=[];for(let n=0,s=t.length;n<s;n++){const s=t[n];if(!s.command||0===s.command.length){i.push(s);continue}if("-"===s.command.charAt(0))continue;const r=e.get(s.command);if(!r||!s.isDefault){i.push(s);continue}let o=!1;for(const t of r)if(this._isTargetedForRemoval(s,t.chords)){o=!0;break}o||i.push(s)}return i}_addKeyPress(t,e){const i=this._map.get(t);if(void 0===i)return this._map.set(t,[e]),void this._addToLookupMap(e);for(let n=i.length-1;n>=0;n--){const t=i[n];if(t.command===e.command)continue;let s=!0;for(let i=1;i<t.chords.length&&i<e.chords.length;i++)if(t.chords[i]!==e.chords[i]){s=!1;break}s&&this._removeFromLookupMap(t)}i.push(e),this._addToLookupMap(e)}_addToLookupMap(t){if(!t.command)return;let e=this._lookupMap.get(t.command);void 0===e?(e=[t],this._lookupMap.set(t.command,e)):e.push(t)}_removeFromLookupMap(t){if(!t.command)return;const e=this._lookupMap.get(t.command);if(void 0!==e)for(let i=0,n=e.length;i<n;i++)if(e[i]===t)return void e.splice(i,1)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(t){const e=this._lookupMap.get(t);if(void 0===e||0===e.length)return[];const i=[];let n=0;for(let s=e.length-1;s>=0;s--)i[n++]=e[s];return i}resolve(t,e,i){const n=[...e,i];this._log(`| Resolving ${n}`);const s=this._map.get(n[0]);if(void 0===s)return this._log("\\ No keybinding entries."),cM;let r=null;if(n.length<2)r=s;else{r=[];for(let t=0,e=s.length;t<e;t++){const e=s[t];if(n.length>e.chords.length)continue;let i=!0;for(let t=1;t<n.length;t++)if(e.chords[t]!==n[t]){i=!1;break}i&&r.push(e)}}const o=this._findCommand(t,r);return o?n.length<o.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${o.chords.length-n.length} more chord(s), when: ${dM(o.when)}, source: ${pM(o)}.`),hM):(this._log(`\\ From ${r.length} keybinding entries, matched ${o.command}, when: ${dM(o.when)}, source: ${pM(o)}.`),a=o.command,l=o.commandArgs,c=o.bubble,{kind:2,commandId:a,commandArgs:l,isBubble:c}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),cM);var a,l,c}_findCommand(t,e){for(let i=e.length-1;i>=0;i--){const n=e[i];if(this._contextMatchesRules(t,n.when))return n}return null}_contextMatchesRules(t,e){return!e||this._instantiationService.invokeFunction((i=>e(t,i)))}}function dM(t){return t?`${t.toString()}`:"no when condition"}function pM(t){return t.extensionId?t.isBuiltinExtension?`built-in extension ${t.extensionId}`:`user extension ${t.extensionId}`:t.isDefault?"built-in":"user"}function fM(t,e,i){if(null===e)return"";const n=[];return t.ctrlKey&&n.push(i.ctrlKey),t.shiftKey&&n.push(i.shiftKey),t.altKey&&n.push(i.altKey),t.metaKey&&n.push(i.metaKey),""!==e&&n.push(e),n.join(i.separator)}const mM=new class{constructor(t,e,i=e){x(this,"modifierLabels"),this.modifierLabels=[null],this.modifierLabels[dt.Macintosh]=t,this.modifierLabels[dt.Windows]=e,this.modifierLabels[dt.Linux]=i}toLabel(t,e,i){if(0===e.length)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const r=e[s],o=i(r);if(null===o)return null;n[s]=fM(r,o,this.modifierLabels[t])}return n.join(" ")}}({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Windows",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),gM=new Map;function vM(t,e=pt){if(gM.has(t))return gM.get(t)??"";const i=Pt(t,e);let n="";return i&&(n=mM.toLabel(e,i.chords,(t=>Dt[t.keyCode]))??""),gM.set(t,n),n}class yM{constructor(t,e,i,n,s,r,o){x(this,"_resolvedKeybindingItemBrand"),x(this,"resolvedKeybinding"),x(this,"chords"),x(this,"bubble"),x(this,"command"),x(this,"commandArgs"),x(this,"when"),x(this,"isDefault"),x(this,"extensionId"),x(this,"isBuiltinExtension"),this.resolvedKeybinding=t,this.chords=t?_M(t.getDispatchChords()):[],t&&0===this.chords.length&&G(),this.bubble=!!e&&e.charCodeAt(0)===Ob.Caret,this.command=this.bubble?e.substr(1):e,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=o}}function _M(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];if(!n)return[];e.push(n)}return e}class bM{constructor(t,e){if(x(this,"_os"),x(this,"_chords"),0===e.length)throw W("chords");this._os=t,this._chords=e}getLabel(){return mM.toLabel(this._os,this._chords,(t=>this._getLabel(t)))}getDispatchChords(){return this._chords.map((t=>this._getChordDispatch(t)))}_getLabel(t){return t.isDuplicateModifierCase()?"":this._keyCodeToUILabel(t.keyCode)}_keyCodeToUILabel(t){return Dt[t]}_getChordDispatch(t){return function(t){if(t.isModifierKey())return null;let e="";t.ctrlKey&&(e+="ctrl+");t.shiftKey&&(e+="shift+");t.altKey&&(e+="alt+");t.metaKey&&(e+="meta+");return e+=kt.toString(t.keyCode),e}(t)}static resolveKeybinding(t,e){const i=_M(t.chords);return i.length>0?[new bM(e,i)]:[]}}var wM=Object.getOwnPropertyDescriptor,xM=(t,e)=>(i,n)=>e(i,n,t);let SM=class extends he{constructor(t,e,i,n,s,r,o,a){super(),x(this,"_serviceBrand"),x(this,"_logging",!1),x(this,"_cachedResolver"),x(this,"_dynamicKeybindings"),x(this,"_currentlyDispatchingCommandId"),this._commandService=i,this._logService=n,this._contextKeyService=s,this._instantiationService=r,this.keybindingsRegistry=o,this._cachedResolver=null,this._dynamicKeybindings=[],this._currentlyDispatchingCommandId=null,this._register(Zt(t,"keydown",(t=>{if(!e.activeElement){const e=a.activeChart();if(!e)return;const i=e.getContainerDomElement();i.focus(),this.dispatchEvent(t,i)}}))),this._register(Xt(e,"focusin",(()=>{const t=a.activeChart();if(!t)return;const i=t.getContainerDomElement(),n=e.activeElement,s=null==n?void 0:n.ownerDocument.defaultView,r=s&&(n instanceof s.HTMLInputElement||n instanceof s.HTMLTextAreaElement);n&&!r&&e.contains(n)&&n!==i&&i.focus()})))}dispatchEvent(t,e){return this._dispatch(t,e)}_dispatch(t,e){return this._doDispatch(this.resolveKeyboardEvent(t),e)}_doDispatch(t,e){let i=!1;const[n]=t.getDispatchChords();if(null===n)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const s=this._contextKeyService.getContext(e),r=t.getLabel(),o=this._getResolver().resolve(s,[],n);switch(o.kind){case lM.NoMatchingKb:return this._logService.trace("KeybindingService#dispatch",r,"[ No matching keybinding ]"),i;case lM.MoreChordsNeeded:return G();case lM.KbFound:if(this._logService.trace("KeybindingService#dispatch",r,`[ Will dispatch command ${o.commandId} ]`),null===o.commandId||""===o.commandId);else{o.isBubble||(i=!0),this._log(`+ Invoking command ${o.commandId}.`),this._currentlyDispatchingCommandId=o.commandId;try{void 0===o.commandArgs?this._commandService.executeCommand(o.commandId).then(void 0,(t=>this._logService.warn(t))):this._commandService.executeCommand(o.commandId,o.commandArgs).then(void 0,(t=>this._logService.warn(t)))}finally{this._currentlyDispatchingCommandId=null}}return i}}_getResolver(){if(!this._cachedResolver){const t=this._toNormalizedKeybindingItems(this.keybindingsRegistry.getDefaultKeybindings(),!0),e=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new uM(t,e,(t=>this._log(t)),this._instantiationService)}return this._cachedResolver}_toNormalizedKeybindingItems(t,e){const i=[];let n=0;for(const s of t){const t=s.when||void 0,r=s.keybinding;if(r){const o=bM.resolveKeybinding(r,pt);for(const r of o)i[n++]=new yM(r,s.command,s.commandArgs,t,e,null,!1)}else i[n++]=new yM(void 0,s.command,s.commandArgs,t,e,null,!1)}return i}_log(t){this._logging&&this._logService.info(`[KeybindingService]: ${t}`)}resolveKeyboardEvent(t){const e=new Rt(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode);return new bM(pt,[e])}};SM=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?wM(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([xM(2,Jo),xM(3,rM),xM(4,I_),xM(5,Ko),xM(6,na),xM(7,Go)],SM);const TM=Wo("lifecycleService");var CM=(t=>(t[t.Starting=1]="Starting",t[t.Ready=2]="Ready",t[t.Restored=3]="Restored",t[t.Eventually=4]="Eventually",t))(CM||{});class MM extends he{constructor(){super(...arguments),x(this,"_phase",CM.Starting),x(this,"_willShutdown",!1),x(this,"phaseWhen",new Map)}get phase(){return this._phase}get willShutdown(){return this._willShutdown}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this._phase=t;const e=this.phaseWhen.get(this._phase);e&&(e.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let e=this.phaseWhen.get(t);e||(e=new St,this.phaseWhen.set(t,e)),await e.wait()}}class IM extends he{constructor(t){super(),x(this,"logger"),this.logger=t,this._register(t.onDidChangeLogLevel((t=>this.setLevel(t))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(t){this.logger.setLevel(t)}getLevel(){return this.logger.getLevel()}trace(t,...e){this.logger.trace(t,...e)}debug(t,...e){this.logger.debug(t,...e)}info(t,...e){this.logger.info(t,...e)}warn(t,...e){this.logger.warn(t,...e)}error(t,...e){this.logger.error(t,...e)}flush(){this.logger.flush()}}const EM=Wo("notificationService");var AM=(t=>(t[t.Verbose=0]="Verbose",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t))(AM||{});(AM||(AM={})).toString=function(t){switch(t){case 3:return"error";case 2:return"warning";case 1:return"info";default:return"verbose"}};var DM=(t=>(t[t.ADD=0]="ADD",t[t.REMOVE=1]="REMOVE",t))(DM||{});class kM extends he{constructor(t,e){super(),x(this,"_onDidClose",this._register(new dl)),x(this,"onDidClose",this._onDidClose.event),this.item=t,this.onClose=e,this.registerListeners()}registerListeners(){al(this.item.onDidClose)((()=>{this._onDidClose.fire(),this.dispose()}))}close(){this.onClose(this.item),this.dispose()}}const PM=class t extends he{constructor(){super(...arguments),x(this,"_onDidChangeNotification",this._register(new dl)),x(this,"onDidChangeNotification",this._onDidChangeNotification.event),x(this,"_notifications",[])}get notifications(){return this._notifications}addNotification(e){const i=this.createViewItem(e);if(!i)return t.NO_OP_NOTIFICATION;const n=this.findNotification(i);return null==n||n.close(),this._notifications.splice(0,0,i),this._onDidChangeNotification.fire({item:i,index:0,kind:0}),new kM(i,(t=>this.onClose(t)))}onClose(t){const e=this.findNotification(t);e&&e!==t?e.close():t.close()}findNotification(t){return this._notifications.find((e=>e.equals(t)))}createViewItem(t){const e=LM.create(t);if(e)return al(e.onDidClose)((()=>{const t=this._notifications.indexOf(e);t>=0&&(this._notifications.splice(t,1),this._onDidChangeNotification.fire({item:e,index:t,kind:1}))})),e}};x(PM,"NO_OP_NOTIFICATION",new class{constructor(){x(this,"onDidClose",ol)}close(){}});let OM=PM;const RM=class t extends he{constructor(t,e,i){super(),x(this,"_visible",!1),x(this,"_onDidClose",this._register(new dl)),x(this,"onDidClose",this._onDidClose.event),this.id=t,this._severity=e,this._message=i}static create(e){if(!e||!e.message||K(e.message))return;let i;i="number"==typeof e.severity?e.severity:AM.Info;const n=t.parseNotificationMessage(e.message);return n?new t(e.id,i,n):void 0}static parseNotificationMessage(e){let i;if(e instanceof Error?i=Y(e,!1):"string"==typeof e&&(i=e),!i)return;const n=i;i.length>t.MAX_MESSAGE_LENGTH&&(i=`${i.substr(0,t.MAX_MESSAGE_LENGTH)}...`),i=i.replace(/(\r\n|\n|\r)/gm," ").trim();return{raw:n,text:i,original:e}}get severity(){return this._severity}get message(){return this._message}get visible(){return this._visible}close(){this._onDidClose.fire(),this.dispose()}equals(t){return"string"==typeof this.id||"string"==typeof t.id?this.id===t.id:this._message.raw===t.message.raw}};x(RM,"MAX_MESSAGE_LENGTH",1e3);let LM=RM;class NM extends he{constructor(){super(),x(this,"model",this._register(new OM)),x(this,"_onDidAddNotification",this._register(new dl)),x(this,"onDidAddNotification",this._onDidAddNotification.event),x(this,"_onDidRemoveNotification",this._register(new dl)),x(this,"onDidRemoveNotification",this._onDidRemoveNotification.event),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>{switch(t.kind){case DM.ADD:case DM.REMOVE:{const e={message:t.item.message.original,severity:t.item.severity};t.kind===DM.ADD&&this._onDidAddNotification.fire(e),t.kind===DM.REMOVE&&this._onDidRemoveNotification.fire(e);break}}})))}verbose(t){if(Array.isArray(t))for(const e of t)this.info(e);else this.model.addNotification({severity:AM.Verbose,message:t})}info(t){if(Array.isArray(t))for(const e of t)this.info(e);else this.model.addNotification({severity:AM.Info,message:t})}warn(t){if(Array.isArray(t))for(const e of t)this.warn(e);else this.model.addNotification({severity:AM.Warning,message:t})}error(t){if(Array.isArray(t))for(const e of t)this.error(e);else this.model.addNotification({severity:AM.Error,message:t})}notify(t){return this.model.addNotification(t)}}const FM=Wo("storeService");class BM{constructor(t){x(this,"_serviceBrand"),x(this,"_stores",new Map),t&&Object.keys(t).forEach((e=>{this.defineStore(e,t[e])}))}defineStore(t,e){if(this._stores.has(t))return ee(this._stores.get(t));const i=Eg(e);return this._stores.set(t,i),i}setStore(t,e){ee(this._stores.get(t)).set(e)}save(){return this._stores.entries().reduce(((t,[e,i])=>(t[e]=nu(Dg(i)),t)),Object.create(null))}}const zM=Symbol("Comlink.proxy"),VM=Symbol("Comlink.endpoint"),$M=Symbol("Comlink.releaseProxy"),HM=Symbol("Comlink.finalizer"),KM=Symbol("Comlink.thrown"),WM=t=>"object"==typeof t&&null!==t||"function"==typeof t,jM=new Map([["proxy",{canHandle:t=>WM(t)&&t[zM],serialize(t){const{port1:e,port2:i}=new MessageChannel;return UM(t,e),[i,[i]]},deserialize:t=>(t.start(),qM(t))}],["throw",{canHandle:t=>WM(t)&&KM in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function UM(t,e=globalThis,i=["*"]){e.addEventListener("message",(function n(s){if(!s||!s.data)return;if(!function(t,e){for(const i of t){if(e===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(e))return!0}return!1}(i,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);const{id:r,type:o,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(nI);let c;try{const e=a.slice(0,-1).reduce(((t,e)=>t[e]),t),i=a.reduce(((t,e)=>t[e]),t);switch(o){case"GET":c=i;break;case"SET":e[a.slice(-1)[0]]=nI(s.data.value),c=!0;break;case"APPLY":c=i.apply(e,l);break;case"CONSTRUCT":c=function(t){return Object.assign(t,{[zM]:!0})}(new i(...l));break;case"ENDPOINT":{const{port1:e,port2:i}=new MessageChannel;UM(t,i),c=function(t,e){return eI.set(t,e),t}(e,[e])}break;case"RELEASE":c=void 0;break;default:return}}catch(h){c={value:h,[KM]:0}}Promise.resolve(c).catch((t=>({value:t,[KM]:0}))).then((i=>{const[s,a]=iI(i);e.postMessage(Object.assign(Object.assign({},s),{id:r}),a),"RELEASE"===o&&(e.removeEventListener("message",n),GM(e),HM in t&&"function"==typeof t[HM]&&t[HM]())})).catch((t=>{const[i,n]=iI({value:new TypeError("Unserializable return value"),[KM]:0});e.postMessage(Object.assign(Object.assign({},i),{id:r}),n)}))})),e.start&&e.start()}function GM(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function qM(t,e){const i=new Map;return t.addEventListener("message",(function(t){const{data:e}=t;if(!e||!e.id)return;const n=i.get(e.id);if(n)try{n(e)}finally{i.delete(e.id)}})),JM(t,i,[],e)}function YM(t){if(t)throw new Error("Proxy has been released and is not useable")}function XM(t){return sI(t,new Map,{type:"RELEASE"}).then((()=>{GM(t)}))}const ZM=new WeakMap,QM="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(ZM.get(t)||0)-1;ZM.set(t,e),0===e&&XM(t)}));function JM(t,e,i=[],n=function(){}){let s=!1;const r=new Proxy(n,{get(n,o){if(YM(s),o===$M)return()=>{!function(t){QM&&QM.unregister(t)}(r),XM(t),e.clear(),s=!0};if("then"===o){if(0===i.length)return{then:()=>r};const n=sI(t,e,{type:"GET",path:i.map((t=>t.toString()))}).then(nI);return n.then.bind(n)}return JM(t,e,[...i,o])},set(n,r,o){YM(s);const[a,l]=iI(o);return sI(t,e,{type:"SET",path:[...i,r].map((t=>t.toString())),value:a},l).then(nI)},apply(n,r,o){YM(s);const a=i[i.length-1];if(a===VM)return sI(t,e,{type:"ENDPOINT"}).then(nI);if("bind"===a)return JM(t,e,i.slice(0,-1));const[l,c]=tI(o);return sI(t,e,{type:"APPLY",path:i.map((t=>t.toString())),argumentList:l},c).then(nI)},construct(n,r){YM(s);const[o,a]=tI(r);return sI(t,e,{type:"CONSTRUCT",path:i.map((t=>t.toString())),argumentList:o},a).then(nI)}});return function(t,e){const i=(ZM.get(e)||0)+1;ZM.set(e,i),QM&&QM.register(t,e,t)}(r,t),r}function tI(t){const e=t.map(iI);return[e.map((t=>t[0])),(i=e.map((t=>t[1])),Array.prototype.concat.apply([],i))];var i}const eI=new WeakMap;function iI(t){for(const[e,i]of jM)if(i.canHandle(t)){const[n,s]=i.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},eI.get(t)||[]]}function nI(t){switch(t.type){case"HANDLER":return jM.get(t.name).deserialize(t.value);case"RAW":return t.value}}function sI(t,e,i,n){return new Promise((s=>{const r=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.set(r,s),t.start&&t.start(),t.postMessage(Object.assign({id:r},i),n)}))}var rI=Symbol("getEndpoint");class oI{constructor(){x(this,"_serviceBrand"),x(this,"worker"),this.worker=(t=>{const e=qM(t);return new Proxy(e,{get:(e,i,n)=>i===rI?t:Reflect.get(e,i,n)})})(new Worker(new URL(""+new URL("worker-D88vJH9e.js",import.meta.url).href,import.meta.url),{}))}exec(t,e,i){return t(this.worker,e,i)}}function aI(t){return N(t)?`${t}px`:""}const lI="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";const cI=new class{constructor(){x(this,"colorsById",Object.create(null))}registerColor(t,e){const i={id:t,defaults:e};return ie(!this.colorsById[t]),this.colorsById[t]=i,t}getColors(){return Object.keys(this.colorsById).map((t=>this.colorsById[t]))}resolveDefaultColor(t,e){const i=this.colorsById[t];if(null==i?void 0:i.defaults){return function(t,e){return null===t?void 0:"string"==typeof t?"#"===t[0]?zb.fromHex(t):e.getColor(t):t instanceof zb?t:G()}(null!==(n=i.defaults)&&"object"==typeof n&&"light"in n&&"dark"in n?i.defaults[e.type]:i.defaults,e)}var n}};const hI={base:"light",inherit:!1,colors:{"global.background":"#EBEBEB",foreground:"#0F0F0FFF",background:"#fff",primary:"#2962ff",selectedForeground:"#2962ff","negative.foreground":"#fff","negative.background":"#2962ff","negative.hoverBackground":"#1E53E5FF","gutter.background":"#EBEBEBFF","button.foreground":"#0F0F0FFF","button.background":"#fff","button.hoverBackground":"#f2f2f2","button.primary.foreground":"#fff","button.primary.background":"#1A1A1AFF","button.secondary.foreground":"#1A1A1AFF","button.secondary.background":"#fff","button.secondary.border":"#1A1A1AFF","button.secondary.hoverForeground":"#fff","button.secondary.hoverBackground":"#1A1A1AFF","tooltip.foreground":"#fff","tooltip.background":"#2E2E2E","scroll.foreground":"#fff","scroll.background":"#1e222d99","dialog.shadow":"#00000033","dialog.background":"#fff","scrollbarThumb.background":"#9c9c9c","listTitle.foreground":"#808080FF","listItem.foreground":"#0F0F0FFF","listItem.background":"#fff","listItem.hoverBackground":"#f2f2f2","listItem.selectedForeground":"#fff","listItem.selectedBackground":"#2E2E2EFF","listItem.disabledForeground":"#C8C8C8FF","listKeybinding.foreground":"#808080FF","input.foreground":"#131722FF","inputPlaceholder.foreground":"#a3a6af","legendLoader.foreground":"#707070FF","legend.background":"#FFFFFF7F","legend.hoverBackground":"#FFFFFF","legend.hoverBorder":"#dbdbdb","handle.foreground":"#b8b8b8","toast.verbose.foreground":"#1A1A1AFF","toast.verbose.background":"#ffffff","toast.verbose.border":"#089981FF","toast.info.foreground":"#fff","toast.info.background":"#2962ff"}},uI={base:"dark",inherit:!1,colors:{"global.background":"#303030",foreground:"#DBDBDBFF",background:"#1A1A1AFF",primary:"#2962ff",selectedForeground:"#2962ff","negative.foreground":"#DBDBDBFF","negative.background":"#2962FFFF","negative.hoverBackground":"#1E53E5FF","gutter.background":"#4A4A4AFF","button.foreground":"#DBDBDBFF","button.background":"#1A1A1AFF","button.hoverBackground":"#303030FF","button.primary.foreground":"#1A1A1AFF","button.primary.background":"#FFFFFFFF","button.secondary.foreground":"#FFFFFFFF","button.secondary.background":"#00000000","button.secondary.border":"#FFF","button.secondary.hoverForeground":"#1A1A1AFF","button.secondary.hoverBackground":"#F2F2F2FF","tooltip.foreground":"#F0F0F0","tooltip.background":"#3D3D3D","scroll.foreground":"#fff","scroll.background":"#3d3d3d","dialog.shadow":"#00000066","dialog.background":"#262626","scrollbarThumb.background":"#9c9c9c","listTitle.foreground":"#808080FF","listItem.foreground":"#DBDBDBFF","listItem.background":"#262626","listItem.hoverBackground":"#303030FF","listItem.selectedForeground":"#000000FF","listItem.selectedBackground":"#F2F2F2FF","listItem.disabledForeground":"#C8C8C8FF","listKeybinding.foreground":"#8C8C8CFF","input.foreground":"#A8A8A8FF","inputPlaceholder.foreground":"#8c8c8c","legendLoader.foreground":"#8c8c8c","legend.background":"#1A1A1A","legend.hoverBackground":"#303030","legend.hoverBorder":"#3D3D3D","handle.foreground":"#575757","toast.verbose.foreground":"#DBDBDB","toast.verbose.background":"#262626","toast.verbose.border":"#089981","toast.info.foreground":"#fff","toast.info.background":"#2962FFFF"}};QS(hI.colors).forEach((t=>{var e,i;e=t,i={light:hI.colors[t],dark:uI.colors[t]},cI.registerColor(e,i)}));var dI=Object.getOwnPropertyDescriptor;let pI=class extends he{constructor(t,e,i){super(),x(this,"_serviceBrand"),x(this,"_knownThemes"),x(this,"_onDidColorThemeChange",this._register(new dl)),x(this,"onDidColorThemeChange",this._onDidColorThemeChange.event),x(this,"_themeCSS",""),x(this,"_theme"),x(this,"_styleElement"),this._customProps=e,this.configurationService=i,this._knownThemes=new Map,this._knownThemes.set("light",vI("light")),this._knownThemes.set("dark",vI("dark")),this._styleElement=function(t=document.head,e){const i=document.createElement("style");return i.type="text/css",i.media="screen",null==e||e(i),t.appendChild(i),i}(t,(t=>{t.className="chartles-vars",t.textContent=this._themeCSS})),this._register(le((()=>{this._styleElement.remove()}))),this.setTheme(i.getValue("theme"),!1)}setTheme(t,e=!0){const i=this._knownThemes.get(t)??ee(this._knownThemes.get("light"));this._updateActualTheme(i),e&&this.configurationService.setValue("theme",i.themeName)}defineTheme(t,e){if(!/^[a-z0-9-]+$/i.test(t))throw new Error("Illegal theme name!");if(!mI(e.base)&&!mI(t))throw new Error("Illegal theme base!");this._knownThemes.set(t,new fI(t,e)),mI(t)&&this._knownThemes.forEach((e=>{e.base===t&&e.notifyBaseUpdated()})),this._theme.themeName===t&&this.setTheme(t)}getColorTheme(){return this._theme}isDark(){return this.getColorTheme().type===K_.DARK}_updateActualTheme(t){t&&this._theme!==t&&(this._theme=t,this._updateTheme())}_updateTheme(){const t=[],e={},i=i=>{e[i]||(t.push(i),e[i]=!0)},n=[];for(const[r,o]of Object.entries(this._customProps))n.push(`${r}: ${o.toString()};`);for(const r of cI.getColors()){const t=this._theme.getColor(r.id,!0);t&&n.push(`${s=r.id,`--cl-${s.replace(/\./g,"-")}`}: ${t.toString()};`)}var s;i(`:host { ${n.join("\n")} }`),this._themeCSS=t.join("\n"),this._updateCSS(),this._onDidColorThemeChange.fire(this._theme)}_updateCSS(){this._styleElement.textContent=this._themeCSS}};pI=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?dI(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([((t,e)=>(i,n)=>e(i,n,t))(2,kg)],pI);class fI{constructor(t,e){x(this,"id"),x(this,"themeName"),x(this,"themeData"),x(this,"colors"),x(this,"defaultColors"),this.themeData=e;const i=e.base;t.length>0?(mI(t)?this.id=t:this.id=i+" "+t,this.themeName=t):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null)}get base(){return this.themeData.base}get type(){return"light"===this.base?K_.LIGHT:K_.DARK}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null)}getColors(){if(!this.colors){const t=new Map;for(const e in this.themeData.colors)t.set(e,zb.fromHex(this.themeData.colors[e]));if(this.themeData.inherit){const e=gI(this.themeData.base);for(const i in e.colors)t.has(i)||t.set(i,zb.fromHex(e.colors[i]))}this.colors=t}return this.colors}getColor(t,e){const i=this.getColors().get(t);return i||(!1!==e?this.getDefault(t):void 0)}getDefault(t){let e=this.defaultColors[t];return e||(e=cI.resolveDefaultColor(t,this),this.defaultColors[t]=e,e)}}function mI(t){return"light"===t||"dark"===t}function gI(t){return"light"===t?hI:uI}function vI(t){const e=gI(t);return new fI(t,e)}var yI=Object.getOwnPropertyDescriptor,_I=(t,e)=>(i,n)=>e(i,n,t);let bI=class extends J{constructor(t,e){super(),this.keybindingsRegistry=t,this.commandRegistry=e}registerTool(t){this.add(t);const e=async(e,i=Object.create(null))=>{var n,s;const r=e.get(Ab);await r.switchTool(t.id,i.source??kb.manual),ie(r.activeTool),ie(r.activeTool.type===t.id);const o=r.activeTool.id;return i.preset&&(null==(s=(n=r.activeTool).receivePresetProps)||s.call(n,i.preset)),o};return t.keybinding?this.keybindingsRegistry.registerCommandAndKeybindingRule({id:t.id,primary:t.keybinding,weight:sa.ChartContrib,handler:e}):this.commandRegistry.registerCommand({id:t.id,handler:e})}};bI=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?yI(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([_I(0,na),_I(1,ta)],bI);var wI=Object.getOwnPropertyDescriptor,xI=(t,e)=>(i,n)=>e(i,n,t);let SI=class extends he{constructor(t,e,i){super(),x(this,"_activeTool"),x(this,"_past",[]),x(this,"_onDidChangeTool",this._register(new dl)),x(this,"onDidChangeTool",this._onDidChangeTool.event),x(this,"store"),x(this,"_toolScope"),x(this,"_switchQueue",this._register(new CI)),this._instantiationService=t,this._chartManagementService=e,this._toolRegistry=i,this.store=Eg({activeType:void 0,manualTriggeredActiveType:void 0,keepDrawingMode:!1,magnetMode:Pg.Normal,magnetModeOverride:void 0})}dispose(){var t;super.dispose(),Reflect.set(this,"store",null),null==(t=this._activeTool)||t.deactivate(),this._activeTool=void 0}_getValue(t){return Dg(this.store)[t]}_setValue(t,e){this.store.update((i=>(i[t]=e,i)))}get activeTool(){return this._activeTool}async switchTool(t,e,i=!1){return i&&this._switchQueue.cancelPending(),this._switchQueue.enqueue(e,(async i=>this._doSwitchTool(i,t,e)))}async _doSwitchTool(t,e,i){var n,s,r,o,a,l,c,h;await this._switchQueue.waitForReady(t),null==(n=this._activeTool)||n.deactivate();const u=this._activeTool;if(this._activeTool=void 0,null==(s=this._toolScope)||s.dispose(),e){const t=ee(this._toolRegistry.value(e));this._activeTool=await this._instantiationService.invokeFunction((e=>t.createTool(e)))}else this._activeTool=void 0;if(t.cancellationToken.isCancellationRequested)return;t.schedule((()=>{this.store.update((t=>(t.activeType=e,t)))})),u&&(u.canGoBackward||(this._past.length=0),u.fallbackable&&this._past.push(u.type)),null==(r=this._activeTool)||r.activate();const d=this._activeTool;return this._activeTool&&this.acquireToolScope({useMagnet:Boolean(null==(a=null==(o=this._activeTool)?void 0:o.useMagnetedPosition)?void 0:a.call(o)),isDrawing:Boolean(null==(c=null==(l=this._activeTool)?void 0:l.isDrawingTool)?void 0:c.call(l))}),this._onDidChangeTool.fire({prev:u,next:d,source:i}),gt((()=>{t.complete(!0)})),null==(h=this._activeTool)?void 0:h.id}async switchBack(){if(this._activeTool&&!this._activeTool.canGoBackward)return;const t=this._past.pop();t?(await this.switchTool(t,kb.manual),this._past.pop()):await this.switchTool(void 0,kb.manual)}async keepDrawingOrSwitchBack(){if(!this._getValue("keepDrawingMode"))return this.switchBack();if(!this._activeTool)return;const t=ee(this._toolRegistry.value(this._activeTool.type));this._activeTool.deactivate(),this._activeTool=void 0,this._activeTool=await this._instantiationService.invokeFunction((e=>t.createTool(e))),this._activeTool.activate()}processEvent(t){var e;if(this._toolScope&&this._toolScope.useMagnet)switch(t.type){case R_.KEY_DOWN:{const e=ee(t.asKeyboardInputEvent()),i=lt&&e.metaKey||!lt&&e.ctrlKey,n=this._getComputedMagnetMode();n===Pg.Normal&&i&&this._setMagnetModeOverride(Pg.WeakMagnet),n!==Pg.Normal&&i&&this._setMagnetModeOverride(Pg.Normal);break}case R_.KEY_UP:this._setMagnetModeOverride(void 0)}return null==(e=this._activeTool)||e.processEvent(t),t.isAccepted()}acquireToolScope(t){return this._toolScope={...t,dispose:()=>{ee(this._toolScope).useMagnet=!1,this._setMagnetModeOverride(void 0),this._toolScope=void 0}},this._setMagnetModeOverride(void 0),this._toolScope}isDrawing(){var t;return!!(null==(t=this._toolScope)?void 0:t.isDrawing)}_getComputedMagnetMode(){var t;if(!(null==(t=this._toolScope)?void 0:t.useMagnet))return Pg.Normal;const e=Dg(this.store);return e.magnetModeOverride??e.magnetMode}_applyMagnetMode(){let t;switch(this._getComputedMagnetMode()){case Pg.StrongMagnet:t=vi.MagnetOHLC;break;case Pg.WeakMagnet:t=vi.MagnetOHLCWeak;break;case Pg.Normal:t=vi.Normal;break;default:q()}for(const e of this._chartManagementService.getCharts())e.chartApi.applyOptions({crosshair:{mode:t}})}setMagnetMode(t){this._setValue("magnetMode",t)}setKeepDrawingMode(t){this._setValue("keepDrawingMode",t)}_setMagnetModeOverride(t){this.store.update((e=>(e.magnetModeOverride=t,e))),this._applyMagnetMode()}};SI=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?wI(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([xI(0,Ko),xI(1,Go),xI(2,Db)],SI);class TI{constructor(t){x(this,"_promise",new qw),x(this,"promise",this._promise.p),x(this,"_cancellationTokenSource",new $g),x(this,"cancellationToken",this._cancellationTokenSource.token),x(this,"cleanupLazyUpdate",null),x(this,"disposabled",!1),this.source=t}complete(t){this._promise.complete(t),this._cancellationTokenSource.dispose(!1)}dispose(){var t;this.disposabled=!0,this._cancellationTokenSource.dispose(!0),this._promise.complete(!1),null==(t=this.cleanupLazyUpdate)||t.call(this)}schedule(t){this.cleanupLazyUpdate=G_((()=>{t(),this.cleanupLazyUpdate=null}))}}class CI{constructor(){x(this,"_tasks",[])}async enqueue(t,e){const i=new TI(t);this._tasks.push(i);try{return await e(i)}finally{i.complete(!0),this.dequeue(i)}}dequeue(t){const e=this._tasks.indexOf(t);this._tasks.splice(e,1)}async waitForReady(t){for(;this._tasks.length;){const e=this._tasks[0];if(e===t)return;e.cancellationToken.isCancellationRequested||(e.disposabled||await e.promise)}}cancelPending(){if(this._tasks.length)for(let t=this._tasks.length-1;t>=-1;t--){const e=this._tasks[t];e.source===kb.manual&&this.dequeue(e)}}dispose(){for(var t;this._tasks.length;)null==(t=this._tasks.pop())||t.dispose()}}const MI=Wo("tradeService");var II=Object.getOwnPropertyDescriptor,EI=(t,e)=>(i,n)=>e(i,n,t);let AI=class extends he{constructor(t,e){super(),x(this,"preOrderPromise",null),this.toolService=t,this.commandService=e}async preOrder(t){if(this.preOrderPromise)return this.preOrderPromise.p;this.preOrderPromise||(this.preOrderPromise=new qw);const e=new dl,i=new dl;ie(await this.commandService.executeCommand(kw,{source:kb.program,preset:{paneIndex:0,props:{...Qu(t,["id","points"]),onDone:t=>{this.preOrderPromise=null,e.fire(t)},onChange:t=>{i.fire(t)}}}}));const n={onDone:e.event,onChange:i.event,updateProps:t=>{var e,i,n;(null==(e=this.toolService.activeTool)?void 0:e.type)===kw&&(null==(n=(i=this.toolService.activeTool).receiveProps)||n.call(i,{points:[{time:0,price:t.price}]}))},dispose:()=>{var t,n;null==(t=this.preOrderPromise)||t.error(new Error("Unresolved preOrder Promise")),this.preOrderPromise=null,(null==(n=this.toolService.activeTool)?void 0:n.type)===kw&&this.commandService.executeCommand(Ea),e.dispose(),i.dispose()}};return this.preOrderPromise.complete(n),n}};AI=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?II(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([EI(0,Ab),EI(1,Jo)],AI);class DI extends he{constructor(t,e){super(),x(this,"_serviceBrand"),x(this,"_onOrderUpdated",this._register(new dl)),x(this,"onOrderUpdated",this._onOrderUpdated.event),x(this,"_onPositionUpdated",this._register(new dl)),x(this,"onPositionUpdated",this._onPositionUpdated.event),x(this,"_onExecutionUpdated",this._register(new dl)),x(this,"onExecutionUpdated",this._onExecutionUpdated.event),x(this,"_broker"),x(this,"_orders",null),x(this,"_positions",null),this.brokerConfig=e,t&&(this._broker=t(this._createHost()),this._initInMemoryData())}get broker(){return ee(this._broker)}isTradeEnabled(){return!!this._broker}_initInMemoryData(){this.orders(),this.positions()}_createHost(){return{orderUpdate:t=>{const e=this.getOrdersSync().findIndex((e=>e.id===t.id));e>-1?this.getOrdersSync()[e]=t:this.getOrdersSync().push(t),this._onOrderUpdated.fire(t)},positionUpdate:(t,e=!1)=>{const i=this.getPositionsSync().findIndex((e=>e.id===t.id));i>-1?this.getPositionsSync()[i]=t:this.getPositionsSync().push(t),this._onPositionUpdated.fire({position:t,isHistoryUpdate:e})},executionUpdate:t=>{this._onExecutionUpdated.fire(t)}}}async orders(){const t=await this.broker.orders();return this._orders=t,t}getOrdersSync(){return this._orders??[]}getOrderById(t){return this.getOrdersSync().find((e=>e.id===t))??null}async positions(){const t=await this.broker.positions();return this._positions=t,t}getPositionsSync(){return this._positions??[]}getPositionById(t){return this.getPositionsSync().find((e=>e.id===t))??null}async executions(t){return this.broker.executions(t)}async showOrderDialog(t,e){var i,n;return ie(null==(n=null==(i=this.brokerConfig)?void 0:i.customUI)?void 0:n.showOrderDialog),await this.brokerConfig.customUI.showOrderDialog(t,e),!0}async showCancelOrderDialog(t){var e,i;ie(null==(i=null==(e=this.brokerConfig)?void 0:e.customUI)?void 0:i.showCancelOrderDialog);const n=ee((await this.orders()).find((e=>e.id===t)));return await this.brokerConfig.customUI.showCancelOrderDialog(n)}showClosePositionDialog(t){var e,i;return ie(null==(i=null==(e=this.brokerConfig)?void 0:e.customUI)?void 0:i.showClosePositionDialog),this.brokerConfig.customUI.showClosePositionDialog(t)}showModifyPositionDialog(t){var e,i;return ie(null==(i=null==(e=this.brokerConfig)?void 0:e.customUI)?void 0:i.showModifyPositionDialog),this.brokerConfig.customUI.showModifyPositionDialog(t)}showCancelBracketsDialog(t){return this.showCancelOrderDialog(t)}showPositionBracketsDialog(t,e,i){var n,s,r;return ie(null==(s=null==(n=this.brokerConfig)?void 0:n.customUI)?void 0:s.showPositionDialog),null==(r=this.brokerConfig.customUI)?void 0:r.showPositionDialog(t,e,i)}showReversePositionDialog(t){var e,i,n;return ie(null==(i=null==(e=this.brokerConfig)?void 0:e.customUI)?void 0:i.showPositionDialog),null==(n=this.brokerConfig.customUI)?void 0:n.showPositionDialog(t,Object.create(null))}}var kI=Object.getOwnPropertyDescriptor;let PI=0;class OI{constructor(t,e){x(this,"id",++PI),x(this,"type",Ta.Resource),x(this,"actual"),x(this,"resource"),this.actual=t,this.resource=e}}class RI{constructor(t){x(this,"resource"),x(this,"_past"),x(this,"_future"),x(this,"locked"),x(this,"versionId"),this.resource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}pushElement(t){this._future=[],this._past.push(t),this.versionId++}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}moveForward(t){this._future.pop(),this._past.push(t),this.versionId++}moveBackward(t){this._past.pop(),this._future.push(t),this.versionId++}}class LI{constructor(t){x(this,"editStacks"),x(this,"_versionIds"),this.editStacks=t,this._versionIds=[];for(let e=0,i=this.editStacks.length;e<i;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let t=0,e=this.editStacks.length;t<e;t++)if(this._versionIds[t]!==this.editStacks[t].versionId)return!1;return!0}}let NI=class{constructor(t){x(this,"_editStacks",new Map),this._notificationService=t}pushElement(t){t.type===Ta.Resource?this._pushElement(new OI(t,t.resource)):q()}_pushElement(t){const e=t.resource;let i;this._editStacks.has(e)?i=ee(this._editStacks.get(e)):(i=new RI(e),this._editStacks.set(e,i)),i.pushElement(t)}removeElements(t){this._editStacks.has(t)&&this._editStacks.delete(t)}canUndo(t){var e;return(null==(e=this._editStacks.get(t))?void 0:e.hasPastElements())??!1}undo(t){return this._undo(t)}_undo(t){if(!this._editStacks.has(t))return;const e=ee(this._editStacks.get(t)),i=e.getClosestPastElement();if(i)try{return this._resourceUndo(e,i)}catch(oR){console.error(oR)}}_resourceUndo(t,e){return t.locked&&G(),t.moveBackward(e),this._safeInvokeWithLocks(e,(()=>{e.actual.undo()}),new LI([t]))}canRedo(t){var e;return(null==(e=this._editStacks.get(t))?void 0:e.hasFutureElements())??!1}redo(t){return this._redo(t)}_redo(t){if(!this._editStacks.has(t))return;const e=ee(this._editStacks.get(t)),i=e.getClosestFutureElement();if(i)try{return this._resourceRedo(e,i)}catch(n){console.error(n)}}_resourceRedo(t,e){return t.moveForward(e),this._safeInvokeWithLocks(e,(()=>e.actual.redo()),new LI([t]))}_safeInvokeWithLocks(t,e,i){const n=this._acquireLocks(i);let s;try{s=e()}catch(r){return n(),this._onError(r,t)}if(s)return s.then((()=>{n()}),(e=>(n(),this._onError(e,t))));n()}_acquireLocks(t){for(const e of t.editStacks)if(e.locked)throw new Error("Cannot acquire edit stack lock");for(const e of t.editStacks)e.locked=!0;return()=>{for(const e of t.editStacks)e.locked=!1}}_onError(t,e){$(t),this.removeElements(e.resource),this._notificationService.error(t)}};NI=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?kI(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([((t,e)=>(i,n)=>e(i,n,t))(0,EM)],NI);const FI=Wo("workbenchContributionsRegistry");class BI extends he{constructor(){super(...arguments),x(this,"_serviceBrand"),x(this,"instantiationService"),x(this,"lifecycleService"),x(this,"logService"),x(this,"contributionsByPhase",new Map),x(this,"contributionsById",new Map),x(this,"instancesById",new Map),x(this,"instanceDisposables",this._register(new ce)),x(this,"pendingRestoredContributions",new xt)}register(t,e,i){const n={id:t,ctor:e};this.instantiationService&&this.logService&&this.lifecycleService&&this.lifecycleService.phase>=i?this.safeCreateContribution(this.instantiationService,this.logService,n):(function(t,e,i){let n=t.get(e);return void 0===n&&(n=i,t.set(e,n)),n}(this.contributionsByPhase,i,[]).push(n),this.contributionsById.has(t)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${t}'`):this.contributionsById.set(t,n))}start(t){const e=this.instantiationService=t.get(Ko),i=this.lifecycleService=t.get(TM),n=this.logService=t.get(rM);for(const s of[CM.Starting,CM.Ready,CM.Restored,CM.Eventually])this.instantiateByPhase(e,i,n,s)}dispose(){super.dispose(),this.contributionsByPhase.clear(),this.contributionsById.clear(),this.instancesById.forEach((t=>{oe(t)&&ae(t)})),this.pendingRestoredContributions=null}instantiateByPhase(t,e,i,n){e.phase>=n?this.doInstantiateByPhase(t,i,n):e.when(n).then((()=>this.doInstantiateByPhase(t,i,n)))}async doInstantiateByPhase(t,e,i){const n=this.contributionsByPhase.get(i);if(n)switch(this.contributionsByPhase.delete(i),i){case CM.Starting:case CM.Ready:for(const i of n)this.safeCreateContribution(t,e,i);break;case CM.Restored:case CM.Eventually:i===CM.Eventually&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(n,t,e,i)}}doInstantiateWhenIdle(t,e,i,n){let s=0;const r=n===CM.Eventually?3e3:500,o=a=>{for(;s<t.length;){const n=t[s++];if(this.safeCreateContribution(e,i,n),a.timeRemaining()<1){te(o,r);break}}s===t.length&&n===CM.Restored&&this.pendingRestoredContributions.complete()};te(o,r)}async safeCreateContribution(t,e,i){if(!this.instancesById.has(i.id))try{const e=await i.ctor(),n=t.createInstance(e);this.instancesById.set(i.id,n),this.contributionsById.delete(i.id),oe(n)&&this.instanceDisposables.add(n)}catch(n){e.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,n)}}}const zI='@keyframes mdc-ripple-fg-radius-in{0%{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{0%{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{0%{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity .28s cubic-bezier(.4,0,.2,1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-menu{min-width:112px;min-width:var(--mdc-menu-min-width, 112px)}.mdc-menu .mdc-deprecated-list-item__meta,.mdc-menu .mdc-deprecated-list-item__graphic{color:rgba(0,0,0,.87)}.mdc-menu .mdc-menu-item--submenu-open .mdc-deprecated-list-item__ripple:before{opacity:.04}.mdc-menu .mdc-menu-item--submenu-open .mdc-list-item__ripple:before{opacity:.04}.mdc-menu .mdc-deprecated-list{color:rgba(0,0,0,.87)}.mdc-menu .mdc-deprecated-list,.mdc-menu .mdc-list{position:relative;border-radius:inherit}.mdc-menu .mdc-deprecated-list .mdc-elevation-overlay,.mdc-menu .mdc-list .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-menu .mdc-deprecated-list:before,.mdc-menu .mdc-list:before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-menu .mdc-deprecated-list:before,.mdc-menu .mdc-list:before{border-color:CanvasText}}.mdc-menu .mdc-deprecated-list-divider{margin:8px 0}.mdc-menu .mdc-deprecated-list-item{user-select:none}.mdc-menu a.mdc-deprecated-list-item .mdc-deprecated-list-item__text,.mdc-menu a.mdc-deprecated-list-item .mdc-deprecated-list-item__graphic{pointer-events:none}.mdc-menu__selection-group{padding:0;fill:currentColor}.mdc-menu__selection-group .mdc-deprecated-list-item{padding-left:56px;padding-right:16px}[dir=rtl] .mdc-menu__selection-group .mdc-deprecated-list-item,.mdc-menu__selection-group .mdc-deprecated-list-item[dir=rtl]{padding-left:16px;padding-right:56px}.mdc-menu__selection-group .mdc-menu__selection-group-icon{left:16px;right:initial;visibility:hidden;position:absolute;top:50%;transform:translateY(-50%);transition-property:visibility;transition-delay:75ms}[dir=rtl] .mdc-menu__selection-group .mdc-menu__selection-group-icon,.mdc-menu__selection-group .mdc-menu__selection-group-icon[dir=rtl]{left:initial;right:16px}.mdc-menu-item--selected .mdc-menu__selection-group-icon{display:inline;visibility:visible}.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;visibility:hidden;overflow:auto;will-change:transform,opacity;height:0;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(.8);opacity:0;visibility:visible;height:fit-content}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1;visibility:visible;height:fit-content}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0;visibility:hidden;height:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mdc-menu-surface{max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px) );max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px) );z-index:8;transition:opacity .03s linear,transform .12s cubic-bezier(0,0,.2,1),height .25s cubic-bezier(0,0,.2,1);background-color:#fff;background-color:var(--mdc-theme-surface, #fff);color:#000;color:var(--mdc-theme-on-surface, #000);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px)}.mdc-menu-surface--animating-closed{transition:opacity 75ms linear}.smui-menu-surface--static{position:static;z-index:0;display:inline-block;transform:scale(1);opacity:1}.smui-menu-surface--measure{display:block!important;opacity:0!important}.mdc-menu__selection-group .mdc-list-item__graphic.mdc-menu__selection-group-icon{display:none}.mdc-menu-item--selected .mdc-list-item__graphic.mdc-menu__selection-group-icon{display:inline}.mdc-tooltip__surface,.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-tooltip__surface{color:#fff;color:var(--mdc-theme-text-primary-on-dark, white)}.mdc-tooltip__surface{background-color:rgba(0,0,0,.6)}.mdc-tooltip__title{color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-light, rgba(0, 0, 0, .87))}.mdc-tooltip__content{color:rgba(0,0,0,.6)}.mdc-tooltip__content-link{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-tooltip__interactive-content{overflow-x:unset;overflow-y:auto}.mdc-tooltip.mdc-tooltip--rich .mdc-tooltip__surface,.mdc-tooltip.mdc-tooltip--rich .mdc-tooltip__caret-surface-top,.mdc-tooltip.mdc-tooltip--rich .mdc-tooltip__caret-surface-bottom{background-color:#fff}.mdc-tooltip__surface{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-caption-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:.75rem;font-size:var(--mdc-typography-caption-font-size, .75rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight, 400);letter-spacing:.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing, .0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform, inherit)}.mdc-tooltip--rich .mdc-tooltip__surface{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.14),0 1px 5px rgba(0,0,0,.12);border-radius:4px;line-height:20px}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__surface .mdc-tooltip__title{display:block;margin-top:0;line-height:20px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:.875rem;font-size:var(--mdc-typography-subtitle2-font-size, .875rem);line-height:1.375rem;line-height:var(--mdc-typography-subtitle2-line-height, 1.375rem);font-weight:500;font-weight:var(--mdc-typography-subtitle2-font-weight, 500);letter-spacing:.0071428571em;letter-spacing:var(--mdc-typography-subtitle2-letter-spacing, .0071428571em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle2-text-transform, inherit)}.mdc-tooltip__surface .mdc-tooltip__title:before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-tooltip__surface .mdc-tooltip__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size, .875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, .0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit)}.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity .15s 0ms cubic-bezier(0,0,.2,1),transform .15s 0ms cubic-bezier(0,0,.2,1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(.4,0,1,1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface:before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface:before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative;text-align:left}[dir=rtl] .mdc-tooltip--rich .mdc-tooltip__surface,.mdc-tooltip--rich .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:184px;margin:8px}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:304px;align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.14),0 1px 5px rgba(0,0,0,.12);outline:1px solid transparent;z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-dialog .mdc-dialog__surface{background-color:#fff;background-color:var(--mdc-theme-surface, #fff)}.mdc-dialog .mdc-dialog__scrim,.mdc-dialog .mdc-dialog__surface-scrim{background-color:rgba(0,0,0,.32)}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87)}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6)}.mdc-dialog .mdc-dialog__close{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-dialog .mdc-dialog__close .mdc-icon-button__ripple:before,.mdc-dialog .mdc-dialog__close .mdc-icon-button__ripple:after{background-color:#000;background-color:var(--mdc-ripple-color, var(--mdc-theme-on-surface, #000))}.mdc-dialog .mdc-dialog__close:hover .mdc-icon-button__ripple:before,.mdc-dialog .mdc-dialog__close.mdc-ripple-surface--hover .mdc-icon-button__ripple:before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity, .04)}.mdc-dialog .mdc-dialog__close.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple:before,.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple:before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity, .12)}.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple:after{transition:opacity .15s linear}.mdc-dialog .mdc-dialog__close:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple:after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity, .12)}.mdc-dialog .mdc-dialog__close.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: var(--mdc-ripple-press-opacity, .12)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions,.mdc-dialog.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:rgba(0,0,0,.12)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:1px solid rgba(0,0,0,.12);margin-bottom:0}.mdc-dialog.mdc-dialog-scroll-divider-header.mdc-dialog--fullscreen .mdc-dialog__header{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.14),0 1px 5px rgba(0,0,0,.12)}.mdc-dialog .mdc-dialog__surface{border-radius:4px;border-radius:var(--mdc-shape-medium, 4px)}.mdc-dialog__surface{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mdc-dialog__title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-headline6-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size, 1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height, 2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight, 500);letter-spacing:.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing, .0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform, inherit)}.mdc-dialog__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:1rem;font-size:var(--mdc-typography-body1-font-size, 1rem);line-height:1.5rem;line-height:var(--mdc-typography-body1-line-height, 1.5rem);font-weight:400;font-weight:var(--mdc-typography-body1-font-weight, 400);letter-spacing:.03125em;letter-spacing:var(--mdc-typography-body1-letter-spacing, .03125em);text-decoration:inherit;text-decoration:var(--mdc-typography-body1-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body1-text-transform, inherit)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:7;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media (max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media (min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media (max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close-tooltip-wrapper{position:relative;right:-12px}}@media (max-width: 720px) and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media (max-width: 720px) and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media (max-width: 720px) and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media (max-width: 720px) and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media (max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close-tooltip-wrapper{position:relative;right:-12px}}@media (max-width: 720px) and (max-height: 400px),(max-width: 600px),(min-width: 720px) and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close-tooltip-wrapper{position:relative;order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:-8px}}@media (min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close-tooltip-wrapper{position:relative;right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface:before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface:before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface:before{content:none}}.mdc-dialog__title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title:before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid transparent;display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close-tooltip-wrapper{position:relative;right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close-tooltip-wrapper{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid transparent}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close-tooltip-wrapper{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close-tooltip-wrapper{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid transparent}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child,[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity .15s linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform .15s 0ms cubic-bezier(0,0,.2,1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container,.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--chaining .mdc-dialog__scrim{transition:none;opacity:1}.mdc-dialog--open .mdc-dialog__scrim,.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity .15s linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close-tooltip-wrapper{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mdc-dialog.smui-dialog--selection .mdc-dialog__content{padding:0}.mdc-dialog--stacked .mdc-dialog__actions.smui-dialog__actions--reversed{flex-direction:column-reverse}.mdc-dialog--stacked .mdc-dialog__actions.smui-dialog__actions--reversed .mdc-dialog__button:not(:last-child){margin-top:12px}.mdc-dialog--stacked .mdc-dialog__actions.smui-dialog__actions--reversed .mdc-dialog__button:last-child{margin-top:0}.mdc-snackbar{z-index:8;margin:8px;display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar__surface{background-color:#333}.mdc-snackbar__label{color:rgba(255,255,255,.87)}.mdc-snackbar__surface{min-width:344px}@media (max-width: 480px),(max-width: 344px){.mdc-snackbar__surface{min-width:100%}}.mdc-snackbar__surface{max-width:672px}.mdc-snackbar__surface{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px rgba(0,0,0,.14),0 1px 18px rgba(0,0,0,.12)}.mdc-snackbar__surface{border-radius:4px;border-radius:var(--mdc-shape-small, 4px)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar--leading{justify-content:flex-start}.mdc-snackbar--stacked .mdc-snackbar__label{padding-left:16px;padding-right:8px;padding-bottom:12px}[dir=rtl] .mdc-snackbar--stacked .mdc-snackbar__label,.mdc-snackbar--stacked .mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar--stacked .mdc-snackbar__surface{flex-direction:column;align-items:flex-start}.mdc-snackbar--stacked .mdc-snackbar__actions{align-self:flex-end;margin-bottom:8px}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(.8);opacity:0}.mdc-snackbar__surface:before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface:before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto;transition:opacity .15s 0ms cubic-bezier(0,0,.2,1),transform .15s 0ms cubic-bezier(0,0,.2,1)}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1);transition:opacity 75ms 0ms cubic-bezier(.4,0,1,1)}.mdc-snackbar__label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size, .875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height, 1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight, 400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing, .0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform, inherit);padding:14px 8px 14px 16px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label:before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action:not(:disabled){color:#bb86fc}.mdc-snackbar__action .mdc-button__ripple:before,.mdc-snackbar__action .mdc-button__ripple:after{background-color:#bb86fc;background-color:var(--mdc-ripple-color, #bb86fc)}.mdc-snackbar__action:hover .mdc-button__ripple:before,.mdc-snackbar__action.mdc-ripple-surface--hover .mdc-button__ripple:before{opacity:.08;opacity:var(--mdc-ripple-hover-opacity, .08)}.mdc-snackbar__action.mdc-ripple-upgraded--background-focused .mdc-button__ripple:before,.mdc-snackbar__action:not(.mdc-ripple-upgraded):focus .mdc-button__ripple:before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity, .24)}.mdc-snackbar__action:not(.mdc-ripple-upgraded) .mdc-button__ripple:after{transition:opacity .15s linear}.mdc-snackbar__action:not(.mdc-ripple-upgraded):active .mdc-button__ripple:after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity, .24)}.mdc-snackbar__action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: var(--mdc-ripple-press-opacity, .24)}.mdc-snackbar__dismiss{color:rgba(255,255,255,.87)}.mdc-snackbar__dismiss .mdc-icon-button__ripple:before,.mdc-snackbar__dismiss .mdc-icon-button__ripple:after{background-color:rgba(255,255,255,.87);background-color:var(--mdc-ripple-color, rgba(255, 255, 255, .87))}.mdc-snackbar__dismiss:hover .mdc-icon-button__ripple:before,.mdc-snackbar__dismiss.mdc-ripple-surface--hover .mdc-icon-button__ripple:before{opacity:.08;opacity:var(--mdc-ripple-hover-opacity, .08)}.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__ripple:before,.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__ripple:before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity, .24)}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded) .mdc-icon-button__ripple:after{transition:opacity .15s linear}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active .mdc-icon-button__ripple:after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity, .24)}.mdc-snackbar__dismiss.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: var(--mdc-ripple-press-opacity, .24)}.mdc-snackbar__dismiss.mdc-snackbar__dismiss{width:36px;height:36px;padding:6px;font-size:18px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss .mdc-icon-button__focus-ring{display:none}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block;max-height:36px;max-width:36px}@media screen and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{pointer-events:none;border:2px solid transparent;border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:100%;width:100%}}@media screen and (forced-colors: active) and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring:after,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring:after{content:"";border:2px solid transparent;border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:calc(100% + 4px);width:calc(100% + 4px)}}@media screen and (forced-colors: active) and (forced-colors: active){.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring:after,.mdc-snackbar__dismiss.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring:after{border-color:CanvasText}}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:36px;height:36px;margin:0}.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-snackbar__dismiss.mdc-snackbar__dismiss.mdc-icon-button--reduced-size:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{max-height:36px;max-width:36px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss .mdc-icon-button__touch{position:absolute;top:50%;height:36px;left:50%;width:36px;transform:translate(-50%,-50%)}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.smui-banner--force-show{display:flex!important}';function VI(t,e,i){Tg((()=>{const n=ye.unstable_scheduleCallback(t,e,i);return()=>{ye.unstable_cancelCallback(n)}}))}function $I(t,e){return VI(ye.unstable_NormalPriority,t,e)}function HI(t,e){return VI(ye.unstable_IdlePriority,t,e)}function KI(t,e,i){const n=new xt;return VI(t,(()=>{const t=e();vt(t)?t.then((t=>{n.complete(t)})):n.complete(t)}),i),n.p}function WI(t,e=ye.unstable_NormalPriority){return KI(e,(()=>t))}function jI(t,e){Yd(e,!0);const i=bg(e,["$$slots","$$events","$$legacy","children"]),n=new qw,s=[];Cg((()=>{s.forEach((t=>t()))})),"waitFor"in i?Ff((()=>{e.waitFor&&!n.isSettled&&(xl(e.waitFor)?al(e.waitFor)((()=>{if(e.idle){const t=Y_((()=>{n.complete(e.children)}));s.push(t)}else n.complete(e.children)})):e.waitFor instanceof qw?e.waitFor.p.then((()=>{n.complete(e.children)})):vt(e.waitFor)?e.waitFor.then((()=>{n.complete(e.children)})):n.complete(e.children))})):e.macro?function(t){const e=new xt;return Tg((()=>G_((()=>{e.complete(t())})))),e.p}((()=>e.children)).then((t=>n.complete(t))):e.idle?function(t){const e=new xt;return Tg((()=>Y_((()=>{e.complete(t())})))),e.p}((()=>e.children)).then((t=>n.complete(t))):e.low?KI(ye.unstable_LowPriority,(()=>e.children)).then((t=>n.complete(t))):KI(ye.unstable_NormalPriority,(()=>e.children)).then((t=>n.complete(t)));var r=xm();Em(cp(r),(()=>n.p),null,((t,e)=>{var i=xm();Fm(cp(i),(()=>If(e)??fd)),Sm(t,i)})),Sm(t,r),Xd()}Kd=!0;var UI=(t=>(t[t.a=97]="a",t))(UI||{});function GI(t){return t>=Ob.a&&t<=Ob.z}function qI(t,e,i=0,n=t.length,s=0,r=e.length){for(;i<n&&s<r;i++,s++){const n=t.charCodeAt(i),r=e.charCodeAt(s);if(n<r)return-1;if(n>r)return 1}const o=n-i,a=r-s;return o<a?-1:o>a?1:0}function YI(t,e){const i=e.length;return!(e.length>t.length)&&0===function(t,e,i=0,n=t.length,s=0,r=e.length){for(;i<n&&s<r;i++,s++){let o=t.charCodeAt(i),a=e.charCodeAt(s);if(o===a)continue;if(o>=128||a>=128)return qI(t.toLowerCase(),e.toLowerCase(),i,n,s,r);GI(o)&&(o-=32),GI(a)&&(a-=32);const l=o-a;if(0!==l)return l}const o=n-i,a=r-s;return o<a?-1:o>a?1:0}(t,e,0,i)}function XI(t,e){Yd(e,!1);const[i,n]=yg(),s=$w(Uo),r=Ag(s.store,(t=>t.components)),o=(t,e)=>{s.onComponentMounted(t,e)};dg();var a=xm();km(cp(a),1,(()=>gg(r,"$components",i)),(t=>t.id),((t,e)=>{{let i=Sp((()=>o.bind(null,If(e).id)));If(e).Component(t,xg((()=>If(e).props),{get __registerComponent(){return If(i)}}))}})),Sm(t,a),Xd(),n()}var ZI=ym('<div class="errorCard svelte-3gl5ku"><div class="errorMsg svelte-3gl5ku"> </div></div>');const QI={hash:"svelte-3gl5ku",code:".errorCard.svelte-3gl5ku {position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--cl-background);color:var(--cl-foreground);}.errorMsg.svelte-3gl5ku {max-width:350px;font-size:18px;line-height:28px;text-align:center;}"};function JI(t,e="body"){let i;async function n(n){if("string"==typeof(e=n)){if(i=document.querySelector(e),null===i&&(await Mf(),i=document.querySelector(e)),null===i)throw new Error(`No element found matching css selector: "${e}"`)}else{if(!(e instanceof HTMLElement||e instanceof ShadowRoot))throw new TypeError(`Unknown portal target type: ${null===e?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);i=e}i.appendChild(t),t.hidden=!1}return n(e),{update:n,destroy:function(){t.parentNode&&t.parentNode.removeChild(t)}}}var tE=ym("<div hidden><!></div>");function eE(t,e){Yd(e,!1);let i=Sg(e,"target",8,"body"),n=Sg(e,"style",8,"");dg();var s=tE();!function(t,e,i,n){var s,r=null==(s=e.$$slots)?void 0:s[i],o=!1;!0===r&&(r=e.children,o=!0),void 0===r||r(t,o?()=>n:n)}(lp(s),e,"default",{}),$m(s,((t,e)=>null==JI?void 0:JI(t,e)),i),$f((()=>Zm(s,n()))),Sm(t,s),Xd()}function iE(t){const e=t.getRootNode();return e instanceof ShadowRoot?e:document.body}var nE=function(){function t(t){void 0===t&&(t={}),this.adapter=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),sE=(t=>(t.RICH="mdc-tooltip--rich",t.SHOWN="mdc-tooltip--shown",t.SHOWING="mdc-tooltip--showing",t.SHOWING_TRANSITION="mdc-tooltip--showing-transition",t.HIDE="mdc-tooltip--hide",t.HIDE_TRANSITION="mdc-tooltip--hide-transition",t.MULTILINE_TOOLTIP="mdc-tooltip--multiline",t.SURFACE="mdc-tooltip__surface",t.SURFACE_ANIMATION="mdc-tooltip__surface-animation",t.TOOLTIP_CARET_TOP="mdc-tooltip__caret-surface-top",t.TOOLTIP_CARET_BOTTOM="mdc-tooltip__caret-surface-bottom",t))(sE||{});const rE=4,oE=8,aE=8,lE=100,cE=100,hE=40,uE=24,dE=200,pE=24,fE=.8,mE=320,gE="aria-expanded",vE="aria-haspopup",yE="data-mdc-tooltip-persistent",_E="data-mdc-tooltip-has-caret";var bE=(t=>(t[t.DETECTED=0]="DETECTED",t[t.START=1]="START",t[t.CENTER=2]="CENTER",t[t.END=3]="END",t[t.SIDE_START=4]="SIDE_START",t[t.SIDE_END=5]="SIDE_END",t))(bE||{}),wE=(t=>(t[t.DETECTED=0]="DETECTED",t[t.ABOVE=1]="ABOVE",t[t.BELOW=2]="BELOW",t[t.SIDE=3]="SIDE",t))(wE||{}),xE=(t=>(t[t.BOUNDED=0]="BOUNDED",t[t.UNBOUNDED=1]="UNBOUNDED",t))(xE||{});const SE="left",TE="right",CE="center",ME="top",IE="bottom";var EE=(t=>(t[t.DETECTED=0]="DETECTED",t[t.ABOVE_START=1]="ABOVE_START",t[t.ABOVE_CENTER=2]="ABOVE_CENTER",t[t.ABOVE_END=3]="ABOVE_END",t[t.TOP_SIDE_START=4]="TOP_SIDE_START",t[t.CENTER_SIDE_START=5]="CENTER_SIDE_START",t[t.BOTTOM_SIDE_START=6]="BOTTOM_SIDE_START",t[t.TOP_SIDE_END=7]="TOP_SIDE_END",t[t.CENTER_SIDE_END=8]="CENTER_SIDE_END",t[t.BOTTOM_SIDE_END=9]="BOTTOM_SIDE_END",t[t.BELOW_START=10]="BELOW_START",t[t.BELOW_CENTER=11]="BELOW_CENTER",t[t.BELOW_END=12]="BELOW_END",t))(EE||{}),AE=(t=>(t[t.ABOVE=1]="ABOVE",t[t.BELOW=2]="BELOW",t[t.SIDE_TOP=3]="SIDE_TOP",t[t.SIDE_CENTER=4]="SIDE_CENTER",t[t.SIDE_BOTTOM=5]="SIDE_BOTTOM",t))(AE||{}),DE=(t=>(t[t.START=1]="START",t[t.CENTER=2]="CENTER",t[t.END=3]="END",t[t.SIDE_START=4]="SIDE_START",t[t.SIDE_END=5]="SIDE_END",t))(DE||{}),kE=function(){function t(){this.rafIDs=new Map}return t.prototype.request=function(t,e){var i=this;this.cancel(t);var n=requestAnimationFrame((function(n){i.rafIDs.delete(t),e(n)}));this.rafIDs.set(t,n)},t.prototype.cancel=function(t){var e=this.rafIDs.get(t);e&&(cancelAnimationFrame(e),this.rafIDs.delete(t))},t.prototype.cancelAll=function(){var t=this;this.rafIDs.forEach((function(e,i){t.cancel(i)}))},t.prototype.getQueue=function(){var t=[];return this.rafIDs.forEach((function(e,i){t.push(i)})),t},t}(),PE={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function OE(t,e){if(function(t){return Boolean(t.document)&&"function"==typeof t.document.createElement}(t)&&e in PE){var i=t.document.createElement("div"),n=PE[e],s=n.standard,r=n.prefixed;return s in i.style?s:r}return e}const RE="Unknown",LE="Backspace",NE="Enter",FE="Spacebar",BE="PageUp",zE="PageDown",VE="End",$E="Home",HE="ArrowLeft",KE="ArrowUp",WE="ArrowRight",jE="ArrowDown",UE="Delete",GE="Escape",qE="Tab",YE=new Set;YE.add(LE),YE.add(NE),YE.add(FE),YE.add(BE),YE.add(zE),YE.add(VE),YE.add($E),YE.add(HE),YE.add(KE),YE.add(WE),YE.add(jE),YE.add(UE),YE.add(GE),YE.add(qE);const XE=8,ZE=13,QE=32,JE=33,tA=34,eA=35,iA=36,nA=37,sA=38,rA=39,oA=40,aA=46,lA=27,cA=9,hA=new Map;hA.set(XE,LE),hA.set(ZE,NE),hA.set(QE,FE),hA.set(JE,BE),hA.set(tA,zE),hA.set(eA,VE),hA.set(iA,$E),hA.set(nA,HE),hA.set(sA,KE),hA.set(rA,WE),hA.set(oA,jE),hA.set(aA,UE),hA.set(lA,GE),hA.set(cA,qE);const uA=new Set;uA.add(BE),uA.add(zE),uA.add(VE),uA.add($E),uA.add(HE),uA.add(KE),uA.add(WE),uA.add(jE);const{RICH:dA,SHOWN:pA,SHOWING:fA,SHOWING_TRANSITION:mA,HIDE:gA,HIDE_TRANSITION:vA,MULTILINE_TOOLTIP:yA}=sE,_A="undefined"!=typeof window;class bA extends nE{constructor(t){super({...bA.defaultAdapter,...t}),this.tooltipShown=!1,this.anchorGap=rE,this.xTooltipPos=bE.DETECTED,this.yTooltipPos=wE.DETECTED,this.tooltipPositionWithCaret=EE.DETECTED,this.minViewportTooltipThreshold=aE,this.hideDelayMs=lE,this.showDelayMs=cE,this.anchorRect=null,this.parentRect=null,this.frameId=null,this.hideTimeout=null,this.showTimeout=null,this.addAncestorScrollEventListeners=new Array,this.removeAncestorScrollEventListeners=new Array,this.animFrame=new kE,this.anchorBlurHandler=t=>{this.handleAnchorBlur(t)},this.documentClickHandler=t=>{this.handleDocumentClick(t)},this.documentKeydownHandler=t=>{this.handleKeydown(t)},this.tooltipMouseEnterHandler=()=>{this.handleTooltipMouseEnter()},this.tooltipMouseLeaveHandler=()=>{this.handleTooltipMouseLeave()},this.richTooltipFocusOutHandler=t=>{this.handleRichTooltipFocusOut(t)},this.windowScrollHandler=()=>{this.handleWindowScrollEvent()},this.windowResizeHandler=()=>{this.handleWindowChangeEvent()}}static get defaultAdapter(){return{getAttribute:()=>null,setAttribute:()=>{},removeAttribute:()=>{},addClass:()=>{},hasClass:()=>!1,removeClass:()=>{},getComputedStyleProperty:()=>"",setStyleProperty:()=>{},setSurfaceAnimationStyleProperty:()=>{},getViewportWidth:()=>0,getViewportHeight:()=>0,getTooltipSize:()=>({width:0,height:0}),getAnchorBoundingRect:()=>({top:0,right:0,bottom:0,left:0,width:0,height:0}),getParentBoundingRect:()=>({top:0,right:0,bottom:0,left:0,width:0,height:0}),getAnchorAttribute:()=>null,setAnchorAttribute:()=>null,isRTL:()=>!1,anchorContainsElement:()=>!1,tooltipContainsElement:()=>!1,focusAnchorElement:()=>{},registerEventHandler:()=>{},deregisterEventHandler:()=>{},registerAnchorEventHandler:()=>{},deregisterAnchorEventHandler:()=>{},registerDocumentEventHandler:()=>{},deregisterDocumentEventHandler:()=>{},registerWindowEventHandler:()=>{},deregisterWindowEventHandler:()=>{},notifyHidden:()=>{},notifyShown:()=>{},getTooltipCaretBoundingRect:()=>({top:0,right:0,bottom:0,left:0,width:0,height:0}),setTooltipCaretStyle:()=>{},clearTooltipCaretStyles:()=>{},getActiveElement:()=>null,isInstanceOfElement:()=>!1}}init(){this.richTooltip=this.adapter.hasClass(dA),this.persistentTooltip="true"===this.adapter.getAttribute(yE),this.interactiveTooltip=!!this.adapter.getAnchorAttribute(gE)&&"dialog"===this.adapter.getAnchorAttribute(vE),this.hasCaret=this.richTooltip&&"true"===this.adapter.getAttribute(_E)}isShown(){return this.tooltipShown}isRich(){return this.richTooltip}isPersistent(){return this.persistentTooltip}handleAnchorMouseEnter(){this.tooltipShown?this.show():(this.clearHideTimeout(),this.showTimeout=setTimeout((()=>{this.show()}),this.showDelayMs))}handleAnchorTouchstart(){this.showTimeout=setTimeout((()=>{this.show()}),this.showDelayMs),this.adapter.registerWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)}preventContextMenuOnLongTouch(t){t.preventDefault()}tooltipContainsRelatedTargetElement(t){return this.adapter.isInstanceOfElement(t)&&this.adapter.tooltipContainsElement(t)}anchorOrTooltipContainsTargetElement(t){return this.adapter.isInstanceOfElement(t)&&(this.adapter.tooltipContainsElement(t)||this.adapter.anchorContainsElement(t))}handleAnchorTouchend(){this.clearShowTimeout(),this.isShown()||this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)}handleAnchorFocus(t){this.tooltipContainsRelatedTargetElement(t.relatedTarget)||(this.showTimeout=setTimeout((()=>{this.show()}),this.showDelayMs))}handleAnchorMouseLeave(){this.clearShowTimeout(),this.hideTimeout=setTimeout((()=>{this.hide()}),this.hideDelayMs)}handleAnchorClick(){this.tooltipShown?this.hide():this.show()}handleDocumentClick(t){this.richTooltip&&this.persistentTooltip&&this.anchorOrTooltipContainsTargetElement(t.target)||this.hide()}handleKeydown(t){if(function(t){const{key:e}=t;if(YE.has(e))return e;return hA.get(t.keyCode)||RE}(t)===GE){const e=this.adapter.getActiveElement();let i=!1;return this.adapter.isInstanceOfElement(e)&&(i=this.adapter.tooltipContainsElement(e)),i&&this.adapter.focusAnchorElement(),this.hide(),t.stopPropagation(),!1}return!0}handleAnchorBlur(t){this.richTooltip&&(null===t.relatedTarget||this.tooltipContainsRelatedTargetElement(t.relatedTarget))||this.hide()}handleTooltipMouseEnter(){this.show()}handleTooltipMouseLeave(){this.clearShowTimeout(),this.hideTimeout=setTimeout((()=>{this.hide()}),this.hideDelayMs)}handleRichTooltipFocusOut(t){this.anchorOrTooltipContainsTargetElement(t.relatedTarget)||null===t.relatedTarget&&this.interactiveTooltip||this.hide()}handleWindowScrollEvent(){this.persistentTooltip||this.hide()}handleWindowChangeEvent(){this.animFrame.request("poll_anchor",(()=>{this.repositionTooltipOnAnchorMove()}))}show(){if(this.clearHideTimeout(),this.clearShowTimeout(),!this.tooltipShown){this.tooltipShown=!0,this.adapter.removeAttribute("aria-hidden"),this.richTooltip&&(this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","true"),this.adapter.registerEventHandler("focusout",this.richTooltipFocusOutHandler)),this.persistentTooltip||(this.adapter.registerEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.registerEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.removeClass(gA),this.adapter.addClass(fA),this.isTooltipMultiline()&&!this.richTooltip&&this.adapter.addClass(yA),this.anchorRect=this.adapter.getAnchorBoundingRect(),this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip(),this.adapter.registerAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.registerDocumentEventHandler("click",this.documentClickHandler),this.adapter.registerDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.registerWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler);for(const t of this.addAncestorScrollEventListeners)t();this.frameId=requestAnimationFrame((()=>{this.clearAllAnimationClasses(),this.adapter.addClass(pA),this.adapter.addClass(mA)}))}}hide(){if(this.clearHideTimeout(),this.clearShowTimeout(),this.tooltipShown){this.frameId&&cancelAnimationFrame(this.frameId),this.tooltipShown=!1,this.adapter.setAttribute("aria-hidden","true"),this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.richTooltip&&this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","false"),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.clearAllAnimationClasses(),this.adapter.addClass(gA),this.adapter.addClass(vA),this.adapter.removeClass(pA),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch);for(const t of this.removeAncestorScrollEventListeners)t()}}handleTransitionEnd(){const t=this.adapter.hasClass(gA);this.adapter.removeClass(fA),this.adapter.removeClass(mA),this.adapter.removeClass(gA),this.adapter.removeClass(vA),t&&null===this.showTimeout?this.adapter.notifyHidden():t||this.adapter.notifyShown()}clearAllAnimationClasses(){this.adapter.removeClass(mA),this.adapter.removeClass(vA)}setTooltipPosition(t){const{xPos:e,yPos:i,withCaretPos:n}=t;this.hasCaret&&n?this.tooltipPositionWithCaret=n:(e&&(this.xTooltipPos=e),i&&(this.yTooltipPos=i))}setAnchorBoundaryType(t){t===xE.UNBOUNDED?this.anchorGap=oE:this.anchorGap=rE}setShowDelay(t){this.showDelayMs=t}setHideDelay(t){this.hideDelayMs=t}isTooltipMultiline(){const t=this.adapter.getTooltipSize();return t.height>uE&&t.width>=dE}positionPlainTooltip(){const{top:t,yTransformOrigin:e,left:i,xTransformOrigin:n}=this.calculateTooltipStyles(this.anchorRect),s=_A?OE(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(`${s}-origin`,`${n} ${e}`),this.adapter.setStyleProperty("top",`${t}px`),this.adapter.setStyleProperty("left",`${i}px`)}positionRichTooltip(){var t,e;this.adapter.setStyleProperty("width",""),this.adapter.setStyleProperty("left",`-${mE}px`);const i=Number(this.adapter.getComputedStyleProperty("width").slice(0,-2)),n=isFinite(i)?i:mE,s=Math.max(this.adapter.getViewportWidth()-2*aE,hE),r=Math.min(s,n);this.adapter.setStyleProperty("width",`${r}px`);const{top:o,yTransformOrigin:a,left:l,xTransformOrigin:c}=this.hasCaret?this.calculateTooltipWithCaretStyles(this.anchorRect):this.calculateTooltipStyles(this.anchorRect),h=_A?OE(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(`${h}-origin`,`${c} ${a}`);const u=l-((null==(t=this.parentRect)?void 0:t.left)??0),d=o-((null==(e=this.parentRect)?void 0:e.top)??0);this.adapter.setStyleProperty("top",`${d}px`),this.adapter.setStyleProperty("left",`${u}px`)}calculateTooltipStyles(t){if(!t)return{top:0,left:0};const e=this.adapter.getTooltipSize(),i=this.calculateYTooltipDistance(t,e.height),n=this.calculateXTooltipDistance(t,e.width);return{top:i.distance,yTransformOrigin:i.yTransformOrigin,left:n.distance,xTransformOrigin:n.xTransformOrigin}}calculateXTooltipDistance(t,e){const i=!this.adapter.isRTL();let n,s,r,o,a,l,c;if(this.richTooltip)n=i?t.left-e:t.right,s=i?t.right:t.left-e,l=i?TE:SE,c=i?SE:TE;else{n=i?t.left:t.right-e,s=i?t.right-e:t.left,r=t.left+(t.width-e)/2;const h=t.left-(e+this.anchorGap),u=t.right+this.anchorGap;o=i?h:u,a=i?u:h,l=i?SE:TE,c=i?TE:SE}const h=[n,r,s];this.xTooltipPos===bE.SIDE_START?h.push(o):this.xTooltipPos===bE.SIDE_END&&h.push(a);const u=this.richTooltip?this.determineValidPositionOptions(n,s):this.determineValidPositionOptions(...h);if(this.xTooltipPos===bE.START&&u.has(n))return{distance:n,xTransformOrigin:l};if(this.xTooltipPos===bE.END&&u.has(s))return{distance:s,xTransformOrigin:c};if(this.xTooltipPos===bE.CENTER&&u.has(r))return{distance:r,xTransformOrigin:CE};if(this.xTooltipPos===bE.SIDE_START&&u.has(o))return{distance:o,xTransformOrigin:c};if(this.xTooltipPos===bE.SIDE_END&&u.has(a))return{distance:a,xTransformOrigin:l};const d=(this.richTooltip?[{distance:s,xTransformOrigin:c},{distance:n,xTransformOrigin:l}]:[{distance:r,xTransformOrigin:CE},{distance:n,xTransformOrigin:l},{distance:s,xTransformOrigin:c}]).find((({distance:t})=>u.has(t)));if(d)return d;if(t.left<0)return{distance:this.minViewportTooltipThreshold,xTransformOrigin:SE};return{distance:this.adapter.getViewportWidth()-(e+this.minViewportTooltipThreshold),xTransformOrigin:TE}}determineValidPositionOptions(...t){const e=new Set,i=new Set;for(const n of t)this.positionHonorsViewportThreshold(n)?e.add(n):this.positionDoesntCollideWithViewport(n)&&i.add(n);return e.size?e:i}positionHonorsViewportThreshold(t){const e=this.adapter.getViewportWidth();return t+this.adapter.getTooltipSize().width<=e-this.minViewportTooltipThreshold&&t>=this.minViewportTooltipThreshold}positionDoesntCollideWithViewport(t){const e=this.adapter.getViewportWidth();return t+this.adapter.getTooltipSize().width<=e&&t>=0}calculateYTooltipDistance(t,e){const i=t.bottom+this.anchorGap,n=t.top-(this.anchorGap+e),s=t.top+t.height/2-e/2,r=[n,i];this.yTooltipPos===wE.SIDE&&r.push(s);const o=this.determineValidYPositionOptions(...r);return this.yTooltipPos===wE.ABOVE&&o.has(n)?{distance:n,yTransformOrigin:IE}:this.yTooltipPos===wE.BELOW&&o.has(i)?{distance:i,yTransformOrigin:ME}:this.yTooltipPos===wE.SIDE&&o.has(s)?{distance:s,yTransformOrigin:CE}:o.has(i)?{distance:i,yTransformOrigin:ME}:o.has(n)?{distance:n,yTransformOrigin:IE}:{distance:i,yTransformOrigin:ME}}determineValidYPositionOptions(...t){const e=new Set,i=new Set;for(const n of t)this.yPositionHonorsViewportThreshold(n)?e.add(n):this.yPositionDoesntCollideWithViewport(n)&&i.add(n);return e.size?e:i}yPositionHonorsViewportThreshold(t){const e=this.adapter.getViewportHeight();return t+this.adapter.getTooltipSize().height+this.minViewportTooltipThreshold<=e&&t>=this.minViewportTooltipThreshold}yPositionDoesntCollideWithViewport(t){const e=this.adapter.getViewportHeight();return t+this.adapter.getTooltipSize().height<=e&&t>=0}calculateTooltipWithCaretStyles(t){this.adapter.clearTooltipCaretStyles();const e=this.adapter.getTooltipCaretBoundingRect();if(!t||!e)return{position:EE.DETECTED,top:0,left:0};const i=e.width/fE,n=e.height/fE/2,s=this.adapter.getTooltipSize(),r=this.calculateYWithCaretDistanceOptions(t,s.height,{caretWidth:i,caretHeight:n}),o=this.calculateXWithCaretDistanceOptions(t,s.width,{caretWidth:i,caretHeight:n});let a=this.validateTooltipWithCaretDistances(r,o);a.size<1&&(a=this.generateBackupPositionOption(t,s,{caretWidth:i,caretHeight:n}));const{position:l,xDistance:c,yDistance:h}=this.determineTooltipWithCaretDistance(a),{yTransformOrigin:u,xTransformOrigin:d}=this.setCaretPositionStyles(l,{caretWidth:i,caretHeight:n});return{yTransformOrigin:u,xTransformOrigin:d,top:h,left:c}}calculateXWithCaretDistanceOptions(t,e,i){const{caretWidth:n,caretHeight:s}=i,r=!this.adapter.isRTL(),o=t.left+t.width/2,a=t.left-(e+this.anchorGap+s),l=t.right+this.anchorGap+s,c=r?a:l,h=r?l:a,u=o-(pE+n/2),d=o-(e-pE-n/2),p=r?u:d,f=r?d:u,m=o-e/2;return new Map([[DE.START,p],[DE.CENTER,m],[DE.END,f],[DE.SIDE_END,h],[DE.SIDE_START,c]])}calculateYWithCaretDistanceOptions(t,e,i){const{caretWidth:n,caretHeight:s}=i,r=t.top+t.height/2,o=t.bottom+this.anchorGap+s,a=t.top-(this.anchorGap+e+s),l=r-(pE+n/2),c=r-e/2,h=r-(e-pE-n/2);return new Map([[AE.ABOVE,a],[AE.BELOW,o],[AE.SIDE_TOP,l],[AE.SIDE_CENTER,c],[AE.SIDE_BOTTOM,h]])}repositionTooltipOnAnchorMove(){const t=this.adapter.getAnchorBoundingRect();if(!t||!this.anchorRect)return;const e=this.adapter.getViewportHeight();t.top+t.height<0||t.bottom-t.height>=e||t.top===this.anchorRect.top&&t.left===this.anchorRect.left&&t.height===this.anchorRect.height&&t.width===this.anchorRect.width||(this.anchorRect=t,this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip())}validateTooltipWithCaretDistances(t,e){const i=new Map,n=new Map,s=new Map([[AE.ABOVE,[DE.START,DE.CENTER,DE.END]],[AE.BELOW,[DE.START,DE.CENTER,DE.END]],[AE.SIDE_TOP,[DE.SIDE_START,DE.SIDE_END]],[AE.SIDE_CENTER,[DE.SIDE_START,DE.SIDE_END]],[AE.SIDE_BOTTOM,[DE.SIDE_START,DE.SIDE_END]]]);for(const r of s.keys()){const o=t.get(r);if(this.yPositionHonorsViewportThreshold(o))for(const t of s.get(r)){const n=e.get(t);if(this.positionHonorsViewportThreshold(n)){const e=this.caretPositionOptionsMapping(t,r);i.set(e,{xDistance:n,yDistance:o})}}if(this.yPositionDoesntCollideWithViewport(o))for(const t of s.get(r)){const i=e.get(t);if(this.positionDoesntCollideWithViewport(i)){const e=this.caretPositionOptionsMapping(t,r);n.set(e,{xDistance:i,yDistance:o})}}}return i.size?i:n}generateBackupPositionOption(t,e,i){const n=!this.adapter.isRTL();let s,r,o,a;if(t.left<0)s=this.minViewportTooltipThreshold+i.caretHeight,r=n?DE.END:DE.START;else{s=this.adapter.getViewportWidth()-(e.width+this.minViewportTooltipThreshold+i.caretHeight),r=n?DE.START:DE.END}if(t.top<0)o=this.minViewportTooltipThreshold+i.caretHeight,a=AE.BELOW;else{o=this.adapter.getViewportHeight()-(e.height+this.minViewportTooltipThreshold+i.caretHeight),a=AE.ABOVE}const l=this.caretPositionOptionsMapping(r,a);return new Map([[l,{xDistance:s,yDistance:o}]])}determineTooltipWithCaretDistance(t){if(t.has(this.tooltipPositionWithCaret)){const e=t.get(this.tooltipPositionWithCaret);return{position:this.tooltipPositionWithCaret,xDistance:e.xDistance,yDistance:e.yDistance}}const e=[EE.ABOVE_START,EE.ABOVE_CENTER,EE.ABOVE_END,EE.TOP_SIDE_START,EE.CENTER_SIDE_START,EE.BOTTOM_SIDE_START,EE.TOP_SIDE_END,EE.CENTER_SIDE_END,EE.BOTTOM_SIDE_END,EE.BELOW_START,EE.BELOW_CENTER,EE.BELOW_END].find((e=>t.has(e))),i=t.get(e);return{position:e,xDistance:i.xDistance,yDistance:i.yDistance}}caretPositionOptionsMapping(t,e){switch(e){case AE.ABOVE:if(t===DE.START)return EE.ABOVE_START;if(t===DE.CENTER)return EE.ABOVE_CENTER;if(t===DE.END)return EE.ABOVE_END;break;case AE.BELOW:if(t===DE.START)return EE.BELOW_START;if(t===DE.CENTER)return EE.BELOW_CENTER;if(t===DE.END)return EE.BELOW_END;break;case AE.SIDE_TOP:if(t===DE.SIDE_START)return EE.TOP_SIDE_START;if(t===DE.SIDE_END)return EE.TOP_SIDE_END;break;case AE.SIDE_CENTER:if(t===DE.SIDE_START)return EE.CENTER_SIDE_START;if(t===DE.SIDE_END)return EE.CENTER_SIDE_END;break;case AE.SIDE_BOTTOM:if(t===DE.SIDE_START)return EE.BOTTOM_SIDE_START;if(t===DE.SIDE_END)return EE.BOTTOM_SIDE_END}throw new Error(`MDCTooltipFoundation: Invalid caret position of ${t}, ${e}`)}setCaretPositionStyles(t,e){const i=this.calculateCaretPositionOnTooltip(t,e);if(!i)return{yTransformOrigin:0,xTransformOrigin:0};this.adapter.clearTooltipCaretStyles(),this.adapter.setTooltipCaretStyle(i.yAlignment,i.yAxisPx),this.adapter.setTooltipCaretStyle(i.xAlignment,i.xAxisPx);const n=i.skew*(Math.PI/180),s=Math.cos(n);this.adapter.setTooltipCaretStyle("transform",`rotate(${i.rotation}deg) skewY(${i.skew}deg) scaleX(${s})`),this.adapter.setTooltipCaretStyle("transform-origin",`${i.xAlignment} ${i.yAlignment}`);for(const r of i.caretCorners)this.adapter.setTooltipCaretStyle(r,"0");return{yTransformOrigin:i.yTransformOrigin,xTransformOrigin:i.xTransformOrigin}}calculateCaretPositionOnTooltip(t,e){const i=!this.adapter.isRTL(),n=this.adapter.getComputedStyleProperty("width"),s=this.adapter.getComputedStyleProperty("height");if(!n||!s||!e)return;const r=`calc((${n} - ${e.caretWidth}px) / 2)`,o=`calc((${s} - ${e.caretWidth}px) / 2)`,a="0",l=`${pE}px`,c=`calc(${n} - ${l})`,h=`calc(${s} - ${l})`,u=35,d=Math.abs(55),p=["border-bottom-right-radius","border-top-left-radius"],f=["border-bottom-left-radius","border-top-right-radius"],m=20;switch(t){case EE.BELOW_CENTER:return{yAlignment:ME,xAlignment:SE,yAxisPx:a,xAxisPx:r,rotation:-35,skew:-20,xTransformOrigin:r,yTransformOrigin:a,caretCorners:p};case EE.BELOW_END:return{yAlignment:ME,xAlignment:i?TE:SE,yAxisPx:a,xAxisPx:l,rotation:i?u:-35,skew:i?m:-20,xTransformOrigin:i?c:l,yTransformOrigin:a,caretCorners:i?f:p};case EE.BELOW_START:return{yAlignment:ME,xAlignment:i?SE:TE,yAxisPx:a,xAxisPx:l,rotation:i?-35:u,skew:i?-20:m,xTransformOrigin:i?l:c,yTransformOrigin:a,caretCorners:i?p:f};case EE.TOP_SIDE_END:return{yAlignment:ME,xAlignment:i?SE:TE,yAxisPx:l,xAxisPx:a,rotation:i?d:-1*d,skew:i?-20:m,xTransformOrigin:i?a:n,yTransformOrigin:l,caretCorners:i?p:f};case EE.CENTER_SIDE_END:return{yAlignment:ME,xAlignment:i?SE:TE,yAxisPx:o,xAxisPx:a,rotation:i?d:-1*d,skew:i?-20:m,xTransformOrigin:i?a:n,yTransformOrigin:o,caretCorners:i?p:f};case EE.BOTTOM_SIDE_END:return{yAlignment:IE,xAlignment:i?SE:TE,yAxisPx:l,xAxisPx:a,rotation:i?-1*d:d,skew:i?m:-20,xTransformOrigin:i?a:n,yTransformOrigin:h,caretCorners:i?f:p};case EE.TOP_SIDE_START:return{yAlignment:ME,xAlignment:i?TE:SE,yAxisPx:l,xAxisPx:a,rotation:i?-1*d:d,skew:i?m:-20,xTransformOrigin:i?n:a,yTransformOrigin:l,caretCorners:i?f:p};case EE.CENTER_SIDE_START:return{yAlignment:ME,xAlignment:i?TE:SE,yAxisPx:o,xAxisPx:a,rotation:i?-1*d:d,skew:i?m:-20,xTransformOrigin:i?n:a,yTransformOrigin:o,caretCorners:i?f:p};case EE.BOTTOM_SIDE_START:return{yAlignment:IE,xAlignment:i?TE:SE,yAxisPx:l,xAxisPx:a,rotation:i?d:-1*d,skew:i?-20:m,xTransformOrigin:i?n:a,yTransformOrigin:h,caretCorners:i?p:f};case EE.ABOVE_CENTER:return{yAlignment:IE,xAlignment:SE,yAxisPx:a,xAxisPx:r,rotation:u,skew:m,xTransformOrigin:r,yTransformOrigin:s,caretCorners:f};case EE.ABOVE_END:return{yAlignment:IE,xAlignment:i?TE:SE,yAxisPx:a,xAxisPx:l,rotation:i?-35:u,skew:i?-20:m,xTransformOrigin:i?c:l,yTransformOrigin:s,caretCorners:i?p:f};default:case EE.ABOVE_START:return{yAlignment:IE,xAlignment:i?SE:TE,yAxisPx:a,xAxisPx:l,rotation:i?u:-35,skew:i?m:-20,xTransformOrigin:i?l:c,yTransformOrigin:s,caretCorners:i?f:p}}}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}attachScrollHandler(t){this.addAncestorScrollEventListeners.push((()=>{t("scroll",this.windowScrollHandler)}))}removeScrollHandler(t){this.removeAncestorScrollEventListeners.push((()=>{t("scroll",this.windowScrollHandler)}))}destroy(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.clearHideTimeout(),this.clearShowTimeout(),this.adapter.removeClass(pA),this.adapter.removeClass(mA),this.adapter.removeClass(fA),this.adapter.removeClass(gA),this.adapter.removeClass(vA),this.richTooltip&&this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler);for(const t of this.removeAncestorScrollEventListeners)t();this.animFrame.cancelAll()}}function wA(t){return Object.entries(t).filter((([t,e])=>""!==t&&e)).map((([t])=>t)).join(" ")}function xA(t,e,i,n={bubbles:!0}){if("undefined"==typeof Event)throw new Error("Event not defined.");if(!t)throw new Error("Tried to dispatch event without element.");const s=new CustomEvent(e,Object.assign(Object.assign({},n),{detail:i}));return null==t||t.dispatchEvent(s),s}function SA(t,e){let i=Object.getOwnPropertyNames(t);const n={};for(let s=0;s<i.length;s++){const r=i[s],o=r.indexOf("$");-1!==o&&-1!==e.indexOf(r.substring(0,o+1))||-1===e.indexOf(r)&&(n[r]=t[r])}return n}function TA(t,e){let i=Object.getOwnPropertyNames(t);const n={};for(let s=0;s<i.length;s++){const r=i[s];r.substring(0,e.length)===e&&(n[r.substring(e.length)]=t[r])}return n}class CA{constructor(){this.elementMap=new Map}on(t,e,i,n){this.elementMap.has(t)||this.elementMap.set(t,{});const s=this.elementMap.get(t);if(null==s)throw new Error("Event map couldn't be created.");e in s||(s[e]=new Map);s[e].set(i,um(t,e,i,n))}off(t,e,i){const n=this.elementMap.get(t);if(null==n||!(e in n))return;const s=n[e],r=s.get(i);null!=r&&(r(),s.delete(i),0===s.size&&(delete n[e],0===Object.keys(n).length&&this.elementMap.delete(t)))}clear(){this.elementMap.forEach(((t,e)=>{for(let[i,n]of Object.entries(t))n.forEach(((t,e)=>{t()}))})),this.elementMap.clear()}}function MA(t,e){let i=[];if(e)for(let n=0;n<e.length;n++){const s=e[n],r=Array.isArray(s)?s[0]:s;Array.isArray(s)&&s.length>1?i.push(r(t,s[1])):i.push(r(t))}return{update(t){if((t&&t.length||0)!=i.length)throw new Error("You must not change the length of an actions array.");if(t)for(let e=0;e<t.length;e++){const n=i[e];if(n&&n.update){const i=t[e];Array.isArray(i)&&i.length>1?n.update(i[1]):n.update()}}},destroy(){for(let t=0;t<i.length;t++){const e=i[t];e&&e.destroy&&e.destroy()}}}}let IA=0;const EA="ontouchstart"in window||navigator.maxTouchPoints>0;var AA=ym("<div><div><!></div></div>");function DA(t,e){Yd(e,!0);const[i,n]=yg(),s=()=>gg(D,"$anchor",i);let r,o=Sg(e,"use",19,(()=>[])),a=Sg(e,"class",3,""),l=Sg(e,"style",3,""),c=Sg(e,"id",19,(()=>"SMUI-tooltip-"+IA++)),h=Sg(e,"unbounded",3,!1),u=Sg(e,"xPos",3,"detected"),d=Sg(e,"yPos",3,"detected"),p=Sg(e,"persistent",3,!1),f=Sg(e,"interactive",19,p),m=Sg(e,"hideFromScreenreader",3,!1),g=Sg(e,"showDelay",3,void 0),v=Sg(e,"hideDelay",3,void 0),y=Sg(e,"surface$class",3,""),_=Sg(e,"surface$style",3,""),b=Sg(e,"triggerByAnchorFocus",3,!1),w=Sg(e,"supportTouchDevice",3,!1),x=bg(e,["$$slots","$$events","$$legacy","use","class","style","id","unbounded","xPos","yPos","persistent","interactive","hideFromScreenreader","showDelay","hideDelay","surface$class","surface$style","children","triggerByAnchorFocus","supportTouchDevice"]),S=Gp(void 0),T=new CA,C={},M=Jd({}),I=Jd({}),E=Jd({}),A=Jd({}),D=Gd("SMUI:tooltip:wrapper:anchor"),k=Gd("SMUI:tooltip:wrapper:tooltip");const P=Gd("SMUI:tooltip:rich"),O=!EA||w(),R=xp((()=>({role:P&&f()?"dialog":"tooltip",tabindex:P&&p()?-1:void 0})));let L;function N(t){var e;O&&(T.off(t,"focusout",j),P&&p()?(T.off(t,"click",U),T.off(t,"keydown",U)):(T.off(t,"mouseenter",G),T.off(t,"focusin",q),T.off(t,"mouseleave",Y),T.off(t,"touchstart",X),T.off(t,"touchend",Z)),P&&f()?(t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("data-tooltip-id")):t.removeAttribute("aria-describedby"),null==(e=If(S))||e.destroy())}function F(t){return t in M?M[t]:Q().classList.contains(t)}function B(t){M[t]||(M[t]=!0)}function z(t){t in M&&!M[t]||(M[t]=!1)}function V(t,e){I[t]!=e&&(""===e||null==e?delete I[t]:I[t]=e)}function $(t,e){A[t]!=e&&(""===e||null==e?delete A[t]:A[t]=e)}function H(t){return t in E?E[t]??null:Q().getAttribute(t)}function K(t,e){E[t]!==e&&(E[t]=e)}function W(t){t in E&&null==E[t]||(E[t]=void 0)}function j(t){Q().contains(t.relatedTarget)||If(S)&&If(S).hide()}function U(t){"keydown"===t.type&&"Enter"!==t.key&&" "!==t.key||If(S)&&If(S).handleAnchorClick()}function G(){If(S)&&If(S).handleAnchorMouseEnter()}function q(t){If(S)&&If(S).handleAnchorFocus(t)}function Y(){If(S)&&If(S).handleAnchorMouseLeave()}function X(){If(S)&&If(S).handleAnchorTouchstart()}function Z(){If(S)&&If(S).handleAnchorTouchend()}function Q(){return r}Ff((()=>{If(S)&&L!==s()&&(L&&N(L),s()&&function(t){var e;if(!O)return;b()&&T.on(t,"focusout",j);P&&p()?(T.on(t,"click",U),T.on(t,"keydown",U)):(T.on(t,"mouseenter",G),b()&&T.on(t,"focusin",q),T.on(t,"mouseleave",Y),T.on(t,"touchstart",X),T.on(t,"touchend",Z));P&&f()?(t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","false"),t.setAttribute("data-tooltip-id",c())):t.setAttribute("aria-describedby",c());P||function(){if(!s())return;const t=iE(Q());t!==Q().parentNode&&(C.parent=Q().parentNode??void 0,C.nextSibling=Q().nextElementSibling??void 0,t.appendChild(Q()))}();null==(e=If(S))||e.init()}(s()),L=s())})),Ff((()=>{If(S)&&If(S).setAnchorBoundaryType(xE[h()?"UNBOUNDED":"BOUNDED"])})),Ff((()=>{If(S)&&If(S).setTooltipPosition({xPos:bE[u().toUpperCase()],yPos:wE[d().toUpperCase()]})})),Ff((()=>{If(S)&&null!=g()&&If(S).setShowDelay(g())})),Ff((()=>{If(S)&&null!=v()&&If(S).setHideDelay(v())})),Tg((()=>(Yp(S,new bA({getAttribute:H,setAttribute:K,removeAttribute:W,addClass:B,hasClass:F,removeClass:z,getComputedStyleProperty:t=>{const e=Q();let i=getComputedStyle(e).getPropertyValue(t);return"auto"===i&&(e.classList.add("smui-banner--force-show"),i=getComputedStyle(e).getPropertyValue(t),e.classList.remove("smui-banner--force-show")),i},setStyleProperty:V,setSurfaceAnimationStyleProperty:$,getViewportWidth:()=>window.innerWidth,getViewportHeight:()=>window.innerHeight,getTooltipSize:()=>{const t=Q();let e={width:t.offsetWidth,height:t.offsetHeight};return 0!==e.width&&0!==e.height||(t.classList.add("smui-banner--force-show"),e={width:t.offsetWidth,height:t.offsetHeight},t.classList.remove("smui-banner--force-show")),e},getAnchorBoundingRect:()=>s()?s().getBoundingClientRect():null,getParentBoundingRect:()=>{let t=Q().parentElement;return P||(t=function(t){const e=t.getRootNode();return e instanceof ShadowRoot?e.host:document.body}(Q())),(null==t?void 0:t.getBoundingClientRect())||null},getAnchorAttribute:t=>s()?s().getAttribute(t):null,setAnchorAttribute:(t,e)=>{s()&&s().setAttribute(t,e)},isRTL:()=>"rtl"===getComputedStyle(Q()).direction,anchorContainsElement:t=>!(!s()||!s().contains(t)),tooltipContainsElement:t=>Q().contains(t),focusAnchorElement:()=>{s()&&s().focus()},registerEventHandler:(t,e)=>T.on(Q(),t,e),deregisterEventHandler:(t,e)=>T.off(Q(),t,e),registerAnchorEventHandler:(t,e)=>s()&&T.on(s(),t,e),deregisterAnchorEventHandler:(t,e)=>s()&&T.off(s(),t,e),registerDocumentEventHandler:(t,e)=>T.on(document.body,t,e),deregisterDocumentEventHandler:(t,e)=>T.off(document.body,t,e),registerWindowEventHandler:(t,e)=>T.on(window,t,e,"scroll"===t&&{capture:!0,passive:!0}||void 0),deregisterWindowEventHandler:(t,e)=>T.off(window,t,e),notifyHidden:()=>{xA(Q(),"SMUITooltipHidden")},getTooltipCaretBoundingRect:()=>{const t=Q().querySelector(`.${sE.TOOLTIP_CARET_TOP}`);return t?t.getBoundingClientRect():null},setTooltipCaretStyle:(t,e)=>{const i=Q().querySelector(`.${sE.TOOLTIP_CARET_TOP}`),n=Q().querySelector(`.${sE.TOOLTIP_CARET_BOTTOM}`);i&&n&&(i.style.setProperty(t,e),n.style.setProperty(t,e))},clearTooltipCaretStyles:()=>{const t=Q().querySelector(`.${sE.TOOLTIP_CARET_TOP}`),e=Q().querySelector(`.${sE.TOOLTIP_CARET_BOTTOM}`);t&&e&&(t.removeAttribute("style"),e.removeAttribute("style"))},getActiveElement:()=>document.activeElement}),!0),vg(k,r),()=>{s()&&N(s()),T.clear()}))),Cg((()=>{var t,e,i,n,s,o;const a=Q()?iE(Q()):void 0;!P&&"undefined"!=typeof document&&a===(null==(t=Q())?void 0:t.parentNode)&&C.parent!==(null==(e=Q())?void 0:e.parentNode)&&(null==(i=C.parent)?void 0:i.isConnected)&&(null==(n=C.parent)?void 0:n.insertBefore)&&C.nextSibling&&(null==(s=C.parent)||s.insertBefore(Q(),C.nextSibling)),a===(null==(o=Q())?void 0:o.parentNode)&&Q().remove(),r=null,Yp(S,null)}));var J=AA(),tt=t=>{var i;If(S)&&If(S).handleTransitionEnd(),null==(i=e.ontransitionend)||i.call(e,t)};og(J,((t,e,i)=>({class:t,style:e,"aria-hidden":"true",id:c(),"data-mdc-tooltip-persistent":p()?"true":void 0,"data-mdc-tooltip-has-caret":void 0,"data-hide-tooltip-from-screenreader":m()?"true":void 0,...If(R),...E,...i,ontransitionend:tt})),[()=>wA({[a()]:!0,"cl-tooltip":!0,"mdc-tooltip":!0,"mdc-tooltip--rich":P,...M}),()=>Object.entries(I).map((([t,e])=>`${t}: ${e};`)).concat([l()]).join(" "),()=>SA(x,["surface$"])]);var et=lp(J);og(et,((t,e,i)=>({class:t,style:e,...i})),[()=>wA({[y()]:!0,"mdc-tooltip__surface":!0,"mdc-tooltip__surface-animation":!0}),()=>Object.entries(A).map((([t,e])=>`${t}: ${e};`)).concat([_()]).join(" "),()=>TA(x,"surface$")]),Fm(lp(et),(()=>e.children??fd)),ug(J,(t=>r=t),(()=>r)),$m(J,((t,e)=>null==MA?void 0:MA(t,e)),o),Sm(t,J);var it=Xd({attachScrollHandler:function(t){If(S)&&If(S).attachScrollHandler(t)},removeScrollHandler:function(t){If(S)&&If(S).removeScrollHandler(t)},getElement:Q,getInstance:function(){return If(S)}});return n(),it}var kA=ym("<div><!></div>");function PA(t,e){Yd(e,!0);const[i,n]=yg(),s=()=>gg(u,"$tooltip",i);let r,o=Sg(e,"use",19,(()=>[])),a=Sg(e,"class",3,""),l=Sg(e,"rich",3,!1),c=bg(e,["$$slots","$$events","$$legacy","use","class","rich","children"]);const h=Eg(void 0),u=Eg(void 0);qd("SMUI:tooltip:wrapper:anchor",h),qd("SMUI:tooltip:wrapper:tooltip",u),qd("SMUI:tooltip:rich",l()),Ff((()=>{s()&&!gg(h,"$anchor",i)&&vg(h,s().previousElementSibling)})),Cg((()=>{r=null}));var d=xm(),p=cp(d),f=t=>{var i=kA();og(i,(t=>({class:t,...c})),[()=>wA({[a()]:!0,"mdc-tooltip-wrapper--rich":!0})]),Fm(lp(i),(()=>e.children??fd)),ug(i,(t=>r=t),(()=>r)),$m(i,((t,e)=>null==MA?void 0:MA(t,e)),o),Sm(t,i)},m=t=>{var i=xm();Fm(cp(i),(()=>e.children??fd)),Sm(t,i)};Am(p,(t=>{l()?t(f):t(m,!1)})),Sm(t,d);var g=Xd({getElement:function(){return r}});return n(),g}function OA(){return Gd(V_)}var RA=ym('<div class="loader svelte-nbyf0j"><span class="item svelte-nbyf0j"></span> <span class="item svelte-nbyf0j"></span> <span class="item svelte-nbyf0j"></span></div>');const LA={hash:"svelte-nbyf0j",code:".loader.svelte-nbyf0j {margin-left:4px;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:nowrap;}.item.svelte-nbyf0j {width:4px;height:4px;border-radius:100%;background-color:var(--cl-legendLoader-foreground);\n  animation: svelte-nbyf0j-cl-button-loader 1s infinite;}.item.svelte-nbyf0j:not(:last-child) {margin-right:3px;}.item.svelte-nbyf0j:nth-child(1) {animation-delay:0.1s;}.item.svelte-nbyf0j:nth-child(2) {animation-delay:0.3s;}.item.svelte-nbyf0j:nth-child(3) {animation-delay:0.45s;}\n\n@keyframes svelte-nbyf0j-cl-button-loader {\n  0%, 100% {\n    opacity: 1;\n  }\n  60% {\n    opacity: 0.4;\n  }\n  30% {\n    opacity: 0.2;\n  }\n}"};function NA(t){Vm(t,LA),Sm(t,RA())}var FA=ym('<div class="item error svelte-1aqdr0d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"></path></svg></div> <!>',1),BA=ym('<div class="container svelte-1aqdr0d"><!></div>');const zA={hash:"svelte-1aqdr0d",code:'.container.svelte-1aqdr0d {margin:0 4px;}.item.svelte-1aqdr0d {width:18px;height:18px;border-radius:50%;overflow:hidden;pointer-events:auto;}.error.svelte-1aqdr0d {position:relative;color:#cc2f3c;}\n@media (hover: hover) and (pointer: fine) {.error.svelte-1aqdr0d:hover {color:#b22833;}.error.svelte-1aqdr0d:hover:after {opacity:0.25;}\n}.error.svelte-1aqdr0d:after {content:" ";display:block;position:absolute;height:100%;width:100%;left:0;top:0;opacity:0.15;z-index:-1;background:#f7525f;}'};function VA(t,e){Yd(e,!1),Vm(t,zA);const{t:i}=OA();dg();var n=BA();PA(lp(n),{children:(t,e)=>{var n=FA();DA(hp(cp(n),2),{children:(t,e)=>{var n=wm();$f((t=>Tm(n,t)),[()=>i("legend.error.symbol")]),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n),Xd()}var $A=ym("<span> </span>"),HA=ym('<div class="valueItem svelte-1jf9nq0"><!> <span> </span></div>'),KA=ym('<div class="values svelte-1jf9nq0"></div>');const WA={hash:"svelte-1jf9nq0",code:".values.svelte-1jf9nq0 {display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;font-size:13px;}.valueItem.svelte-1jf9nq0 {display:flex;padding-right:6px;}"};var jA=ym('<button aria-label="Remove" class="button svelte-1hy348m"><span class="svelte-1hy348m"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.5 4a.5.5 0 0 0-.5.5V5h4v-.5a.5.5 0 0 0-.5-.5h-3ZM12 5h3v1h-1.05l-.85 7.67A1.5 1.5 0 0 1 11.6 15H6.4a1.5 1.5 0 0 1-1.5-1.33L4.05 6H3V5h3v-.5C6 3.67 6.67 3 7.5 3h3c.83 0 1.5.67 1.5 1.5V5ZM5.06 6l.84 7.56a.5.5 0 0 0 .5.44h5.2a.5.5 0 0 0 .5-.44L12.94 6H5.06Z"></path></svg></span></button> <!>',1),UA=ym('<button class="button svelte-1hy348m" aria-label="More"><span class="svelte-1hy348m"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6-1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm7-2a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path></svg></span></button> <!>',1),GA=ym('<div class="legendWrapper svelte-1hy348m"><div class="series svelte-1hy348m"><div role="button" tabindex="-1"><div class="texts svelte-1hy348m"> </div> <div class="inputs svelte-1hy348m"> </div> <div><!> <!></div></div> <div class="valueWrapper svelte-1hy348m"><!></div></div></div>');const qA={hash:"svelte-1hy348m",code:'.legendWrapper.svelte-1hy348m {display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;}.series.svelte-1hy348m {display:flex;max-height:100%;flex-wrap:wrap;}.display.svelte-1hy348m {position:relative;display:flex;flex-wrap:nowrap;height:24px;padding:1px 4px;background-color:var(--cl-legend-background);border:1px solid transparent;border-right-width:0;border-radius:4px 0 0 4px;box-sizing:border-box;pointer-events:auto;}.display.display--hover.svelte-1hy348m {background-color:var(--cl-legend-hoverBackground);border-color:var(--cl-legend-hoverBorder);}.display.display--active.svelte-1hy348m {background-color:var(--cl-legend-hoverBackground);border-color:var(--cl-selectedForeground);}.texts.svelte-1hy348m {display:flex;align-items:center;font-size:13px;color:var(--cl-foreground);overflow:hidden;cursor:default;}.inputs.svelte-1hy348m {padding-left:4px;display:flex;align-items:center;font-size:13px;color:var(--cl-foreground);overflow:hidden;cursor:default;}.buttons.svelte-1hy348m {display:none;position:absolute;top:-1px;bottom:-1px;right:0;transform:translateX(100%);flex-direction:row;align-items:center;justify-content:flex-start;padding:1px 4px 1px 0;border:1px solid transparent;border-left-width:0;border-radius:0 4px 4px 0;box-sizing:border-box;background-color:var(--cl-background);}.buttons.buttons--hover.svelte-1hy348m {display:flex;border-color:var(--cl-legend-hoverBorder);}.buttons.buttons--active.svelte-1hy348m {display:flex;border-color:var(--cl-selectedForeground);}.button.svelte-1hy348m {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;align-items:center;justify-content:center;font:inherit;position:relative;height:100%;flex:0;margin:0 4px;}.button.svelte-1hy348m > :where(.svelte-1hy348m) {isolation:isolate;}\n@media (hover: hover) and (pointer: fine) {.button.svelte-1hy348m:hover:before {position:absolute;top:0;right:-4px;bottom:0;left:-4px;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.button.svelte-1hy348m > span:where(.svelte-1hy348m) {display:block;width:18px;height:18px;}.valueWrapper.svelte-1hy348m {align-self:stretch;display:flex;align-items:center;flex-wrap:nowrap;cursor:default;overflow:hidden;border-top:1px solid transparent;border-bottom:1px solid transparent;}'};function YA(t,e){Yd(e,!0),Vm(t,qA);const[i,n]=yg(),s=()=>gg(d,"$isSelected",i),{t:r}=OA(),o=$w(Go),a=o.chart(e.chartIndex),l=Ag(o.store,(t=>{const i=t.instances[a.index].studyList.find((t=>t.id===e.studyId));return i?i.title:""})),c=Ag(o.store,(t=>{const i=t.instances[a.index].studyList.find((t=>t.id===e.studyId));return i&&i.inputs?Ku(i.inputs)?"":`(${Object.values(i.inputs).join(",")})`:""})),h=Ag(o.store,(t=>{var i;const n=null==(i=t.instances[e.chartIndex])?void 0:i.dataStatus;return n!==Rv.dataLoaded&&n!==Rv.error})),u=Ag(o.store,(t=>{var i;return(null==(i=t.instances[e.chartIndex])?void 0:i.dataStatus)===Rv.error})),d=Ag(o.store,(t=>{var i,n;return null==(n=null==(i=t.instances[e.chartIndex])?void 0:i.studyLegend[e.studyId])?void 0:n.selected}));let p=Gp(!1),f=0;async function m(){a.removeEntity(e.studyId)}var g=GA(),v=lp(g),y=lp(v),_=lp(y),b=lp(_),w=hp(_,2),x=lp(w),S=hp(w,2),T=lp(S);PA(T,{children:(t,e)=>{var i=jA(),n=cp(i),s=xp((()=>Ut(m)));n.__pointerup=function(...t){var e;null==(e=If(s))||e.apply(this,t)},DA(hp(n,2),{showDelay:600,children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>r("legend.remove")]),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0}}),PA(hp(T,2),{children:(t,e)=>{var i=UA();DA(hp(cp(i),2),{showDelay:600,children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>r("legend.more")]),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0}});var C=lp(hp(y,2)),M=t=>{NA(t)},I=t=>{var n=xm(),s=cp(n),r=t=>{VA(t,{})},o=t=>{!function(t,e){Yd(e,!0),Vm(t,WA);const[i,n]=yg(),s=()=>gg(r,"$values",i),r=Ag($w(Go).store,(t=>{var i,n;return null==(n=null==(i=t.instances[e.chartIndex])?void 0:i.studyLegend[e.studyId])?void 0:n.values}));var o=xm(),a=cp(o),l=t=>{var e=KA();km(e,5,s,(t=>t.key),((t,e)=>{var i=HA(),n=lp(i),s=t=>{var i=$A(),n=lp(i);$f((()=>Tm(n,If(e).title))),Sm(t,i)};Am(n,(t=>{If(e).title&&t(s)}));var r=hp(n,2);let o;var a=lp(r);$f((t=>{o=Zm(r,"",o,t),Tm(a,If(e).value)}),[()=>({color:If(e).color})]),Sm(t,i)})),Sm(t,e)};Am(a,(t=>{s()&&t(l)})),Sm(t,o),Xd(),n()}(t,{get chartIndex(){return e.chartIndex},get studyId(){return e.studyId}})};Am(s,(t=>{gg(u,"$isError",i)?t(r):t(o,!1)}),!0),Sm(t,n)};Am(C,(t=>{gg(h,"$isWaitingData",i)?t(M):t(I,!1)})),$f(((t,e)=>{Ym(y,1,t,"svelte-1hy348m"),Tm(b,gg(l,"$title",i)),Tm(x,gg(c,"$inputs",i)),Ym(S,1,e,"svelte-1hy348m")}),[()=>jm(Wm("display",If(p)&&"display--hover",s()&&"display--active")),()=>jm(Wm("buttons",If(p)&&"buttons--hover",s()&&"buttons--active"))]),dm("mouseenter",y,(()=>{Yp(p,!0),f&&(clearTimeout(f),f=0)})),dm("mouseleave",y,(()=>{f=setTimeout((()=>{Yp(p,!1),f=0}),150)})),Sm(t,g),Xd(),n()}pm(["pointerup"]);var XA=ym('<div class="auxPanePortal svelte-17pfq9"><!></div>');const ZA={hash:"svelte-17pfq9",code:".auxPanePortal.svelte-17pfq9 {position:absolute;top:4px;left:4px;z-index:2;user-select:none;pointer-events:none;}"};var QA=ym('<div class="valueItem svelte-ir8sbd"><span class="key svelte-ir8sbd"> </span> <span> </span></div> <div class="valueItem svelte-ir8sbd"><span class="key svelte-ir8sbd"> </span> <span> </span></div> <div class="valueItem svelte-ir8sbd"><span class="key svelte-ir8sbd"> </span> <span> </span></div> <div class="valueItem svelte-ir8sbd"><span class="key svelte-ir8sbd"> </span> <span> </span></div>',1),JA=ym('<div class="valueItem svelte-ir8sbd"><span> </span></div>'),tD=ym("<span> </span>"),eD=ym('<div class="values svelte-ir8sbd"><!> <!></div>');const iD={hash:"svelte-ir8sbd",code:".values.svelte-ir8sbd {display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;font-size:13px;}.valueItem.svelte-ir8sbd {display:flex;padding-right:6px;}.key.svelte-ir8sbd {color:var(--cl-foreground);padding-right:1px;}"};function nD(t,e){Yd(e,!0),Vm(t,iD);const[i,n]=yg(),s=()=>gg(c,"$values",i),{t:r}=OA(),o=$w(kg),a=$w(Go),l=$v(o.store,(t=>t.chartProperties.legend)),c=$v(a.store,(t=>{var i;return null==(i=t.instances[e.chartIndex])?void 0:i.mainLegend})),h=$v(a.store,(t=>{var i;const n=null==(i=t.instances[e.chartIndex])?void 0:i.chartProperties["mainSeriesProperties.style"];return!!n&&it(n)}));var u=xm(),d=cp(u),p=t=>{var e=eD(),n=lp(e),o=t=>{var e=QA(),i=cp(e),n=lp(i),o=lp(n),a=hp(n,2);let l;var c=lp(a),h=hp(i,2),u=lp(h),d=lp(u),p=hp(u,2);let f;var m=lp(p),g=hp(h,2),v=lp(g),y=lp(v),_=hp(v,2);let b;var w=lp(_),x=lp(hp(g,2)),S=lp(x),T=hp(x,2);let C;var M=lp(T);$f(((t,e,i,n,r,h,u,g)=>{var v,x,I,E;Tm(o,t),l=Zm(a,"",l,e),Tm(c,null==(v=s())?void 0:v.open),Tm(d,i),f=Zm(p,"",f,n),Tm(m,null==(x=s())?void 0:x.high),Tm(y,r),b=Zm(_,"",b,h),Tm(w,null==(I=s())?void 0:I.low),Tm(S,u),C=Zm(T,"",C,g),Tm(M,null==(E=s())?void 0:E.close)}),[()=>r("legend.main.open"),()=>{var t;return{color:null==(t=s())?void 0:t.color}},()=>r("legend.main.high"),()=>{var t;return{color:null==(t=s())?void 0:t.color}},()=>r("legend.main.low"),()=>{var t;return{color:null==(t=s())?void 0:t.color}},()=>r("legend.main.close"),()=>{var t;return{color:null==(t=s())?void 0:t.color}}]),Sm(t,e)},a=t=>{var e=xm(),i=cp(e),n=t=>{var e=JA(),i=lp(e);let n;var r=lp(i);$f((t=>{var e;n=Zm(i,"",n,t),Tm(r,null==(e=s())?void 0:e.value)}),[()=>{var t;return{color:null==(t=s())?void 0:t.color}}]),Sm(t,e)};Am(i,(t=>{s().value&&t(n)}),!0),Sm(t,e)};Am(n,(t=>{gg(h,"$isOhlc",i)&&s().open?t(o):t(a,!1)}));var c=hp(n,2),u=t=>{var e=tD();let i;var n=lp(e);$f((t=>{var r;i=Zm(e,"",i,t),Tm(n,null==(r=s())?void 0:r.change)}),[()=>{var t;return{color:null==(t=s())?void 0:t.color}}]),Sm(t,e)};Am(c,(t=>{gg(l,"$legendProps",i).showBarChange&&t(u)})),Sm(t,e)};Am(d,(t=>{s()&&t(p)})),Sm(t,u),Xd(),n()}var sD=ym('<button class="symbolBtn svelte-17lzdls"><span class="svelte-17lzdls"> </span></button> <!>',1),rD=ym('<button class="resolutionBtn svelte-17lzdls"><span class="svelte-17lzdls"> </span></button> <!>',1),oD=ym('<button aria-label="More" class="more svelte-17lzdls"><span class="svelte-17lzdls"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6-1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm7-2a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"></path></svg></span></button> <!>',1),aD=ym('<div role="button" tabindex="-1"><div class="texts svelte-17lzdls"><div class="titleWrapper"><!></div> <div class="interval svelte-17lzdls"><!></div></div> <div><!></div></div>'),lD=ym('<div class="legendWrapper svelte-17lzdls"><div class="series svelte-17lzdls"><!> <div class="valueWrapper svelte-17lzdls"><!></div></div></div>');const cD={hash:"svelte-17lzdls",code:'@charset "UTF-8";.legendWrapper.svelte-17lzdls {display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;}.series.svelte-17lzdls {display:flex;max-height:100%;flex-wrap:wrap;}.display.svelte-17lzdls {position:relative;display:flex;flex-wrap:nowrap;padding:1px 4px;background-color:var(--cl-legend-background);border:1px solid transparent;border-right-width:0;border-radius:4px 0 0 4px;box-sizing:border-box;pointer-events:auto;}.display.display--hover.svelte-17lzdls {background-color:var(--cl-legend-hoverBackground);border-color:var(--cl-legend-hoverBorder);}.display.display--active.svelte-17lzdls {background-color:var(--cl-legend-hoverBackground);border-color:var(--cl-selectedForeground);}.texts.svelte-17lzdls {display:flex;align-items:center;font-size:16px;line-height:18px;color:var(--cl-foreground);overflow:hidden;cursor:default;}.symbolBtn.svelte-17lzdls,\n.resolutionBtn.svelte-17lzdls {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;align-items:center;justify-content:center;font:inherit;position:relative;}.symbolBtn.svelte-17lzdls > :where(.svelte-17lzdls),\n.resolutionBtn.svelte-17lzdls > :where(.svelte-17lzdls) {isolation:isolate;}\n@media (hover: hover) and (pointer: fine) {.symbolBtn.svelte-17lzdls:hover:before,\n  .resolutionBtn.svelte-17lzdls:hover:before {position:absolute;top:0;right:-5px;bottom:0;left:-5px;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.interval.svelte-17lzdls {position:relative;padding-left:12px;}.interval.svelte-17lzdls::before {color:var(--cl-foreground);content:"·";font-size:16px;height:100%;left:0;line-height:inherit;position:absolute;text-align:center;width:12px;}.buttons.svelte-17lzdls {display:none;position:absolute;top:-1px;bottom:-1px;right:0;transform:translateX(100%);flex-direction:row;align-items:center;justify-content:flex-start;padding:1px 6px 1px 6px;border:1px solid transparent;border-left-width:0;border-radius:0 4px 4px 0;box-sizing:border-box;background-color:var(--cl-background);}.buttons.buttons--hover.svelte-17lzdls {display:flex;border-color:var(--cl-legend-hoverBorder);}.buttons.buttons--active.svelte-17lzdls {display:flex;border-color:var(--cl-selectedForeground);}.more.svelte-17lzdls {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;align-items:center;justify-content:center;font:inherit;position:relative;height:100%;flex:0;}.more.svelte-17lzdls > :where(.svelte-17lzdls) {isolation:isolate;}\n@media (hover: hover) and (pointer: fine) {.more.svelte-17lzdls:hover:before {position:absolute;top:0;right:-6px;bottom:0;left:-6px;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.more.svelte-17lzdls > span:where(.svelte-17lzdls) {display:block;width:18px;height:18px;}.valueWrapper.svelte-17lzdls {align-self:stretch;display:flex;align-items:center;flex-wrap:nowrap;cursor:default;overflow:hidden;border-top:1px solid transparent;border-bottom:1px solid transparent;}'};function hD(t,e){Yd(e,!0),Vm(t,cD);const[i,n]=yg(),s=()=>gg(m,"$selected",i),r=()=>gg(d,"$isWaitingData",i),{t:o}=OA(),a=$w(kg),l=$w(Go),c=e.chartIndex,h=$v(a.store,(t=>t.chartProperties.legend)),u=$v(l.store,(t=>{var e;return null==(e=t.instances[c])?void 0:e.symbolInfo})),d=$v(l.store,(t=>{var e;const i=null==(e=t.instances[c])?void 0:e.dataStatus;return i!==Rv.dataLoaded&&i!==Rv.error})),p=$v(l.store,(t=>{var e;return(null==(e=t.instances[c])?void 0:e.dataStatus)===Rv.error})),f=$v(l.store,(t=>{var e;return null==(e=t.instances[c])?void 0:e.resolution})),m=$v(l.store,(t=>{var e,i;return null==(i=null==(e=t.instances[c])?void 0:e.mainLegend)?void 0:i.selected}));let g=Gp(!1),v=0;var y=lD(),_=lp(y),b=lp(_),w=t=>{var e=aD(),n=lp(e),a=lp(n);PA(lp(a),{children:(t,e)=>{var n=sD(),s=cp(n),r=lp(s),a=lp(r);DA(hp(s,2),{children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>o("legend.changeSymbol")]),Sm(t,i)},$$slots:{default:!0}}),$f((()=>{var t;return Tm(a,null==(t=gg(u,"$symbolInfo",i))?void 0:t.description)})),Sm(t,n)},$$slots:{default:!0}}),PA(lp(hp(a,2)),{children:(t,e)=>{var n=rD(),s=cp(n),r=lp(s),a=lp(r);DA(hp(s,2),{children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>o("legend.changeInterval")]),Sm(t,i)},$$slots:{default:!0}}),$f((()=>Tm(a,gg(f,"$resolution",i)))),Sm(t,n)},$$slots:{default:!0}});var l=hp(n,2);PA(lp(l),{children:(t,e)=>{var i=oD();DA(hp(cp(i),2),{children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>o("legend.more")]),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0}}),$f(((t,i)=>{Ym(e,1,t,"svelte-17lzdls"),Ym(l,1,i,"svelte-17lzdls")}),[()=>jm(Wm("display",If(g)&&"display--hover",s()&&"display--active")),()=>jm(Wm("buttons",If(g)&&"buttons--hover",s()&&"buttons--active"))]),dm("mouseenter",e,(()=>{r()||(Yp(g,!0),v&&(clearTimeout(v),v=0))})),dm("mouseleave",e,(()=>{v=setTimeout((()=>{Yp(g,!1),v=0}),200)})),Sm(t,e)};Am(b,(t=>{gg(h,"$legendProps",i).showSeriesTitle&&t(w)}));var x=lp(hp(b,2)),S=t=>{NA(t)},T=t=>{var e=xm(),n=cp(e),s=t=>{VA(t,{})},r=t=>{nD(t,{get chartIndex(){return c}})};Am(n,(t=>{gg(p,"$isError",i)?t(s):t(r,!1)}),!0),Sm(t,e)};Am(x,(t=>{r()?t(S):t(T,!1)})),Sm(t,y),Xd(),n()}var uD=ym('<span class="studyCount svelte-iowc5s"> </span>'),dD=ym('<button class="toggleLegend svelte-iowc5s"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M3.5 5.58c.24-.28.65-.3.92-.07L7.5 8.14l3.08-2.63a.65.65 0 1 1 .84.98L7.5 9.86 3.58 6.49a.65.65 0 0 1-.07-.91z"></path></svg></span> <!></button> <!>',1),pD=ym('<div class="mainPanePortal svelte-iowc5s"><!> <!> <!></div>');const fD={hash:"svelte-iowc5s",code:'.mainPanePortal.svelte-iowc5s {position:absolute;top:4px;left:4px;right:4px;padding-top:4px;z-index:3;pointer-events:none;user-select:none;overflow:hidden;}.toggleLegend.svelte-iowc5s {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;align-items:center;justify-content:center;font:inherit;position:relative;display:flex;flex-direction:row;margin:2px 0 0 5px;border:1px solid var(--cl-legend-hoverBorder);background-color:var(--cl-legend-hoverBackground);border-radius:3px;cursor:default;pointer-events:all;}.toggleLegend.svelte-iowc5s > :where(.svelte-iowc5s) {isolation:isolate;}\n@media (hover: hover) and (pointer: fine) {.toggleLegend.svelte-iowc5s:hover:before {position:absolute;top:0;right:-0px;bottom:0;left:-0px;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.iconWrap.svelte-iowc5s {width:27px;height:19px;display:flex;align-items:center;justify-content:center;transition:transform 0.1s cubic-bezier(0.06, 0.52, 1, 0.54);transform:rotate(-180deg);color:var(--cl-foreground);}.iconWrap.collapsed.multi.svelte-iowc5s {width:19px;}.iconWrap.collapsed.svelte-iowc5s {transform:rotate(0);}.studyCount.svelte-iowc5s {font-size:13px;padding-right:4px;color:var(--cl-foreground);}'};function mD(t){Cg((()=>t.dispose()))}pm(["pointerup"]);var gD=ym('<div class="tipContent svelte-f2r7jm"> </div>'),vD=ym('<div class="anchor svelte-f2r7jm"></div> <!>',1),yD=ym('<div class="tipContent svelte-f2r7jm"> </div>'),_D=ym('<div class="anchor svelte-f2r7jm"></div> <!>',1),bD=ym("<!> <!>",1);const wD={hash:"svelte-f2r7jm",code:".anchor.svelte-f2r7jm {position:absolute;pointer-events:none;}.tipContent.svelte-f2r7jm {user-select:none;pointer-events:none;}"};function xD(t,e){Yd(e,!0),Vm(t,wD);const i=$w(Uo);let n,s,r,o,a=Jd({1:{content:"",yPos:void 0,showDelay:100,hideDelay:100,show:!1},2:{content:"",yPos:void 0,showDelay:100,hideDelay:100,show:!1}}),l=0,c={value:2,id:-1};function h(){return 2===c.value?s:n}function u(t=!1){var e;t&&(null==(e=(2===c.value?o:r).getInstance())||e.setHideDelay(0)),h().dispatchEvent(new MouseEvent("mouseleave")),d().show=!1}function d(){return 2===c.value?a[2]:a[1]}function p(){return c.value=2===c.value?1:2,c.id=l++}mD(i.onPaneTooltipRequested((async t=>{const e=!!d().show;u(!0);const i=p(),{anchor:n,content:s}=t;Object.assign(h().style,{left:aI(n.x),top:aI(n.y),width:aI(n.width),height:aI(n.height)}),Object.assign(d(),{content:s,showDelay:e?0:100,hideDelay:100,yPos:t.yPos}),d().content=s,await Mf(),c.id===i&&(h().dispatchEvent(new MouseEvent("mouseenter")),d().show=!0)}))),mD(i.onPaneTooltipCancelled((async()=>{u(),p()}))),Cg((()=>{n=null,r=null,s=null,o=null}));var f=bD(),m=cp(f);PA(m,{children:(t,e)=>{var i=vD(),s=cp(i);ug(s,(t=>n=t),(()=>n)),ug(DA(hp(s,2),{persistent:!0,get showDelay(){return a[1].showDelay},get hideDelay(){return a[1].hideDelay},get yPos(){return a[1].yPos},children:(t,e)=>{var i=gD(),n=lp(i);$f((()=>Tm(n,a[1].content))),Sm(t,i)},$$slots:{default:!0}}),(t=>r=t),(()=>r)),Sm(t,i)},$$slots:{default:!0}}),PA(hp(m,2),{children:(t,e)=>{var i=_D(),n=cp(i);ug(n,(t=>s=t),(()=>s)),ug(DA(hp(n,2),{persistent:!0,get showDelay(){return a[2].showDelay},get hideDelay(){return a[2].hideDelay},get yPos(){return a[2].yPos},children:(t,e)=>{var i=yD(),n=lp(i);$f((()=>Tm(n,a[2].content))),Sm(t,i)},$$slots:{default:!0}}),(t=>o=t),(()=>o)),Sm(t,i)},$$slots:{default:!0}}),Sm(t,f),Xd()}const SD="mdc-dom-focus-sentinel";const TD=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:class{constructor(t,e={}){x(this,"elFocusedBeforeTrapFocus",null),this.root=t,this.options=e}trapFocus(){const t=this.getFocusableElements(this.root);if(0===t.length)throw new Error("FocusTrap: Element must have at least one focusable child.");const e=function(t){const e=t.getRootNode();return e instanceof ShadowRoot?e:document}(this.root);this.elFocusedBeforeTrapFocus=e.activeElement instanceof HTMLElement?e.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(t,this.options.initialFocusEl)}releaseFocus(){[].slice.call(this.root.querySelectorAll(`.${SD}`)).forEach((t=>{t.parentElement.removeChild(t)})),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()}wrapTabFocus(t){const e=this.createSentinel(),i=this.createSentinel();e.addEventListener("focus",(()=>{const e=this.getFocusableElements(t);e.length>0&&e[e.length-1].focus()})),i.addEventListener("focus",(()=>{const e=this.getFocusableElements(t);e.length>0&&e[0].focus()})),t.insertBefore(e,t.children[0]),t.appendChild(i)}focusInitialElement(t,e){let i=0;e&&(i=Math.max(t.indexOf(e),0)),t[i].focus()}getFocusableElements(t){return[].slice.call(t.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((t=>{const e="true"===t.getAttribute("aria-disabled")||null!=t.getAttribute("disabled")||null!=t.getAttribute("hidden")||"true"===t.getAttribute("aria-hidden"),i=t.tabIndex>=0&&t.getBoundingClientRect().width>0&&!t.classList.contains(SD)&&!e;let n=!1;if(i){const e=getComputedStyle(t);n="none"===e.display||"hidden"===e.visibility}return i&&!n}))}createSentinel(){const t=document.createElement("div");return t.setAttribute("tabindex","0"),t.setAttribute("aria-hidden","true"),t.classList.add(SD),t}}},Symbol.toStringTag,{value:"Module"}));function CD(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}const MD=Object.freeze(Object.defineProperty({__proto__:null,closest:function(t,e){if(t.closest)return t.closest(e);let i=t;for(;i;){if(CD(i,e))return i;i=i.parentElement}return null},estimateScrollWidth:function(t){const e=t;if(null!==e.offsetParent)return e.scrollWidth;const i=e.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);const n=i.scrollWidth;return document.documentElement.removeChild(i),n},matches:CD},Symbol.toStringTag,{value:"Module"}));var ID,ED,AD={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};(ID={})[""+AD.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",ID[""+AD.LIST_ITEM_CLASS]="mdc-list-item",ID[""+AD.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",ID[""+AD.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",ID[""+AD.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",ID[""+AD.ROOT]="mdc-list";var DD=((ED={})[""+AD.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",ED[""+AD.LIST_ITEM_CLASS]="mdc-deprecated-list-item",ED[""+AD.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",ED[""+AD.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",ED[""+AD.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",ED[""+AD.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",ED[""+AD.ROOT]="mdc-deprecated-list",ED),kD={ACTION_EVENT:"MDCList:action",SELECTION_CHANGE_EVENT:"MDCList:selectionChange",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+AD.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+AD.LIST_ITEM_CLASS+" a,\n    ."+DD[AD.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+DD[AD.LIST_ITEM_CLASS]+" a\n  ",DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+AD.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+AD.LIST_ITEM_CLASS+" a,\n    ."+AD.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+AD.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled),\n    .'+DD[AD.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+DD[AD.LIST_ITEM_CLASS]+" a,\n    ."+DD[AD.LIST_ITEM_CLASS]+' input[type="radio"]:not(:disabled),\n    .'+DD[AD.LIST_ITEM_CLASS]+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},PD={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300},OD="Unknown",RD="Backspace",LD="Enter",ND="Spacebar",FD="PageUp",BD="PageDown",zD="End",VD="Home",$D="ArrowLeft",HD="ArrowUp",KD="ArrowRight",WD="ArrowDown",jD="Delete",UD="Escape",GD="Tab",qD=new Set;qD.add(RD),qD.add(LD),qD.add(ND),qD.add(FD),qD.add(BD),qD.add(zD),qD.add(VD),qD.add($D),qD.add(HD),qD.add(KD),qD.add(WD),qD.add(jD),qD.add(UD),qD.add(GD);var YD=8,XD=13,ZD=32,QD=33,JD=34,tk=35,ek=36,ik=37,nk=38,sk=39,rk=40,ok=46,ak=27,lk=9,ck=new Map;ck.set(YD,RD),ck.set(XD,LD),ck.set(ZD,ND),ck.set(QD,FD),ck.set(JD,BD),ck.set(tk,zD),ck.set(ek,VD),ck.set(ik,$D),ck.set(nk,HD),ck.set(sk,KD),ck.set(rk,WD),ck.set(ok,jD),ck.set(ak,UD),ck.set(lk,GD);var hk=new Set;function uk(t){var e=t.key;if(qD.has(e))return e;var i=ck.get(t.keyCode);return i||OD}hk.add(FD),hk.add(BD),hk.add(zD),hk.add(VD),hk.add($D),hk.add(HD),hk.add(KD),hk.add(WD);var dk=["input","button","textarea","select"],pk=function(t){var e=t.target;if(e){var i=(""+e.tagName).toLowerCase();-1===dk.indexOf(i)&&t.preventDefault()}};function fk(t,e){var i,n=t.nextChar,s=t.focusItemAtIndex,r=t.sortedIndexByFirstChar,o=t.focusedItemIndex,a=t.skipFocus,l=t.isItemAtIndexDisabled;return clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout((function(){gk(e)}),PD.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n,i=1===e.typeaheadBuffer.length?function(t,e,i,n){var s=n.typeaheadBuffer[0],r=t.get(s);if(!r)return-1;if(s===n.currentFirstChar&&r[n.sortedIndexCursor].index===e){n.sortedIndexCursor=(n.sortedIndexCursor+1)%r.length;var o=r[n.sortedIndexCursor].index;if(!i(o))return o}n.currentFirstChar=s;var a,l=-1;for(a=0;a<r.length;a++)if(!i(r[a].index)){l=a;break}for(;a<r.length;a++)if(r[a].index>e&&!i(r[a].index)){l=a;break}if(-1!==l)return n.sortedIndexCursor=l,r[n.sortedIndexCursor].index;return-1}(r,o,l,e):function(t,e,i){var n=i.typeaheadBuffer[0],s=t.get(n);if(!s)return-1;var r=s[i.sortedIndexCursor];if(0===r.text.lastIndexOf(i.typeaheadBuffer,0)&&!e(r.index))return r.index;var o=(i.sortedIndexCursor+1)%s.length,a=-1;for(;o!==i.sortedIndexCursor;){var l=s[o],c=0===l.text.lastIndexOf(i.typeaheadBuffer,0),h=!e(l.index);if(c&&h){a=o;break}o=(o+1)%s.length}if(-1!==a)return i.sortedIndexCursor=a,s[i.sortedIndexCursor].index;return-1}(r,l,e),-1===i||a||s(i),i}function mk(t){return t.typeaheadBuffer.length>0}function gk(t){t.typeaheadBuffer=""}function vk(t,e){var i=t.event,n=t.isTargetListItem,s=t.focusedItemIndex,r=t.focusItemAtIndex,o=t.sortedIndexByFirstChar,a=t.isItemAtIndexDisabled,l="ArrowLeft"===uk(i),c="ArrowUp"===uk(i),h="ArrowRight"===uk(i),u="ArrowDown"===uk(i),d="Home"===uk(i),p="End"===uk(i),f="Enter"===uk(i),m="Spacebar"===uk(i);return i.altKey||i.ctrlKey||i.metaKey||l||c||h||u||d||p||f?-1:m||1!==i.key.length?m?(n&&pk(i),n&&mk(e)?fk({focusItemAtIndex:r,focusedItemIndex:s,nextChar:" ",sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a},e):-1):-1:(pk(i),fk({focusItemAtIndex:r,focusedItemIndex:s,nextChar:i.key.toLowerCase(),sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a},e))}var yk=["Alt","Control","Meta","Shift"];function _k(t){var e=new Set(t?yk.filter((function(e){return t.getModifierState(e)})):[]);return function(t){return t.every((function(t){return e.has(t)}))&&t.length===e.size}}var bk=function(t){function e(i){var n=t.call(this,Wg(Wg({},e.defaultAdapter),i))||this;return n.wrapFocus=!1,n.isVertical=!0,n.isSingleSelectionList=!1,n.areDisabledItemsFocusable=!0,n.selectedIndex=PD.UNSET_INDEX,n.focusedItemIndex=PD.UNSET_INDEX,n.useActivatedClass=!1,n.useSelectedAttr=!1,n.ariaCurrentAttrValue=null,n.isCheckboxList=!1,n.isRadioList=!1,n.lastSelectedIndex=null,n.hasTypeahead=!1,n.typeaheadState={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""},n.sortedIndexByFirstChar=new Map,n}return Kg(e,t),Object.defineProperty(e,"strings",{get:function(){return kD},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return AD},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return PD},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},notifySelectionChange:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){0!==this.adapter.getListItemCount()&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(t){this.wrapFocus=t},e.prototype.setVerticalOrientation=function(t){this.isVertical=t},e.prototype.setSingleSelection=function(t){this.isSingleSelectionList=t,t&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.setDisabledItemsFocusable=function(t){this.areDisabledItemsFocusable=t},e.prototype.maybeInitializeSingleSelection=function(){var t=this.getSelectedIndexFromDOM();t!==PD.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(t,AD.LIST_ITEM_ACTIVATED_CLASS)&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=t)},e.prototype.getSelectedIndexFromDOM=function(){for(var t=PD.UNSET_INDEX,e=this.adapter.getListItemCount(),i=0;i<e;i++){var n=this.adapter.listItemAtIndexHasClass(i,AD.LIST_ITEM_SELECTED_CLASS),s=this.adapter.listItemAtIndexHasClass(i,AD.LIST_ITEM_ACTIVATED_CLASS);if(n||s){t=i;break}}return t},e.prototype.setHasTypeahead=function(t){this.hasTypeahead=t,t&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&mk(this.typeaheadState)},e.prototype.setUseActivatedClass=function(t){this.useActivatedClass=t},e.prototype.setUseSelectedAttribute=function(t){this.useSelectedAttr=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t,e){void 0===e&&(e={}),this.isIndexValid(t)&&(this.isCheckboxList?this.setCheckboxAtIndex(t,e):this.isRadioList?this.setRadioAtIndex(t,e):this.setSingleSelectionAtIndex(t,e))},e.prototype.handleFocusIn=function(t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},e.prototype.handleFocusOut=function(t){var e=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout((function(){e.adapter.isFocusInsideList()||e.setTabindexToFirstSelectedOrFocusedItem()}),0)},e.prototype.isIndexDisabled=function(t){return this.adapter.listItemAtIndexHasClass(t,AD.LIST_ITEM_DISABLED_CLASS)},e.prototype.handleKeydown=function(t,e,i){var n,s=this,r="ArrowLeft"===uk(t),o="ArrowUp"===uk(t),a="ArrowRight"===uk(t),l="ArrowDown"===uk(t),c="Home"===uk(t),h="End"===uk(t),u="Enter"===uk(t),d="Spacebar"===uk(t),p=this.isVertical&&l||!this.isVertical&&a,f=this.isVertical&&o||!this.isVertical&&r,m="A"===t.key||"a"===t.key,g=_k(t);if(this.adapter.isRootFocused()){if((f||h)&&g([]))t.preventDefault(),this.focusLastElement();else if((p||c)&&g([]))t.preventDefault(),this.focusFirstElement();else if(f&&g(["Shift"])&&this.isCheckboxList){t.preventDefault(),-1!==(_=this.focusLastElement())&&this.setSelectedIndexOnAction(_,!1)}else if(p&&g(["Shift"])&&this.isCheckboxList){t.preventDefault(),-1!==(_=this.focusFirstElement())&&this.setSelectedIndexOnAction(_,!1)}if(this.hasTypeahead){var v={event:t,focusItemAtIndex:function(t){s.focusItemAtIndex(t)},focusedItemIndex:-1,isTargetListItem:e,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(t){return s.isIndexDisabled(t)}};vk(v,this.typeaheadState)}}else{var y=this.adapter.getFocusedElementIndex();if(!(-1===y&&(y=i)<0)){if(p&&g([]))pk(t),this.focusNextElement(y);else if(f&&g([]))pk(t),this.focusPrevElement(y);else if(p&&g(["Shift"])&&this.isCheckboxList){pk(t),-1!==(_=this.focusNextElement(y))&&this.setSelectedIndexOnAction(_,!1)}else if(f&&g(["Shift"])&&this.isCheckboxList){var _;pk(t),-1!==(_=this.focusPrevElement(y))&&this.setSelectedIndexOnAction(_,!1)}else if(c&&g([]))pk(t),this.focusFirstElement();else if(h&&g([]))pk(t),this.focusLastElement();else if(c&&g(["Control","Shift"])&&this.isCheckboxList){if(pk(t),this.isIndexDisabled(y))return;this.focusFirstElement(),this.toggleCheckboxRange(0,y,y)}else if(h&&g(["Control","Shift"])&&this.isCheckboxList){if(pk(t),this.isIndexDisabled(y))return;this.focusLastElement(),this.toggleCheckboxRange(y,this.adapter.getListItemCount()-1,y)}else if(m&&g(["Control"])&&this.isCheckboxList)t.preventDefault(),this.checkboxListToggleAll(this.selectedIndex===PD.UNSET_INDEX?[]:this.selectedIndex,!0);else if((u||d)&&g([])){if(e){if((b=t.target)&&"A"===b.tagName&&u)return;if(pk(t),this.isIndexDisabled(y))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(y,!1),this.adapter.notifyAction(y))}}else if((u||d)&&g(["Shift"])&&this.isCheckboxList){var b;if((b=t.target)&&"A"===b.tagName&&u)return;if(pk(t),this.isIndexDisabled(y))return;this.isTypeaheadInProgress()||(this.toggleCheckboxRange(null!==(n=this.lastSelectedIndex)&&void 0!==n?n:y,y,y),this.adapter.notifyAction(y))}if(this.hasTypeahead){v={event:t,focusItemAtIndex:function(t){s.focusItemAtIndex(t)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:e,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(t){return s.isIndexDisabled(t)}};vk(v,this.typeaheadState)}}}},e.prototype.handleClick=function(t,e,i){var n,s=_k(i);t!==PD.UNSET_INDEX&&(this.isIndexDisabled(t)||(s([])?(this.isSelectableList()&&this.setSelectedIndexOnAction(t,e),this.adapter.notifyAction(t)):this.isCheckboxList&&s(["Shift"])&&(this.toggleCheckboxRange(null!==(n=this.lastSelectedIndex)&&void 0!==n?n:t,t,t),this.adapter.notifyAction(t))))},e.prototype.focusNextElement=function(t){var e=this.adapter.getListItemCount(),i=t,n=null;do{if(++i>=e){if(!this.wrapFocus)return t;i=0}if(i===n)return-1;n=null!=n?n:i}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(i));return this.focusItemAtIndex(i),i},e.prototype.focusPrevElement=function(t){var e=this.adapter.getListItemCount(),i=t,n=null;do{if(--i<0){if(!this.wrapFocus)return t;i=e-1}if(i===n)return-1;n=null!=n?n:i}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(i));return this.focusItemAtIndex(i),i},e.prototype.focusFirstElement=function(){return this.focusNextElement(-1)},e.prototype.focusLastElement=function(){return this.focusPrevElement(this.adapter.getListItemCount())},e.prototype.focusInitialElement=function(){var t=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(t),t},e.prototype.setEnabled=function(t,e){this.isIndexValid(t,!1)&&(e?(this.adapter.removeClassForElementIndex(t,AD.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,kD.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(t,AD.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,kD.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(t,e){if(void 0===e&&(e={}),this.selectedIndex!==t||e.forceUpdate){var i=AD.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(i=AD.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==PD.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,i),this.setAriaForSingleSelectionAtIndex(t),this.setTabindexAtIndex(t),t!==PD.UNSET_INDEX&&this.adapter.addClassForElementIndex(t,i),this.selectedIndex=t,e.isUserInteraction&&!e.forceUpdate&&this.adapter.notifySelectionChange([t])}},e.prototype.setAriaForSingleSelectionAtIndex=function(t){this.selectedIndex===PD.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(t,kD.ARIA_CURRENT));var e=null!==this.ariaCurrentAttrValue,i=e?kD.ARIA_CURRENT:kD.ARIA_SELECTED;if(this.selectedIndex!==PD.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,i,"false"),t!==PD.UNSET_INDEX){var n=e?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(t,i,n)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?kD.ARIA_SELECTED:kD.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(t,e){void 0===e&&(e={});var i=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(t,!0),(this.selectedIndex!==t||e.forceUpdate)&&(this.selectedIndex!==PD.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,i,"false"),this.adapter.setAttributeForElementIndex(t,i,"true"),this.selectedIndex=t,e.isUserInteraction&&!e.forceUpdate&&this.adapter.notifySelectionChange([t]))},e.prototype.setCheckboxAtIndex=function(t,e){void 0===e&&(e={});for(var i=this.selectedIndex,n=e.isUserInteraction?new Set(i===PD.UNSET_INDEX?[]:i):null,s=this.getSelectionAttribute(),r=[],o=0;o<this.adapter.getListItemCount();o++){var a=null==n?void 0:n.has(o),l=t.indexOf(o)>=0;l!==a&&r.push(o),this.adapter.setCheckedCheckboxOrRadioAtIndex(o,l),this.adapter.setAttributeForElementIndex(o,s,l?"true":"false")}this.selectedIndex=t,e.isUserInteraction&&r.length&&this.adapter.notifySelectionChange(r)},e.prototype.toggleCheckboxRange=function(t,e,i){this.lastSelectedIndex=i;for(var n=new Set(this.selectedIndex===PD.UNSET_INDEX?[]:this.selectedIndex),s=!(null==n?void 0:n.has(i)),r=Ug([t,e].sort(),2),o=r[0],a=r[1],l=this.getSelectionAttribute(),c=[],h=o;h<=a;h++){if(!this.isIndexDisabled(h))s!==n.has(h)&&(c.push(h),this.adapter.setCheckedCheckboxOrRadioAtIndex(h,s),this.adapter.setAttributeForElementIndex(h,l,""+s),s?n.add(h):n.delete(h))}c.length&&(this.selectedIndex=Gg([],Ug(n)),this.adapter.notifySelectionChange(c))},e.prototype.setTabindexAtIndex=function(t){this.focusedItemIndex===PD.UNSET_INDEX&&0!==t?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==t&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),this.selectedIndex instanceof Array||this.selectedIndex===t||this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),t!==PD.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(t,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var t=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(t)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?"number"==typeof this.selectedIndex&&this.selectedIndex!==PD.UNSET_INDEX?this.selectedIndex:this.selectedIndex instanceof Array&&this.selectedIndex.length>0?this.selectedIndex.reduce((function(t,e){return Math.min(t,e)})):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(t,e){var i=this;if(void 0===e&&(e=!0),t instanceof Array){if(!this.isCheckboxList&&e)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===t.length||t.some((function(t){return i.isIndexInRange(t)}))}if("number"==typeof t){if(this.isCheckboxList&&e)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return this.isIndexInRange(t)||this.isSingleSelectionList&&t===PD.UNSET_INDEX}return!1},e.prototype.isIndexInRange=function(t){var e=this.adapter.getListItemCount();return t>=0&&t<e},e.prototype.setSelectedIndexOnAction=function(t,e){this.lastSelectedIndex=t,this.isCheckboxList?(this.toggleCheckboxAtIndex(t,e),this.adapter.notifySelectionChange([t])):this.setSelectedIndex(t,{isUserInteraction:!0})},e.prototype.toggleCheckboxAtIndex=function(t,e){var i,n=this.getSelectionAttribute(),s=this.adapter.isCheckboxCheckedAtIndex(t);e?i=s:(i=!s,this.adapter.setCheckedCheckboxOrRadioAtIndex(t,i)),this.adapter.setAttributeForElementIndex(t,n,i?"true":"false");var r=this.selectedIndex===PD.UNSET_INDEX?[]:this.selectedIndex.slice();i?r.push(t):r=r.filter((function(e){return e!==t})),this.selectedIndex=r},e.prototype.focusItemAtIndex=function(t){this.adapter.focusItemAtIndex(t),this.focusedItemIndex=t},e.prototype.checkboxListToggleAll=function(t,e){var i=this.adapter.getListItemCount();if(t.length===i)this.setCheckboxAtIndex([],{isUserInteraction:e});else{for(var n=[],s=0;s<i;s++)(!this.isIndexDisabled(s)||t.indexOf(s)>-1)&&n.push(s);this.setCheckboxAtIndex(n,{isUserInteraction:e})}},e.prototype.typeaheadMatchItem=function(t,e,i){var n=this;void 0===i&&(i=!1);var s={focusItemAtIndex:function(t){n.focusItemAtIndex(t)},focusedItemIndex:e||this.focusedItemIndex,nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:i,isItemAtIndexDisabled:function(t){return n.isIndexDisabled(t)}};return fk(s,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return function(t,e){for(var i=new Map,n=0;n<t;n++){var s=e(n).trim();if(s){var r=s[0].toLowerCase();i.has(r)||i.set(r,[]),i.get(r).push({text:s.toLowerCase(),index:n})}}return i.forEach((function(t){t.sort((function(t,e){return t.index-e.index}))})),i}(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){gk(this.typeaheadState)},e}(nE),wk=bm("<svg><!></svg>");function xk(t,e){Yd(e,!0);let i=Sg(e,"use",19,(()=>[])),n=Sg(e,"tag",3,"div"),s=bg(e,["$$slots","$$events","$$legacy","use","tag","children"]);const r=xp((()=>["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(n())>-1));let o;var a=xm(),l=cp(a),c=t=>{var n=wk();og(n,(()=>({...s}))),Fm(lp(n),(()=>e.children??fd)),ug(n,(t=>o=t),(()=>o)),$m(n,((t,e)=>null==MA?void 0:MA(t,e)),i),Sm(t,n)},h=t=>{var a=xm(),l=cp(a),c=t=>{var e=xm();zm(cp(e),n,0,((t,e)=>{ug(t,(t=>o=t),(()=>o)),$m(t,((t,e)=>null==MA?void 0:MA(t,e)),i),og(t,(()=>({...s})))})),Sm(t,e)},h=t=>{var r=xm();zm(cp(r),n,0,((t,n)=>{ug(t,(t=>o=t),(()=>o)),$m(t,((t,e)=>null==MA?void 0:MA(t,e)),i),og(t,(()=>({...s})));var r=xm();Fm(cp(r),(()=>e.children??fd)),Sm(n,r)})),Sm(t,r)};Am(l,(t=>{If(r)?t(c):t(h,!1)}),!0),Sm(t,a)};return Am(l,(t=>{"svg"===n()?t(c):t(h,!1)})),Sm(t,a),Xd({getElement:function(){return o}})}function Sk(t,e){Yd(e,!0);const{closest:i,matches:n}=MD;let s,r=Gd("SMUI:list:nav"),o=Sg(e,"use",19,(()=>[])),a=Sg(e,"class",3,""),l=Sg(e,"nonInteractive",3,!1),c=Sg(e,"dense",3,!1),h=Sg(e,"textualList",3,!1),u=Sg(e,"avatarList",3,!1),d=Sg(e,"iconList",3,!1),p=Sg(e,"imageList",3,!1),f=Sg(e,"thumbnailList",3,!1),m=Sg(e,"videoList",3,!1),g=Sg(e,"twoLine",3,!1),v=Sg(e,"threeLine",3,!1),y=Sg(e,"vertical",3,!0),_=Sg(e,"wrapFocus",19,(()=>Gd("SMUI:list:wrapFocus")??!1)),b=Sg(e,"singleSelection",3,!1),w=Sg(e,"disabledItemsFocusable",3,!1),x=Sg(e,"selectedIndex",31,(()=>-1)),S=Sg(e,"radioList",3,!1),T=Sg(e,"checkList",3,!1),C=Sg(e,"hasTypeahead",3,!1),M=Sg(e,"component",3,xk),I=Sg(e,"tag",3,r?"nav":"ul"),E=bg(e,["$$slots","$$events","$$legacy","use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","disabledItemsFocusable","selectedIndex","radioList","checkList","hasTypeahead","component","tag","children"]),A=Gp(void 0),D=[],k=Gd("SMUI:list:role");const P=new WeakMap;let O,R=Gd("SMUI:dialog:selection"),L=Gd("SMUI:addLayoutListener");qd("SMUI:list:nonInteractive",l()),qd("SMUI:separator:context","list"),k||(b()?(k="listbox",qd("SMUI:list:item:role","option")):S()?(k="radiogroup",qd("SMUI:list:item:role","radio")):T()?(k="group",qd("SMUI:list:item:role","checkbox")):(k="list",qd("SMUI:list:item:role",void 0))),Ff((()=>{If(A)&&If(A).setVerticalOrientation(y())})),Ff((()=>{If(A)&&If(A).setWrapFocus(_())})),Ff((()=>{If(A)&&If(A).setHasTypeahead(C())})),Ff((()=>{If(A)&&If(A).setSingleSelection(b())})),Ff((()=>{If(A)&&If(A).setDisabledItemsFocusable(w())})),Ff((()=>{If(A)&&b()&&q()!==x()&&If(A).setSelectedIndex(x())})),L&&(O=L(G)),qd("SMUI:list:item:mount",(t=>{D.push(t),P.set(t.element,t),b()&&t.selected&&x(U(t.element))})),qd("SMUI:list:item:unmount",(t=>{const e=(t&&D.findIndex((e=>e===t)))??-1;-1!==e&&(D.splice(e,1),P.delete(t.element))}));const N=Gd("SMUI:list:mount"),F=Gd("SMUI:list:unmount");function B(){return null==s?[]:[...X().querySelectorAll(".mdc-deprecated-list-item")].map((t=>P.get(t))).filter((t=>t&&t._smui_list_item_accessor))}function z(t,e){const i=B()[t];return(i&&i.hasClass(e))??!1}function V(t,e){const i=B()[t];null==i||i.addClass(e)}function $(t,e){const i=B()[t];null==i||i.removeClass(e)}function H(t,e,i){const n=B()[t];null==n||n.addAttr(e,i)}function K(t,e){const i=B()[t];null==i||i.removeAttr(e)}function W(t,e){const i=B()[t];return i?i.getAttr(e):null}function j(t){const e=B()[t];return(e&&e.getPrimaryText())??""}function U(t){const e=i(t,".mdc-deprecated-list-item, .mdc-deprecated-list");return e&&n(e,".mdc-deprecated-list-item")?B().map((t=>null==t?void 0:t.element)).indexOf(e):-1}function G(){if(!If(A))throw new Error("Instance is undefined.");return If(A).layout()}function q(){if(!If(A))throw new Error("Instance is undefined.");return If(A).getSelectedIndex()}function Y(t){const e=B()[t];e&&"focus"in e.element&&e.element.focus()}function X(){return s.getElement()}Tg((()=>{Yp(A,new bk({addClassForElementIndex:V,focusItemAtIndex:Y,getAttributeForElementIndex:(t,e)=>{var i;return(null==(i=B()[t])?void 0:i.getAttr(e))??null},getFocusedElementIndex:()=>document.activeElement?B().map((t=>t.element)).indexOf(document.activeElement):-1,getListItemCount:()=>D.length,getPrimaryTextAtIndex:j,hasCheckboxAtIndex:t=>{var e;return(null==(e=B()[t])?void 0:e.hasCheckbox)??!1},hasRadioAtIndex:t=>{var e;return(null==(e=B()[t])?void 0:e.hasRadio)??!1},isCheckboxCheckedAtIndex:t=>{const e=B()[t];return((null==e?void 0:e.hasCheckbox)&&e.checked)??!1},isFocusInsideList:()=>null!=s&&X()!==document.activeElement&&X().contains(document.activeElement),isRootFocused:()=>null!=s&&document.activeElement===X(),listItemAtIndexHasClass:z,notifyAction:t=>{x(t),null!=s&&xA(X(),"SMUIListAction",{index:t})},notifySelectionChange:t=>{null!=s&&xA(X(),"SMUIListSelectionChange",{changedIndices:t})},removeClassForElementIndex:$,setAttributeForElementIndex:H,setCheckedCheckboxOrRadioAtIndex:(t,e)=>{B()[t].checked=e},setTabIndexForListItemChildren:(t,e)=>{const i=B()[t];Array.prototype.forEach.call(i.element.querySelectorAll("button:not(:disabled), a"),(t=>{t.setAttribute("tabindex",e)}))}}),!0);const t={get element(){return X()},get items(){return D},get typeaheadInProgress(){if(!If(A))throw new Error("Instance is undefined.");return If(A).isTypeaheadInProgress()},typeaheadMatchItem(t,e){if(!If(A))throw new Error("Instance is undefined.");return If(A).typeaheadMatchItem(t,e,!0)},getOrderedList:B,focusItemAtIndex:Y,addClassForElementIndex:V,removeClassForElementIndex:$,setAttributeForElementIndex:H,removeAttributeForElementIndex:K,getAttributeFromElementIndex:W,getPrimaryTextAtIndex:j};return null==N||N(t),If(A).init(),If(A).layout(),()=>{var e;null==F||F(t),null==(e=If(A))||e.destroy()}})),Cg((()=>{O&&O()}));var Z=xm(),Q=cp(Z);{let t=xp((()=>wA({[a()]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":l(),"mdc-deprecated-list--dense":c(),"mdc-deprecated-list--textual-list":h(),"mdc-deprecated-list--avatar-list":u()||R,"mdc-deprecated-list--icon-list":d(),"mdc-deprecated-list--image-list":p(),"mdc-deprecated-list--thumbnail-list":f(),"mdc-deprecated-list--video-list":m(),"mdc-deprecated-list--two-line":g(),"smui-list--three-line":v()&&!g()})));Bm(Q,M,((i,r)=>{ug(r(i,xg({get tag(){return I()},get use(){return o()},get class(){return If(t)},get role(){return k}},(()=>E),{onkeydown:t=>{var i,n;n=t,If(A)&&n.target&&If(A).handleKeydown(n,n.target.classList.contains("mdc-deprecated-list-item"),U(n.target)),null==(i=e.onkeydown)||i.call(e,t)},onfocusin:t=>{var i,n;n=t,If(A)&&n.target&&If(A).handleFocusIn(U(n.target)),null==(i=e.onfocusin)||i.call(e,t)},onfocusout:t=>{var i,n;n=t,If(A)&&n.target&&If(A).handleFocusOut(U(n.target)),null==(i=e.onfocusout)||i.call(e,t)},onclick:t=>{var i,s;s=t,If(A)&&s.target&&If(A).handleClick(U(s.target),!n(s.target,'input[type="checkbox"], input[type="radio"]'),s),null==(i=e.onclick)||i.call(e,t)},onSMUIAction:t=>{var i;!function(t){if(S()||T()){const e=U(t.target);if(-1!==e){const i=B()[e];i&&(S()&&!i.checked||T())&&(n(t.detail.target,'input[type="checkbox"], input[type="radio"]')||(i.checked=!i.checked),i.activateRipple(),window.requestAnimationFrame((()=>{i.deactivateRipple()})))}}}(t),null==(i=e.onSMUIAction)||i.call(e,t)},children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>s=t),(()=>s))}))}return Sm(t,Z),Xd({layout:G,setEnabled:function(t,e){if(!If(A))throw new Error("Instance is undefined.");return If(A).setEnabled(t,e)},getTypeaheadInProgress:function(){if(!If(A))throw new Error("Instance is undefined.");return If(A).isTypeaheadInProgress()},getSelectedIndex:q,getFocusedItemIndex:function(){if(!If(A))throw new Error("Instance is undefined.");return If(A).getFocusedItemIndex()},focusItemAtIndex:Y,getElement:X})}let Tk=0;function Ck(t,e){Yd(e,!0);let i=()=>{};let n,s=Gd("SMUI:list:item:nav"),r=Sg(e,"class",3,""),o=Sg(e,"style",3,""),a=Sg(e,"nonInteractive",19,(()=>Gd("SMUI:list:nonInteractive")??!1)),l=Sg(e,"wrapper",3,!1),c=Sg(e,"activated",15,!1),h=Sg(e,"role",19,(()=>l()?"presentation":Gd("SMUI:list:item:role"))),u=Sg(e,"selected",15,!1),d=Sg(e,"disabled",3,!1),p=Sg(e,"skipRestoreFocus",3,!1),f=Sg(e,"tabindex",15,i),m=Sg(e,"inputId",19,(()=>"SMUI-form-field-list-"+Tk++)),g=Sg(e,"component",3,xk),v=Sg(e,"tag",19,(()=>s?e.href?"a":"span":"li")),y=bg(e,["$$slots","$$events","$$legacy","class","style","nonInteractive","wrapper","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","tag","children"]);qd("SMUI:list:nonInteractive",void 0),qd("SMUI:list:item:role",void 0);let _=Jd({}),b=Jd({}),w=Jd({}),x=Gp(void 0),S=Gp(void 0);const T=xp((()=>f()===i?a()||d()||!(u()||If(x)&&If(x).checked)?-1:0:f()));qd("SMUI:generic:input:props",{id:m()}),qd("SMUI:separator:context",void 0),qd("SMUI:generic:input:mount",(t=>{("_smui_checkbox_accessor"in t||"_smui_radio_accessor"in t)&&Yp(x,t,!0)})),qd("SMUI:generic:input:unmount",(()=>{Yp(x,void 0)}));const C=Gd("SMUI:list:item:mount"),M=Gd("SMUI:list:item:unmount");function I(t){return t in _?_[t]:L().classList.contains(t)}function E(t){_[t]||(_[t]=!0)}function A(t){t in _&&!_[t]||(_[t]=!1)}function D(t){return t in w?w[t]??null:L().getAttribute(t)}function k(t,e){w[t]!==e&&(w[t]=e)}function P(t){t in w&&null==w[t]||(w[t]=void 0)}function O(t){d()||xA(L(),"SMUIAction",t)}function R(){const t=L(),e=t.querySelector(".mdc-deprecated-list-item__primary-text");if(e)return e.textContent??"";const i=t.querySelector(".mdc-deprecated-list-item__text");return i?i.textContent??"":t.textContent??""}function L(){return n.getElement()}Tg((()=>{if(!u()&&!a()){let t=!0,e=n.getElement();for(;e.previousElementSibling;)if(e=e.previousElementSibling,1===e.nodeType&&e.classList.contains("mdc-deprecated-list-item")&&!e.classList.contains("mdc-deprecated-list-item--disabled")){t=!1;break}t&&Yp(S,window.requestAnimationFrame((()=>function(t){let e=!0;for(;t.nextElementSibling;)if(1===(t=t.nextElementSibling).nodeType&&t.classList.contains("mdc-deprecated-list-item")){const i=t.attributes.getNamedItem("tabindex");if(i&&"0"===i.value){e=!1;break}}e&&f(0)}(e))),!0)}const t={_smui_list_item_accessor:!0,get element(){return L()},get selected(){return u()},set selected(t){u(t)},hasClass:I,addClass:E,removeClass:A,getAttr:D,addAttr:k,removeAttr:P,getPrimaryText:R,get checked(){return(If(x)&&If(x).checked)??!1},set checked(t){If(x)&&(If(x).checked=!!t)},get hasCheckbox(){return!(!If(x)||!("_smui_checkbox_accessor"in If(x)))},get hasRadio(){return!(!If(x)||!("_smui_radio_accessor"in If(x)))},activateRipple(){},deactivateRipple(){},getValue:()=>e.value,action:O,get tabindex(){return If(T)},set tabindex(t){f(t)},get disabled(){return d()},get activated(){return c()},set activated(t){c(t)}};return null==C||C(t),()=>{null==M||M(t)}})),Cg((()=>{If(S)&&window.cancelAnimationFrame(If(S))}));var N=xm(),F=cp(N);{let t=xp((()=>wA({[r()]:!0,"mdc-deprecated-list-item":!l(),"mdc-deprecated-list-item__wrapper":l(),"mdc-deprecated-list-item--activated":c(),"mdc-deprecated-list-item--selected":u(),"mdc-deprecated-list-item--disabled":d(),"mdc-menu-item--selected":!s&&"menuitem"===h()&&u(),"smui-menu-item--non-interactive":a(),..._}))),i=xp((()=>Object.entries(b).map((([t,e])=>`${t}: ${e};`)).concat([o()]).join(" "))),f=xp((()=>p()||void 0));Bm(F,g,((r,o)=>{ug(o(r,xg({get tag(){return v()},get class(){return If(t)},get style(){return If(i)}},(()=>s&&c()?{"aria-current":"page"}:{}),(()=>!s||l()?{role:h()}:{}),(()=>s||"option"!==h()?{}:{"aria-selected":u()?"true":"false"}),(()=>s||"radio"!==h()&&"checkbox"!==h()?{}:{"aria-checked":If(x)&&If(x).checked?"true":"false"}),(()=>s?{}:{"aria-disabled":d()?"true":"false"}),{get"data-menu-item-skip-restore-focus"(){return If(f)},get tabindex(){return If(T)},get href(){return e.href}},(()=>w),(()=>y),{onclick:t=>{var i;a()?(t.preventDefault(),t.stopImmediatePropagation()):O(t),null==(i=e.onclick)||i.call(e,t)},onkeydown:t=>{var i;a()?(t.preventDefault(),t.stopImmediatePropagation()):function(t){const e="Enter"===t.key,i="Space"===t.key;(e||i)&&O(t)}(t),null==(i=e.onkeydown)||i.call(e,t)},children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>n=t),(()=>n))}))}return Sm(t,N),Xd({action:O,getPrimaryText:R,getElement:L})}const Mk={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},Ik={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",OPENING_EVENT:"MDCMenuSurface:opening",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Ek={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30};var Ak=(t=>(t[t.BOTTOM=1]="BOTTOM",t[t.CENTER=2]="CENTER",t[t.RIGHT=4]="RIGHT",t[t.FLIP_RTL=8]="FLIP_RTL",t))(Ak||{}),Dk=(t=>(t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=4]="TOP_RIGHT",t[t.BOTTOM_LEFT=1]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",t[t.TOP_START=8]="TOP_START",t[t.TOP_END=12]="TOP_END",t[t.BOTTOM_START=9]="BOTTOM_START",t[t.BOTTOM_END=13]="BOTTOM_END",t))(Dk||{});class kk extends nE{constructor(t){super({...kk.defaultAdapter,...t}),this.isSurfaceOpen=!1,this.isQuickOpen=!1,this.isHoistedElement=!1,this.isFixedPosition=!1,this.isHorizontallyCenteredOnViewport=!1,this.maxHeight=0,this.openBottomBias=0,this.openAnimationEndTimerId=0,this.closeAnimationEndTimerId=0,this.animationRequestId=0,this.anchorCorner=Dk.TOP_START,this.originCorner=Dk.TOP_START,this.anchorMargin={top:0,right:0,bottom:0,left:0},this.position={x:0,y:0}}static get cssClasses(){return Mk}static get strings(){return Ik}static get numbers(){return Ek}static get Corner(){return Dk}static get defaultAdapter(){return{addClass:()=>{},removeClass:()=>{},hasClass:()=>!1,hasAnchor:()=>!1,isElementInContainer:()=>!1,isFocused:()=>!1,isRtl:()=>!1,getInnerDimensions:()=>({height:0,width:0}),getAnchorDimensions:()=>null,getViewportDimensions:()=>({height:0,width:0}),getBodyDimensions:()=>({height:0,width:0}),getWindowScroll:()=>({x:0,y:0}),setPosition:()=>{},setMaxHeight:()=>{},setTransformOrigin:()=>{},saveFocus:()=>{},restoreFocus:()=>{},notifyClose:()=>{},notifyClosing:()=>{},notifyOpen:()=>{},notifyOpening:()=>{},registerWindowEventHandler:()=>{},deregisterWindowEventHandler:()=>{}}}init(){const{ROOT:t,OPEN:e}=kk.cssClasses;if(!this.adapter.hasClass(t))throw new Error(`${t} class required in root element.`);this.adapter.hasClass(e)&&(this.isSurfaceOpen=!0),this.resizeListener=this.handleResize.bind(this),this.adapter.registerWindowEventHandler("resize",this.resizeListener)}destroy(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId),this.adapter.deregisterWindowEventHandler("resize",this.resizeListener)}setAnchorCorner(t){this.anchorCorner=t}flipCornerHorizontally(){this.originCorner=this.originCorner^Ak.RIGHT}setAnchorMargin(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0}setIsHoisted(t){this.isHoistedElement=t}setFixedPosition(t){this.isFixedPosition=t}isFixed(){return this.isFixedPosition}setAbsolutePosition(t,e){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(e)?e:0}setIsHorizontallyCenteredOnViewport(t){this.isHorizontallyCenteredOnViewport=t}setQuickOpen(t){this.isQuickOpen=t}setMaxHeight(t){this.maxHeight=t}setOpenBottomBias(t){this.openBottomBias=t}isOpen(){return this.isSurfaceOpen}open(){this.isSurfaceOpen||(this.adapter.notifyOpening(),this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(kk.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(kk.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame((()=>{this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.addClass(kk.cssClasses.OPEN),this.openAnimationEndTimerId=setTimeout((()=>{this.openAnimationEndTimerId=0,this.adapter.removeClass(kk.cssClasses.ANIMATING_OPEN),this.adapter.notifyOpen()}),Ek.TRANSITION_OPEN_DURATION)})),this.isSurfaceOpen=!0),this.adapter.registerWindowEventHandler("resize",this.resizeListener))}close(t=!1){if(this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.adapter.deregisterWindowEventHandler("resize",this.resizeListener),this.isQuickOpen)return this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(kk.cssClasses.OPEN),this.adapter.removeClass(kk.cssClasses.IS_OPEN_BELOW),void this.adapter.notifyClose();this.adapter.addClass(kk.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((()=>{this.adapter.removeClass(kk.cssClasses.OPEN),this.adapter.removeClass(kk.cssClasses.IS_OPEN_BELOW),this.closeAnimationEndTimerId=setTimeout((()=>{this.closeAnimationEndTimerId=0,this.adapter.removeClass(kk.cssClasses.ANIMATING_CLOSED),this.adapter.notifyClose()}),Ek.TRANSITION_CLOSE_DURATION)})),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()}}handleBodyClick(t){const e=t.target;this.adapter.isElementInContainer(e)||this.close()}handleKeydown(t){const{keyCode:e,key:i}=t;("Escape"===i||27===e)&&this.close()}handleResize(){this.dimensions=this.adapter.getInnerDimensions(),this.autoposition()}autoposition(){this.measurements=this.getAutoLayoutmeasurements();const t=this.getoriginCorner(),e=this.getMenuSurfaceMaxHeight(t),i=this.hasBit(t,Ak.BOTTOM)?"bottom":"top";let n=this.hasBit(t,Ak.RIGHT)?"right":"left";const s=this.getHorizontalOriginOffset(t),r=this.getVerticalOriginOffset(t),{anchorSize:o,surfaceSize:a}=this.measurements,l={[n]:s,[i]:r};o.width/a.width>Ek.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(n="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(l),this.adapter.setTransformOrigin(`${n} ${i}`),this.adapter.setPosition(l),this.adapter.setMaxHeight(e?e+"px":""),this.hasBit(t,Ak.BOTTOM)||this.adapter.addClass(kk.cssClasses.IS_OPEN_BELOW)}getAutoLayoutmeasurements(){let t=this.adapter.getAnchorDimensions();const e=this.adapter.getBodyDimensions(),i=this.adapter.getViewportDimensions(),n=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:e,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:i.width-t.right,bottom:i.height-t.bottom,left:t.left},viewportSize:i,windowScroll:n}}getoriginCorner(){let t=this.originCorner;const{viewportDistance:e,anchorSize:i,surfaceSize:n}=this.measurements,{MARGIN_TO_EDGE:s}=kk.numbers;let r,o;this.hasBit(this.anchorCorner,Ak.BOTTOM)?(r=e.top-s+this.anchorMargin.bottom,o=e.bottom-s-this.anchorMargin.bottom):(r=e.top-s+this.anchorMargin.top,o=e.bottom-s+i.height-this.anchorMargin.top);!(o-n.height>0)&&r>o+this.openBottomBias&&(t=this.setBit(t,Ak.BOTTOM));const a=this.adapter.isRtl(),l=this.hasBit(this.anchorCorner,Ak.FLIP_RTL),c=this.hasBit(this.anchorCorner,Ak.RIGHT)||this.hasBit(t,Ak.RIGHT);let h,u,d=!1;d=a&&l?!c:c,d?(h=e.left+i.width+this.anchorMargin.left,u=e.right-this.anchorMargin.left):(h=e.left+this.anchorMargin.left,u=e.right+i.width-this.anchorMargin.left);const p=h-n.width>0,f=u-n.width>0,m=this.hasBit(t,Ak.FLIP_RTL)&&this.hasBit(t,Ak.RIGHT);return f&&m&&a||!p&&m?t=this.unsetBit(t,Ak.RIGHT):(p&&d&&a||p&&!d&&c||!f&&h>=u)&&(t=this.setBit(t,Ak.RIGHT)),t}getMenuSurfaceMaxHeight(t){if(this.maxHeight>0)return this.maxHeight;const{viewportDistance:e}=this.measurements;let i=0;const n=this.hasBit(t,Ak.BOTTOM),s=this.hasBit(this.anchorCorner,Ak.BOTTOM),{MARGIN_TO_EDGE:r}=kk.numbers;return n?(i=e.top+this.anchorMargin.top-r,s||(i+=this.measurements.anchorSize.height)):(i=e.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-r,s&&(i-=this.measurements.anchorSize.height)),i}getHorizontalOriginOffset(t){const{anchorSize:e}=this.measurements,i=this.hasBit(t,Ak.RIGHT),n=this.hasBit(this.anchorCorner,Ak.RIGHT);if(i){const t=n?e.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?t-(this.measurements.viewportSize.width-this.measurements.bodySize.width):t}return n?e.width-this.anchorMargin.right:this.anchorMargin.left}getVerticalOriginOffset(t){const{anchorSize:e}=this.measurements,i=this.hasBit(t,Ak.BOTTOM),n=this.hasBit(this.anchorCorner,Ak.BOTTOM);let s=0;return s=i?n?e.height-this.anchorMargin.top:-this.anchorMargin.bottom:n?e.height+this.anchorMargin.bottom:this.anchorMargin.top,s}adjustPositionForHoistedElement(t){const{windowScroll:e,viewportDistance:i,surfaceSize:n,viewportSize:s}=this.measurements,r=Object.keys(t);for(const o of r){let r=t[o]||0;!this.isHorizontallyCenteredOnViewport||"left"!==o&&"right"!==o?(r+=i[o],this.isFixedPosition||("top"===o?r+=e.y:"bottom"===o?r-=e.y:"left"===o?r+=e.x:r-=e.x),t[o]=r):t[o]=(s.width-n.width)/2}}maybeRestoreFocus(){const t=this.adapter.isFocused(),e=this.adapter.getOwnerDocument?this.adapter.getOwnerDocument():document,i=e.activeElement&&this.adapter.isElementInContainer(e.activeElement);(t||i)&&setTimeout((()=>{this.adapter.restoreFocus()}),Ek.TOUCH_EVENT_WAIT_MS)}hasBit(t,e){return Boolean(t&e)}setBit(t,e){return t|e}unsetBit(t,e){return t^e}isFinite(t){return"number"==typeof t&&isFinite(t)}}const Pk={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Ok={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},Rk={FOCUS_ROOT_INDEX:-1};var Lk=(t=>(t[t.NONE=0]="NONE",t[t.LIST_ROOT=1]="LIST_ROOT",t[t.FIRST_ITEM=2]="FIRST_ITEM",t[t.LAST_ITEM=3]="LAST_ITEM",t))(Lk||{});class Nk extends nE{constructor(t){super({...Nk.defaultAdapter,...t}),this.defaultFocusState=Lk.LIST_ROOT,this.selectedIndex=-1}static get cssClasses(){return Pk}static get strings(){return Ok}static get numbers(){return Rk}static get defaultAdapter(){return{addClassToElementAtIndex:()=>{},removeClassFromElementAtIndex:()=>{},addAttributeToElementAtIndex:()=>{},removeAttributeFromElementAtIndex:()=>{},getAttributeFromElementAtIndex:()=>null,elementContainsClass:()=>!1,closeSurface:()=>{},getElementIndex:()=>-1,notifySelected:()=>{},getMenuItemCount:()=>0,focusItemAtIndex:()=>{},focusListRoot:()=>{},getSelectedSiblingOfItemAtIndex:()=>-1,isSelectableItemAtIndex:()=>!1}}destroy(){this.adapter.closeSurface()}handleKeydown(t){const{key:e,keyCode:i}=t;("Tab"===e||9===i)&&this.adapter.closeSurface(!0)}handleItemAction(t){const e=this.adapter.getElementIndex(t);if(e<0)return;this.adapter.notifySelected({index:e});const i="true"===this.adapter.getAttributeFromElementAtIndex(e,Ok.SKIP_RESTORE_FOCUS);this.adapter.closeSurface(i),this.adapter.isSelectableItemAtIndex(e)&&this.setSelectedIndex(e)}handleMenuSurfaceOpened(){switch(this.defaultFocusState){case Lk.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case Lk.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case Lk.NONE:break;default:this.adapter.focusListRoot()}}setDefaultFocusState(t){this.defaultFocusState=t}getSelectedIndex(){return this.selectedIndex}setSelectedIndex(t){if(this.validatedIndex(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");const e=this.adapter.getSelectedSiblingOfItemAtIndex(t);e>=0&&(this.adapter.removeAttributeFromElementAtIndex(e,Ok.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(e,Pk.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,Pk.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,Ok.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=t}setEnabled(t,e){this.validatedIndex(t),e?(this.adapter.removeClassFromElementAtIndex(t,AD.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,Ok.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,AD.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,Ok.ARIA_DISABLED_ATTR,"true"))}validatedIndex(t){const e=this.adapter.getMenuItemCount();if(!(t>=0&&t<e))throw new Error("MDCMenuFoundation: No list item at specified index.")}}var Fk=ym("<div><!></div>");function Bk(t,{addClass:e=e=>t.classList.add(e),removeClass:i=e=>t.classList.remove(e)}={}){return e("mdc-menu-surface--anchor"),{destroy(){i("mdc-menu-surface--anchor")}}}function zk(t,e){Yd(e,!0);const{closest:i}=MD;let n,s=Sg(e,"use",19,(()=>[])),r=Sg(e,"class",3,""),o=Sg(e,"open",15,!1),a=Sg(e,"anchorElement",15),l=Sg(e,"managed",3,!1),c=bg(e,["$$slots","$$events","$$legacy","use","class","open","anchorElement","managed","children"]),h=Gp(void 0),u=Gp(void 0),d=Gp(void 0);qd("SMUI:menu-surface:mount",(t=>{If(u)||Yp(u,t,!0)}));const p=Gd("SMUI:list:mount");qd("SMUI:list:mount",(t=>{If(d)||Yp(d,t,!0),null==p||p(t)}));const f=Gd("SMUI:menu:mount"),m=Gd("SMUI:menu:unmount");function g(){return n.getElement()}Tg((()=>(Yp(h,new Nk({addClassToElementAtIndex:(t,e)=>{if(null==If(d))throw new Error("List accessor is undefined.");If(d).addClassForElementIndex(t,e)},removeClassFromElementAtIndex:(t,e)=>{if(null==If(d))throw new Error("List accessor is undefined.");If(d).removeClassForElementIndex(t,e)},addAttributeToElementAtIndex:(t,e,i)=>{if(null==If(d))throw new Error("List accessor is undefined.");If(d).setAttributeForElementIndex(t,e,i)},removeAttributeFromElementAtIndex:(t,e)=>{if(null==If(d))throw new Error("List accessor is undefined.");If(d).removeAttributeForElementIndex(t,e)},getAttributeFromElementAtIndex:(t,e)=>{if(null==If(d))throw new Error("List accessor is undefined.");return If(d).getAttributeFromElementIndex(t,e)},elementContainsClass:(t,e)=>t.classList.contains(e),closeSurface:t=>{var e;if(!l()){null==(e=If(u))||e.closeProgrammatic(t);if(!g())return;xA(g(),"SMUIMenuClosedProgrammatically")}},getElementIndex:t=>{if(null==If(d))throw new Error("List accessor is undefined.");return If(d).getOrderedList().map((t=>t.element)).indexOf(t)},notifySelected:t=>{if(null==If(d))throw new Error("List accessor is undefined.");xA(g(),"SMUIMenuSelected",{index:t.index,item:If(d).getOrderedList()[t.index].element})},getMenuItemCount:()=>{if(null==If(d))throw new Error("List accessor is undefined.");return If(d).items.length},focusItemAtIndex:t=>{if(null==If(d))throw new Error("List accessor is undefined.");If(d).focusItemAtIndex(t)},focusListRoot:()=>{if(null==If(d))throw new Error("List accessor is undefined.");"focus"in If(d).element&&If(d).element.focus()},isSelectableItemAtIndex:t=>{if(null==If(d))throw new Error("List accessor is undefined.");return!!i(If(d).getOrderedList()[t].element,`.${Pk.MENU_SELECTION_GROUP}`)},getSelectedSiblingOfItemAtIndex:t=>{if(null==If(d))throw new Error("List accessor is undefined.");const e=If(d).getOrderedList(),n=i(e[t].element,`.${Pk.MENU_SELECTION_GROUP}`),s=null==n?void 0:n.querySelector(`.${Pk.MENU_SELECTED_LIST_ITEM}`);return s?e.map((t=>t.element)).indexOf(s):-1}}),!0),null==f||f(If(h)),If(h).init(),()=>{var t;m&&If(h)&&m(If(h)),null==(t=If(h))||t.destroy(),n=null,Yp(h,null)})));{let i=xp((()=>wA({[r()]:!0,"mdc-menu":!0})));ug(function(t,e){Yd(e,!0);let i,n=Sg(e,"use",19,(()=>[])),s=Sg(e,"class",3,""),r=Sg(e,"style",3,""),o=Sg(e,"static",3,!1),a=Sg(e,"anchor",3,!0),l=Sg(e,"fixed",3,!1),c=Sg(e,"open",31,(()=>Jd(o()))),h=Sg(e,"managed",3,!1),u=Sg(e,"fullWidth",3,!1),d=Sg(e,"quickOpen",3,!1),p=Sg(e,"anchorElement",15),f=Sg(e,"anchorMargin",19,(()=>({top:0,right:0,bottom:0,left:0}))),m=Sg(e,"maxHeight",3,0),g=Sg(e,"horizontallyCenteredOnViewport",3,!1),v=Sg(e,"openBottomBias",3,0),y=Sg(e,"neverRestoreFocus",3,!1),_=Sg(e,"hoisted",3,!1),b=bg(e,["$$slots","$$events","$$legacy","use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","openBottomBias","neverRestoreFocus","hoisted","children"]),w=Gp(void 0),x=Jd({}),S=Jd({}),T=Gp(void 0);qd("SMUI:list:role","menu"),qd("SMUI:list:item:role","menuitem"),Ff((()=>{var t,e;i&&a()&&!(null==(t=i.parentElement)?void 0:t.classList.contains("mdc-menu-surface--anchor"))&&(null==(e=i.parentElement)||e.classList.add("mdc-menu-surface--anchor"),p(i.parentElement??void 0))})),Ff((()=>{If(w)&&If(w).isOpen()!==c()&&(c()?If(w).open():If(w).close())})),Ff((()=>{_()&&If(w)&&If(w).setIsHoisted(_())})),Ff((()=>{If(w)&&If(w).setQuickOpen(d())})),Ff((()=>{If(w)&&If(w).setFixedPosition(l())})),Ff((()=>{If(w)&&If(w).setMaxHeight(m())})),Ff((()=>{If(w)&&If(w).setIsHorizontallyCenteredOnViewport(g())}));const C=Dk;Ff((()=>{If(w)&&null!=e.anchorCorner&&("string"==typeof e.anchorCorner?If(w).setAnchorCorner(C[e.anchorCorner]):If(w).setAnchorCorner(e.anchorCorner))})),Ff((()=>{If(w)&&If(w).setAnchorMargin(f())})),Ff((()=>{If(w)&&If(w).setOpenBottomBias(v())}));const M=Gd("SMUI:menu-surface:mount"),I=Gd("SMUI:menu-surface:unmount");function E(t){return t in x?x[t]:O().classList.contains(t)}function A(t){x[t]||(x[t]=!0)}function D(t){t in x&&!x[t]||(x[t]=!1)}function k(t){var e;null==(e=If(w))||e.close(t),c(!1)}function P(t){If(w)&&c()&&!h()&&If(w).handleBodyClick(t)}function O(){return i}Tg((()=>{Yp(w,new kk({addClass:A,removeClass:D,hasClass:E,hasAnchor:()=>!!p(),notifyClose:()=>{h()||c(o()),c()||xA(O(),"SMUIMenuSurfaceClosed")},notifyClosing:()=>{h()||c(o()),c()||xA(O(),"SMUIMenuSurfaceClosing")},notifyOpen:()=>{h()||c(!0),c()&&xA(O(),"SMUIMenuSurfaceOpened")},notifyOpening:()=>{c()||xA(O(),"SMUIMenuSurfaceOpening")},isElementInContainer:t=>O().contains(t),isRtl:()=>"rtl"===getComputedStyle(O()).getPropertyValue("direction"),setTransformOrigin:t=>{S["transform-origin"]=t},isFocused:()=>document.activeElement===O(),saveFocus:()=>{Yp(T,document.activeElement??void 0,!0)},restoreFocus:()=>{!y()&&(!i||O().contains(document.activeElement))&&If(T)&&document.contains(If(T))&&"focus"in If(T)&&If(T).focus()},getInnerDimensions:()=>{const t=O(),e="none"===getComputedStyle(t).display;e&&t.classList.add("smui-menu-surface--measure");let i=O().offsetWidth,n=O().offsetHeight;return e&&t.classList.remove("smui-menu-surface--measure"),{width:i,height:n}},getAnchorDimensions:()=>p()?p().getBoundingClientRect():null,getViewportDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:t=>{S.left="left"in t?`${t.left}px`:"",S.right="right"in t?`${t.right}px`:"",S.top="top"in t?`${t.top}px`:"",S.bottom="bottom"in t?`${t.bottom}px`:""},setMaxHeight:t=>{S["max-height"]=t}}),!0);const t={get open(){return c()},set open(t){c(t)},closeProgrammatic:k};return M&&M(t),If(w).init(),()=>{var e,n;I&&I(t);const s=If(w).isHoistedElement;null==(e=If(w))||e.destroy(),s&&(null==(n=O().parentNode)||n.removeChild(O())),i=null,Yp(w,null)}})),Tg((()=>(document.body.addEventListener("pointerup",P,{capture:!0}),()=>{document.body.removeEventListener("pointerup",P,{capture:!0})}))),Cg((()=>{var t;a()&&O()&&(null==(t=O().parentElement)||t.classList.remove("mdc-menu-surface--anchor"))}));var R=Fk(),L=t=>{var i;If(w)&&!h()&&If(w).handleKeydown(t),null==(i=e.onkeydown)||i.call(e,t)};return og(R,((t,e)=>({class:t,style:e,role:"dialog",...b,onkeydown:L})),[()=>wA({[s()]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":l(),"mdc-menu-surface--open":o(),"smui-menu-surface--static":o(),"mdc-menu-surface--fullwidth":u(),...x}),()=>Object.entries(S).map((([t,e])=>`${t}: ${e};`)).concat([r()]).join(" ")]),Fm(lp(R),(()=>e.children??fd)),ug(R,(t=>i=t),(()=>i)),$m(R,((t,e)=>null==MA?void 0:MA(t,e)),n),Sm(t,R),Xd({isOpen:function(){return c()},setOpen:function(t){c(t)},setAbsolutePosition:function(t,e){if(null==If(w))throw new Error("Instance is not defined.");return If(w).setAbsolutePosition(t,e)},setIsHoisted:function(t){if(null==If(w))throw new Error("Instance is not defined.");return If(w).setIsHoisted(t)},isFixed:function(){if(null==If(w))throw new Error("Instance is not defined.");return If(w).isFixed()},flipCornerHorizontally:function(){if(null==If(w))throw new Error("Instance is not defined.");return If(w).flipCornerHorizontally()},getElement:O,getMDCMenuSurfaceFoundation:function(){return If(w)}})}(t,xg({get use(){return s()},get class(){return If(i)},get managed(){return l()}},(()=>c),{onkeydown:t=>{var i;null==(i=e.onkeydown)||i.call(e,t)},onSMUIMenuSurfaceOpened:t=>{var i;If(h)&&If(h).handleMenuSurfaceOpened(),null==(i=e.onSMUIMenuSurfaceOpened)||i.call(e,t)},onSMUIListAction:t=>{var i;If(h)&&If(d)&&If(h).handleItemAction(If(d).getOrderedList()[t.detail.index].element),null==(i=e.onSMUIListAction)||i.call(e,t)},get open(){return o()},set open(t){o(t)},get anchorElement(){return a()},set anchorElement(t){a(t)},children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>n=t),(()=>n))}return Xd({isOpen:function(){return o()},setOpen:function(t){o(t)},setDefaultFocusState:function(t){if(null==If(h))throw new Error("Instance is undefined.");If(h).setDefaultFocusState(t)},getSelectedIndex:function(){if(null==If(h))throw new Error("Instance is undefined.");return If(h).getSelectedIndex()},getMenuSurface:function(){return n},getElement:g})}var Vk=bm('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M22 9.06 11 20 6 14.7l1.09-1.02 3.94 4.16L20.94 8 22 9.06Z"></path></svg>'),$k=ym('<div class="icon svelte-7noaux"><!></div> <div class="content svelte-7noaux"><span> </span> <span class="kb svelte-7noaux"> </span></div>',1);const Hk={hash:"svelte-7noaux",code:".icon.svelte-7noaux {width:28px;height:28px;margin-left:8px;}.content.svelte-7noaux {flex-grow:1;display:flex;align-items:center;justify-content:space-between;padding:0 20px 0 6px;font-size:14px;}.kb.svelte-7noaux {font-size:12px;margin-left:10px;white-space:nowrap;color:var(--cl-listKeybinding-foreground);}"};function Kk(t,e){Yd(e,!0),Vm(t,Hk);const[i,n]=yg(),s=()=>gg(l,"$priceScaleOptions",i),{t:r}=OA(),o=$w(Go),a=o.chart(e.chartIndex),l=Ag(o.store,(t=>t.instances[e.chartIndex].chartOptions.rightPriceScale)),c=ee(a.getContainerDomElement().querySelector("tr:last-of-type td:last-of-type"));Object.assign(c.style,{position:"relative"});const h=[{label:"priceAxis.mode.regular",value:Bn.Normal},{label:"priceAxis.mode.percent",value:Bn.Percentage,kb:pa},{label:"priceAxis.mode.log",value:Bn.Logarithmic,kb:da}];var u=xm();km(cp(u),17,(()=>h),Dm,((t,e)=>{{let i=xp((()=>If(e).value===s().mode)),n=xp((()=>Ut((()=>{return t=If(e),void a.chartApi.applyOptions({rightPriceScale:{mode:Dg(l).mode===t.value?Bn.Normal:t.value}});var t}))));Ck(t,{class:"row",get selected(){return If(i)},get onpointerup(){return If(n)},children:(t,i)=>{var n=$k(),o=cp(n),a=lp(o),l=t=>{Sm(t,Vk())};Am(a,(t=>{If(e).value===s().mode&&t(l)}));var c=lp(hp(o,2)),h=lp(c),u=lp(hp(c,2));$f(((t,e)=>{Tm(h,t),Tm(u,e)}),[()=>r(If(e).label),()=>If(e).kb?vM(If(e).kb):""]),Sm(t,n)},$$slots:{default:!0}})}})),Sm(t,u),Xd(),n()}var Wk=ym('<div class="content svelte-kbrhp8"> </div> <div class="chevron svelte-kbrhp8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" width="10" height="16" class="svelte-kbrhp8"><path d="M.6 1.4l1.4-1.4 8 8-8 8-1.4-1.4 6.389-6.532-6.389-6.668z"></path></svg></div>',1),jk=bm('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" class="svelte-kbrhp8"><path fill="currentColor" d="M22 9.06 11 20 6 14.7l1.09-1.02 3.94 4.16L20.94 8 22 9.06Z"></path></svg>'),Uk=ym('<div class="icon svelte-kbrhp8"><!></div> <div class="tzTitle svelte-kbrhp8"> </div>',1),Gk=ym("<!> <!>",1);const qk={hash:"svelte-kbrhp8",code:'.content.svelte-kbrhp8 {flex-grow:1;display:flex;align-items:center;justify-content:space-between;margin-left:36px;padding:0 20px 0 6px;font-size:14px;}.chevron.svelte-kbrhp8 svg:where(.svelte-kbrhp8) {width:10px;height:10px;color:currentColor;} .cl-tz-dropdown {-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;font-variation-settings:normal;font-feature-settings:"tnum" on, "lnum" on, "rlig" 1, "calt" 1;font-family:var(--cl-font-family);border-radius:6px;box-shadow:var(--cl-dialog-shadow) 0px 2px 4px 0px;background-color:var(--cl-background);height:100%;overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain;display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;padding:6px 0;} .cl-tz-dropdown::-webkit-scrollbar {-webkit-appearance:none;width:3px;height:3px;} .cl-tz-dropdown::-webkit-scrollbar-corner {display:none;} .cl-tz-dropdown::-webkit-scrollbar-thumb {background-clip:content-box;background-color:var(--cl-scrollbarThumb-background);border-radius:3px;} .cl-tz-dropdown::-webkit-scrollbar-track {background-color:initial;border-radius:3px;} .cl-tz-dropdown .mdc-deprecated-list {margin:0;padding:0;list-style:none;} .cl-tz-dropdown .row {height:32px;display:flex;flex-direction:row;align-items:center;flex-flow:row nowrap;color:var(--cl-listItem-foreground);}\n@media (hover: hover) and (pointer: fine) { .cl-tz-dropdown .row:hover:not(.mdc-deprecated-list-item--selected):not(.mdc-deprecated-list-item--disabled) {background-color:var(--cl-listItem-hoverBackground);}\n} .cl-tz-dropdown .mdc-deprecated-list-item--selected {color:var(--cl-listItem-selectedForeground);background:var(--cl-listItem-selectedBackground);}.icon.svelte-kbrhp8 {width:36px;padding-left:8px;}.icon.svelte-kbrhp8 svg:where(.svelte-kbrhp8) {width:28px;height:28px;}.tzTitle.svelte-kbrhp8 {padding-left:6px;padding-right:20px;font-size:14px;}'};function Yk(t,e){Yd(e,!0),Vm(t,qk);const[i,n]=yg(),s=()=>gg(g,"$timezone",i);let r,o,a=Gp(!1),l=Gp(void 0),c=Jd({});function h(t){c[t]||(c[t]=!0)}function u(t){c[t]&&delete c[t]}const{t:d}=OA(),p=$w(Go),f=$w(Eb),m=p.chart(e.chartIndex),g=Ag(p.store,(t=>t.instances[e.chartIndex].chartProperties.timezone)),v=m.getTimezoneApi().availableTimezones();let y=null,_=null;const b=()=>{null==_||_(),null==y||y(),_=q_((()=>{e.anchorOpen&&Yp(a,!0)}),300)},w=()=>{null==y||y(),null==_||_(),y=q_((()=>{Yp(a,!1)}),500)};Tg((()=>{Yp(l,r.getElement(),!0);const t=o.getElement(),e=[um(If(l),"mouseenter",(()=>{b()})),um(t,"mouseenter",(()=>{b()})),um(If(l),"mouseleave",(e=>{(null==t?void 0:t.contains(e.relatedTarget))||w()})),um(t,"mouseleave",(t=>{var e;(null==(e=If(l))?void 0:e.contains(t.relatedTarget))||w()}))];return()=>{e.forEach((t=>t()))}}));const x=()=>{If(a)||b()};var S=Gk(),T=cp(S);{let t=xp((()=>["row",...Object.keys(c)].join(" "))),e=xp((()=>[[Bk,{addClass:h,removeClass:u}]]));ug(Ck(T,{nonInteractive:!0,get class(){return If(t)},get use(){return If(e)},onclick:x,children:(t,e)=>{var i=Wk(),n=lp(cp(i));$f((t=>Tm(n,t)),[()=>d("setting.timezone")]),Sm(t,i)},$$slots:{default:!0}}),(t=>r=t),(()=>r))}eE(hp(T,2),{get target(){return f.root},children:(t,e)=>{ug(zk(t,{hoisted:!0,managed:!0,anchor:!1,quickOpen:!0,get anchorElement(){return If(l)},anchorCorner:"TOP_RIGHT",class:"cl-tz-dropdown",get open(){return If(a)},set open(t){Yp(a,t,!0)},children:(t,e)=>{Sk(t,{children:(t,e)=>{var i=xm();km(cp(i),17,(()=>v),(t=>t.id),((t,e)=>{{let i=xp((()=>s()===If(e).id));Ck(t,{get selected(){return If(i)},onclick:()=>(t=>{m.getTimezoneApi().setTimezone(t.id),o.setOpen(!1)})(If(e)),class:"row",children:(t,i)=>{var n=Uk(),r=cp(n),o=lp(r),a=t=>{Sm(t,jk())};Am(o,(t=>{s()===If(e).id&&t(a)}));var l=lp(hp(r,2));$f((t=>Tm(l,t)),[()=>{return(t=If(e)).title?t.title:t.offsetStr?`(${t.offsetStr}) ${d(t.titleI18nKey)}`:d(t.titleI18nKey);var t}]),Sm(t,n)},$$slots:{default:!0}})}})),Sm(t,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),(t=>o=t),(()=>o))},$$slots:{default:!0}}),Sm(t,S),Xd(),n()}var Xk=ym('<div class="separator svelte-8zsjyu"></div> <!>',1),Zk=ym("<!> <!>",1),Qk=ym('<div class="axisMenu svelte-8zsjyu"><!></div>'),Jk=ym('<div class="anchor svelte-8zsjyu"><!></div>');const tP={hash:"svelte-8zsjyu",code:'.cl-axis-setting-dropdown {border-radius:6px;box-shadow:var(--cl-dialog-shadow) 0px 2px 4px 0px;background-color:var(--cl-background);-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;font-variation-settings:normal;font-feature-settings:"tnum" on, "lnum" on, "rlig" 1, "calt" 1;font-family:var(--cl-font-family);padding:6px 0;}.anchor.svelte-8zsjyu {position:absolute;top:0;bottom:0;left:0;width:0;}.axisMenu.svelte-8zsjyu {display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;}.axisMenu.svelte-8zsjyu .mdc-deprecated-list {margin:0;padding:0;list-style:none;} .axisMenu .row {height:32px;display:flex;flex-direction:row;align-items:center;padding-right:20px;color:var(--cl-listItem-foreground);background:var(--cl-listItem-background);white-space:nowrap;user-select:none;cursor:default;}\n@media (hover: hover) and (pointer: fine) { .axisMenu .row:hover {background-color:var(--cl-listItem-hoverBackground);}\n}.separator.svelte-8zsjyu {width:100%;height:1px;margin:6px 0;background:var(--cl-gutter-background);}'};const eP="#F5F5F5",iP="#212121";var nP=ym('<div class="tipContent svelte-13gd5ze"> </div>'),sP=ym('<button class="button svelte-13gd5ze" aria-label=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="24" height="24" fill="currentColor"><path fill-rule="evenodd" d="M18 14a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path fill-rule="evenodd" d="M8.5 5h11l5 9-5 9h-11l-5-9 5-9Zm-3.86 9L9.1 6h9.82l4.45 8-4.45 8H9.1l-4.45-8Z"></path></svg></button> <!>',1),rP=ym('<div class="settingPortal svelte-13gd5ze"><!> <!></div>');const oP={hash:"svelte-13gd5ze",code:".settingPortal.svelte-13gd5ze {position:absolute;top:0;left:0;right:0;bottom:0;z-index:2;user-select:none;display:flex;align-items:center;justify-content:center;cursor:default;}\n@media (hover: hover) and (pointer: fine) {.settingPortal.svelte-13gd5ze:hover {background:var(--cl-gutter-background);}\n}.button.svelte-13gd5ze {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;width:100%;height:100%;}.tipContent.svelte-13gd5ze {white-space:nowrap;text-wrap:nowrap;}"};function aP(t,e){Yd(e,!0),Vm(t,oP);const[i,n]=yg();let s=Gp(!1);const r=$w(W_),o=$w(Go).chart(e.chartIndex),a=ee(o.getContainerDomElement().querySelector("tr:last-of-type td:last-of-type"));Object.assign(a.style,{position:"relative"});const l=$v(o.getStore(),(t=>{const{symbolInfo:e}=t;return`${e.name}·${e.exchange}·${t.resolution}`})),c=()=>{o.showPaneCursor(Og.arrow),o.chartApi.applyOptions({rightPriceScale:{background:{type:os.Solid,color:r.isDark()?iP:eP}}})},h=()=>{o.showPaneCursor(Og.unset),o.chartApi.applyOptions({rightPriceScale:{background:r.isDark()?nu(ST.rightPriceScale.background):nu(xT.rightPriceScale.background)}})},u=()=>{Yp(s,!0)};let d;Tg((()=>{GT.write(d,UT.AxisSetting)})),eE(t,{get target(){return a},style:"position: absolute;top: 0;left: 0;right: 0;bottom: 0;z-index: 2;",children:(t,n)=>{var r=rP(),o=lp(r);PA(o,{children:(t,e)=>{var n=sP(),s=cp(n),r=xp((()=>Ut(u)));s.__pointerup=function(...t){var e;null==(e=If(r))||e.apply(this,t)},ug(s,(t=>d=t),(()=>d)),DA(hp(s,2),{yPos:"above",children:(t,e)=>{var n=nP(),s=lp(n);$f((()=>Tm(s,gg(l,"$tooltipContent",i)))),Sm(t,n)},$$slots:{default:!0}}),dm("mouseenter",s,c),dm("mouseleave",s,h),Sm(t,n)},$$slots:{default:!0}}),jI(hp(o,2),{get waitFor(){return If(s)},children:(t,i)=>{!function(t,e){Yd(e,!0),Vm(t,tP);let i=Sg(e,"open",15,!1);const n=$w(kg),s=$w(Go),r=$w(Eb),o=ee(s.chart(e.chartIndex).getContainerDomElement().querySelector("tr:last-of-type td:last-of-type")),a=n.featureEnabled("timezone_menu");let l,c;Object.assign(o.style,{position:"relative"}),Ff((()=>{l&&!l.hasAttribute("data-mprt")&&GT.write(l,UT.AxisSetting)}));var h=Jk();eE(lp(h),{get target(){return r.root},children:(t,n)=>{jI(t,{macro:!0,children:(t,n)=>{zk(t,{anchor:!1,get anchorElement(){return c},quickOpen:!0,hoisted:!0,class:"cl-axis-setting-dropdown",get open(){return i()},set open(t){i(t)},children:(t,n)=>{var s=Qk();Sk(lp(s),{children:(t,n)=>{var s=Zk(),r=cp(s);Kk(r,{get chartIndex(){return e.chartIndex}});var o=hp(r,2),l=t=>{var n=Xk();Yk(hp(cp(n),2),{get chartIndex(){return e.chartIndex},get anchorOpen(){return i()}}),Sm(t,n)};Am(o,(t=>{a&&t(l)})),Sm(t,s)},$$slots:{default:!0}}),ug(s,(t=>l=t),(()=>l)),Sm(t,s)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),ug(h,(t=>c=t),(()=>c)),Sm(t,h),Xd()}(t,{get chartIndex(){return e.chartIndex},get open(){return If(s)},set open(t){Yp(s,t,!0)}})},$$slots:{default:!0}}),Sm(t,r)},$$slots:{default:!0}}),Xd(),n()}pm(["pointerup"]);var lP=ym("<!> <!>",1),cP=ym("<!> <!> <!>",1),hP=ym("<!> <!> <!>",1),uP=ym('<div><div class="isolate svelte-7dwz1w" tabindex="-1"></div> <!></div>');const dP={hash:"svelte-7dwz1w",code:'.slot.svelte-7dwz1w {position:relative;}.slot.multiple.active.svelte-7dwz1w::after {border:2px solid var(--cl-selectedForeground);bottom:0;box-sizing:border-box;content:"";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0;z-index:1;}.isolate.svelte-7dwz1w {position:absolute;top:0px;right:0px;bottom:0px;left:0px;}'};function pP(t,e){Yd(e,!0),Vm(t,dP);const[i,n]=yg(),s=()=>gg(u,"$studyIdList",i);let r,o=Gp(!1);const a=$w(Go),l=e.chartIndex,c=String.fromCodePoint(UI.a+e.chartIndex),h=$v(a.store,(t=>t.activeIndex===e.chartIndex)),u=$v(a.store,(t=>{var e;return((null==(e=t.instances[l])?void 0:e.studyList)??[]).filter((t=>!t.overlap)).map((t=>t.id))})),d=$v(a.store,(t=>st.value(t.layout).slotCount>1));let p;Tg((()=>{p=a.handleCellMount(r,e.chartIndex),qd(jo,p),Yp(o,!0),GT.write(r,UT.Chart)})),$I((()=>{null==p||p.startup()})),Cg((()=>{a.handleCellDestory(r,e.chartIndex),r=null}));var f=uP();let m;var g=lp(f);ug(g,(t=>r=t),(()=>r));var v=hp(g,2),y=t=>{var i=hP(),n=cp(i);jI(n,{idle:!0,children:(t,i)=>{var n=lP(),r=cp(n);!function(t,e){Yd(e,!0),Vm(t,fD);const[i,n]=yg(),s=()=>gg(a,"$overlapStudyIdList",i),{t:r}=OA(),o=$w(Go),a=$v(o.store,(t=>{var i;return((null==(i=t.instances[e.chartIndex])?void 0:i.studyList)??[]).filter((t=>!!t.overlap)).map((t=>t.id))}));let l;const c=ee(o.chart(e.chartIndex).mainSeriesApi.getSeries().getPane().getHTMLElement()),h=document.createElement("div");c.appendChild(h),l=h,Tg((()=>{GT.write(l,UT.Legend)})),Cg((()=>{l.remove()}));let u=Gp(!1);const d=()=>{Yp(u,!If(u))};eE(t,{get target(){return l},children:(t,i)=>{var n=pD(),o=lp(n);hD(o,{get chartIndex(){return e.chartIndex}});var a=hp(o,2);jI(a,{idle:!0,children:(t,i)=>{var n=xm(),r=cp(n),o=t=>{var i=xm();km(cp(i),1,s,(t=>t),((t,i)=>{YA(t,{get chartIndex(){return e.chartIndex},get studyId(){return If(i)}})})),Sm(t,i)};Am(r,(t=>{If(u)||t(o)})),Sm(t,n)},$$slots:{default:!0}}),jI(hp(a,2),{idle:!0,children:(t,e)=>{var i=xm(),n=cp(i),o=t=>{PA(t,{children:(t,e)=>{var i=dD(),n=cp(i),o=xp((()=>Ut(d)));n.__pointerup=function(...t){var e;null==(e=If(o))||e.apply(this,t)};var a=lp(n),l=hp(a,2),c=t=>{var e=uD(),i=lp(e);$f((()=>Tm(i,s().length))),Sm(t,e)};Am(l,(t=>{If(u)&&s().length&&t(c)})),DA(hp(n,2),{children:(t,e)=>{var i=wm();$f((t=>Tm(i,t)),[()=>r(If(u)?"legend.main.showMore":"legend.main.showLess")]),Sm(t,i)},$$slots:{default:!0}}),$f((()=>Ym(a,1,jm(["iconWrap",If(u)&&"collapsed",s().length&&"multi"]),"svelte-iowc5s"))),Sm(t,i)},$$slots:{default:!0}})};Am(n,(t=>{s().length&&t(o)})),Sm(t,i)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),Xd(),n()}(r,{get chartIndex(){return e.chartIndex}}),km(hp(r,2),1,s,(t=>t),((t,i)=>{var n=xm();!function(t,e,i){var n,s,r=t,o=Wd,a=null,l=Zd()?Vd:zd;function c(){n&&Yf(n),null!==a&&(a.lastChild.remove(),r.before(a),a=null),n=s}Hf((()=>{if(l(o,o=e())){var t=r;s=Kf((()=>i(t))),c()}}))}(cp(n),(()=>s().length),(t=>{!function(t,e){Yd(e,!0),Vm(t,ZA);const i=bg(e,["$$slots","$$events","$$legacy"]);let n;const s=$w(Go).chart(e.chartIndex).getStudyById(e.studyId).paneHTMLElement();s.style.position="relative";const r=document.createElement("div");s.appendChild(r),n=r,n.id=i.studyId,Tg((()=>{GT.write(n,UT.Legend)})),Cg((()=>{n.remove()})),eE(t,{get target(){return n},children:(t,i)=>{var n=XA();YA(lp(n),{get chartIndex(){return e.chartIndex},get studyId(){return e.studyId}}),Sm(t,n)},$$slots:{default:!0}}),Xd()}(t,{get chartIndex(){return e.chartIndex},get studyId(){return If(i)}})})),Sm(t,n)})),Sm(t,n)},$$slots:{default:!0}});var r=hp(n,2);{let t=xp((()=>null==p?void 0:p.onDataLoaded));jI(r,{get waitFor(){return If(t)},idle:!0,children:(t,i)=>{aP(t,{get chartIndex(){return e.chartIndex}})},$$slots:{default:!0}})}var o=hp(r,2);{let t=xp((()=>null==p?void 0:p.onDataLoaded));jI(o,{get waitFor(){return If(t)},idle:!0,children:(t,i)=>{var n=cP(),s=cp(n);xD(s,{});var r=hp(s,2);XI(r,{}),function(t,e){Yd(e,!0),Vm(t,QI);const[i,n]=yg(),s=()=>gg(r,"$error",i),r=Ag($w(Go).store,(t=>t.instances[e.chartIndex].error));var o=xm(),a=cp(o),l=t=>{var e=ZI(),i=lp(e),n=lp(i);$f((()=>Tm(n,s().message))),Sm(t,e)};Am(a,(t=>{s()&&t(l)})),Sm(t,o),Xd(),n()}(hp(r,2),{get chartIndex(){return e.chartIndex}}),Sm(t,n)},$$slots:{default:!0}})}Sm(t,i)};Am(v,(t=>{If(o)&&t(y)})),$f(((t,e)=>{Ym(f,1,t,"svelte-7dwz1w"),m=Zm(f,"",m,e)}),[()=>jm(Wm("slot",gg(d,"$isMulti",i)&&"multiple",gg(h,"$isActive",i)&&"active")),()=>({"grid-area":c})]),Sm(t,f),Xd(),n()}var fP=ym("<div><!></div>");const mP={hash:"svelte-cpm446",code:".center.svelte-cpm446 {flex-grow:1;width:100%;height:100%;display:grid;border-radius:4px;overflow:hidden;gap:0.5px;cursor:crosshair;}.pane--cursor-pointer.svelte-cpm446 {cursor:pointer;}.pane--cursor-arrow.svelte-cpm446 {cursor:default;}.pane--cursor-eraser.svelte-cpm446 {cursor:url(./assets/eraser.cur), default;}.pane--cursor-dot.svelte-cpm446 {cursor:url(./assets/dot.cur), default;}.pane--cursor-performance.svelte-cpm446 {cursor:url(./assets/performance.svg), default;}.pane--cursor-default.svelte-cpm446,\n.pane--cursor-demonstration.svelte-cpm446 {cursor:default;}.pane--cursor-grabbing.svelte-cpm446 {cursor:grabbing;}.pane--cursor-zoomIn.svelte-cpm446 {cursor:zoom-in;}.pane--cursor-ew.svelte-cpm446 {cursor:ew-resize;}.pane--cursor-ns.svelte-cpm446 {cursor:ns-resize;}.pane--cursor-nwse.svelte-cpm446 {cursor:nwse-resize;}.pane--cursor-nesw.svelte-cpm446 {cursor:nesw-resize;}.pane--cursor-text.svelte-cpm446 {cursor:text;}.pane--cursor-none.svelte-cpm446 {cursor:none;}"};function gP(t,e){Yd(e,!1),Vm(t,mP);const[i,n]=yg(),s=()=>gg(l,"$slotRangeArr",i);let r=qp();const o=$w(Go),a=Ag(o.store,(t=>st.value(t.layout).layout.gridTemplate));$I((()=>{o.handleGridMount(If(r))}));const l=Ag(o.store,(t=>Array.from({length:st.value(t.layout).slotCount},((t,e)=>e)))),c=$v(o.store,(t=>{return Lg(e=t.cursor,Og.eraser)&&e!==Og.eraser&&(e=Og.eraser),Og[e];var e}));Cg((()=>{Yp(r,null)})),dg();var h=fP();let u;jI(lp(h),{macro:!0,children:(t,e)=>{var i=xm();km(cp(i),1,s,Dm,((t,e)=>{pP(t,{get chartIndex(){return If(e)}})})),Sm(t,i)},$$slots:{default:!0}}),ug(h,(t=>Yp(r,t)),(()=>If(r))),$f(((t,e)=>{Ym(h,1,t,"svelte-cpm446"),u=Zm(h,"",u,e)}),[()=>jm(Wm("center",`pane--cursor-${gg(c,"$cursor",i)}`)),()=>({"grid-template":gg(a,"$currentLayoutDeclaration",i)})]),Sm(t,h),Xd(),n()}function vP(t,e){Yd(e,!0);let i,n=Sg(e,"use",19,(()=>[])),s=Sg(e,"class",3,""),r=Sg(e,"component",3,xk),o=Sg(e,"tag",3,"div"),a=Sg(e,"_smuiClass",3,""),l=Sg(e,"_smuiClassMap",23,(()=>({}))),c=Sg(e,"_smuiContexts",19,(()=>({}))),h=Sg(e,"_smuiProps",19,(()=>({}))),u=bg(e,["$$slots","$$events","$$legacy","use","class","component","tag","_smuiClass","_smuiClassMap","_smuiContexts","_smuiProps","children"]);const d=[];Object.entries(l()).forEach((([t,e])=>{const i=Gd(e);i&&"subscribe"in i&&d.push(i.subscribe((e=>{l()[t]=e})))}));for(let m in c())c().hasOwnProperty(m)&&qd(m,c()[m]);Cg((()=>{for(const t of d)t()}));var p=xm(),f=cp(p);{let t=xp((()=>wA({[s()]:!0,[a()]:!0,...l()})));Bm(f,r,((s,r)=>{ug(r(s,xg({get tag(){return o()},get use(){return n()},get class(){return If(t)}},h,(()=>u),{children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>i=t),(()=>i))}))}return Sm(t,p),Xd({getElement:function(){return i.getElement()}})}var yP={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},_P={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},bP={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},wP=bP.ARIA_LIVE_DELAY_MS,xP=_P.ARIA_LIVE_LABEL_TEXT_ATTR;var SP=yP.OPENING,TP=yP.OPEN,CP=yP.CLOSING,MP=_P.REASON_ACTION,IP=_P.REASON_DISMISS,EP=function(t){function e(i){var n=t.call(this,Wg(Wg({},e.defaultAdapter),i))||this;return n.opened=!1,n.animationFrame=0,n.animationTimer=0,n.autoDismissTimer=0,n.autoDismissTimeoutMs=bP.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape=!0,n}return Kg(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return yP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return _P},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return bP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(SP),this.adapter.removeClass(TP),this.adapter.removeClass(CP)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(CP),this.adapter.addClass(SP),this.adapter.announce(),this.runNextAnimationFrame((function(){t.adapter.addClass(TP),t.animationTimer=setTimeout((function(){var e=t.getTimeoutMs();t.handleAnimationTimerEnd(),t.adapter.notifyOpened(),e!==bP.INDETERMINATE&&(t.autoDismissTimer=setTimeout((function(){t.close(IP)}),e))}),bP.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},e.prototype.close=function(t){var e=this;void 0===t&&(t=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(t),this.adapter.addClass(yP.CLOSING),this.adapter.removeClass(yP.OPEN),this.adapter.removeClass(yP.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout((function(){e.handleAnimationTimerEnd(),e.adapter.notifyClosed(t)}),bP.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.opened},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},e.prototype.setTimeoutMs=function(t){var e=bP.MIN_AUTO_DISMISS_TIMEOUT_MS,i=bP.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(t===bP.INDETERMINATE||t<=i&&t>=e))throw new Error("\n        timeoutMs must be an integer in the range "+e+"–"+i+"\n        (or "+bP.INDETERMINATE+" to disable), but got '"+t+"'");this.autoDismissTimeoutMs=t},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape=t},e.prototype.handleKeyDown=function(t){("Escape"===t.key||27===t.keyCode)&&this.getCloseOnEscape()&&this.close(IP)},e.prototype.handleActionButtonClick=function(t){this.close(MP)},e.prototype.handleActionIconClick=function(t){this.close(IP)},e.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(yP.OPENING),this.adapter.removeClass(yP.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var e=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((function(){e.animationFrame=0,clearTimeout(e.animationTimer),e.animationTimer=setTimeout(t,0)}))},e}(nE);let AP=Promise.resolve();var DP=ym("<aside><div><!></div></aside>");function kP(t,e){Yd(e,!0);const{closest:i}=MD;let n=()=>{};function s(t){return t===n}let r,o,a=Sg(e,"use",19,(()=>[])),l=Sg(e,"class",3,""),c=Sg(e,"openOnMount",3,!1),h=Sg(e,"leading",3,!1),u=Sg(e,"timeoutMs",3,5e3),d=Sg(e,"closeOnEscape",3,!0),p=Sg(e,"labelText",3,n),f=Sg(e,"actionButtonText",3,n),m=Sg(e,"surface$use",19,(()=>[])),g=Sg(e,"surface$class",3,""),v=bg(e,["$$slots","$$events","$$legacy","use","class","variant","openOnMount","leading","timeoutMs","closeOnEscape","labelText","actionButtonText","surface$use","surface$class","children"]),y=Gp(void 0),_=Jd({}),b=new Promise((t=>o=t));function w(t){_[t]||(_[t]=!0)}function x(t){t in _&&!_[t]||(_[t]=!1)}function S(){return C().querySelector(".mdc-snackbar__label")??document.createElement("div")}function T(){return C().querySelector(".mdc-snackbar__action")??document.createElement("button")}function C(){return r}qd("SMUI:label:context","snackbar"),Ff((()=>{If(y)&&If(y).getTimeoutMs()!==u()&&If(y).setTimeoutMs(u())})),Ff((()=>{If(y)&&If(y).getCloseOnEscape()!==d()&&If(y).setCloseOnEscape(d())})),Ff((()=>{If(y)&&!s(p())&&S().textContent!==p()&&(S().textContent=p())})),Ff((()=>{If(y)&&!s(f())&&T().textContent!==f()&&(T().textContent=f())})),Tg((()=>(Yp(y,new EP({addClass:w,announce:()=>function(t,e){void 0===e&&(e=t);var i=t.getAttribute("aria-live"),n=e.textContent.trim();if(n&&i){t.setAttribute("aria-live","off"),e.textContent="";var s=document.createElement("span");s.setAttribute("style","display: inline-block; width: 0; height: 1px;"),s.textContent=" ",e.appendChild(s),e.setAttribute(xP,n),setTimeout((function(){t.setAttribute("aria-live",i),e.removeAttribute(xP),e.textContent=n}),wP)}}(S()),notifyClosed:t=>xA(C(),"SMUISnackbarClosed",t?{reason:t}:{}),notifyClosing:t=>xA(C(),"SMUISnackbarClosing",t?{reason:t}:{}),notifyOpened:()=>xA(C(),"SMUISnackbarOpened"),notifyOpening:()=>xA(C(),"SMUISnackbarOpening"),removeClass:x}),!0),If(y).init(),c()&&If(y).open(),()=>{var t;null==(t=If(y))||t.destroy()})));var M=DP(),I=t=>{var i;If(y)&&If(y).handleKeyDown(t),null==(i=e.onkeydown)||i.call(e,t)},E=t=>{var i;o(),b=new Promise((t=>o=t)),null==(i=e.onSMUISnackbarClosed)||i.call(e,t)};og(M,((t,e)=>({class:t,...e,onkeydown:I,onSMUISnackbarClosed:E})),[()=>wA({[l()]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":"stacked"===e.variant,"mdc-snackbar--leading":h(),..._}),()=>SA(v,["surface$"])]);var A=lp(M),D=t=>{var n;!function(t){const e=t.target;If(y)&&(i(e,".mdc-snackbar__action")?If(y).handleActionButtonClick(t):i(e,".mdc-snackbar__dismiss")&&If(y).handleActionIconClick(t))}(t),null==(n=e.surface$onclick)||n.call(e,t)};return og(A,((t,e)=>({class:t,role:"status","aria-relevant":"additions",...e,onclick:D})),[()=>wA({[g()]:!0,"mdc-snackbar__surface":!0}),()=>TA(v,"surface$")]),Fm(lp(A),(()=>e.children??fd)),$m(A,((t,e)=>null==MA?void 0:MA(t,e)),m),ug(M,(t=>r=t),(()=>r)),$m(M,((t,e)=>null==MA?void 0:MA(t,e)),a),Sm(t,M),Xd({open:function(){AP=AP.then((()=>{var t;return null==(t=If(y))||t.open(),b}))},forceOpen:function(){var t;return null==(t=If(y))?void 0:t.open()},close:function(t){var e;return null==(e=If(y))?void 0:e.close(t)},isOpen:function(){if(null==If(y))throw new Error("Instance is undefined.");return If(y).isOpen()},getLabelElement:S,getActionButtonElement:T,getElement:C})}var PP=ym('<div class="label svelte-1jhsad5"> </div> <div class="actions"><button aria-label="Close" class="button svelte-1jhsad5"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="currentColor" d="M9.707 9l4.647-4.646-.707-.708L9 8.293 4.354 3.646l-.708.708L8.293 9l-4.647 4.646.708.708L9 9.707l4.646 4.647.708-.707L9.707 9z"></path></svg></button></div>',1);const OP={hash:"svelte-1jhsad5",code:".button.svelte-1jhsad5 {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;align-items:center;justify-content:center;color:inherit;}.label.svelte-1jhsad5 {font-size:14px;line-height:21px;padding:4px 8px;} .chartles .cl-toast--verbose {min-width:unset;display:flex;border-radius:4px;padding:8px;color:var(--cl-toast-verbose-foreground);background:var(--cl-toast-verbose-background);border:1px solid var(--cl-toast-verbose-border);} .chartles .cl-toast--info {min-width:unset;display:flex;border-radius:4px;padding:8px;color:var(--cl-toast-info-foreground);background:var(--cl-toast-info-background);}"};pm(["pointerup"]);const RP=class t extends he{constructor(e){super(),x(this,"mapNotificationToToast",new Map),x(this,"mapNotificationToDisposable",new Map),x(this,"addedToastsIntervalCounter",new It(t.SPAM_PROTECTION.interval)),x(this,"store",Eg([])),this.model=e,this._register(le((()=>Reflect.set(this,"store",null)))),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t))))}onDidChangeNotification(t){switch(t.kind){case DM.ADD:return this.addToast(t.item);case DM.REMOVE:return this.removeToast(t.item)}}addToast(e){if(this.addedToastsIntervalCounter.increment()>t.SPAM_PROTECTION.limit)return;const i=new ce;this.mapNotificationToDisposable.set(e,i),i.add(Qt((()=>this.doAddToast(e,i))))}doAddToast(t,e){const i={item:t};this.mapNotificationToToast.set(t,i),this.store.update((t=>(t.push(i),t))),al(t.onDidClose)((()=>{this.removeToast(t)})),this.purgeNotification(t,e)}purgeNotification(e,i){let n,s;const r=()=>{n=setTimeout((()=>{"hidden"===document.visibilityState?s||(s=Xt(document,"visibilitychange",(()=>{"visible"===document.visibilityState&&r()})),i.add(s)):this.removeToast(e)}),t.PURGE_TIMEOUT[e.severity])};r(),i.add(le((()=>clearTimeout(n))))}removeToast(t){const e=this.mapNotificationToToast.get(t);e&&(this.mapNotificationToToast.delete(t),this.store.update((t=>{const i=t.findIndex((t=>t.item.equals(e.item)));return i>-1&&t.splice(i,1),t})));const i=this.mapNotificationToDisposable.get(t);i&&(ae(i),this.mapNotificationToDisposable.delete(t))}};x(RP,"MAX_NOTIFICATIONS",3),x(RP,"PURGE_TIMEOUT",{[AM.Verbose]:3e3,[AM.Info]:15e3,[AM.Warning]:18e3,[AM.Error]:2e4}),x(RP,"SPAM_PROTECTION",{interval:800,limit:RP.MAX_NOTIFICATIONS});let LP=RP;function NP(t,e){Yd(e,!1);const[i,n]=yg(),s=$w(EM),r=new LP(s.model);mD(r);const o=Ag(r.store,(t=>t));dg();var a=xm();km(cp(a),1,(()=>gg(o,"$list",i)),Dm,((t,e)=>{!function(t,e){Yd(e,!0),Vm(t,OP);const i=()=>{e.item.close()};{let n=xp((()=>`cl-toast--${AM.toString(e.item.severity)}`));kP(t,{openOnMount:!0,timeoutMs:-1,get surface$class(){return If(n)},children:(t,n)=>{var s=PP(),r=cp(s),o=lp(r),a=lp(hp(r,2)),l=xp((()=>Ut(i)));a.__pointerup=function(...t){var e;null==(e=If(l))||e.apply(this,t)},$f((()=>Tm(o,e.item.message.text))),Sm(t,s)},$$slots:{default:!0}})}Xd()}(t,{get item(){return If(e).item}})})),Sm(t,a),Xd(),n()}var FP=ym("<!> <!>",1);function BP(t){var e=FP(),i=cp(e);!function(t,e){Yd(e,!1);const[i,n]=yg(),s=Ag($w(Eb).store,(t=>t.components));dg();var r=xm();km(cp(r),1,(()=>gg(s,"$components",i)),(t=>t.id),((t,e)=>{If(e).Component(t,xg((()=>If(e).props)))})),Sm(t,r),Xd(),n()}(i,{}),NP(hp(i,2),{}),Sm(t,e)}var zP=ym("<span></span>");function VP(t,e){Yd(e,!0);var i=xm(),n=cp(i),s=t=>{},r=t=>{var i=xm(),n=cp(i),s=t=>{var i=xm();Nm(cp(i),(()=>e.icon)),Sm(t,i)},r=t=>{var i=xm();Em(cp(i),(()=>e.icon()),(t=>{Sm(t,zP())}),((t,e)=>{var i=xm();Nm(cp(i),(()=>If(e))),Sm(t,i)})),Sm(t,i)};Am(n,(t=>{var i;"string"==typeof(i=e.icon)||!ml(i)&&qa(i)&&"[object String]"==Ga(i)?t(s):t(r,!1)}),!0),Sm(t,i)};Am(n,(t=>{e.icon?t(r,!1):t(s)})),Sm(t,i),Xd()}var $P=ym('<span class="rowIcon svelte-113baz"><!></span> <span class="rowLabel svelte-113baz"> </span>',1),HP=ym('<div class="styleMenu svelte-113baz"><!></div>');const KP={hash:"svelte-113baz",code:".styleMenu.svelte-113baz {display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;}.styleMenu.svelte-113baz .mdc-deprecated-list {margin:0;padding:0;list-style:none;} .styleMenu .row {padding:6px 10px 6px 8px;display:flex;flex-direction:row;align-items:center;color:var(--cl-listItem-foreground);background:var(--cl-listItem-background);}\n@media (hover: hover) and (pointer: fine) { .styleMenu .row:hover:not(.disabled):not(.selected) {background-color:var(--cl-listItem-hoverBackground);}\n} .styleMenu .row.disabled {cursor:default;opacity:0.5;} .styleMenu .row.selected {background-color:var(--cl-listItem-selectedBackground);color:var(--cl-listItem-selectedForeground);}.rowIcon.svelte-113baz {width:28px;height:28px;margin-right:6px;}.rowLabel.svelte-113baz {font-size:14px;padding-right:12px;white-space:nowrap;user-select:none;cursor:default;}"};var WP=ym("<div> </div>"),jP=ym('<button class="chartStyle svelte-ce2ax2"><!></button> <!>',1),UP=ym("<div><!> <!></div>");const GP={hash:"svelte-ce2ax2",code:'.chartStyle.svelte-ce2ax2 {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 5px;}\n@media (hover: hover) and (pointer: fine) {.chartStyle.svelte-ce2ax2:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}'};function qP(t,e){Yd(e,!0),Vm(t,GP);const[i,n]=yg();let s=Gp(!1);const{t:r}=OA(),o=Ag($w(Go).store,(t=>{const{activeIndex:e}=t;if(!isFinite(e))return null;const i=t.instances[e].chartProperties["mainSeriesProperties.style"];return et.value(i)})),a=Ag(o,(t=>null==t?void 0:t.label));var l=UP(),c=lp(l);PA(c,{children:(t,e)=>{var n=jP(),l=cp(n),c=xp((()=>Ut((()=>Yp(s,!0)))));l.__pointerup=function(...t){var e;null==(e=If(c))||e.apply(this,t)};var h=lp(l);{let t=xp((()=>{var t;return null==(t=gg(o,"$currentStyle",i))?void 0:t.icon}));VP(h,{get icon(){return If(t)}})}DA(hp(l,2),{children:(t,e)=>{var n=WP(),s=lp(n);$f((t=>Tm(s,t)),[()=>r(gg(a,"$label",i))]),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),jI(hp(c,2),{get waitFor(){return If(s)},children:(t,e)=>{!function(t,e){Yd(e,!0),Vm(t,KP);const[i,n]=yg(),s=()=>gg(h,"$disabled",i),r=()=>gg(u,"$currentStyle",i);let o=Sg(e,"open",15,!1);const{t:a}=OA(),l=$w(Go),c=nt,h=Ag(l.store,(t=>{const{activeIndex:e}=t;return!isFinite(e)||t.instances[e].dataStatus<Rv.symbolInfoResolved})),u=Ag(l.store,(t=>{const{activeIndex:e}=t;if(!isFinite(e))return null;const i=t.instances[e].chartProperties["mainSeriesProperties.style"];return et.value(i)}));zk(t,{anchorCorner:"BOTTOM_LEFT",quickOpen:!0,class:"cl-dropdown",get open(){return o()},set open(t){o(t)},children:(t,e)=>{var i=HP();Sk(lp(i),{children:(t,e)=>{var i=xm();km(cp(i),17,(()=>c),Dm,((t,e)=>{{let i=xp((()=>{var t;return If(e).id===(null==(t=r())?void 0:t.id)})),n=xp((()=>{var t;return Wm("row",If(e).id===(null==(t=r())?void 0:t.id)&&"selected",s()&&"disabled")})),o=xp((()=>Ut((()=>{s()||l.activeChart().setChartType(If(e).id)}))));Ck(t,{tag:"div",get disabled(){return s()},get selected(){return If(i)},get class(){return If(n)},get onpointerup(){return If(o)},children:(t,i)=>{var n=$P(),s=cp(n);VP(lp(s),{get icon(){return If(e).icon}});var r=lp(hp(s,2));$f((t=>Tm(r,t)),[()=>a(If(e).label)]),Sm(t,n)},$$slots:{default:!0}})}})),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0}}),Xd(),n()}(t,{get open(){return If(s)},set open(t){Yp(s,t,!0)}})},$$slots:{default:!0}}),Sm(t,l),Xd(),n()}pm(["pointerup"]);var YP=ym("<span> </span>"),XP=ym("<div> </div>"),ZP=ym('<button class="customButton svelte-1pu4aed"><!></button> <!>',1),QP=ym("<div><!></div>");const JP={hash:"svelte-1pu4aed",code:'.customButton.svelte-1pu4aed {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 10px;}\n@media (hover: hover) and (pointer: fine) {.customButton.svelte-1pu4aed:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}'};function tO(t,e){Yd(e,!0),Vm(t,JP);const i=$w(Eb);let n;Tg((()=>{i.setButtonReady(e.id,n)})),Cg((()=>{n=null}));var s=QP();PA(lp(s),{children:(t,i)=>{var s=ZP(),r=cp(s),o=xp((()=>Ut((()=>{var t;return null==(t=e.onClick)?void 0:t.call(e)}))));r.__pointerup=function(...t){var e;null==(e=If(o))||e.apply(this,t)};var a=lp(r),l=t=>{var i=YP(),n=lp(i);$f((()=>Tm(n,e.text))),Sm(t,i)};Am(a,(t=>{e.text&&t(l)})),ug(r,(t=>n=t),(()=>n));var c=hp(r,2),h=t=>{DA(t,{children:(t,i)=>{var n=XP(),s=lp(n);$f((()=>Tm(s,e.title))),Sm(t,n)},$$slots:{default:!0}})};Am(c,(t=>{e.title&&t(h)})),Sm(t,s)},$$slots:{default:!0}}),Sm(t,s),Xd()}pm(["pointerup"]);var eO=ym('<span class="separator svelte-enlgwa"></span> <span> </span>',1),iO=ym("<span> </span>"),nO=ym('<div class="tipContent svelte-enlgwa"><span> </span> <!> <!></div>');const sO={hash:"svelte-enlgwa",code:".tipContent.svelte-enlgwa {width:fit-content;height:fit-content;display:flex;flex-direction:row;align-items:center;cursor:default;user-select:none;}.separator.svelte-enlgwa {width:1px;height:20px;margin:0 6px;background:var(--cl-gutter-background);}"};function rO(t,e){Yd(e,!0),Vm(t,sO);var i=nO(),n=lp(i),s=lp(n),r=hp(n,2),o=t=>{var i=eO(),n=lp(hp(cp(i),2));$f((t=>Tm(n,t)),[()=>vM(e.keybinding)]),Sm(t,i)};Am(r,(t=>{e.keybinding&&t(o)}));var a=hp(r,2),l=t=>{var i=iO(),n=lp(i);$f((()=>Tm(n,e.contentAfter))),Sm(t,i)};Am(a,(t=>{e.contentAfter&&t(l)})),$f((()=>Tm(s,e.content))),Sm(t,i),Xd()}var oO=ym('<button aria-label="Full screen" class="fullscreen svelte-eor01u"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" class="svelte-eor01u"><path fill="currentColor" d="M8.5 6A2.5 2.5 0 0 0 6 8.5V11h1V8.5C7 7.67 7.67 7 8.5 7H11V6H8.5zM6 17v2.5A2.5 2.5 0 0 0 8.5 22H11v-1H8.5A1.5 1.5 0 0 1 7 19.5V17H6zM19.5 7H17V6h2.5A2.5 2.5 0 0 1 22 8.5V11h-1V8.5c0-.83-.67-1.5-1.5-1.5zM22 19.5V17h-1v2.5c0 .83-.67 1.5-1.5 1.5H17v1h2.5a2.5 2.5 0 0 0 2.5-2.5z"></path></svg></button> <!>',1),aO=ym("<div><!></div>");const lO={hash:"svelte-eor01u",code:'.fullscreen.svelte-eor01u {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 5px;}\n@media (hover: hover) and (pointer: fine) {.fullscreen.svelte-eor01u:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.fullscreen.svelte-eor01u > svg:where(.svelte-eor01u) {width:28px;height:28px;color:var(--cl-foreground);}'};function cO(t,e,i){const n=t.toLowerCase(),s=e.toLowerCase(),r=function(t,e,i){const n=t.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(i),o=s.startsWith(i);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}(t,e,i);if(r)return r;const o=n.endsWith(i);return o!==s.endsWith(i)?o?-1:1:n.localeCompare(s)}pm(["pointerup"]);const hO=function(t,e,i){if(!i||i.length<e.length)return null;let n;n=t?YI(i,e):0===i.indexOf(e);if(!n)return null;return e.length>0?[{start:0,end:e.length}]:[]}.bind(void 0,!0);const uO=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((t=>uO.add(t.charCodeAt(0))));function dO(){const t=[],e=[];for(let i=0;i<=128;i++)e[i]=0;for(let i=0;i<=128;i++)t.push(e.slice(0));return t}var pO,fO;function mO(t,e){switch(typeof t){case"object":return null===t?gO(349,e):Array.isArray(t)?(i=t,n=gO(104579,n=e),i.reduce(((t,e)=>mO(e,t)),n)):function(t,e){return e=gO(181387,e),Object.keys(t).sort().reduce(((e,i)=>(e=vO(i,e),mO(t[i],e))),e)}(t,e);case"string":return vO(t,e);case"boolean":return function(t,e){return gO(t?433:863,e)}(t,e);case"number":return gO(t,e);case"undefined":return gO(937,e);default:return gO(617,e)}var i,n}function gO(t,e){return(e<<5)-e+t|0}function vO(t,e){e=gO(149417,e);for(let i=0,n=t.length;i<n;i++)e=gO(t.charCodeAt(i),e);return e}dO(),dO(),dO(),(fO=pO||(pO={})).Default=[-100,0],fO.isDefault=function(t){return!t||2===t.length&&-100===t[0]&&0===t[1]};const yO=[0,[]];function _O(t,e,i,n){if(!t||!e)return yO;const s=t.length,r=e.length;if(s<r)return yO;const o=t.toLowerCase(),a=function(t,e,i,n,s,r,o){const a=[],l=[];for(let d=0;d<i;d++){const i=d*r,c=i-r,h=d>0,u=t[d],p=e[d];for(let t=0;t<r;t++){const r=t>0,d=i+t,f=c+t-1,m=r?a[d-1]:0,g=h&&r?a[f]:0,v=h&&r?l[f]:0;let y;y=!g&&h?0:bO(u,p,n,s,t,v);y&&g+y>=m&&(o||h||s.startsWith(e,t))?(l[d]=v+1,a[d]=g+y):(l[d]=0,a[d]=m)}}const c=[];let h=i-1,u=r-1;for(;h>=0&&u>=0;){0===l[h*r+u]||(c.push(u),h--),u--}return[a[i*r-1],c.reverse()]}(e,i,r,t,o,s,n);return a}function bO(t,e,i,n,s,r){let o=0;if(!function(t,e){if(t===e)return!0;if("/"===t||"\\"===t)return"/"===e||"\\"===e;return!1}(e,n[s]))return o;if(o+=1,r>0&&(o+=5*r),t===i[s]&&(o+=1),0===s)o+=8;else{const t=function(t){switch(t){case Ob.Slash:case Ob.Backslash:return 5;case Ob.Underline:case Ob.Dash:case Ob.Period:case Ob.Space:case Ob.SingleQuote:case Ob.DoubleQuote:case Ob.Colon:return 4;default:return 0}}(i.charCodeAt(s-1));t?o+=t:(a=i.charCodeAt(s),Ob.A<=a&&a<=Ob.Z&&0===r&&(o+=2))}var a;return o}const wO=Object.freeze({score:0}),xO=1<<17,SO=65536;function TO(t,e,i,n){const s=n.values?n.values:[n];return mO({[n.normalized]:{values:s.map((t=>({value:t.normalized,expectContiguousMatch:t.expectContiguousMatch}))),label:t,description:e,allowNonContiguousMatches:i}},0)}function CO(t,e,i,n,s){if(!t||!e.normalized)return wO;const r=n.getItemLabel(t);if(!r)return wO;const o=n.getItemDescription(t),a=TO(r,o,i,e),l=s[a];if(l)return l;const c=function(t,e,i){if(i.values&&i.values.length>1)return function(t,e,i){let n=0;const s=[],r=[];for(const o of i){const{score:i,labelMatch:a,descriptionMatch:l}=MO(t,e,o);if(0===i)return wO;n+=i,a&&s.push(...a),l&&r.push(...l)}return{score:n,labelMatch:EO(s),descriptionMatch:EO(r)}}(t,e,i.values);return MO(t,e,i)}(r,o,e);return s[a]=c,c}function MO(t,e,i,n,s){{const[e,n]=_O(t,i.normalized,i.normalizedLowercase,!i.expectContiguousMatch);if(e){const s=hO(i.normalized,t);let r;if(s){r=xO;r+=Math.round(i.normalized.length/t.length*100)}else r=SO;return{score:r+e,labelMatch:s||IO(n)}}}if(e){const n=e,s=n.length,r=`${n}${t}`,[o,a]=_O(r,i.normalized,i.normalizedLowercase,!i.expectContiguousMatch);if(o){const t=IO(a),e=[],i=[];return t.forEach((t=>{t.start<s&&t.end>s?(e.push({start:0,end:t.end-s}),i.push({start:t.start,end:s})):t.start>=s?e.push({start:t.start-s,end:t.end-s}):i.push(t)})),{score:o,labelMatch:e,descriptionMatch:i}}}return wO}function IO(t){const e=[];if(!t)return e;let i;for(const n of t)i&&i.end===n?i.end+=1:(i={start:n,end:n+1},e.push(i));return e}function EO(t){const e=t.sort(((t,e)=>t.start-e.start)),i=[];let n;for(const s of e)n&&AO(n,s)?(n.start=Math.min(n.start,s.start),n.end=Math.max(n.end,s.end)):(n=s,i.push(s));return i}function AO(t,e){return!(t.end<e.start)&&!(e.end<t.start)}function DO(t,e,i,n,s,r){const o=CO(t,i,n,s,r),a=CO(e,i,n,s,r),l=o.score,c=a.score;if(l>SO||c>SO){if(l!==c)return l>c?-1:1;if(l<xO&&c<xO){const t=function(t,e){if(!((t||e)&&(t&&t.length||e&&e.length)))return 0;if(!e||!e.length)return-1;if(!t||!t.length)return 1;const i=t[0].start,n=t[t.length-1].end-i,s=e[0].start,r=e[e.length-1].end-s;return n===r?0:r<n?1:-1}(o.labelMatch,a.labelMatch);if(0!==t)return t}const i=s.getItemLabel(t)||"",n=s.getItemLabel(e)||"";if(i.length!==n.length)return i.length-n.length}if(l!==c)return l>c?-1:1;const h=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,u=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(h&&!u)return-1;if(u&&!h)return 1;const d=kO(t,o,s),p=kO(e,a,s);return d&&p&&d!==p?p>d?-1:1:function(t,e,i,n){const s=n.getItemLabel(t)||"",r=n.getItemLabel(e)||"",o=n.getItemDescription(t),a=n.getItemDescription(e),l=s.length+(o?o.length:0),c=r.length+(a?a.length:0);if(l!==c)return l-c;if(s!==r)return cO(s,r,i.normalized);if(o&&a&&o!==a)return cO(o,a,i.normalized);return 0}(t,e,i,s)}function kO(t,e,i){let n=-1,s=-1;if(e.descriptionMatch&&e.descriptionMatch.length?n=e.descriptionMatch[0].start:e.labelMatch&&e.labelMatch.length&&(n=e.labelMatch[0].start),e.labelMatch&&e.labelMatch.length){if(s=e.labelMatch[e.labelMatch.length-1].end,e.descriptionMatch&&e.descriptionMatch.length){const e=i.getItemDescription(t);e&&(s+=e.length)}}else e.descriptionMatch&&e.descriptionMatch.length&&(s=e.descriptionMatch[e.descriptionMatch.length-1].end);return s-n}function PO(t){return t.startsWith('"')&&t.endsWith('"')}function OO(t){const e=(i=t,i.replace(/\*/g,"")).replace(/\s|"/g,"");var i;return{normalized:e,normalizedLowercase:e.toLowerCase()}}const RO={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},LO={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},NO={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150};class FO extends nE{constructor(t){super({...FO.defaultAdapter,...t}),this.dialogOpen=!1,this.isFullscreen=!1,this.animationFrame=0,this.animationTimer=0,this.escapeKeyAction=LO.CLOSE_ACTION,this.scrimClickAction=LO.CLOSE_ACTION,this.autoStackButtons=!0,this.areButtonsStacked=!1,this.suppressDefaultPressSelector=LO.SUPPRESS_DEFAULT_PRESS_SELECTOR,this.animFrame=new kE,this.contentScrollHandler=()=>{this.handleScrollEvent()},this.windowResizeHandler=()=>{this.layout()},this.windowOrientationChangeHandler=()=>{this.layout()}}static get cssClasses(){return RO}static get strings(){return LO}static get numbers(){return NO}static get defaultAdapter(){return{addBodyClass:()=>{},addClass:()=>{},areButtonsStacked:()=>!1,clickDefaultButton:()=>{},eventTargetMatches:()=>!1,getActionFromEvent:()=>"",getInitialFocusEl:()=>null,hasClass:()=>!1,isContentScrollable:()=>!1,notifyClosed:()=>{},notifyClosing:()=>{},notifyOpened:()=>{},notifyOpening:()=>{},releaseFocus:()=>{},removeBodyClass:()=>{},removeClass:()=>{},reverseButtons:()=>{},trapFocus:()=>{},registerContentEventHandler:()=>{},deregisterContentEventHandler:()=>{},isScrollableContentAtTop:()=>!1,isScrollableContentAtBottom:()=>!1,registerWindowEventHandler:()=>{},deregisterWindowEventHandler:()=>{}}}init(){this.adapter.hasClass(RO.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(RO.FULLSCREEN)}destroy(){this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)}open(t){this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(RO.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),t&&t.isAboveFullscreenDialog&&this.adapter.addClass(RO.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame((()=>{this.adapter.addClass(RO.OPEN),t&&t.isScrimless||this.adapter.addBodyClass(RO.SCROLL_LOCK),this.layout(),this.animationTimer=setTimeout((()=>{this.handleAnimationTimerEnd(),this.adapter.trapFocus(this.adapter.getInitialFocusEl()),this.adapter.notifyOpened()}),NO.DIALOG_ANIMATION_OPEN_TIME_MS)}))}close(t=""){this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(t),this.adapter.addClass(RO.CLOSING),this.adapter.removeClass(RO.OPEN),this.adapter.removeBodyClass(RO.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout((()=>{this.adapter.releaseFocus(),this.handleAnimationTimerEnd(),this.adapter.notifyClosed(t)}),NO.DIALOG_ANIMATION_CLOSE_TIME_MS))}showSurfaceScrim(){this.adapter.addClass(RO.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame((()=>{this.adapter.addClass(RO.SURFACE_SCRIM_SHOWN)}))}hideSurfaceScrim(){this.adapter.removeClass(RO.SURFACE_SCRIM_SHOWN),this.adapter.addClass(RO.SURFACE_SCRIM_HIDING)}handleSurfaceScrimTransitionEnd(){this.adapter.removeClass(RO.SURFACE_SCRIM_HIDING),this.adapter.removeClass(RO.SURFACE_SCRIM_SHOWING)}isOpen(){return this.dialogOpen}getEscapeKeyAction(){return this.escapeKeyAction}setEscapeKeyAction(t){this.escapeKeyAction=t}getScrimClickAction(){return this.scrimClickAction}setScrimClickAction(t){this.scrimClickAction=t}getAutoStackButtons(){return this.autoStackButtons}setAutoStackButtons(t){this.autoStackButtons=t}getSuppressDefaultPressSelector(){return this.suppressDefaultPressSelector}setSuppressDefaultPressSelector(t){this.suppressDefaultPressSelector=t}layout(){this.animFrame.request("poll_layout_change",(()=>{this.layoutInternal()}))}handleClick(t){if(this.adapter.eventTargetMatches(t.target,LO.SCRIM_SELECTOR)&&""!==this.scrimClickAction)this.close(this.scrimClickAction);else{const e=this.adapter.getActionFromEvent(t);e&&this.close(e)}}handleKeydown(t){const e="Enter"===t.key||13===t.keyCode;if(!e)return;if(this.adapter.getActionFromEvent(t))return;const i=t.composedPath?t.composedPath()[0]:t.target,n=!this.suppressDefaultPressSelector||!this.adapter.eventTargetMatches(i,this.suppressDefaultPressSelector);e&&n&&this.adapter.clickDefaultButton()}handleDocumentKeydown(t){("Escape"===t.key||27===t.keyCode)&&""!==this.escapeKeyAction&&this.close(this.escapeKeyAction)}handleScrollEvent(){this.animFrame.request("poll_scroll_position",(()=>{this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()}))}layoutInternal(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()}handleAnimationTimerEnd(){this.animationTimer=0,this.adapter.removeClass(RO.OPENING),this.adapter.removeClass(RO.CLOSING)}runNextAnimationFrame(t){cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((()=>{this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout(t,0)}))}detectStackedButtons(){this.adapter.removeClass(RO.STACKED);const t=this.adapter.areButtonsStacked();t&&this.adapter.addClass(RO.STACKED),t!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=t)}toggleScrollableClasses(){this.adapter.removeClass(RO.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(RO.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))}toggleScrollDividerHeader(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(RO.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(RO.SCROLL_DIVIDER_HEADER):this.adapter.addClass(RO.SCROLL_DIVIDER_HEADER)}toggleScrollDividerFooter(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(RO.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(RO.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(RO.SCROLL_DIVIDER_FOOTER)}}var BO=ym('<div class="mdc-dialog__surface-scrim"></div>'),zO=ym('<div><div><div><!> <!></div></div> <div class="mdc-dialog__scrim"></div></div> <!>',1);function VO(t,e){Yd(e,!0);const[i,n]=yg(),s=()=>gg(A,"$aboveFullscreenShown",i),{FocusTrap:r}=TD,{closest:o,matches:a}=MD;let l,c,h=Sg(e,"use",19,(()=>[])),u=Sg(e,"class",3,""),d=Sg(e,"open",15,!1),p=Sg(e,"selection",3,!1),f=Sg(e,"escapeKeyAction",3,"close"),m=Sg(e,"scrimClickAction",3,"close"),g=Sg(e,"autoStackButtons",3,!0),v=Sg(e,"fullscreen",3,!1),y=Sg(e,"sheet",3,!1),_=Sg(e,"noContentPadding",3,!1),b=Sg(e,"container$class",3,""),w=Sg(e,"surface$class",3,""),x=bg(e,["$$slots","$$events","$$legacy","use","class","open","selection","escapeKeyAction","scrimClickAction","autoStackButtons","fullscreen","sheet","noContentPadding","container$class","surface$class","children","over"]),S=Gp(void 0),T=new CA,C=Jd({}),M=null,I=Eg(!1),E=Gd("SMUI:dialog:aboveFullscreen"),A=Gd("SMUI:dialog:aboveFullscreenShown")??Eg(!1),D=Gd("SMUI:addLayoutListener"),k=[];qd("SMUI:dialog:actions:reversed",I),qd("SMUI:addLayoutListener",(t=>(k.push(t),()=>{const e=k.indexOf(t);e>=0&&k.splice(e,1)}))),qd("SMUI:dialog:selection",p()),qd("SMUI:dialog:aboveFullscreen",E||v()),qd("SMUI:dialog:aboveFullscreenShown",A),y()&&qd("SMUI:icon-button:context","dialog:sheet"),Ff((()=>{If(S)&&If(S).getEscapeKeyAction()!==f()&&If(S).setEscapeKeyAction(f())})),Ff((()=>{If(S)&&If(S).getScrimClickAction()!==m()&&If(S).setScrimClickAction(m())})),Ff((()=>{If(S)&&If(S).getAutoStackButtons()!==g()&&If(S).setAutoStackButtons(g())})),Ff((()=>{g()||vg(I,!0)})),D&&(c=D(B)),Ff((()=>{If(S)&&If(S).isOpen()!==d()&&(d()?If(S).open({isAboveFullscreenDialog:!!E}):If(S).close())}));let P=s();function O(t){return t in C?C[t]:z().classList.contains(t)}function R(t){C[t]||(C[t]=!0)}function L(t){t in C&&!C[t]||(C[t]=!1)}function N(){return z().querySelector(".mdc-dialog__content")}function F(){return z().querySelector("[data-mdc-dialog-initial-focus]")}function B(){var t;return null==(t=If(S))?void 0:t.layout()}function z(){return l}Ff((()=>{v()&&If(S)&&P!==s()&&(P=s(),s()?If(S).showSurfaceScrim():If(S).hideSurfaceScrim())})),Tg((()=>(M=new r(l,{initialFocusEl:F()??void 0}),Yp(S,new FO({addBodyClass:t=>document.body.classList.add(t),addClass:R,areButtonsStacked:()=>function(t){const e=new Set;return[].forEach.call(t,(t=>e.add(t.offsetTop))),e.size>1}([].slice.call(z().querySelectorAll(".mdc-dialog__button"))),clickDefaultButton:()=>{const t=z().querySelector("[data-mdc-dialog-button-default]");t&&t.click()},eventTargetMatches:(t,e)=>!!t&&a(t,e),getActionFromEvent:t=>{if(!t.target)return"";const e=o(t.target,"[data-mdc-dialog-action]");return e&&e.getAttribute("data-mdc-dialog-action")},getInitialFocusEl:F,hasClass:O,isContentScrollable:()=>{return!!(t=N())&&t.scrollHeight>t.offsetHeight;var t},notifyClosed:t=>{d(!1),xA(z(),"SMUIDialogClosed",t?{action:t}:{})},notifyClosing:t=>xA(z(),"SMUIDialogClosing",t?{action:t}:{}),notifyOpened:()=>xA(z(),"SMUIDialogOpened",{}),notifyOpening:()=>xA(z(),"SMUIDialogOpening",{}),releaseFocus:()=>null==M?void 0:M.releaseFocus(),removeBodyClass:t=>document.body.classList.remove(t),removeClass:L,reverseButtons:()=>{vg(I,!0)},trapFocus:()=>null==M?void 0:M.trapFocus(),registerContentEventHandler:(t,e)=>{const i=N();i instanceof HTMLElement&&T.on(i,t,e)},deregisterContentEventHandler:(t,e)=>{const i=N();i instanceof HTMLElement&&T.off(i,t,e)},isScrollableContentAtTop:()=>{return!!(t=N())&&0===t.scrollTop;var t},isScrollableContentAtBottom:()=>{return!!(t=N())&&Math.ceil(t.scrollHeight-t.scrollTop)===t.clientHeight;var t},registerWindowEventHandler:(t,e)=>T.on(window,t,e),deregisterWindowEventHandler:(t,e)=>T.off(window,t,e)}),!0),If(S).init(),()=>{var t;null==(t=If(S))||t.destroy(),Yp(S,void 0),T.clear(),null==M||M.releaseFocus(),M=null}))),Tg((()=>{const t=t=>If(S)&&If(S).handleDocumentKeydown(t);document.body.addEventListener("keydown",t);const e=()=>d()&&If(S)&&If(S).layout();window.addEventListener("resize",e);const i=()=>d()&&If(S)&&If(S).layout();return window.addEventListener("orientationchange",i),()=>{document.body.removeEventListener("keydown",t),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",i)}})),Cg((()=>{c&&c()}));var V=zO(),$=cp(V),H=t=>{var i;E&&vg(A,!0),requestAnimationFrame((()=>{k.forEach((t=>t()))})),null==(i=e.onSMUIDialogOpening)||i.call(e,t)},K=t=>{var i;k.forEach((t=>t())),null==(i=e.onSMUIDialogOpened)||i.call(e,t)},W=t=>{var i;E&&vg(A,!1),null==(i=e.onSMUIDialogClosed)||i.call(e,t)},j=t=>{var i;If(S)&&If(S).handleClick(t),null==(i=e.onclick)||i.call(e,t)},U=t=>{var i;If(S)&&If(S).handleKeydown(t),null==(i=e.onkeydown)||i.call(e,t)};og($,((t,e)=>({class:t,role:"alertdialog","aria-modal":"true",...e,onSMUIDialogOpening:H,onSMUIDialogOpened:K,onSMUIDialogClosed:W,onclick:j,onkeydown:U})),[()=>wA({[u()]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!g(),"mdc-dialog--fullscreen":v(),"mdc-dialog--sheet":y(),"mdc-dialog--no-content-padding":_(),"smui-dialog--selection":p(),...C}),()=>SA(x,["container$","surface$"])]);var G=lp($);og(G,((t,e)=>({class:t,...e})),[()=>wA({[b()]:!0,"mdc-dialog__container":!0}),()=>TA(x,"container$")]);var q=lp(G);og(q,((t,e)=>({class:t,role:"alertdialog","aria-modal":"true",...e})),[()=>wA({[w()]:!0,"mdc-dialog__surface":!0}),()=>TA(x,"surface$")]);var Y=lp(q);Fm(Y,(()=>e.children??fd));var X=hp(Y,2),Z=t=>{var e=BO();dm("transitionend",e,(()=>If(S)&&If(S).handleSurfaceScrimTransitionEnd())),Sm(t,e)};Am(X,(t=>{v()&&t(Z)})),ug($,(t=>l=t),(()=>l)),$m($,((t,e)=>null==MA?void 0:MA(t,e)),h),Fm(hp($,2),(()=>e.over??fd)),Sm(t,V);var Q=Xd({isOpen:function(){return d()},setOpen:function(t){d(t)},layout:B,getElement:z});return n(),Q}function $O(t,e){Yd(e,!0);let i,n=bg(e,["$$slots","$$events","$$legacy","children"]);return ug(vP(t,xg({_smuiClass:"mdc-dialog__content",tag:"div"},(()=>n),{children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>i=t),(()=>i)),Xd({getElement:function(){return i.getElement()}})}function HO(t){return t.setAttribute("data-mdc-dialog-initial-focus",""),{destroy(){t.removeAttribute("data-mdc-dialog-initial-focus")}}}const KO={id:"Awesome Oscillator",name:"Awesome Oscillator",abbr:"AO",overlap:!1,optionInfos:[{name:"shortPeriod",displayName:"Short Period",defaultValue:5,type:"Integer",range:{min:2,max:1e5}},{name:"longPeriod",displayName:"Long Period",defaultValue:5,type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"}}},outputs:["plot"],cal:async(t,e,i=Object.create(null))=>{const n=i;return KO.optionInfos.forEach((t=>{n[t.name]=t.defaultValue})),t.ao(e,i)},format:{type:"price",precision:2}},WO={id:"Bull and Bear Index",name:"Bull and Bear Index",abbr:"BBI",overlap:!0,optionInfos:[{name:"n1",displayName:"N1",defaultValue:3,type:"Integer",range:{min:2,max:1e5}},{name:"n2",displayName:"N2",defaultValue:6,type:"Integer",range:{min:2,max:1e5}},{name:"n3",displayName:"N3",defaultValue:12,type:"Integer",range:{min:2,max:1e5}},{name:"n4",displayName:"N4",defaultValue:6,type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"}}},outputs:["plot"],cal:async(t,e,i=Object.create(null))=>{const n=i;return WO.optionInfos.forEach((t=>{n[t.name]=t.defaultValue})),t.bbi(e,i)},format:{type:"inherit"}},jO={id:"Bias Ratio(Price Oscillator)",name:"Bias Ratio(Price Oscillator)",abbr:"BIAS",overlap:!1,optionInfos:[],styleValues:{plots:{bias6:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},bias12:{lineWidth:1,plotType:"line",color:"rgb(8, 153, 129)"},bias24:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["bias6","bias12","bias24"],cal:async(t,e)=>t.bias(e,Object.create(null)),format:{type:"price",precision:2}},UO={id:"BRAR",name:"BRAR",abbr:"BRAR",overlap:!1,optionInfos:[],styleValues:{plots:{br:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ar:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["br","ar"],cal:async(t,e)=>t.brar(e,Object.create(null)),format:{type:"price",precision:2}},GO={id:"CR",name:"CR",abbr:"CR",overlap:!1,optionInfos:[],styleValues:{plots:{cr:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ma1:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"},ma2:{lineWidth:1,plotType:"line",color:"rgb(36,214,200)"},ma3:{lineWidth:1,plotType:"line",color:"rgb(255,38,0)"},ma4:{lineWidth:1,plotType:"line",color:"rgb(255,0,242)"}}},outputs:["cr, ma1","ma2","ma3","ma4"],cal:async(t,e)=>t.cr(e,Object.create(null)),format:{type:"price",precision:2}},qO={id:"Directional Movement Index",name:"Directional Movement Index",abbr:"DMI",overlap:!1,optionInfos:[],styleValues:{plots:{"+di":{lineWidth:1,plotType:"line",color:"rgb(33, 150, 243)"},"-di":{lineWidth:1,plotType:"line",color:"rgb(255, 109, 0)"},adx:{lineWidth:1,plotType:"line",color:"rgb(245, 0, 87)"}}},outputs:["+di","-di","adx"],cal:async(t,e)=>t.dmi(e,Object.create(null)),format:{type:"price",precision:2}},YO={id:"Exponential Moving Average",name:"Exponential Moving Average",abbr:"EMA",overlap:!0,optionInfos:[],styleValues:{plots:{ema5:{lineWidth:1,plotType:"line",color:"#e39336",title:"EMA5"},ema10:{lineWidth:1,plotType:"line",color:"#9f63dd",title:"EMA10"},ema30:{lineWidth:1,plotType:"line",color:"#388def",title:"EMA30"},ema60:{lineWidth:1,plotType:"line",color:"#cf3673",title:"EMA60"}}},outputs:["ema5","ema10","ema30","ema60"],cal:(t,e)=>t.ema(e,Object.create(null)),format:{type:"inherit"}},XO={id:"Ease of Movement Value",name:"Ease of Movement Value",abbr:"EMV",overlap:!1,optionInfos:[],styleValues:{plots:{emv:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ma:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["emv","ma"],cal:async(t,e)=>t.emv(e,Object.create(null)),format:{type:"price",precision:2}},ZO={id:"Stochastic Indicator",name:"Stochastic Indicator",abbr:"KDJ",overlap:!1,optionInfos:[{name:"timePeriod",defaultValue:9,type:"Integer",range:{min:1,max:1e5}},{name:"k_Period",defaultValue:3,type:"Integer",range:{min:1,max:1e5}},{name:"D_Period",displayName:"Fast-K Period",defaultValue:3,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{k:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)",title:"K"},d:{lineWidth:1,plotType:"line",color:"#A77DC9",title:"D"},j:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"J"}}},outputs:["k","d","j"],cal:async(t,e)=>t.kdj(e,Object.create(null)),format:{type:"price",precision:2}},QO={id:"Moving Average",name:"Moving Average",abbr:"MA",overlap:!0,optionInfos:[],styleValues:{plots:{ma5:{lineWidth:1,plotType:"line",color:"#e39336",title:"MA5"},ma10:{lineWidth:1,plotType:"line",color:"#9f63dd",title:"MA10"},ma30:{lineWidth:1,plotType:"line",color:"#388def",title:"MA30"},ma60:{lineWidth:1,plotType:"line",color:"#cf3673",title:"MA60"}}},outputs:["ma5","ma10","ma30","ma60"],cal:async(t,e)=>t.ma(e,Object.create(null)),format:{type:"inherit"}},JO={id:"Momentum Index",name:"Momentum Index",abbr:"MTM",overlap:!1,optionInfos:[],styleValues:{plots:{mtm:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ma:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["mtm","ma"],cal:async(t,e)=>t.mtm(e,Object.create(null)),format:{type:"price",precision:2}},tR={id:"Psychological Line",name:"Psychological Line",abbr:"PSY",overlap:!1,optionInfos:[],styleValues:{plots:{psy:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ma:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["psy","ma"],cal:async(t,e)=>t.psy(e,Object.create(null)),format:{type:"price",precision:2}},eR={id:"Price and Volume Trend",name:"Price and Volume Trend",abbr:"PVT",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"}}},outputs:["plot"],cal:async(t,e)=>t.pvt(e,Object.create(null)),format:{type:"price",precision:2}},iR={id:"Parabolic Stop and Reverse",name:"Parabolic Stop and Reverse",abbr:"SAR",overlap:!0,optionInfos:[{name:"start",displayName:"start",defaultValue:.02,type:"Double",range:{min:0,max:3e37}},{name:"increment",displayName:"increment",defaultValue:.02,type:"Double",range:{min:0,max:3e37}},{name:"maximum",displayName:"maximum",defaultValue:.2,type:"Double",range:{min:0,max:3e37}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"cross",color:"#2196F3",title:"SAR"}}},outputs:["plot"],cal:async(t,e)=>t.sar(e,Object.create(null)),format:{type:"inherit"}},nR={id:"Stochastic RSI",name:"Stochastic RSI",abbr:"STOCHRSI",overlap:!1,optionInfos:[],styleValues:{plots:{k:{lineWidth:1,plotType:"line",color:"#2962FF",title:"%K"},d:{lineWidth:1,plotType:"line",color:"#FF6D00",title:"%D"}},bands:{hline_0:{id:"hline_0",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:80},hline_1:{id:"hline_1",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:20}},filledAreas:{fill_0:{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",fillType:"solid",color:"#2196F3",transparency:90}}},outputs:["k","d"],cal:async(t,e)=>t.stochrsi(e,Object.create(null)),format:{type:"price",precision:2}},sR={id:"TRIX",name:"TRIX",abbr:"TRIX",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(244, 67, 54)"}}},outputs:["plot"],cal:async(t,e)=>t.trix(e,Object.create(null)),format:{type:"price",precision:2}},rR={id:"Volatility Volume Ratio",name:"Volatility Volume Ratio",abbr:"VR",overlap:!1,optionInfos:[],styleValues:{plots:{vr:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)"},ma:{lineWidth:1,plotType:"line",color:"rgb(255, 152, 0)"}}},outputs:["vr","ma"],cal:async(t,e)=>t.vr(e,Object.create(null)),format:{type:"price",precision:2}};var oR,aR=(t=>(t[t.SMA=0]="SMA",t[t.EMA=1]="EMA",t[t.WMA=2]="WMA",t[t.DEMA=3]="DEMA",t[t.TEMA=4]="TEMA",t[t.TRIMA=5]="TRIMA",t[t.KAMA=6]="KAMA",t[t.MAMA=7]="MAMA",t[t.T3=8]="T3",t))(aR||{});oR=aR,Object.keys(oR).filter((t=>isNaN(Number(t)))).map((t=>({title:t,value:oR[t]})));const lR=[{id:"Acceleration Bands",name:"Acceleration Bands",abbr:"ACCBANDS",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:20,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{upperBand:{lineWidth:1,plotType:"line",color:"rgb(242, 54, 69)",title:"upperBand"},middleBand:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"middleBand"},lowerBand:{lineWidth:1,plotType:"line",color:"rgb(8, 153, 129)",title:"lowerBand"}},bands:{},filledAreas:{}},outputs:[{taKey:"upperBand",chartKey:"upperBand"},{taKey:"middleBand",chartKey:"middleBand"},{taKey:"lowerBand",chartKey:"lowerBand"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"ACCBANDS",format:{type:"inherit"}},{id:"Chaikin A/D Line",name:"Chaikin A/D Line",abbr:"AD",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],funcName:"AD",format:{type:"price",precision:2}},{id:"Chaikin A/D Oscillator",name:"Chaikin A/D Oscillator",abbr:"ADOSC",overlap:!1,optionInfos:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:3,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:10,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],funcName:"ADOSC",format:{type:"price",precision:2}},{id:"Average Directional Index",name:"Average Directional Index",abbr:"ADX",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"ADX",format:{type:"price",precision:2}},{id:"Average Directional Movement Index Rating",name:"Average Directional Movement Index Rating",abbr:"ADXR",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"ADXR",format:{type:"price",precision:2}},{id:"Absolute Price Oscillator",name:"Absolute Price Oscillator",abbr:"APO",overlap:!1,optionInfos:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"APO",format:{type:"price",precision:2}},{id:"Aroon",name:"Aroon",abbr:"AROON",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{aroonDown:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"aroonDown"},aroonUp:{lineWidth:1,plotType:"line",color:"rgb(251, 140, 0)",title:"aroonUp"}},bands:{},filledAreas:{}},outputs:[{taKey:"aroonDown",chartKey:"aroonDown"},{taKey:"aroonUp",chartKey:"aroonUp"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"AROON",format:{type:"price",precision:2}},{id:"Aroon Oscillator",name:"Aroon Oscillator",abbr:"AROONOSC",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"AROONOSC",format:{type:"price",precision:2}},{id:"Average True Range",name:"Average True Range",abbr:"ATR",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"ATR",format:{type:"price",precision:2}},{id:"Average Deviation",name:"Average Deviation",abbr:"AVGDEV",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"AVGDEV",format:{type:"price",precision:2}},{id:"Average Price",name:"Average Price",abbr:"AVGPRICE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"open",type:"Double[]"},{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"AVGPRICE",format:{type:"price",precision:2}},{id:"Bollinger Bands",name:"Bollinger Bands",abbr:"BOLL",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:20,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"nbDevUp",displayName:"Deviations up",defaultValue:2,hint:"Deviation multiplier for upper band",type:"Double",range:{min:-3e37,max:3e37}},{name:"nbDevDn",displayName:"Deviations down",defaultValue:2,hint:"Deviation multiplier for lower band",type:"Double",range:{min:-3e37,max:3e37},hidden:!0},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType",hidden:!0}],styleValues:{plots:{upperBand:{lineWidth:1,plotType:"line",color:"#2196F3",title:"UPPER"},middleBand:{lineWidth:1,plotType:"line",color:"rgb(255, 109, 0)",title:"MID"},lowerBand:{lineWidth:1,plotType:"line",color:"#2196F3",title:"LOWER"}},filledAreas:{fill_0:{id:"fill_0",objAId:"upperBand",objBId:"lowerBand",type:"plot_plot",fillType:"solid",color:"#2196F3",transparency:95}}},outputs:[{taKey:"upperBand",chartKey:"upperBand"},{taKey:"middleBand",chartKey:"middleBand"},{taKey:"lowerBand",chartKey:"lowerBand"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"BBANDS",format:{type:"inherit"}},{id:"Balance Of Power",name:"Balance Of Power",abbr:"BOP",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"open",type:"Double[]"},{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"BOP",format:{type:"price",precision:2}},{id:"Commodity Channel Index",name:"Commodity Channel Index",abbr:"CCI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"#2196F3",title:""}},bands:{hline_0:{id:"hline_0",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:100},hline_1:{id:"hline_1",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:-100}},filledAreas:{fill_0:{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",fillType:"solid",color:"#2196F3",transparency:90}}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"CCI",format:{type:"price",precision:2}},{id:"Chande Momentum Oscillator",name:"Chande Momentum Oscillator",abbr:"CMO",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"CMO",format:{type:"price",precision:2}},{id:"Double Exponential Moving Average",name:"Double Exponential Moving Average",abbr:"DEMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(67, 160, 71)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"DEMA",format:{type:"inherit"}},{id:"Hilbert Transform - Dominant Cycle Period",name:"Hilbert Transform - Dominant Cycle Period",abbr:"HT_DCPERIOD",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_DCPERIOD",format:{type:"price",precision:2}},{id:"Hilbert Transform - Dominant Cycle Phase",name:"Hilbert Transform - Dominant Cycle Phase",abbr:"HT_DCPHASE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_DCPHASE",format:{type:"price",precision:2}},{id:"Hilbert Transform - Phasor Components",name:"Hilbert Transform - Phasor Components",abbr:"HT_PHASOR",overlap:!1,optionInfos:[],styleValues:{plots:{inPhase:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"inPhase"},quadrature:{lineWidth:1,plotType:"line",color:"rgb(251, 140, 0)",title:"quadrature"}},bands:{},filledAreas:{}},outputs:[{taKey:"inPhase",chartKey:"inPhase"},{taKey:"quadrature",chartKey:"quadrature"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_PHASOR",format:{type:"price",precision:2}},{id:"Hilbert Transform - SineWave",name:"Hilbert Transform - SineWave",abbr:"HT_SINE",overlap:!1,optionInfos:[],styleValues:{plots:{sine:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"sine"},leadSine:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:"leadSine"}},bands:{},filledAreas:{}},outputs:[{taKey:"sine",chartKey:"sine"},{taKey:"leadSine",chartKey:"leadSine"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_SINE",format:{type:"price",precision:2}},{id:"Hilbert Transform - Instantaneous Trendline",name:"Hilbert Transform - Instantaneous Trendline",abbr:"HT_TRENDLINE",overlap:!0,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_TRENDLINE",format:{type:"inherit"}},{id:"Hilbert Transform - Trend vs Cycle Mode",name:"Hilbert Transform - Trend vs Cycle Mode",abbr:"HT_TRENDMODE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"HT_TRENDMODE",format:{type:"price",precision:2}},{id:"Intraday Momentum Index",name:"Intraday Momentum Index",abbr:"IMI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"open",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"IMI",format:{type:"price",precision:2}},{id:"Kaufman Adaptive Moving Average",name:"Kaufman Adaptive Moving Average",abbr:"KAMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"KAMA",format:{type:"inherit"}},{id:"Moving Average Convergence Divergence",name:"Moving Average Convergence Divergence",abbr:"MACD",overlap:!1,optionInfos:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"fastMAType",displayName:"Fast MA",defaultValue:0,hint:"Type of Moving Average for fast MA",type:"MAType"},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowMAType",displayName:"Slow MA",defaultValue:0,hint:"Type of Moving Average for slow MA",type:"MAType"},{name:"signalPeriod",displayName:"Signal Period",defaultValue:9,hint:"Smoothing for the signal line (nb of period)",type:"Integer",range:{min:1,max:1e5}},{name:"signalMAType",displayName:"Signal MA",defaultValue:0,hint:"Type of Moving Average for signal line",type:"MAType"}],styleValues:{plots:{histogram:{color:["#22ab94","#ace5dc","#fccbcd","#ff5252"],plotType:"columns",title:"MACD"},macd:{lineWidth:1,color:"#2196F3",plotType:"line",title:"DIF"},signal:{lineWidth:1,color:"#FF6D00",plotType:"line",title:"DEA"}},bands:{},filledAreas:{}},outputs:[{taKey:"MACDHist",chartKey:"histogram"},{taKey:"MACD",chartKey:"macd"},{taKey:"MACDSignal",chartKey:"signal"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"MACDEXT",format:{type:"price",precision:2}},{id:"MESA Adaptive Moving Average",name:"MESA Adaptive Moving Average",abbr:"MAMA",overlap:!0,optionInfos:[{name:"fastLimit",displayName:"Fast Limit",defaultValue:.5,hint:"Upper limit use in the adaptive algorithm",type:"Double",range:{min:.01,max:.99}},{name:"slowLimit",displayName:"Slow Limit",defaultValue:.05,hint:"Lower limit use in the adaptive algorithm",type:"Double",range:{min:.01,max:.99}}],styleValues:{plots:{MAMA:{lineWidth:1,plotType:"line",color:"rgb(0, 0, 255)",title:"MAMA"},FAMA:{lineWidth:1,plotType:"line",color:"rgb(128, 0, 0)",title:"FAMA"}},bands:{},filledAreas:{}},outputs:[{taKey:"MAMA",chartKey:"MAMA"},{taKey:"FAMA",chartKey:"FAMA"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"MAMA",format:{type:"inherit"}},{id:"Median Price",name:"Median Price",abbr:"MEDPRICE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"MEDPRICE",format:{type:"price",precision:2}},{id:"Money Flow Index",name:"Money Flow Index",abbr:"MFI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"},{name:"volume",type:"Double[]"}],funcName:"MFI",format:{type:"price",precision:2}},{id:"MidPoint over period",name:"MidPoint over period",abbr:"MIDPOINT",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"MIDPOINT",format:{type:"inherit"}},{id:"Midpoint Price over period",name:"Midpoint Price over period",abbr:"MIDPRICE",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"MIDPRICE",format:{type:"inherit"}},{id:"Minus Directional Indicator",name:"Minus Directional Indicator",abbr:"MINUS_DI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"MINUS_DI",format:{type:"price",precision:2}},{id:"Minus Directional Movement",name:"Minus Directional Movement",abbr:"MINUS_DM",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"MINUS_DM",format:{type:"price",precision:2}},{id:"Momentum",name:"Momentum",abbr:"MOM",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"MOM",format:{type:"price",precision:2}},{id:"On Balance Volume",name:"On Balance Volume",abbr:"OBV",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"},{name:"volume",type:"Double[]"}],funcName:"OBV",format:{type:"price",precision:2}},{id:"Plus Directional Indicator",name:"Plus Directional Indicator",abbr:"PLUS_DI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"PLUS_DI",format:{type:"price",precision:2}},{id:"Plus Directional Movement",name:"Plus Directional Movement",abbr:"PLUS_DM",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"}],funcName:"PLUS_DM",format:{type:"price",precision:2}},{id:"Percentage Price Oscillator",name:"Percentage Price Oscillator",abbr:"PPO",overlap:!1,optionInfos:[{name:"fastPeriod",displayName:"Fast Period",defaultValue:12,hint:"Number of period for the fast MA",type:"Integer",range:{min:2,max:1e5}},{name:"slowPeriod",displayName:"Slow Period",defaultValue:26,hint:"Number of period for the slow MA",type:"Integer",range:{min:2,max:1e5}},{name:"MAType",displayName:"MA Type",defaultValue:0,hint:"Type of Moving Average",type:"MAType"}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"PPO",format:{type:"price",precision:2}},{id:"Rate of Change",name:"Rate of Change",abbr:"ROC",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:9,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{hline_0:{id:"hline_0",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:0}},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"ROC",format:{type:"price",precision:2}},{id:"Rate of change Percentage: (price-prevPrice)/prevPrice",name:"Rate of change Percentage: (price-prevPrice)/prevPrice",abbr:"ROCP",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"ROCP",format:{type:"price",precision:2}},{id:"Rate of change ratio: (price/prevPrice)",name:"Rate of change ratio: (price/prevPrice)",abbr:"ROCR",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"ROCR",format:{type:"price",precision:2}},{id:"Rate of change ratio 100 scale: (price/prevPrice)*100",name:"Rate of change ratio 100 scale: (price/prevPrice)*100",abbr:"ROCR100",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:10,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"ROCR100",format:{type:"price",precision:2}},{id:"Relative Strength Index",name:"Relative Strength Index",abbr:"RSI",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{hline_0:{id:"hline_0",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:70},hline_1:{id:"hline_1",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:30}},filledAreas:{fill_0:{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",fillType:"solid",color:"#7E57C2",transparency:90}}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"RSI",format:{type:"price",precision:2}},{id:"Simple Moving Average",name:"Simple Moving Average",abbr:"SMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"SMA",format:{type:"inherit"}},{id:"Standard Deviation",name:"Standard Deviation",abbr:"STDDEV",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"nbDev",displayName:"Deviations",defaultValue:1,hint:"Nb of deviations",type:"Double",range:{min:-3e37,max:3e37}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"STDDEV",format:{type:"price",precision:2}},{id:"Stochastic Oscillator",name:"Stochastic Oscillator",abbr:"STOCH",overlap:!1,optionInfos:[{name:"fastK_Period",displayName:"Fast-K Period",defaultValue:14,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}},{name:"slowK_Period",displayName:"Slow-K Period",defaultValue:1,hint:"Smoothing for making the Slow-K line. Usually set to 3",type:"Integer",range:{min:1,max:1e5}},{name:"slowK_MAType",displayName:"Slow-K MA",defaultValue:0,hint:"Type of Moving Average for Slow-K",type:"MAType",hidden:!0},{name:"slowD_Period",displayName:"Slow-D Period",defaultValue:3,hint:"Smoothing for making the Slow-D line",type:"Integer",range:{min:1,max:1e5}},{name:"slowD_MAType",displayName:"Slow-D MA",defaultValue:0,hint:"Type of Moving Average for Slow-D",type:"MAType",hidden:!0}],styleValues:{plots:{slowK:{lineWidth:1,plotType:"line",color:"#2962FF",title:"%K"},slowD:{lineWidth:1,plotType:"line",color:"#FF6D00",title:"%D"}},bands:{},filledAreas:{}},outputs:[{taKey:"slowK",chartKey:"slowK"},{taKey:"slowD",chartKey:"slowD"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"STOCH",format:{type:"price",precision:2}},{id:"Stochastic Fast",name:"Stochastic Fast",abbr:"STOCHF",overlap:!1,optionInfos:[{name:"fastK_Period",displayName:"Fast-K Period",defaultValue:5,hint:"Time period for building the Fast-K line",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_Period",displayName:"Fast-D Period",defaultValue:3,hint:"Smoothing for making the Fast-D line. Usually set to 3",type:"Integer",range:{min:1,max:1e5}},{name:"fastD_MAType",displayName:"Fast-D MA",defaultValue:0,hint:"Type of Moving Average for Fast-D",type:"MAType"}],styleValues:{plots:{fastK:{lineWidth:1,plotType:"line",color:"#2962FF",title:"fastK"},fastD:{lineWidth:1,plotType:"line",color:"#FF6D00",title:"fastD"}},bands:{},filledAreas:{}},outputs:[{taKey:"fastK",chartKey:"fastK"},{taKey:"fastD",chartKey:"fastD"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"STOCHF",format:{type:"price",precision:2}},{id:"Tillson T3 Moving Average",name:"Tillson T3 Moving Average",abbr:"T3MA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}},{name:"VFactor",displayName:"Volume Factor",defaultValue:.7,hint:"Volume Factor",type:"Double",range:{min:0,max:1}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"T3",format:{type:"inherit"}},{id:"Triple Exponential Moving Average",name:"Triple Exponential Moving Average",abbr:"TEMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"TEMA",format:{type:"inherit"}},{id:"True Range",name:"True Range",abbr:"TRANGE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"TRANGE",format:{type:"price",precision:2}},{id:"Triangular Moving Average",name:"Triangular Moving Average",abbr:"TRIMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"TRIMA",format:{type:"inherit"}},{id:"1-day Rate-Of-Change (ROC) of a Triple Smooth EMA",name:"1-day Rate-Of-Change (ROC) of a Triple Smooth EMA",abbr:"TRIX",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"TRIX",format:{type:"price",precision:2}},{id:"Time Series Forecast",name:"Time Series Forecast",abbr:"TSF",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"TSF",format:{type:"price",precision:2}},{id:"Typical Price",name:"Typical Price",abbr:"TYPPRICE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"TYPPRICE",format:{type:"price",precision:2}},{id:"Ultimate Oscillator",name:"Ultimate Oscillator",abbr:"ULTOSC",overlap:!1,optionInfos:[{name:"timePeriod1",displayName:"First Period",defaultValue:7,hint:"Number of bars for 1st period.",type:"Integer",range:{min:1,max:1e5}},{name:"timePeriod2",displayName:"Second Period",defaultValue:14,hint:"Number of bars fro 2nd period",type:"Integer",range:{min:1,max:1e5}},{name:"timePeriod3",displayName:"Third Period",defaultValue:28,hint:"Number of bars for 3rd period",type:"Integer",range:{min:1,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"ULTOSC",format:{type:"price",precision:2}},{id:"Variance",name:"Variance",abbr:"VAR",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:5,hint:"Number of period",type:"Integer",range:{min:1,max:1e5}},{name:"nbDev",displayName:"Deviations",defaultValue:1,hint:"Nb of deviations",type:"Double",range:{min:-3e37,max:3e37}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"VAR",format:{type:"price",precision:2}},{id:"Weighted Close Price",name:"Weighted Close Price",abbr:"WCLPRICE",overlap:!1,optionInfos:[],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"WCLPRICE",format:{type:"price",precision:2}},{id:"Williams %R",name:"Williams %R",abbr:"WMSR",overlap:!1,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:14,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"#7E57C2",title:""}},bands:{hline_0:{id:"hline_0",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:-20},hline_1:{id:"hline_1",color:"#787B86",lineStyle:Bx.dashed,lineWidth:1,value:-80}},filledAreas:{fill_0:{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",fillType:"solid",color:"#7E57C2",transparency:90}}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"high",type:"Double[]"},{name:"low",type:"Double[]"},{name:"close",type:"Double[]"}],funcName:"WILLR",format:{type:"price",precision:2}},{id:"Weighted Moving Average",name:"Weighted Moving Average",abbr:"WMA",overlap:!0,optionInfos:[{name:"timePeriod",displayName:"Time Period",defaultValue:30,hint:"Number of period",type:"Integer",range:{min:2,max:1e5}}],styleValues:{plots:{plot:{lineWidth:1,plotType:"line",color:"rgb(41, 98, 255)",title:""}},bands:{},filledAreas:{}},outputs:[{taKey:"output",chartKey:"plot"}],inputs:[{name:"inReal",type:"Double[]"}],funcName:"WMA",format:{type:"inherit"}}],cR=lR.map((t=>{const e={id:t.id,name:t.name,abbr:t.abbr,overlap:t.overlap,optionInfos:t.optionInfos,styleValues:t.styleValues,outputs:t.outputs.map((t=>t.chartKey)),coloring:"MACD"===t.abbr?hR:void 0,cal:async(e,i,n=Object.create(null))=>{const s=Object.create(null);return t.inputs.forEach((t=>{switch(t.type){case"Integer":s[t.name]=n[t.name];break;case"Double[]":s[t.name]=function(t,e){return t.map((t=>t.customValues[e]))}(i,"inReal"===t.name?"close":t.name)}})),t.optionInfos.forEach((t=>{s[t.name]=n[t.name]??t.defaultValue})),e.calcTA(t.funcName,i,t.outputs,s)},format:t.format};return e}));function hR(t,e){const i="histogram",n=ee(e.plots[i]);ie(Nx(n));const s=n.color;let r=Number.NaN;t.forEach((t=>{var e;if(z(null==(e=t.study)?void 0:e[i]))return;const n=t.study[i],o=n>0,a=isFinite(r)&&Math.abs(n)<Math.abs(r);let l;l=o?a?s[1]:s[0]:a?s[2]:s[3],t.color=l,r=n}))}const uR=cR.concat(KO,WO,jO,UO,GO,qO,YO,XO,ZO,QO,JO,tR,eR,iR,nR,sR,rR).sort(((t,e)=>t.name.localeCompare(e.name)));uR.forEach((t=>H_.add(t)));var dR=ym('<div class="titleText svelte-1cp2oja"> </div> <button class="titleClose svelte-1cp2oja"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="currentColor"><path d="m.58 1.42.82-.82 15 15-.82.82z"></path><path d="m.58 15.58 15-15 .82.82-15 15z"></path></svg></button>',1);const pR={hash:"svelte-1cp2oja",code:' .chartles .cl-title-block {align-items:center;cursor:default;display:flex;flex-direction:row;flex:0 0 auto;height:68px;padding:0 20px;border-bottom:1px solid var(--cl-gutter-background);} .chartles .cl-title-block__no-border {border:none;}.titleText.svelte-1cp2oja {color:var(--cl-foreground);flex-grow:1;font-size:20px;font-weight:600;line-height:28px;min-width:0;padding:17px 0;}.titleClose.svelte-1cp2oja {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;pointer-events:auto;position:relative;padding:8px;display:flex;align-items:center;width:fit-content;height:fit-content;z-index:0;color:var(--cl-foreground);}\n@media (hover: hover) and (pointer: fine) {.titleClose.svelte-1cp2oja:hover::before {position:absolute;content:"";inset:0;border-radius:8px;background-color:var(--cl-button-hoverBackground);z-index:-1;}\n}'};function fR(t,e){Yd(e,!0),Vm(t,pR);const i=()=>{var t;const i=new KeyboardEvent("keydown",{key:"Escape",code:"Escape",which:27,bubbles:!0,cancelable:!0});document.body.dispatchEvent(i),null==(t=e.handleClose)||t.call(e)};{let n=xp((()=>Wm("cl-title-block",e.noBorder&&"cl-title-block__no-border")));!function(t,e){Yd(e,!0);let i,n=bg(e,["$$slots","$$events","$$legacy","children"]);ug(vP(t,xg({_smuiClass:"mdc-dialog__title",tag:"h2"},(()=>n),{children:(t,i)=>{var n=xm();Fm(cp(n),(()=>e.children??fd)),Sm(t,n)},$$slots:{default:!0}})),(t=>i=t),(()=>i)),Xd({getElement:function(){return i.getElement()}})}(t,{get class(){return If(n)},children:(t,n)=>{var s=dR(),r=cp(s),o=lp(r),a=hp(r,2),l=xp((()=>Ut(i)));a.__pointerup=function(...t){var e;null==(e=If(l))||e.apply(this,t)},$f((()=>Tm(o,e.title))),Sm(t,s)},$$slots:{default:!0}})}Xd()}pm(["pointerup"]);var mR=ym("<span> </span>"),gR=ym('<div class="groupName svelte-16m6fce"> </div> <!>',1),vR=ym('<!> <div class="searchWrapper svelte-16m6fce"><div class="inputContainer svelte-16m6fce"><input type="text" class="input svelte-16m6fce" autocomplete="off" data-role="search" placeholder="Search"/></div> <div class="searchIcon svelte-16m6fce"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path stroke="currentColor" d="M12.4 12.5a7 7 0 1 0-4.9 2 7 7 0 0 0 4.9-2zm0 0l5.101 5"></path></svg></div></div> <!>',1);const yR={hash:"svelte-16m6fce",code:" .indicatorDialog::-webkit-scrollbar {-webkit-appearance:none;width:3px;height:3px;} .indicatorDialog::-webkit-scrollbar-corner {display:none;} .indicatorDialog::-webkit-scrollbar-thumb {background-clip:content-box;background-color:var(--cl-scrollbarThumb-background);border-radius:3px;} .indicatorDialog::-webkit-scrollbar-track {background-color:initial;border-radius:3px;} .indicatorDialog .content {padding:0;} .indicatorDialog .list {margin:0;padding:0;list-style:none;height:310px;width:420px;} .indicatorDialog .item {align-items:center;box-sizing:border-box;cursor:default;display:flex;height:32px;padding-left:32px;padding-right:16px;font-size:14px;color:var(--cl-listItem-foreground);}\n@media (hover: hover) and (pointer: fine) { .indicatorDialog .item:hover {background-color:var(--cl-listItem-hoverBackground);}\n}.searchWrapper.svelte-16m6fce {align-items:center;border-bottom:1px solid var(--cl-gutter-background);cursor:default;display:flex;flex-shrink:0;position:relative;}.inputContainer.svelte-16m6fce {height:24px;padding:8px 16px 8px 47px;width:100%;}.input.svelte-16m6fce {background-color:initial;border:none;color:var(--input-foreground);font-size:16px;height:100%;margin:0;padding:0;width:100%;outline:none;}.input.svelte-16m6fce::placeholder {color:var(--cl-inputPlaceholder-foreground);}.searchIcon.svelte-16m6fce {color:var(--cl-inputPlaceholder-foreground);height:18px;left:20px;pointer-events:none;position:absolute;top:calc(50% - 9px);}.groupName.svelte-16m6fce {padding:16px 84px 8px 32px;user-select:none;cursor:default;color:var(--cl-listTitle-foreground);font-size:11px;font-weight:400;letter-spacing:0.4px;line-height:16px;margin:0;text-transform:uppercase;white-space:nowrap;}"};function _R(t,e){Yd(e,!0),Vm(t,yR);const{t:i}=OA(),n=$w(Go),s=$w(kg);let r,o,a=Sg(e,"open",15,!1);const l=s.getValue("studiesAccessType"),c=s.getValue("studiesAccess"),h=function(){switch(l){case"white":return uR.filter((t=>"white"===c[t.name]));case"black":return uR.filter((t=>"black"!==c[t.name]));default:return uR}}();let u=Gp(Jd(h));const d={getItemLabel:t=>`${t.abbr} ${t.name}`,getItemDescription:t=>t.abbr},p=Object.create(null),f=t=>{const e=t.target.value;null==o||o.scrollIntoView(),m(e)},m=t=>{if(t){const e=function(t){"string"!=typeof t&&(t="");const e=t.toLowerCase(),{normalized:i,normalizedLowercase:n}=OO(t),s=PO(t);let r;const o=t.split(" ");if(o.length>1)for(const a of o){const t=PO(a),{normalized:e,normalizedLowercase:i}=OO(a);e&&(r||(r=[]),r.push({original:a,originalLowercase:a.toLowerCase(),normalized:e,normalizedLowercase:i,expectContiguousMatch:t}))}return{original:t,originalLowercase:e,normalized:i,normalizedLowercase:n,values:r,containsPathSeparator:!1,expectContiguousMatch:s}}(t);Yp(u,k(h,((t,i)=>DO(t,i,e,!0,d,p)),15),!0)}else Yp(u,h,!0)};function g(){a(!1),r.value="",m("")}VO(t,{onSMUIDialogClosed:g,class:"indicatorDialog",get open(){return a()},set open(t){a(t)},children:(t,e)=>{var s=vR(),a=cp(s);{let t=xp((()=>i("indicator.dialog.title")));fR(a,{get title(){return If(t)}})}var l=hp(a,2),c=lp(l),h=lp(c);h.__input=f,ug(h,(t=>r=t),(()=>r)),$m(h,(t=>null==HO?void 0:HO(t))),$O(hp(l,2),{class:"content",children:(t,e)=>{jI(t,{idle:!0,children:(t,e)=>{Sk(t,{class:"list",children:(t,e)=>{var s=gR(),r=cp(s),a=lp(r);ug(r,(t=>o=t),(()=>o)),km(hp(r,2),17,(()=>If(u)),(t=>t.id),((t,e)=>{{let i=xp((()=>Ut((()=>async function(t){n.activeChart().createStudy(t.id),g()}(If(e))))));Ck(t,{class:"item",get onpointerup(){return If(i)},children:(t,i)=>{var n=mR(),s=lp(n);$f((()=>Tm(s,If(e).name))),Sm(t,n)},$$slots:{default:!0}})}})),$f((t=>Tm(a,t)),[()=>i("indicator.dialog.script")]),Sm(t,s)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),Sm(t,s)},$$slots:{default:!0}}),Xd()}pm(["input"]);var bR=ym('<button class="indicator svelte-eipwer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none" class="svelte-eipwer"><path stroke="currentColor" d="M20 17l-5 5M15 17l5 5M9 11.5h7M17.5 8a2.5 2.5 0 0 0-5 0v11a2.5 2.5 0 0 1-5 0"></path></svg> <span class="svelte-eipwer"> </span></button> <!>',1),wR=ym('<div class="indicatorWrapper"><!> <!></div>');const xR={hash:"svelte-eipwer",code:'.indicator.svelte-eipwer {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 10px 0 5px;}\n@media (hover: hover) and (pointer: fine) {.indicator.svelte-eipwer:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.indicator.svelte-eipwer > svg:where(.svelte-eipwer) {width:28px;height:28px;color:var(--cl-foreground);}.indicator.svelte-eipwer > span:where(.svelte-eipwer) {margin-left:2px;}'};pm(["pointerup"]);var SR=ym("<div> </div>"),TR=ym('<button class="chartInterval svelte-8a4xyd"><span> </span></button> <!>',1),CR=ym('<div class="separator svelte-8a4xyd"></div>'),MR=ym('<!> <div class="sectionTitle svelte-8a4xyd"> </div> <!>',1),IR=ym('<div class="intervalMenu svelte-8a4xyd"><!></div>'),ER=ym("<div><!> <!></div>");const AR={hash:"svelte-8a4xyd",code:'.chartInterval.svelte-8a4xyd {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 10px;}\n@media (hover: hover) and (pointer: fine) {.chartInterval.svelte-8a4xyd:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.intervalMenu.svelte-8a4xyd {display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;min-width:190px;}.intervalMenu.svelte-8a4xyd .mdc-deprecated-list {margin:0;padding:0;list-style:none;}.sectionTitle.svelte-8a4xyd {font-size:11px;letter-spacing:0.4px;line-height:16px;padding:0 8px 0 12px;margin-bottom:4px;color:var(--cl-listTitle-foreground);}.separator.svelte-8a4xyd {height:1px;margin:6px 0;background-color:var(--cl-gutter-background);} .intervalMenu .row {height:28px;font-size:14px;padding:2px 10px 2px 12px;white-space:nowrap;display:flex;align-items:center;color:var(--cl-listItem-foreground);background:var(--cl-listItem-background);}\n@media (hover: hover) and (pointer: fine) { .intervalMenu .row:hover:not(.disabled):not(.selected) {background-color:var(--cl-listItem-hoverBackground);}\n} .intervalMenu .row.disabled {cursor:default;opacity:0.5;} .intervalMenu .row.selected {background-color:var(--cl-listItem-selectedBackground);color:var(--cl-listItem-selectedForeground);}'};function DR(t,e){Yd(e,!1),Vm(t,AR);const[i,n]=yg(),s=()=>gg(u,"$resolutionGroups",i),r=()=>gg(d,"$disabled",i),o=()=>gg(p,"$currentInterval",i),{t:a}=OA(),l=$w(Go),c=$w(kg),h=$w(Ox),u=Ag(h.store,(t=>t.groups)),d=Ag(l.store,(t=>{const{activeIndex:e}=t;return!isFinite(e)||t.instances[e].dataStatus<Rv.symbolInfoResolved})),p=Ag([l.store,h.store],(([t])=>{const{activeIndex:e}=t,i=isFinite(e)?t.instances[e].resolution:c.getValue("interval");return h.value(i)})),f=Ag(p,(t=>null==t?void 0:t.labelShort)),m=Ag(p,(t=>t?g(t):"")),g=t=>{const e=t.label;return a(e,{count:t.value})};let v=qp();Cg((()=>{Yp(v,null)})),dg();var y=ER(),_=lp(y);PA(_,{children:(t,e)=>{var n=TR(),s=cp(n),r=xp((()=>Ut((()=>If(v).setOpen(!0)))));s.__pointerup=function(...t){var e;null==(e=If(r))||e.apply(this,t)};var o=lp(s),a=lp(o);DA(hp(s,2),{children:(t,e)=>{var n=SR(),s=lp(n);$f((()=>Tm(s,gg(m,"$labelLong",i)))),Sm(t,n)},$$slots:{default:!0}}),$f((()=>Tm(a,gg(f,"$labelShort",i)))),Sm(t,n)},$$slots:{default:!0}}),jI(hp(_,2),{idle:!0,children:(t,e)=>{ug(zk(t,{anchorCorner:"BOTTOM_LEFT",quickOpen:!0,class:"cl-dropdown",children:(t,e)=>{var i=IR();Sk(lp(i),{children:(t,e)=>{var i=xm();km(cp(i),1,s,Dm,((t,e,i)=>{var n=MR(),s=cp(n),c=t=>{Sm(t,CR())};Am(s,(t=>{0!==i&&t(c)}));var h=hp(s,2),u=lp(h);km(hp(h,2),1,(()=>If(e).items),Dm,((t,e)=>{{let i=Sp((()=>{var t;return If(e).resolutionString===(null==(t=o())?void 0:t.resolutionString)})),n=Sp((()=>{var t;return Wm("row",If(e).resolutionString===(null==(t=o())?void 0:t.resolutionString)&&"selected",r()&&"disabled")})),s=Sp((()=>Ut((()=>{r()||l.activeChart().setResolution(If(e).resolutionString)}))));Ck(t,{tag:"div",get disabled(){return r()},get selected(){return If(i)},get class(){return If(n)},get onpointerup(){return If(s)},children:(t,i)=>{var n=wm();$f((t=>Tm(n,t)),[()=>g(If(e))]),Sm(t,n)},$$slots:{default:!0}})}})),$f((t=>Tm(u,t)),[()=>a(If(e).i18nKey)]),Sm(t,n)})),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0},$$legacy:!0}),(t=>Yp(v,t)),(()=>If(v)))},$$slots:{default:!0}}),Sm(t,y),Xd(),n()}pm(["pointerup"]);var kR=ym('<div class="separator svelte-1eyo688"></div>'),PR=ym('<div class="row svelte-1eyo688"><div class="rowInner svelte-1eyo688"><div class="rowLabel svelte-1eyo688"></div> <!></div> <!></div>'),OR=ym('<div class="layoutMenu svelte-1eyo688"><!></div>');const RR={hash:"svelte-1eyo688",code:".layoutMenu.svelte-1eyo688 {display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;}.layoutMenu.svelte-1eyo688 .mdc-deprecated-list {margin:0;padding:0;list-style:none;}.row.svelte-1eyo688 {padding:0 12px;}.rowInner.svelte-1eyo688 {align-items:center;display:flex;padding-top:1px;}.rowLabel.svelte-1eyo688 {color:var(--cl-listItem-foreground);font-size:13px;width:18px;} .layoutMenu .layoutButton {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;display:flex;margin-right:10px;position:relative;padding:4px;border-radius:4px;color:var(--cl-listItem-foreground);}\n@media (hover: hover) and (pointer: fine) { .layoutMenu .layoutButton:not(.disabled):not(.selected):hover {background-color:var(--cl-listItem-hoverBackground);}\n} .layoutMenu .layoutButton.selected {background-color:var(--cl-listItem-selectedBackground);color:var(--cl-listItem-selectedForeground);} .layoutMenu .layoutButton.disabled {cursor:not-allowed;color:var(--cl-listItem-disabledForeground);} .layoutMenu .layoutButton svg {width:21px;height:19px;}.separator.svelte-1eyo688 {background-color:var(--cl-gutter-background);height:1px;margin:6px 0;}"};function LR(t,e){Yd(e,!0),Vm(t,RR);const[i,n]=yg(),s=()=>gg(a,"$layouts",i);let r=Sg(e,"open",15,!1);const o=$w(Go),a=$v($w(kg).store,(t=>{if(!t.layoutAccessType)return rt;let e=[];return Array.from(rt).forEach(((i,n)=>{if(!i)return;const s=i.filter((e=>"white"===t.layoutAccess[e.id]));s.length&&(e[n]=s)})),e})),l=$v(a,(t=>t.length-1)),c=Ag(o.store,(t=>t.layout));zk(t,{anchorCorner:"BOTTOM_LEFT",quickOpen:!0,class:"cl-dropdown",get open(){return r()},set open(t){r(t)},children:(t,e)=>{var n=OR();Sk(lp(n),{children:(t,e)=>{var n=xm();km(cp(n),1,s,Dm,((t,e,n)=>{var s=xm(),a=cp(s),h=t=>{var s=PR(),a=lp(s),h=lp(a);h.textContent=n,km(hp(h,2),17,(()=>If(e)),Dm,((t,e)=>{{let n=xp((()=>Wm("layoutButton",If(e).id===gg(c,"$currentLayout",i)&&"selected",If(e).disabled&&"disabled"))),s=xp((()=>Ut((()=>function(t){o.setLayout(t.id),r(!1)}(If(e))))));Ck(t,{get class(){return If(n)},get onpointerup(){return If(s)},tag:"button",children:(t,i)=>{VP(t,{get icon(){return If(e).icon}})},$$slots:{default:!0}})}}));var u=hp(a,2),d=t=>{Sm(t,kR())};Am(u,(t=>{n!==gg(l,"$lastLayoutPresetIndex",i)&&t(d)})),Sm(t,s)};Am(a,(t=>{If(e)&&t(h)})),Sm(t,s)})),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),Xd(),n()}var NR=ym("<div> </div>"),FR=ym('<button class="layout svelte-e0as8d"><span class="wrapper svelte-e0as8d"><!></span></button> <!>',1),BR=ym("<div><!> <!></div>");const zR={hash:"svelte-e0as8d",code:'.layout.svelte-e0as8d {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 5px;}\n@media (hover: hover) and (pointer: fine) {.layout.svelte-e0as8d:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.wrapper.svelte-e0as8d {width:28px;height:28px;display:flex;align-items:center;justify-content:center;}'};function VR(t,e){Yd(e,!0),Vm(t,zR);const[i,n]=yg(),{t:s}=OA(),r=$v($w(Go).store,(t=>st.value(t.layout).icon));let o=Gp(!1);var a=BR(),l=lp(a);PA(l,{children:(t,e)=>{var n=FR(),a=cp(n),l=xp((()=>Ut((()=>Yp(o,!0)))));a.__pointerup=function(...t){var e;null==(e=If(l))||e.apply(this,t)};var c=lp(a);VP(lp(c),{get icon(){return gg(r,"$currentLayoutIcon",i)}}),DA(hp(a,2),{children:(t,e)=>{var i=NR(),n=lp(i);$f((t=>Tm(n,t)),[()=>s("topToolbar.layout")]),Sm(t,i)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),jI(hp(l,2),{get waitFor(){return If(o)},children:(t,e)=>{LR(t,{get open(){return If(o)},set open(t){Yp(o,t,!0)}})},$$slots:{default:!0}}),Sm(t,a),Xd(),n()}pm(["pointerup"]);var $R=ym('<div class="separator svelte-16cftpq"><div class="inner svelte-16cftpq"></div></div>');const HR={hash:"svelte-16cftpq",code:".separator.svelte-16cftpq {height:100%;display:flex;flex-direction:column;}.inner.svelte-16cftpq {margin:8px 4px;width:1px;flex-grow:1;box-sizing:border-box;background-color:var(--cl-gutter-background);}"};function KR(t){Vm(t,HR),Sm(t,$R())}var WR=ym("<button><!></button>");const jR={hash:"svelte-25z81x",code:".button.svelte-25z81x {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;border-radius:8px;height:34px;padding:0 15px;display:flex;align-items:center;font-size:16px;}.secondary.svelte-25z81x {border:1px solid var(--cl-button-secondary-border);color:var(--cl-button-secondary-foreground);}\n@media (hover: hover) and (pointer: fine) {.secondary.svelte-25z81x:hover {color:var(--cl-button-secondary-hoverForeground);background-color:var(--cl-button-secondary-hoverBackground);}\n}.primary.svelte-25z81x {color:var(--cl-button-primary-foreground);background-color:var(--cl-button-primary-background);}"};function UR(t,e){Yd(e,!0),Vm(t,jR);const i=bg(e,["$$slots","$$events","$$legacy"]),{btnType:n,...s}=i;var r=WR();og(r,(t=>({class:t,...s})),[()=>Wm("button",n)],void 0,"svelte-25z81x"),Fm(lp(r),(()=>s.children??fd)),Sm(t,r),Xd()}var GR=ym('<div class="dialog-footer svelte-1a2g0d7"><!> <!></div>');const qR={hash:"svelte-1a2g0d7",code:".dialog-footer.svelte-1a2g0d7 {padding:16px 20px;border-top:1px solid var(--cl-gutter-background);display:flex;align-items:center;justify-content:flex-end;gap:10px;}"};function YR(t,e){Yd(e,!0),Vm(t,qR);var i=GR(),n=lp(i);{let t=xp((()=>Ut((()=>{var t;return null==(t=e.onCancel)?void 0:t.call(e)}))));UR(n,{btnType:"secondary",get onpointerup(){return If(t)},children:(t,i)=>{var n=wm();$f((()=>Tm(n,e.cancelButtonText))),Sm(t,n)},$$slots:{default:!0}})}var s=hp(n,2);{let t=xp((()=>Ut((()=>{var t;return null==(t=e.onConfirm)?void 0:t.call(e)}))));UR(s,{btnType:"primary",get onpointerup(){return If(t)},children:(t,i)=>{var n=wm();$f((()=>Tm(n,e.mainButtonText))),Sm(t,n)},$$slots:{default:!0}})}Sm(t,i),Xd()}var XR=ym("<div> </div>"),ZR=ym('<button aria-label="Settings" class="setting svelte-1x8jemh"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="currentColor" class="svelte-1x8jemh"><path fill-rule="evenodd" d="M18 14a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path fill-rule="evenodd" d="M8.5 5h11l5 9-5 9h-11l-5-9 5-9Zm-3.86 9L9.1 6h9.82l4.45 8-4.45 8H9.1l-4.45-8Z"></path></svg></button> <!>',1),QR=ym("<!> <!> <!>",1),JR=ym("<div><!> <!></div>");const tL={hash:"svelte-1x8jemh",code:'.setting.svelte-1x8jemh {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 5px;}\n@media (hover: hover) and (pointer: fine) {.setting.svelte-1x8jemh:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.setting.svelte-1x8jemh > svg:where(.svelte-1x8jemh) {width:28px;height:28px;color:var(--cl-foreground);}'};pm(["pointerup"]);var eL=ym('<button class="snapshot svelte-1cijlm1"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="svelte-1cijlm1"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.118 6a.5.5 0 0 0-.447.276L9.809 8H5.5A1.5 1.5 0 0 0 4 9.5v10A1.5 1.5 0 0 0 5.5 21h16a1.5 1.5 0 0 0 1.5-1.5v-10A1.5 1.5 0 0 0 21.5 8h-4.309l-.862-1.724A.5.5 0 0 0 15.882 6h-4.764zm-1.342-.17A1.5 1.5 0 0 1 11.118 5h4.764a1.5 1.5 0 0 1 1.342.83L17.809 7H21.5A2.5 2.5 0 0 1 24 9.5v10a2.5 2.5 0 0 1-2.5 2.5h-16A2.5 2.5 0 0 1 3 19.5v-10A2.5 2.5 0 0 1 5.5 7h3.691l.585-1.17z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 18a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm0 1a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"></path></svg></button> <!>',1),iL=ym('<span class="rowIcon svelte-1cijlm1"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M6.5 16v4.5a1 1 0 001 1h14a1 1 0 001-1V16M14.5 5V17m-4-3.5l4 4l4-4"></path></svg></span> <span class="rowLabel svelte-1cijlm1"> </span> <span class="keyBinding svelte-1cijlm1"> </span>',1),nL=ym('<span class="rowIcon svelte-1cijlm1"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M13.111 18.5H10.5a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1h-8.389z"></path><path d="M18.5 20v1.5a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-11a1 1 0 0 1 1-1H8"></path></g></svg></span> <span class="rowLabel svelte-1cijlm1"> </span> <span class="keyBinding svelte-1cijlm1"> </span>',1),sL=ym('<div class="title svelte-1cijlm1"> </div> <!> <!>',1),rL=ym('<div class="menu svelte-1cijlm1"><!></div>'),oL=ym("<div><!> <!></div>");const aL={hash:"svelte-1cijlm1",code:'.snapshot.svelte-1cijlm1 {outline:none;border:none;background:none;padding-block:initial;padding-inline:initial;font-family:inherit;color:inherit;height:100%;color:var(--cl-foreground);font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:center;cursor:default;position:relative;z-index:0;padding:0 5px;}\n@media (hover: hover) and (pointer: fine) {.snapshot.svelte-1cijlm1:hover:before {position:absolute;top:2px;right:2px;bottom:2px;left:2px;z-index:-1;border-radius:4px;content:"";background-color:var(--cl-button-hoverBackground);}\n}.snapshot.svelte-1cijlm1 > svg:where(.svelte-1cijlm1) {width:28px;height:28px;color:var(--cl-foreground);}.snapshot.svelte-1cijlm1 .cl-dropdown {padding:0;}.menu.svelte-1cijlm1 {display:flex;flex-direction:column;background:var(--cl-background);user-select:none;cursor:default;z-index:2;}.menu.svelte-1cijlm1 .mdc-deprecated-list {margin:0;padding:0;list-style:none;}.title.svelte-1cijlm1 {font-size:11px;letter-spacing:0.4px;line-height:16px;margin:6px 0;padding:0 12px;color:var(--cl-listTitle-foreground);}.menu.svelte-1cijlm1 .row {display:flex;flex-direction:row;align-items:center;justify-content:flex-start;padding:2px 10px 2px 8px;}\n@media (hover: hover) and (pointer: fine) {.menu.svelte-1cijlm1 .row:hover {background-color:var(--cl-listItem-hoverBackground);}\n}.rowIcon.svelte-1cijlm1 {width:28px;height:28px;margin-right:6px;color:var(--cl-foreground);}.rowLabel.svelte-1cijlm1 {font-size:14px;padding-right:12px;white-space:nowrap;user-select:none;cursor:default;flex:0 1 100%;color:var(--cl-foreground);}.keyBinding.svelte-1cijlm1 {font-size:12px;margin-left:20px;text-align:right;color:var(--cl-listKeybinding-foreground);justify-self:flex-end;}'};pm(["pointerup"]);var lL=ym("<!> <!>",1),cL=ym("<!> <!>",1),hL=ym("<!> <!>",1),uL=ym("<!> <!>",1),dL=ym('<!> <!> <!> <!> <div class="space svelte-3jg4ln"></div> <!> <!> <!> <!> <!>',1),pL=ym('<div class="top svelte-3jg4ln"><!></div>');const fL={hash:"svelte-3jg4ln",code:".top.svelte-3jg4ln {display:flex;flex-direction:row;align-items:stretch;height:38px;width:100%;box-sizing:border-box;background-color:var(--cl-background);padding-right:5px;margin-bottom:4px;}.top.svelte-3jg4ln [data-dropdown-menu-trigger] {height:100%;}.top.svelte-3jg4ln [data-tooltip-trigger] {height:100%;}.space.svelte-3jg4ln {margin-left:auto;}"};function mL(t,e){Yd(e,!1),Vm(t,fL);const[i,n]=yg(),s=()=>gg(l,"$leftButtons",i),r=()=>gg(c,"$rightButtons",i),o=$w(Eb),a=$w(kg),l=Ag(o.store,(t=>t.leftButtons)),c=Ag(o.store,(t=>t.rightButtons));Tg((()=>{o.setHeaderReady()})),dg();var h=pL();jI(lp(h),{idle:!0,children:(t,e)=>{var i=dL(),n=cp(i),o=t=>{jI(t,{idle:!0,children:(t,e)=>{DR(t,{})},$$slots:{default:!0}})};Am(n,(t=>{a.featureEnabled("header_resolutions")&&t(o)}));var l=hp(n,2),c=t=>{jI(t,{idle:!0,children:(t,e)=>{qP(t,{})},$$slots:{default:!0}})};Am(l,(t=>{a.featureEnabled("header_chart_type")&&t(c)}));var h=hp(l,2),u=t=>{jI(t,{idle:!0,children:(t,e)=>{var i=lL(),n=cp(i);KR(n),function(t,e){Yd(e,!0),Vm(t,xR);const{t:i}=OA(),n=$w(na),s=Et.Slash;let r=Gp(!1);function o(){Yp(r,!0)}mD(n.registerCommandAndKeybindingRule({id:"ui.indicator.showDialog",primary:Et.Slash,weight:sa.ChartCore,handler:()=>{o()}}));var a=wR(),l=lp(a);PA(l,{children:(t,e)=>{var n=bR(),r=cp(n),a=xp((()=>Ut(o)));r.__pointerup=function(...t){var e;null==(e=If(a))||e.apply(this,t)};var l=hp(lp(r),2),c=lp(l);DA(hp(r,2),{children:(t,e)=>{{let e=xp((()=>i("topToolbar.indicator.tip")));rO(t,{get content(){return If(e)},get keybinding(){return s}})}},$$slots:{default:!0}}),$f((t=>Tm(c,t)),[()=>i("topToolbar.indicator")]),Sm(t,n)},$$slots:{default:!0}}),jI(hp(l,2),{get waitFor(){return If(r)},children:(t,e)=>{_R(t,{get open(){return If(r)},set open(t){Yp(r,t,!0)}})},$$slots:{default:!0}}),Sm(t,a),Xd()}(hp(n,2),{}),Sm(t,i)},$$slots:{default:!0}})};Am(h,(t=>{a.featureEnabled("header_indicators")&&t(u)}));var d=hp(h,2);jI(d,{idle:!0,children:(t,e)=>{var i=xm();km(cp(i),1,s,(t=>t.id),((t,e)=>{var i=cL(),n=cp(i);KR(n),tO(hp(n,2),xg((()=>If(e)))),Sm(t,i)})),Sm(t,i)},$$slots:{default:!0}});var p=hp(d,4),f=t=>{jI(t,{idle:!0,children:(t,e)=>{var i=hL(),n=cp(i);VR(n,{}),KR(hp(n,2)),Sm(t,i)},$$slots:{default:!0}})};Am(p,(t=>{a.featureEnabled("header_layouttoggle")&&t(f)}));var m=hp(p,2),g=t=>{jI(t,{idle:!0,children:(t,e)=>{!function(t,e){Yd(e,!0),Vm(t,tL);const{t:i}=OA();let n=Gp(!1);function s(){Yp(n,!0)}function r(){Yp(n,!1)}var o=JR(),a=lp(o);PA(a,{children:(t,e)=>{var n=ZR(),r=cp(n),o=xp((()=>Ut(s)));r.__pointerup=function(...t){var e;null==(e=If(o))||e.apply(this,t)},DA(hp(r,2),{children:(t,e)=>{var n=XR(),s=lp(n);$f((t=>Tm(s,t)),[()=>i("topToolbar.setting")]),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),jI(hp(a,2),{low:!0,children:(t,e)=>{VO(t,{get open(){return If(n)},set open(t){Yp(n,t,!0)},children:(t,e)=>{var n=QR(),s=cp(n);{let t=xp((()=>i("setting.title")));fR(s,{get title(){return If(t)}})}var o=hp(s,2);$O(o,{children:(t,e)=>{Sm(t,wm("empty"))},$$slots:{default:!0}});var a=hp(o,2);{let t=xp((()=>i("common.ok"))),e=xp((()=>i("common.cancel")));YR(a,{get mainButtonText(){return If(t)},get cancelButtonText(){return If(e)},onConfirm:r,onCancel:r})}Sm(t,n)},$$slots:{default:!0}})},$$slots:{default:!0}}),Sm(t,o),Xd()}(t,{})},$$slots:{default:!0}})};Am(m,(t=>{a.featureEnabled("header_settings")&&t(g)}));var v=hp(m,2),y=t=>{jI(t,{idle:!0,children:(t,e)=>{!function(t,e){Yd(e,!1),Vm(t,lO);const{t:i}=OA(),n=Et.KeyF|At.Shift,s=$w(Go),r=$w(na),o=()=>{const t=s.getDomElement();t&&(t.requestFullscreen??t.webkitRequestFullscreen??t.mozRequestFullScreen??t.msRequestFullscreen).call(t)};mD(r.registerCommandAndKeybindingRule({id:"ui.fullscreen",primary:n,weight:sa.WorkbenchContrib,handler:()=>{o()}})),dg();var a=aO();PA(lp(a),{children:(t,e)=>{var s=oO(),r=cp(s),a=xp((()=>Ut(o)));r.__pointerup=function(...t){var e;null==(e=If(a))||e.apply(this,t)},DA(hp(r,2),{children:(t,e)=>{{let e=Sp((()=>i("topToolbar.fullscreen")));rO(t,{get content(){return If(e)},get keybinding(){return n}})}},$$slots:{default:!0}}),Sm(t,s)},$$slots:{default:!0}}),Sm(t,a),Xd()}(t,{})},$$slots:{default:!0}})};Am(v,(t=>{a.featureEnabled("header_fullscreen_button")&&t(y)}));var _=hp(v,2),b=t=>{jI(t,{idle:!0,children:(t,e)=>{!function(t,e){Yd(e,!1),Vm(t,aL);const{t:i}=OA(),n=$w(Go),s=$w(Ib),r=$w(EM),o=$w(na),a=()=>{If(d).setOpen(!0)},l=Et.KeyS|At.Alt|At.CtrlCmd,c=async()=>{const t=n.getDomElement();if(!t)return;const{domToPng:e}=await A((async()=>{const{domToPng:t}=await import("./index-BLciXWQl.js");return{domToPng:t}}),[],import.meta.url);e(t).then((t=>{const e=document.createElement("a");e.download="screenshot.png",e.href=t,e.click()}))};mD(o.registerCommandAndKeybindingRule({id:"snapshot.download",primary:l,weight:sa.ChartContrib,handler(){c()}}));const h=Et.KeyS|At.Shift|At.CtrlCmd,u=async()=>{const t=n.getDomElement();if(!t)return;const{domToBlob:e}=await A((async()=>{const{domToBlob:t}=await import("./index-BLciXWQl.js");return{domToBlob:t}}),[],import.meta.url);e(t).then((t=>{const e=new File([t],"screenshot.png",{type:"image/png",lastModified:Date.now()});s.writeClipboard({files:[e]}),r.verbose(i("topToolbar.snapshot.copyImage.success"))}))};mD(o.registerCommandAndKeybindingRule({id:"snapshot.copy",primary:h,weight:sa.ChartContrib,handler(){u()}}));let d=qp();Cg((()=>{Yp(d,null)})),dg();var p=oL(),f=lp(p);PA(f,{children:(t,e)=>{var n=eL(),s=cp(n),r=xp((()=>Ut(a)));s.__pointerup=function(...t){var e;null==(e=If(r))||e.apply(this,t)},DA(hp(s,2),{children:(t,e)=>{{let e=Sp((()=>i("topToolbar.snapshot")));rO(t,{get content(){return If(e)}})}},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0}}),jI(hp(f,2),{low:!0,children:(t,e)=>{ug(zk(t,{anchorCorner:"BOTTOM_LEFT",quickOpen:!0,class:"cl-dropdown",children:(t,e)=>{var n=rL();Sk(lp(n),{children:(t,e)=>{var n=sL(),s=cp(n),r=lp(s),o=hp(s,2);{let t=Sp((()=>Ut(c)));Ck(o,{tag:"div",class:"row",get onpointerup(){return If(t)},children:(t,e)=>{var n=iL(),s=hp(cp(n),2),r=lp(s),o=lp(hp(s,2));$f(((t,e)=>{Tm(r,t),Tm(o,e)}),[()=>i("topToolbar.snapshot.downloadImage"),()=>vM(l)]),Sm(t,n)},$$slots:{default:!0}})}var a=hp(o,2);{let t=Sp((()=>Ut(u)));Ck(a,{tag:"div",class:"row",get onpointerup(){return If(t)},children:(t,e)=>{var n=nL(),s=hp(cp(n),2),r=lp(s),o=lp(hp(s,2));$f(((t,e)=>{Tm(r,t),Tm(o,e)}),[()=>i("topToolbar.snapshot.copyImage"),()=>vM(h)]),Sm(t,n)},$$slots:{default:!0}})}$f((t=>Tm(r,t)),[()=>i("topToolbar.snapshot.menu.title")]),Sm(t,n)},$$slots:{default:!0}}),Sm(t,n)},$$slots:{default:!0},$$legacy:!0}),(t=>Yp(d,t)),(()=>If(d)))},$$slots:{default:!0}}),Sm(t,p),Xd()}(t,{})},$$slots:{default:!0}})};Am(_,(t=>{a.featureEnabled("header_screenshot")&&t(b)})),jI(hp(_,2),{idle:!0,children:(t,e)=>{var i=xm();km(cp(i),1,r,(t=>t.id),((t,e)=>{var i=uL(),n=cp(i);KR(n),tO(hp(n,2),xg((()=>If(e)))),Sm(t,i)})),Sm(t,i)},$$slots:{default:!0}}),Sm(t,i)},$$slots:{default:!0}}),Sm(t,h),Xd(),n()}var gL=ym('<div class="top svelte-12x4dtb"></div>'),vL=ym('<div class="left svelte-12x4dtb"></div>'),yL=ym('<div class="chartles"><!> <div class="contentWrap svelte-12x4dtb"><!> <div class="centerWrap svelte-12x4dtb"><!></div></div> <!></div>');const _L={hash:"svelte-12x4dtb",code:' .chartles {height:100%;width:100%;position:relative;display:flex;flex-direction:column;color:var(--cl-foreground);background-color:var(--cl-global-background);user-select:none;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;font-variation-settings:normal;font-feature-settings:"tnum" on, "lnum" on, "rlig" 1, "calt" 1;font-family:var(--cl-font-family);} .chartles * {overscroll-behavior:contain;}.contentWrap.svelte-12x4dtb {width:100%;height:calc(100% - 38px);display:flex;flex-direction:row;}.centerWrap.svelte-12x4dtb {display:flex;flex-direction:column;flex-grow:1;}.top.svelte-12x4dtb {height:38px;width:100%;box-sizing:border-box;background-color:var(--cl-background);padding-right:5px;margin-bottom:4px;}.left.svelte-12x4dtb {width:52px;height:100%;background-color:var(--cl-background);border-top-right-radius:4px;margin-right:4px;box-sizing:border-box;}'};function bL(t,e){Yd(e,!1),Vm(t,_L);const[i,n]=yg(),s=Ag($w(kg).store,(t=>t.chartFeatures)),r=WI(A((()=>import("./Left-C5irHVyC.js")),__vite__mapDeps([0,1,2]),import.meta.url).then((t=>t.default)),ye.unstable_IdlePriority),o=WI(gP),a=WI(BP,ye.unstable_IdlePriority),l=WI(mL,ye.unstable_IdlePriority);dg();var c=yL(),h=lp(c);Em(h,(()=>l),(t=>{Sm(t,gL())}),((t,e)=>{If(e)(t,{})}));var u=hp(h,2),d=lp(u),p=t=>{var e=xm();Em(cp(e),(()=>r),(t=>{Sm(t,vL())}),((t,e)=>{If(e)(t,{})})),Sm(t,e)};Am(d,(t=>{gg(s,"$features",i).left_toolbar&&t(p)})),Em(lp(hp(d,2)),(()=>o),null,((t,e)=>{If(e)(t,{})})),Em(hp(u,2),(()=>a),null,((t,e)=>{If(e)(t,{})})),Sm(t,c),Xd(),n()}const wL='.chartles .mdc-dialog__scrim{background-color:unset}.chartles .mdc-dialog__surface{border:none;border-radius:6px;background:var(--cl-dialog-background);box-shadow:var(--cl-dialog-shadow) 0 2px 4px 0}.chartles :focus-visible{outline:none}.chartles .cl-dropdown{border-radius:6px;box-shadow:var(--cl-dialog-shadow) 0 2px 4px 0;padding:10px 0;background-color:var(--cl-background)}.cl-tooltip{-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;font-variation-settings:normal;font-feature-settings:"tnum" on,"lnum" on,"rlig" 1,"calt" 1;font-family:var(--cl-font-family)}.cl-tooltip>.mdc-tooltip__surface{max-width:unset;background-color:var(--cl-tooltip-background)}';var xL=Object.getOwnPropertyDescriptor,SL=(t,e)=>(i,n)=>e(i,n,t);let TL=class extends he{constructor(t,e,i,n,s){super(),x(this,"_app",null),x(this,"whenRestoredPromise",new xt),x(this,"whenRestored",this.whenRestoredPromise.p),this._container=t,this.configurationService=e,this.chartManagementService=i,this.instantiationService=n,this.i18nService=s}dispose(){super.dispose(),this.whenRestoredPromise=null,this.whenRestored=null}startup(){const t=new Map;t.set(kg,this.configurationService),t.set(Ko,this.instantiationService),t.set(V_,this.i18nService),this._register(le((()=>{t.clear()})));const e=[];e.push(this.chartManagementService.whenRestored),this._app=Cm(bL,{target:this._container,context:t}),[zI,wL].forEach((t=>{const e=document.createElement("style");e.append(document.createTextNode(t)),this._container.append(e)})),Ct.settled(e).finally((()=>{this.whenRestoredPromise.complete()}))}async teardown(){this._app&&(!function(t){const e=new WeakSet;function i(t){if(t&&"object"==typeof t&&!e.has(t)){e.add(t);try{Object.keys(t).forEach((e=>{"__cleanup"===e&&Reflect.get(t,e).forEach((t=>{t()}));try{Reflect.deleteProperty(t,e)}catch{}}))}catch{}t.childNodes&&t.childNodes.length>0&&t.childNodes.forEach((t=>i(t)))}}i(t)}(ee(this._container.firstElementChild)),await function(t,e){const i=Im.get(t);return i?(Im.delete(t),i(e)):Promise.resolve()}(this._app),fm=null,this._app=null),this.dispose()}};TL=((t,e,i,n)=>{for(var s,r=n>1?void 0:n?xL(e,i):e,o=t.length-1;o>=0;o--)(s=t[o])&&(r=s(r)||r);return r})([SL(1,kg),SL(2,Go),SL(3,Ko),SL(4,V_)],TL);const CL=class extends he{constructor(t){var e,i,n;super(),x(this,"workbench"),x(this,"instantiationService"),x(this,"guiService"),x(this,"lifecycleService"),x(this,"datafeedService"),x(this,"configurationService"),x(this,"startupTask",null),x(this,"host"),x(this,"tradeApi",null);const s=L(t.container)?document.querySelector(t.container):t.container;ie(s);const r=document.createElement("div");Object.assign(r.style,{width:"100%",height:"100%"}),r.tabIndex=-1,s.append(r),this.host=r;const o=r.attachShadow({mode:"open"});this.guiService=this._register(new HC(o)),this.lifecycleService=this._register(new MM),this.lifecycleService.phase=CM.Ready,this.datafeedService=this._register(new $C(t.datafeed)),this.configurationService=this._register(new IC(t));const a=new z_;a.set(TM,this.lifecycleService),a.set(Eb,this.guiService),a.set(Ng,this.datafeedService),a.set(FM,new qC(BM,[null==(e=t.savedData)?void 0:e.stores])),a.set(kg,this.configurationService),a.set(W_,new qC(pI,[o,{"font-family":t.customFontFamily??lI,"--cl-font-family":t.customFontFamily??lI}])),a.set(Ib,new qC(wC,[r,o])),a.set(I_,new qC(NC)),a.set(Go,new qC(gC,[(null==(i=t.savedData)?void 0:i.charts.layout)??t.layout??"s",null==(n=t.savedData)?void 0:n.charts])),a.set($_,new qC(oI)),a.set(rM,new qC(IM,[new aM])),a.set(Jo,new qC(CC)),a.set(V_,new qC(sM,[t.locale])),a.set(Ab,new qC(SI)),a.set(MI,new qC(DI,[t.brokerFactory,t.brokerConfig])),a.set(WC,new qC(SM,[r,o])),a.set(EM,new qC(NM)),a.set(Sa,new qC(NI)),a.set(FI,new qC(BI)),a.set(Aa,new qC(ka));const l=new Rx;a.set(Ox,l),a.set(ta,new qC(ea)),a.set(na,new qC(oa)),a.set(Db,new qC(bI));const c=new QC(a,!0);a.set(Ko,c),a.set(KC,c.createInstance(GC)),this.instantiationService=this._register(c),this.workbench=this._register(c.createInstance(TL,o)),this.startupTask=ye.unstable_scheduleCallback(ye.unstable_NormalPriority,(()=>{this.workbench.startup(),this.startupTask=null})),this.workbench.whenRestored.then((()=>{this.lifecycleService.phase=CM.Restored}));this._register(new Tt((()=>{this._register(te((()=>this.lifecycleService.phase=CM.Eventually),1e3))}),1e3)).schedule(),this._register(this.datafeedService.onReady((t=>{Array.isArray(t.supported_resolutions)&&t.supported_resolutions.forEach((t=>{l.registerResolution(t)}))}))),this.registerConributions()}registerConributions(){this.instantiationService.invokeFunction((t=>{const e=t.get(FI);e.register("keybinding.priceScale",(()=>Promise.resolve(fa)),CM.Restored),e.register("keybinding.study",(()=>Promise.resolve(va)),CM.Restored),e.register("keybinding.timeScale",(()=>Promise.resolve(xa)),CM.Restored),e.register("keybinding.undoRedo",(()=>Promise.resolve(Ia)),CM.Restored),e.register("drawing",(()=>Promise.resolve(A((()=>import("./index-CC9hyIS3.js")),__vite__mapDeps([3,4,2,1,5]),import.meta.url).then((t=>t.DrawingContrib)))),CM.Restored),e.start(t);const i=t.get(Aa);t.get(MI).isTradeEnabled()&&i.register("tradeLine",(()=>Promise.resolve(A((()=>import("./index-7EbfpDoB.js")),__vite__mapDeps([6,4,2,7,5,8,9,10,11]),import.meta.url).then((t=>t.TradeLineContrib)))),Da.Eager),i.register("scrollToRealTime",(()=>Promise.resolve(A((()=>import("./index-B5Dyp5jO.js")),[],import.meta.url).then((t=>t.ScrollToRealTimeContrib)))),Da.Eventually)}))}async remove(){this.startupTask&&ye.unstable_cancelCallback(this.startupTask),await this.workbench.teardown(),this.host.remove(),this.dispose()}headerReady(){return this.guiService.headerReady()}onChartReady(t){this.instantiationService.invokeFunction((async e=>{e.get(Go).whenRestored.then(t)}))}createButton(t){return this.guiService.createButton(t)}applyOverrides(t){this.configurationService.applyOverrides(t)}applyStudiesOverrides(t){this.configurationService.applyStudiesOverrides(t)}getTheme(){return this.instantiationService.invokeFunction((t=>t.get(W_).getColorTheme().type))}async changeTheme(t){return this.instantiationService.invokeFunction((e=>e.get(W_).setTheme(t)))}defineTheme(t,e){return this.instantiationService.invokeFunction((i=>i.get(W_).defineTheme(t,e)))}activeChart(){return this.instantiationService.invokeFunction((t=>t.get(Go).activeChart()))}resetCache(){}save(t){return this.instantiationService.invokeFunction((t=>{const e=t.get(FM),i=t.get(kg),n=t.get(Go);return{id:de(),createdAt:(new Date).getTime(),stores:e.save(),configs:i.save(),charts:n.save()}}))}getTradeApi(){return this.tradeApi||this._register(this.tradeApi=this.instantiationService.createInstance(AI)),this.tradeApi}getChartApi(){return this.instantiationService.invokeFunction((t=>t.get(Go)))}},ML=6e4,IL="https://api.itick.org";class EL{constructor(t){x(this,"token"),x(this,"resolutionsMap",{1:ML,2:3e5,3:6e5,4:18e5,5:36e5,6:72e5,7:144e5,8:864e5,9:6048e5,10:2592e6}),this.token=t}getKline(t){return new Promise(((e,i)=>{const{symbolType:n,region:s,symbol:r,resolution:o,et:a,limit:l}=t;fetch(`${IL}/${n}/kline?region=${s}&code=${r}&kType=${o}&et=${a}&limit=${l}`,{headers:{token:this.token}}).then((t=>t.json())).then((t=>{const{code:i,data:n}=t,s=[],r={noData:0!==i};for(const{t:e,c:o,o:a,h:l,l:c,v:h}of n)s.push({time:e,close:o,open:a,high:l,low:c,volume:h});e({bars:s,meta:r})})).catch((t=>i(t)))}))}getSymbolList(t){let e=`${IL}/symbol/list?`;for(const i in t)e+=`${i}=${t[i]}&`;return e=e.slice(0,-1),new Promise(((t,i)=>{fetch(e,{headers:{token:this.token}}).then((t=>t.json())).then((e=>{const{code:n,data:s}=e;200===n?t(s):i("查询失败")}))}))}getSymbolInfo(t){const[e,i]=t.split(":");return new Promise(((t,n)=>{fetch(`${IL}/symbol/info?code=${i}&exchange=${"BINANCE"===e?"Binance":e}`,{headers:{token:this.token}}).then((t=>t.json())).then((e=>{const{code:i,msg:s,data:r}=e;200===i||"ok"===s?t(r):n("查询失败")}))}))}}const AL={crypto:"cws",stock:"sws",forex:"fws",indices:"iws"},DL=class t{constructor(t){x(this,"token",""),x(this,"resolution","1"),x(this,"socket",null),x(this,"type",""),x(this,"symbol",""),x(this,"region",""),x(this,"reconnectMaxTimes",10),x(this,"reconnectInterval",5e3),x(this,"heartbeatInterval",3e4),x(this,"reconnectTimes",0),x(this,"heartbeatTimer",null),x(this,"onmessage",null),x(this,"dataMap",new Map),x(this,"lastBar",null),this.token=t}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}connect(t,e,i,n,s){this.resolution=n,this.region=i,this.lastBar=s,this.dataMap.clear();["1","5","10","30"].includes(n)?this.symbol===e&&this.socket&&this.socket.readyState===WebSocket.OPEN||(this.socket&&this.socket.readyState===WebSocket.OPEN&&this.close(),this.socket=new WebSocket(`wss://api.itick.org/${AL[t]}`),this.symbol=e,this.type=t,this.reconnectTimes=0,this.socket.onopen=()=>{console.log("WebSocket 连接成功",e),this.send({ac:"auth",params:this.token}),this.startHeartbeat()},this.socket.onmessage=t=>{try{const e=JSON.parse(t.data);this.handleMessage(e)}catch(e){console.log("消息解析错误:",e)}},this.socket.onclose=t=>{1e3!==t.code&&(console.log("WebSocket 连接异常关闭 将尝试重新连接:",t.code),this.reconnect())},this.socket.onerror=t=>{console.error("WebSocket 连接发生错误:",t)}):this.socket&&this.socket.readyState===WebSocket.OPEN&&this.close()}startHeartbeat(){this.heartbeatTimer=setInterval((()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&this.send({ac:"ping",params:Date.now()})}),this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}reconnect(){if(this.stopHeartbeat(),this.reconnectTimes++,this.reconnectTimes>this.reconnectMaxTimes)return;const t=setTimeout((()=>{console.log("重新连接中..."),this.connect(this.type,this.symbol,this.region,this.resolution,this.lastBar),clearTimeout(t)}),this.reconnectInterval)}handleSymbolName(){return this.symbol}getPreviousNearestFiveOrTenMinutesTimestamp(t,e){const i=new Date(t);if("1"===e)return i.setSeconds(0,0),i.getTime();const n=i.getMinutes(),s=parseInt(e),r=Math.floor(n/s)*s,o=new Date(i);return o.setMinutes(r),o.setSeconds(0),o.setMilliseconds(0),o.getTime()}handleMessage(t){var e,i;const{code:n,data:s,resAc:r}=t;if(1!==n||"auth"!==r){if(1===n&&s){const{t:t,ld:n,v:r}=s,o=this.getPreviousNearestFiveOrTenMinutesTimestamp(t,this.resolution),a=this.dataMap.get(o)||((null==(e=this.lastBar)?void 0:e.time)===o?this.lastBar:void 0);a?this.dataMap.set(o,{time:o,close:n,open:a.open,high:n>a.high?n:a.high,low:n<a.low?n:a.low,volume:r+a.volume}):(this.dataMap.clear(),this.dataMap.set(o,{time:o,close:n,open:n,high:n,low:n,volume:r})),null==(i=this.onmessage)||i.call(this,this.dataMap.get(o))}}else this.send({ac:"subscribe",params:this.handleSymbolName(),types:"tick"})}send(t){var e;this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify(t)):console.log("WebSocket 未连接成功， 状态码:",null==(e=this.socket)?void 0:e.readyState)}onMessage(t){this.onmessage=t}close(){this.socket&&(this.socket.close(),this.stopHeartbeat())}};x(DL,"instance",null);let kL=DL;let PL=null;const OL=document.createElement("div");document.body.appendChild(OL);const RL={container:OL,interval:"5",symbol:"BINANCE:BTCUSDT",datafeed:new class{constructor(t){x(this,"token",""),x(this,"symbolInfo",{}),x(this,"configuration"),x(this,"request"),x(this,"lastBar"),x(this,"subscription",new Map),this.token=t,this.request=new EL(t),this.configuration=this.defaultConfiguration()}onReady(t){setTimeout((()=>{t(this.configuration)}),0)}async searchSymbols(t,e,i,n){const[s,r]=i.split("_"),o={...t?{code:t}:{},...s?{type:s}:{},...r?{region:r}:{}},a=(await this.request.getSymbolList(o)).slice(0,50),l=[];for(const c of a)l.push({symbol:c.c,exchange:c.e,description:c.n,type:c.t,ticker:`${c.e}:${c.c}`});n(l)}async resolveSymbol(t,e,i,n){const[s]=t.split(":");if(this.symbolInfo[t]){const i=setTimeout((()=>{e(this.symbolInfo[t]),clearTimeout(i)}),0);return}const r=await this.request.getSymbolInfo(t);if(null==n?void 0:n.isCancellationRequested)return;if(!r)return void i("查找不到产品");const o={name:r.n,region:r.r,timezone:r.tz,exchange:r.e,type:r.t,subsessions:r.sb,session:r.sb.find((t=>t.id===r.si)).session,minmov:r.m,subsession_id:r.si,description:r.b??r.d,format:"price",visible_plots_set:"ohlcv",variable_tick_size:"",listed_exchange:s,pricescale:100,full_name:t,pro_name:t,base_name:[t],ticker:t,supported_resolutions:this.configuration.supported_resolutions,has_daily:!0,has_intraday:!0,daily_multipliers:["1"],has_weekly_and_monthly:!0,weekly_multipliers:["1"],monthly_multipliers:["1","12"],intraday_multipliers:["1","5","10","30","60"],data_status:"streaming"};this.symbolInfo[t]=o,e(o)}async getBars(t,e,i,n,s){const{name:r,type:o,region:a}=t,{countBack:l,firstDataRequest:c,to:h}=i;try{const t={symbolType:o,region:this.getSymbolRegion(o,a),symbol:r,et:1e3*h,limit:l,resolution:this.getResolution(e)},i=await this.request.getKline(t);if(null==s?void 0:s.isCancellationRequested)return;c&&(this.lastBar=i.bars[i.bars.length-1]),n(i.bars,i.meta)}catch(u){if(console.error(u),null==s?void 0:s.isCancellationRequested)return;n([],{noData:!0})}}getSymbolRegion(t,e){return"crypto"===t?"BA":"stock"===t?e||"":"gb"}getResolution(t){return{1:1,5:2,10:3,30:4,60:5,120:6,240:7,"1D":8,"1W":9,"1M":10}[t]}unsubscribeBars(t){const e=this.subscription.get(t);e&&(e.onMessage((()=>{})),this.subscription.delete(t))}subscribeBars(t,e,i,n){const{region:s,type:r,name:o}=t,a=kL.getInstance(this.token);a.connect(r,o,s,e,this.lastBar),a.onMessage((t=>{})),this.subscription.set(n,a)}defaultConfiguration(){return{supported_resolutions:["1","5","10","30","60","1D","1W","1M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1,symbols_types:[{name:"全部",value:""},{name:"加密货币",value:"crypto"},{name:"SH股",value:"stock_sh"},{name:"SZ股",value:"stock_sz"},{name:"港股",value:"stock_hk"},{name:"SG股",value:"stock_sg"},{name:"美股",value:"stock_us"},{name:"日股",value:"stock_jp"},{name:"外汇",value:"forex"},{name:"指数",value:"indices"}]}}}("a5ca43babf5e49c4b734bdcb6f51a4a4465d52bd3fbe48e1847ac9259ae290c8"),locale:"en-US",theme:"light",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},LL=()=>{PL=new CL(RL),Reflect.set(window,"ww",PL),PL.onChartReady((()=>{PL.activeChart().createStudy("Bollinger Bands"),PL.activeChart().createStudy("Moving Average Convergence Divergence"),PL.activeChart().createStudy("Stochastic RSI")}))};Reflect.set(window,"start",LL),LL();export{Sm as $,zS as A,Hx as B,uw as C,pw as D,Ea as E,fw as F,Og as G,qS as H,gw as I,ab as J,sa as K,Bx as L,pb as M,Z_ as N,G as O,kw as P,Vm as Q,hw as R,OA as S,kb as T,$w as U,Jd as V,ym as W,ug as X,zk as Y,$f as Z,A as _,N as a,Wu as a$,Xd as a0,Yd as a1,aI as a2,Mf as a3,lp as a4,Zm as a5,MI as a6,Sk as a7,cp as a8,Am as a9,R_ as aA,yb as aB,Qu as aC,lw as aD,W_ as aE,VS as aF,_w as aG,bw as aH,Sw as aI,vw as aJ,yw as aK,ww as aL,xw as aM,Tw as aN,Cw as aO,Mw as aP,Iw as aQ,Ew as aR,Aw as aS,Dw as aT,de as aU,Pb as aV,uT as aW,Ii as aX,kS as aY,zx as aZ,oS as a_,hp as aa,Ck as ab,Tm as ac,If as ad,xp as ae,Ut as af,rl as ag,jo as ah,Uo as ai,V_ as aj,kg as ak,GT as al,mD as am,PA as an,$m as ao,DA as ap,rO as aq,jm as ar,Wm as as,Ym as at,pm as au,UT as av,Gu as aw,Yu as ax,fb as ay,z as az,Go as b,bb as b$,q as b0,L as b1,P as b2,lt as b3,Nf as b4,Eb as b5,qw as b6,VP as b7,Yp as b8,Gp as b9,fR as bA,$O as bB,YR as bC,Kx as bD,xt as bE,BS as bF,sw as bG,Vx as bH,DS as bI,SS as bJ,vb as bK,jx as bL,eb as bM,pS as bN,cS as bO,mS as bP,gS as bQ,yS as bR,nb as bS,AS as bT,sb as bU,US as bV,xl as bW,Vv as bX,Tg as bY,bg as bZ,Wt as b_,jI as ba,eE as bb,xm as bc,Fm as bd,$I as be,rg as bf,km as bg,Dm as bh,Nm as bi,Ag as bj,yg as bk,gg as bl,dg as bm,Pg as bn,Sp as bo,FM as bp,vM as bq,xg as br,qo as bs,Yo as bt,Xo as bu,Eg as bv,HI as bw,Cg as bx,dm as by,VO as bz,nu as c,qa as c0,Ga as c1,Uu as c2,tb as c3,Q_ as c4,Lu as c5,aS as c6,xS as c7,Ux as c8,wS as c9,Te as ca,LS as cb,hS as cc,_S as cd,bS as ce,FS as cf,ES as cg,Wb as ch,NS as ci,J_ as cj,Bn as ck,IS as cl,ob as cm,nS as cn,Mo as co,ri as cp,Io as cq,Xi as cr,xb as cs,PS as ct,OS as cu,zv as cv,lb as cw,he as d,ee as e,Et as f,Dg as g,At as h,_b as i,dw as j,mw as k,Ko as l,Ab as m,Ib as n,na as o,Jo as p,Db as q,lI as r,ie as s,Xc as t,rb as u,rS as v,lS as w,RS as x,mb as y,db as z};
